import{Q as g}from"./QSelect.c275295e.js";import{b as p}from"./QList.b9334b06.js";import{u as S,r as n,l as N,o as c,d as A,w as f,e as o,g as v,a3 as x,a2 as y,f as Q,Q as D,h as L}from"./index.722c96ba.js";import{Q as M}from"./QCardSection.2772bee0.js";import{Q as P}from"./QCard.3248d843.js";import{Q as U}from"./QTable.f0e964fd.js";import{Q as E}from"./QPage.c4c89dc0.js";import{l as F}from"./locationsApi.8397f927.js";import{u as I}from"./use-quasar.70cae317.js";import{l as O}from"./labels.014ec1bc.js";import"./use-key-composition.4dbf594e.js";import"./format.8ac60962.js";import"./QLinearProgress.9441f2d2.js";import"./QCheckbox.ddce8d62.js";import"./use-checkbox.eaa0af27.js";import"./axios.511d92c0.js";import"./jspdf.plugin.autotable.8b63eb13.js";import"./_commonjsHelpers.88e99c8f.js";import"./dayjs.min.cbcf888d.js";import"./browser.c61f550a.js";const T={key:0,class:"row"},$={class:"row"},q={class:"text-right row"},de={__name:"locations",setup(z){const d=S(),h=I(),u=n([]),r=n(null),i=n([]),t=n([]),_=n(0),V=n({columns:[{name:"id",label:"ID",field:l=>l.id,align:"center"},{name:"name",label:"NOMBRE",field:l=>l.name,align:"left"},{name:"alias",label:"ALIAS",field:l=>l.alias,align:"left"},{name:"path",label:"PATH",field:l=>l.path,align:"left"}]}),k=async()=>{h.loading.show({message:"Obteniendo Secciones"});let l={_workpoint:d.session.store.id_viz,_rol:d.session.credentials._rol};const e=await F.index(l);e.fail?console.log(e):(console.log(e),u.value=e),h.loading.hide()},w=()=>{const l=r.value.sections||[];_.value=Math.max(...l.map(e=>e.deep)),t.value=[{options:l.filter(e=>e.root===0),selected:null}],i.value=t.value[0].options},b=l=>{var e;return((e=r.value.sections)==null?void 0:e.filter(a=>a.root===l))||[]},B=(l,e)=>{t.value.splice(e+1);const a=b(l);a.length>0&&t.value.push({options:a,selected:null})},C=()=>{O.locationsWarehouse(i.value,d.session.credentials.nick)};return k(),N(t,l=>{const e=l.filter(a=>a.selected!==null);if(e.length){const a=e[e.length-1],s=b(a.selected);i.value=s}},{deep:!0}),(l,e)=>(c(),A(E,{padding:""},{default:f(()=>[o(P,{class:"my-card"},{default:f(()=>[o(M,null,{default:f(()=>[u.value.length>0?(c(),v("div",T,[o(g,{class:"col",modelValue:r.value,"onUpdate:modelValue":[e[0]||(e[0]=a=>r.value=a),w],options:u.value,label:"ALMAC\xC9N",filled:"","option-label":"name",dense:""},null,8,["modelValue","options"]),o(p,{spaced:"",inset:"",vertical:"",dark:""}),(c(!0),v(x,null,y(t.value,(a,s)=>(c(),v("div",{key:s,class:"col"},[Q("div",$,[o(g,{class:"col",modelValue:a.selected,"onUpdate:modelValue":[m=>a.selected=m,m=>B(m,s)],options:a.options,label:`Nivel ${s+1}`,"option-value":"id","option-label":"name","emit-value":"","map-options":"",dense:"",filled:"",disable:s==_.value},null,8,["modelValue","onUpdate:modelValue","options","label","disable"]),o(p,{spaced:"",inset:"",vertical:"",dark:""})])]))),128)),Q("div",q,[o(D,{icon:"picture_as_pdf",flat:"",onClick:C,disable:i.value<=0},null,8,["disable"])])])):L("",!0)]),_:1})]),_:1}),o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(U,{rows:i.value,columns:V.value.columns},null,8,["rows","columns"])]),_:1}))}};export{de as default};
