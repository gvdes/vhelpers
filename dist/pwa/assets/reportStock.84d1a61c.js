import{Q}from"./QSeparator.225c3a52.js";import{r,o as _,a as y,w as l,e as o,f as d,a4 as x,Y as C}from"./index.5ced3e40.js";import{Q as P}from"./QToolbar.6cc16027.js";import{Q as k}from"./QHeader.1c7b6b4e.js";import{Q as w}from"./QTable.5a0e4381.js";import{Q as R}from"./QPage.d7ba5a03.js";import{Q as h,a as S}from"./QLayout.21c8a301.js";import{u as V}from"./VDB.daf2eb22.js";import{_ as B}from"./UserToolbar.7fed3c0e.js";import{d as N}from"./compareApi.0293d6bf.js";import{u as T}from"./use-quasar.6d58fe31.js";import{a as $}from"./axios.9ab26c22.js";import"./QCard.16a5fd4d.js";import"./QResizeObserver.3dcb8e42.js";import"./QList.a9c4dc9c.js";import"./QSelect.06e40bd4.js";import"./use-key-composition.33c3d238.js";import"./uid.937d8ee7.js";import"./QItemSection.682f7762.js";import"./position-engine.28d4061c.js";import"./QDialog.f34fdc5b.js";import"./rtl.276c3f1b.js";import"./QLinearProgress.8780d75f.js";import"./QCheckbox.21f4ef4f.js";import"./QCardActions.cacfffe3.js";import"./ClosePopup.046aed46.js";import"./axios.ba7b1b0e.js";const ne={__name:"reportStock",setup(A){const s=V(),c=T(),m=r([]),u=r([]),p=r([]),i=r([]),f=r({pagination:{rowsPerPage:20},columns:[{name:"code",label:"Codigo",align:"left",field:e=>e.code},{name:"description",label:"Descripcion",align:"left",field:e=>e.description},{name:"section",label:"Seccion",align:"left",field:e=>{var a;return(a=e.categories.familia.seccion)==null?void 0:a.name}},{name:"family",label:"Familia",align:"left",field:e=>{var a;return(a=e.categories.familia)==null?void 0:a.name}},{name:"category",label:"Categoria",align:"left",field:e=>{var a;return(a=e.categories)==null?void 0:a.name}},{name:"pxc",label:"PXC",align:"center",field:e=>e.pieces},{name:"stock",label:"Stock",align:"center",field:e=>e.total_stock},{name:"venta",label:"Venta",align:"center",field:e=>e.total_venta},{name:"compra",label:"Compra",align:"center",field:e=>e.compras}]}),n=r(!1),g=async()=>{n.value=!0;try{const e=await N.getProductReport();e.fail?console.error("Error al obtener los datos:",e.fail):(console.log(e),m.value=e.products,i.value=m.value.map(a=>{const t=p.value.find(b=>b.ARTLFR==a.code)||{COMPRA:0};return{...a,compras:Number(t.COMPRA)}}),console.log(i.value),u.value=e.families)}catch(e){console.error("Error durante la carga de datos:",e),c.notify({message:"Error al cargar los datos",type:"negative"})}finally{n.value=!1}},v=async()=>{let a="http://192.168.10.53:1619/storetools/public/api/Products/getReceived";$.get(a).then(t=>{console.log(t.data),p.value=t.data,g()}).catch(t=>{console.log(t)})};return s.session.rol==="aux"||s.session.rol==="gen"||s.session.rol==="aud"||s.session.rol==="root"?v():(c.notify({message:"No tienes acceso a esta p\xE1gina",type:"negative",position:"center"}),$router.replace("/")),(e,a)=>(_(),y(h,{view:"hHh Lpr fFf"},{default:l(()=>[o(k,{class:"transparent text-dark",bordered:""},{default:l(()=>[o(B),o(Q),o(P,{class:"justify-between"},{default:l(()=>[d("div",null,[a[0]||(a[0]=x(" Helpers ")),o(C,{name:"navigate_next",color:"primary"}),a[1]||(a[1]=d("span",{class:"text-h6"},"Reporte Stocks",-1))])]),_:1})]),_:1}),o(S,null,{default:l(()=>[o(R,{padding:""},{default:l(()=>[o(w,{rows:i.value,loading:n.value,columns:f.value.columns,pagination:f.value.pagination},null,8,["rows","loading","columns","pagination"])]),_:1})]),_:1})]),_:1}))}};export{ne as default};
