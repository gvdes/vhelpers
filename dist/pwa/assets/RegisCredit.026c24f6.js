import{Q as v}from"./QTable.6dbea056.js";import{u as S,r as f,g as o,a as D,h as R,i as s,k as n,d as a,a4 as g,Q as V,l as k,j as x,a1 as c,a5 as B,aX as N,n as C,a6 as h}from"./index.a1c295c1.js";import{Q as M}from"./QPage.280a2f20.js";import{C as Y}from"./ClosePopup.e501f1d3.js";import"./QSelect.9d7be3ea.js";import"./QImg.485359ae.js";import"./QList.48a27591.js";import"./QSpace.abbec46a.js";import"./QExpansionItem.2f8e3b0c.js";import"./favorites.6b442dd7.js";import"./axios.9730f76f.js";import{u as A}from"./use-quasar.1aaac9b4.js";import{c as j}from"./ClientStore.9fa776a1.js";import{d as y}from"./dayjs.min.cbcf888d.js";import"./jspdf.plugin.autotable.7c2955ee.js";import"./exceljs.min.9e24d01d.js";import"./JsBarcode.cb858474.js";import"./browser.c61f550a.js";import"./QLinearProgress.8ae38f31.js";import"./QResizeObserver.73aad3aa.js";import"./QScrollObserver.061a8790.js";import"./_commonjsHelpers.88e99c8f.js";const E={class:"row"},rt={__name:"RegisCredit",setup(F){S();const i=j();A(),i.setTitle("Registro De Creditos"),i.setShowOption(!0);const l=f({state:!1,val:null}),u=f({columns:[{name:"date",label:"FECHA",field:t=>y(t.created_at).format("YYYY-MM-DD"),align:"left"},{name:"ncli",label:"NCLI",field:t=>t._client,align:"left"},{name:"name",label:"Cliente",field:t=>t.cliente,align:"left"},{name:"tck",label:"Ticket",field:t=>t.ticket,align:"left"},{name:"total",label:"Total",field:t=>t.total,align:"left"}]}),m=o(()=>i.valWorkpoint),_=o(()=>i.clients.flatMap(t=>{var e;return((e=t.credits)==null?void 0:e.flatMap(r=>r.tickets||[]))||[]})),d=o(()=>_.value.filter(t=>{var e;return t._workpoint==((e=m.value)==null?void 0:e.id)})),p=o(()=>i.creditsSuc),Q=o(()=>p.value.filter(t=>d.value.some(e=>e.ticket===t.ticket))),w=o(()=>p.value.filter(t=>!d.value.some(e=>e.ticket===t.ticket))),T=()=>{console.log("se va a registrar"),l.value.val.store=m.value,console.log(l.value.val)};return(t,e)=>(D(),R(M,{padding:""},{default:s(()=>[n("div",E,[a(v,{class:"col",title:"Registrados",rows:Q.value,columns:u.value.columns},null,8,["rows","columns"]),a(g,{spaced:"",inset:"",vertical:"",dark:""}),a(v,{class:"col",title:"No Registrados",rows:w.value,columns:u.value.columns,onRowClick:e[0]||(e[0]=(r,b)=>{l.value.state=!l.value.state,l.value.val=b})},null,8,["rows","columns"])]),a(h,{modelValue:l.value.state,"onUpdate:modelValue":e[1]||(e[1]=r=>l.value.state=r),persistent:""},{default:s(()=>[a(V,null,{default:s(()=>[a(k,{class:"text-bold text-h6"},{default:s(()=>[x(c(l.value.val.cliente),1)]),_:1}),a(k,null,{default:s(()=>[n("div",null,"TICKET: "+c(l.value.val.ticket),1),a(g,{spaced:"",inset:"",vertical:"",dark:""}),n("div",null,"TOTAL: "+c(l.value.val.total),1)]),_:1}),a(B,{align:"right"},{default:s(()=>[N(a(C,{flat:"",icon:"close",color:"negative"},null,512),[[Y]]),a(C,{flat:"",label:"Registrar",color:"positive",onClick:T})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{rt as default};
