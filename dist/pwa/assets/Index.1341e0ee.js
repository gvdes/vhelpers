import{a$ as U,aW as N,a as P,u as R,r as n,c as f,l as E,o as g,d as w,w as d,f as D,e as o,a1 as T,b6 as H,S as v,b5 as L,Q as q,h as A,ak as b}from"./index.c2f5f4e3.js";import{Q as F}from"./QSelect.2047fd6e.js";import{b as k}from"./QList.ad92ec23.js";import{Q as C}from"./QInput.d5f95cb2.js";import{Q as y}from"./QTable.41d37387.js";import{Q as j}from"./QPage.17984628.js";import{d as z}from"./dayjs.min.cbcf888d.js";import"./axios.ea4a1dc9.js";import{u as M}from"./OrderStore.8312dcb3.js";import{u as W}from"./use-quasar.39f9e42d.js";import"./QDrawer.0e1edfa0.js";import"./QExpansionItem.e926aa81.js";import"./QCardSection.fed8a97e.js";import"./QCardActions.d49ddb1a.js";import"./QCard.7cc3dc50.js";import"./ClosePopup.8bd06445.js";/* empty css                                                                         */import"./socket.41f46bf6.js";import"./use-key-composition.a7b75bd7.js";import"./QLinearProgress.789a8ffd.js";import"./QCheckbox.d16d5612.js";import"./use-checkbox.7e1bd460.js";import"./_commonjsHelpers.88e99c8f.js";import"./QResizeObserver.121c3205.js";import"./QScrollObserver.e23a7fbb.js";const G={__name:"Index",setup(J){N();const Q=P(),u=M();u.setTitle("INICIO"),u.setshowLyt(!0),u.setShowEvent(!0);const V=W();R();const r=n(null),s=n(null),_=n({rowsPerPage:10}),t=n(null),m=n({columns:[{name:"id",label:"FOLIO",field:e=>e.id,align:"left",sortable:!0},{name:"created",label:"Creado Por",field:e=>{var l,a,i;return`${(l=e.created_by)==null?void 0:l.names} ${(a=e.created_by)==null?void 0:a.surname_pat} ${(i=e.created_by)==null?void 0:i.surname_mat}`},align:"left",sortable:!0},{name:"client",label:"CLIENTE",field:e=>e.name,align:"left",sortable:!0},{name:"status",label:"ESTADO",field:e=>{var l;return(l=e.status)==null?void 0:l.name},align:"center",classes:e=>`text-${$.value[e.status.id-1]}`,sortable:!0},{name:"created_time",label:"HORA",field:e=>z(e.created_at).format("HH:mm:ss"),align:"center",sortable:!0}],filter:null}),c=n({columns:[{name:"id",label:"ID",field:e=>e.id,sortable:!0,align:"left"},{name:"name",label:"Nombre",field:e=>`${e.names} ${e.surname_pat} ${e.surname_mat}`,sortable:!0,align:"left"},{name:"pedidos",label:"Pedidos",field:e=>e.filteredCount,sortable:!0,align:"center"}],filter:null}),$=n(["grey-6","red-5","deep-orange-10","blue-4","blue-10","teal-4","teal-10","green-5","green-10","light-green-10"]),p=f(()=>V.platform.is.mobile),I=f(()=>{let e=u.orders;return r.value&&(e=e.filter(l=>l._created_by===r.value.id)),t.value&&(e=e.filter(l=>l._status===t.value.id)),s.value&&(e=e.filter(l=>l.id===s.value.id)),e}),h=f(()=>u.users.map(e=>{let l=e.orders;return s.value&&(l=l.filter(a=>a.id===s.value.id)),t.value&&(l=l.filter(a=>a._status===t.value.id)),r.value&&r.value.id!==e.id&&(l=[]),{...e,filteredOrders:l,filteredCount:l.length}}).filter(e=>e.filteredCount>0||!t.value&&!s.value&&!r.value)),x=(e,l)=>{r.value=l,s.value=null},O=(e,l)=>{s.value=l,r.value=null},S=()=>{r.value=null,s.value=null,t.value=null},B=(e,l)=>{Q.push(`/preorders/pedidos/${l.id}`)};return E(t,()=>{s.value=null,r.value=null}),(e,l)=>(g(),w(j,{padding:""},{default:d(()=>[D("div",{class:b(p.value?"":"row")},[o(y,{class:b(p.value?"":"col"),rows:I.value,columns:m.value.columns,filter:m.value.filter,pagination:_.value,"row-key":"id","row-class":a=>{var i;return((i=s.value)==null?void 0:i.id)===a.id?"bg-blue-1":""},onRowClick:O,onRowDblclick:B},{"top-right":d(()=>[o(F,{modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=a=>t.value=a),options:T(u).process,label:"Estado",filled:"",style:{width:"130px"},dense:"","option-label":"name"},H({_:2},[t.value?{name:"append",fn:d(()=>[o(v,{name:"cancel",onClick:l[0]||(l[0]=L(a=>t.value=null,["stop","prevent"])),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","options"]),r.value||s.value||t.value?(g(),w(q,{key:0,class:"q-ml-md",icon:"filter_alt_off",flat:"",dense:"",onClick:S})):A("",!0),o(k,{spaced:"",inset:"",vertical:"",dark:""}),o(C,{borderless:"",dense:"",debounce:"300",modelValue:m.value.filter,"onUpdate:modelValue":l[2]||(l[2]=a=>m.value.filter=a),placeholder:"Buscar"},{append:d(()=>[o(v,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["class","rows","columns","filter","pagination","row-class"]),o(k,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{class:b(p.value?"":"col"),rows:h.value,columns:c.value.columns,filter:c.value.filter,pagination:_.value,"row-key":"id","row-class":a=>{var i;return((i=r.value)==null?void 0:i.id)===a.id?"bg-blue-1":""},onRowClick:x},{"top-right":d(()=>[o(C,{borderless:"",dense:"",debounce:"300",modelValue:c.value.filter,"onUpdate:modelValue":l[3]||(l[3]=a=>c.value.filter=a),placeholder:"Buscar"},{append:d(()=>[o(v,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["class","rows","columns","filter","pagination","row-class"])],2)]),_:1}))}};var Ce=U(G,[["__scopeId","data-v-3904ba0a"]]);export{Ce as default};
