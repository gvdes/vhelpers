import{b as j}from"./QList.9744d304.js";import{Q as x}from"./QHeader.f01ac61f.js";import{aH as O,a as B,u as S,p as V,m as $,a$ as b,o as m,d as c,w as a,e as t,a1 as f,f as _,ak as g,S as k,a0 as C,h as H}from"./index.36b6f3f3.js";import{Q as L}from"./QToolbar.048e4980.js";import{Q as N,a as R}from"./QLayout.9cb4e2c1.js";import"./dayjs.min.cbcf888d.js";import"./axios.01f1ad8b.js";import{o as U}from"./orderApi.9fe6112b.js";import{u as q}from"./OrderStore.7102468b.js";import{u as D}from"./use-quasar.21781a3f.js";import{_ as P}from"./UserToolbar.1f2bdf84.js";import{$sktOrders as s}from"./socket.05630e21.js";import"./use-key-composition.61edd40b.js";import"./QResizeObserver.d3e712c7.js";import"./QScrollObserver.83400ae8.js";import"./_commonjsHelpers.88e99c8f.js";import"./QSelect.b2e0eed3.js";import"./QExpansionItem.e32c1b0b.js";import"./QDrawer.7b8d4b06.js";import"./QCardSection.2a5053ab.js";import"./QCardActions.66eaa095.js";import"./QCard.c09bae66.js";import"./ClosePopup.0f2a9450.js";import"./auth.7cbb5b77.js";const ue={__name:"PreordersLYT",setup(T){const w=new Audio("sounds/success01.mp3"),y=O();B();const r=q(),i=D(),n=S(),Q=e=>{switch(e){case 1:case 2:case 6:return"admins";case 8:return"sales";case 4:case 24:case 28:return"supply";default:return"sales"}},d=e=>{console.log(e)},l=e=>{console.log(e)},p=e=>{console.log(e),r.addOrUpdate(e)},u=e=>{console.log(e),r.addOrUpdate(e),e.order._status==5&&y.path==="/preorders/warehouse"?(console.log("aqui suena"),w.play()):console.log("aqui no suena")},v=async()=>{i.loading.show({message:"Obteniendo datos"});let e={uid:n.session.credentials.staff.id_va,wid:n.session.store.id_viz,view:Q(n.session.credentials._rol)};console.log(e);const o=await U.getOrders(e);o.fail?console.log(o):(console.log(o),r.setOrders(o.orders),r.setPrinters(o.prints),r.setUnits(o.units),r.setRules(o.rules),i.loading.hide())};return V(async()=>{v(),s.connect(),s.emit("join",r.socket_user),s.on("joinedat",d),s.on("newjoin",l),s.on("order_add",p),s.on("order_update",u)}),$(()=>{s.off("joinedat",d),s.off("newjoin",l),s.off("order_add",p),s.off("order_update",u)}),(e,o)=>{const h=b("router-view");return m(),c(N,{view:"hHh Lpr fFf"},{default:a(()=>[t(x,{class:"transparent text-dark",bordered:""},{default:a(()=>[t(P),t(j)]),_:1}),t(R,null,{default:a(()=>[f(r).showLyt?(m(),c(L,{key:0,class:"justify-between"},{default:a(()=>[_("div",null,[o[0]||(o[0]=g("Helpers ")),t(k,{name:"navigate_next",color:"primary"}),g(" "+C(f(r).title)+" ",1),o[1]||(o[1]=_("span",{class:"text-h6"},null,-1))])]),_:1})):H("",!0),t(h)]),_:1})]),_:1})}}};export{ue as default};
