import{Q as b}from"./QSeparator.c068ffbb.js";import{r as v,c as Y,o as g,a as C,w as a,aD as N,u as P,aV as j,e,i as s,Y as k,Q,a4 as h,a3 as m,a2 as V,aX as q,g as S,a1 as A,a0 as R,h as H,a6 as O}from"./index.d2426e7d.js";import{Q as U}from"./QToolbar.576ff950.js";import{Q as F}from"./QHeader.4c136a14.js";import{Q as K}from"./QInput.9bca1a7d.js";import{a as x,b as p,c as M}from"./QSelect.d29b5391.js";import{Q as J}from"./auto.85b6e621.js";import{Q as X}from"./QList.5a0cfa89.js";import{Q as z}from"./QTable.bd0646f2.js";import{Q as G}from"./QDate.b476685d.js";import{u as W,Q as Z,a as D}from"./use-quasar.282298c4.js";import{Q as ee}from"./QCardActions.3f1b4f70.js";import{Q as ae}from"./QDialog.20226f55.js";import{Q as oe,a as te}from"./QLayout.571410a7.js";import"./AppFullscreen.8196785f.js";import{d as se}from"./dayjs.min.25545ff6.js";import{_ as le}from"./UserToolbar.aff0382d.js";import{a as re}from"./assistApi.5aba79bc.js";import{u as ne}from"./VDB.df551aae.js";import{a as ie}from"./axios.f1f32898.js";import"./QResizeObserver.54c76791.js";import"./use-key-composition.99996295.js";import"./uid.42677368.js";import"./position-engine.c031e069.js";import"./rtl.b51694b1.js";import"./QLinearProgress.aeb45896.js";import"./QCheckbox.8d494462.js";import"./use-cache.b0833c75.js";import"./date.a6795bf2.js";import"./_commonjsHelpers.88e99c8f.js";import"./ClosePopup.8282aad3.js";import"./axios.ae0a941c.js";const de=s("span",{class:"text-grey"},"Helpers",-1),ue=s("span",{class:"text-h6"},"Cajas Abiertas",-1),ce={class:"row"},me={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition"},pe={class:"text-bold"},fe={class:"text-overline"},_e={key:0,class:""},ve={class:"q-pa-md"},ge=s("div",{class:"q-pb-sm"},null,-1),We={__name:"OpneBoxesLYT",setup(Qe){const d=W();N();const T=P(),B=ne(),l=v(!1),c=v(null),f=v([]),_=v({pagination:{rowsPerPage:0},filter:""});Y(()=>d.platform.is.mobile);const I=async()=>{d.loading.show({message:"Cargando Informacion"}),console.log("se inicia el init");const r=await re.index();if(r.error)console.log(r);else{console.log(r),f.value=r;let t=new Date,u=se(t).format("YYYY/MM/DD");c.value=u,console.log(u),y(f.value,c.value).finally(()=>{d.loading.hide()})}},y=async(r,t)=>{console.log(t);const u=r.map((o,n)=>new Promise((w,E)=>{setTimeout(()=>{o.sale=null;let L=`http://${o.ip_address}/access/public/reports/OpenCash`;ie.post(L,{filt:t}).then(i=>{o.sales=i.data==null?null:i.data,console.log(i),w(i)}).catch(i=>{console.log(i.response.data.message),E(i)})},n*1e3)}));try{await Promise.all(u)}catch(o){console.error("Error en alguna de las solicitudes:",o)}};B.session.rol==="adm"?I():(d.notify({message:"No tienes acceso a esta pagina",type:"negative",position:"center"}),T.replace("/"));const $=()=>{l.value=!1,d.loading.show({message:"Obteniendo Datos"}),y(f.value,c.value).finally(()=>{d.loading.hide()})};return(r,t)=>{const u=j("router-view");return g(),C(oe,{view:"hHh Lpr fFf"},{default:a(()=>[e(te,null,{default:a(()=>[e(F,{class:"bg-grey-3 text-dark",bordered:""},{default:a(()=>[e(le),e(b),e(U,{class:"justify-between"},{default:a(()=>[s("div",null,[de,e(k,{name:"navigate_next",color:"primary"}),ue]),s("div",ce,[e(Q,{color:"primary",icon:"event",onClick:t[0]||(t[0]=o=>l.value=!l.value),flat:"",round:""})])]),_:1})]),_:1}),e(z,{title:"Sucursales",rows:f.value,"hide-header":"",pagination:_.value.pagination,filter:_.value.filter},{"top-right":a(()=>[e(K,{borderless:"",dense:"",debounce:"300",modelValue:_.value.filter,"onUpdate:modelValue":t[1]||(t[1]=o=>_.value.filter=o),placeholder:"Buscar"},{append:a(()=>[e(k,{name:"search"})]),_:1},8,["modelValue"])]),body:a(o=>[s("div",me,[e(X,{bordered:"",dense:""},{default:a(()=>[e(x,null,{default:a(()=>[e(p,null,{default:a(()=>[e(M,{class:"flex justify-between"},{default:a(()=>{var n;return[s("div",pe,h(o.row.name),1),s("div",fe,[m(h((n=o.row.sales)==null?void 0:n.length)+" ",1),e(Q,{color:"grey",flat:"",dense:"",icon:o.expand?"keyboard_arrow_up":"keyboard_arrow_down",onClick:w=>o.expand=!o.expand},null,8,["icon","onClick"])])]}),_:2},1024)]),_:2},1024)]),_:2},1024),e(J,null,{default:a(()=>[o.row.sales?V((g(),S("div",_e,[e(b),e(x,{class:"text-center"},{default:a(()=>[e(p,null,{default:a(()=>[m(" CAJA ")]),_:1}),e(p,null,{default:a(()=>[m(" TICKETS ")]),_:1})]),_:1}),(g(!0),S(A,null,R(o.row.sales,(n,w)=>V((g(),C(x,{class:"text-center",dense:"",clickable:""},{default:a(()=>[e(p,null,{default:a(()=>[m(h(n.DESTER),1)]),_:2},1024),e(p,null,{default:a(()=>[m(h(n.TICKETS),1)]),_:2},1024)]),_:2},1024)),[[O]])),256))],512)),[[q,o.expand]]):H("",!0)]),_:2},1024)]),_:2},1024),e(b,{spaced:"",inset:"",vertical:"",dark:""})])]),_:1},8,["rows","pagination","filter"]),e(ae,{modelValue:l.value,"onUpdate:modelValue":t[4]||(t[4]=o=>l.value=o)},{default:a(()=>[e(Z,{class:"my-card"},{default:a(()=>[e(D,null,{default:a(()=>[s("div",ve,[ge,e(G,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=o=>c.value=o),range:"",minimal:""},null,8,["modelValue"])])]),_:1}),e(D,null,{default:a(()=>[e(ee,{align:"right"},{default:a(()=>[e(Q,{flat:"",icon:"close",color:"negative",onClick:t[3]||(t[3]=o=>l.value=!l.value)}),e(Q,{flat:"",icon:"check",color:"positive",onClick:$})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(u)]),_:1})]),_:1})}}};export{We as default};
