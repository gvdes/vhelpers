import{r as i,c as N,o as U,a as A,w as s,u as S,i as d,a3 as v,e as o,F as _,Q as u,f as q}from"./index.4a50ccac.js";import{Q as I}from"./position-engine.1651cb91.js";import{Q as O}from"./QDate.b6e6d68e.js";import{Q as V,a as p}from"./QCard.25b1e4f4.js";import{Q}from"./QCardActions.78d7f394.js";import{Q as y}from"./QDialog.eabd5d5f.js";import{Q as b}from"./QSelect.bc18cb92.js";import{Q as R}from"./QInput.4c008078.js";import{Q as j}from"./QPage.1e470e5c.js";import{u as z}from"./VDB.b6f3616e.js";import{u as F}from"./use-quasar.6474dc4c.js";import"./jspdf.plugin.autotable.38195dd8.js";import{t as w}from"./transferApi.f48da5ee.js";import"./exceljs.min.9e24d01d.js";import"./browser.94c942de.js";import"./use-cache.b0833c75.js";import"./date.bcace5a6.js";import"./QItem.87b0b1f3.js";import"./_commonjsHelpers.88e99c8f.js";import"./axios.ae0a941c.js";import"./axios.f1f32898.js";const H={class:"row justify-between"},P=d("span",{class:"text-h6"},"Traspasos entre Almacenes",-1),h={class:"q-pa-md"},E=d("div",{class:"q-pb-sm"},null,-1),fe={__name:"Index",setup(G){const x=S(),f=z(),n=F(),r=i(!1),g=i(null),m=i(!1),C=i([]),c=i([]),a=i({_origin:null,_destiny:null,notes:null}),k=N(()=>a.value._origin&&a.value._destiny&&a.value.notes),T=async()=>{console.log("Recibiendo Datos :)"),n.loading.show({message:"Obteniendo Datos"});let t=f.session.store.id;const e=await w.index(t);e.error?console.log(e):(C.value=e.transfer,c.value=e.warehouses,n.loading.hide())},D=async()=>{n.loading.show({message:"Creando Traspaso"}),a.value.created_by=f.session.name,a.value._store=f.session.store.id,console.log(a.value);const t=await w.addTransfer(a.value);t.error?(console.log(t),n.notify({message:"No se logro crear el traspaso",position:"center",type:"negative"})):(n.loading.hide(),n.notify({message:`Traspaso ${t.code_fs} creada`,position:"center",type:"positive"}),x.push(`transfers/${t.id}`))},$=()=>{m.value=!1,a.value={_origin:null,_destiny:null,notes:null}},B=t=>t.id==a.value._origin.id;return T(),(t,e)=>(U(),A(j,{padding:""},{default:s(()=>[d("div",H,[d("div",null,[v("Helpers "),o(_,{name:"navigate_next",color:"primary"}),v(),P]),d("div",null,[o(u,{color:"primary",icon:"add",flat:"",onClick:e[0]||(e[0]=l=>m.value=!m.value),round:""}),o(u,{color:"primary",icon:"event",onClick:e[1]||(e[1]=l=>r.value=!r.value),flat:"",round:""})])]),o(I),o(y,{modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=l=>r.value=l)},{default:s(()=>[o(V,{class:"my-card"},{default:s(()=>[o(p,null,{default:s(()=>[d("div",h,[E,o(O,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=l=>g.value=l),range:"",minimal:""},null,8,["modelValue"])])]),_:1}),o(p,null,{default:s(()=>[o(Q,{align:"right"},{default:s(()=>[o(u,{flat:"",icon:"close",color:"negative",onClick:e[3]||(e[3]=l=>r.value=!r.value)}),o(u,{flat:"",icon:"check",color:"positive",onClick:t.buscas},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(y,{modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=l=>m.value=l),persistent:""},{default:s(()=>[o(V,{style:{width:"700px","max-width":"80vw"}},{default:s(()=>[o(p,{class:"text-h5 text-bold text-center"},{default:s(()=>[v(" Nuevo Traspaso ")]),_:1}),o(p,{class:"row items-center"},{default:s(()=>[o(b,{modelValue:a.value._origin,"onUpdate:modelValue":[e[5]||(e[5]=l=>a.value._origin=l),e[6]||(e[6]=l=>a.value._destiny=null)],options:c.value,label:"Almacen Origen",class:"col","option-label":"name"},null,8,["modelValue","options"]),o(_,{name:"arrow_forward",class:"col",size:"md"}),o(b,{modelValue:a.value._destiny,"onUpdate:modelValue":e[7]||(e[7]=l=>a.value._destiny=l),options:c.value,label:"Almacen Destino",class:"col","option-label":"name","option-disable":l=>B(l)},null,8,["modelValue","options","option-disable"])]),_:1}),o(p,null,{default:s(()=>[o(R,{modelValue:a.value.notes,"onUpdate:modelValue":e[8]||(e[8]=l=>a.value.notes=l),type:"text",label:"Notas"},null,8,["modelValue"])]),_:1}),o(Q,{align:"center"},{default:s(()=>[o(u,{flat:"",label:"Cancelar",color:"negative",onClick:$}),o(u,{flat:"",label:"Crear",color:"positive",onClick:D,disable:!q(k)},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{fe as default};
