import{f as Se,v as re,g as Ve,h as Ae,i as Pe,j as de,s as De,c as ce,p as fe,k as Qe,Q as H,b as Ie,a as oe}from"./QSelect.fe30c730.js";import{k as f,j as _e,aL as Oe,aM as Me,r as _,c as R,v as me,y as ve,au as pe,at as ye,A as Ne,W as se,m as Le,l as Re,O as Ee,o as w,a as O,w as l,e,i as x,a3 as s,U as He,Q as M,f as W,g as G,h as U,a4 as c,a0 as Ue,a1 as $e,a2 as he,a6 as je}from"./index.62292158.js";import{Q as N}from"./QInput.42239b91.js";import{u as qe,Q as K}from"./use-quasar.28f4131f.js";import{a as z,Q as Be}from"./axios.c8f24dff.js";import{_ as Fe,Q as ze,a as ge,C as We}from"./UserToolbar.dbd2c928.js";import{u as Ge,f as Ke,h as Ye,i as Je,j as Xe,k as Ze,l as el,m as ll,Q as be,a as y,b as a,c as L,e as tl}from"./QDialog.917c8079.js";import{Q as al,a as ol,b as P,c as D,d as sl}from"./QLayout.90d5d497.js";import{u as ul}from"./VDB.6baa0ccb.js";const nl=[f("g",[f("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),f("clipPath",{id:"uil-hourglass-clip1"},[f("rect",{x:"15",y:"20",width:" 70",height:"25"},[f("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),f("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),f("clipPath",{id:"uil-hourglass-clip2"},[f("rect",{x:"15",y:"55",width:" 70",height:"25"},[f("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),f("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),f("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),f("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),f("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var il=_e({name:"QSpinnerHourglass",props:Oe,setup(n){const{cSize:C,classes:V}=Me(n);return()=>f("svg",{class:V.value,width:C.value,height:C.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},nl)}}),rl=_e({name:"QTooltip",inheritAttrs:!1,props:{...Se,...Ge,...Ke,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:re},self:{type:String,default:"top middle",validator:re},offset:{type:Array,default:()=>[14,14],validator:Ve},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Ye],setup(n,{slots:C,emit:V,attrs:$}){let S,m;const h=Le(),{proxy:{$q:i}}=h,g=_(null),v=_(!1),j=R(()=>fe(n.anchor,i.lang.rtl)),q=R(()=>fe(n.self,i.lang.rtl)),p=R(()=>n.persistent!==!0),{registerTick:r,removeTick:Y}=Je(),{registerTimeout:E}=Xe(),{transitionProps:J,transitionStyle:X}=Ze(n),{localScrollTarget:A,changeScrollEvent:Z,unconfigureScrollTarget:ee}=Ae(n,ne),{anchorEl:T,canShow:le,anchorEvents:Q}=Pe({showing:v,configureAnchorEl:ke}),{show:te,hide:B}=el({showing:v,canShow:le,handleShow:k,handleHide:u,hideOnRouteChange:p,processOnMount:!0});Object.assign(Q,{delayShow:Te,delayHide:Ce});const{showPortal:b,hidePortal:o,renderPortal:t}=ll(h,g,xe,"tooltip");if(i.platform.is.mobile===!0){const d={anchorEl:T,innerRef:g,onClickOutside(I){return B(I),I.target.classList.contains("q-dialog__backdrop")&&Ee(I),!0}},ae=R(()=>n.modelValue===null&&n.persistent!==!0&&v.value===!0);me(ae,I=>{(I===!0?Qe:de)(d)}),ve(()=>{de(d)})}function k(d){b(),r(()=>{m=new MutationObserver(()=>F()),m.observe(g.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),F(),ne()}),S===void 0&&(S=me(()=>i.screen.width+"|"+i.screen.height+"|"+n.self+"|"+n.anchor+"|"+i.lang.rtl,F)),E(()=>{b(!0),V("show",d)},n.transitionDuration)}function u(d){Y(),o(),ue(),E(()=>{o(!0),V("hide",d)},n.transitionDuration)}function ue(){m!==void 0&&(m.disconnect(),m=void 0),S!==void 0&&(S(),S=void 0),ee(),pe(Q,"tooltipTemp")}function F(){const d=g.value;T.value===null||!d||De({el:d,offset:n.offset,anchorEl:T.value,anchorOrigin:j.value,selfOrigin:q.value,maxHeight:n.maxHeight,maxWidth:n.maxWidth})}function Te(d){if(i.platform.is.mobile===!0){ce(),document.body.classList.add("non-selectable");const ae=T.value,I=["touchmove","touchcancel","touchend","click"].map(ie=>[ae,ie,"delayHide","passiveCapture"]);ye(Q,"tooltipTemp",I)}E(()=>{te(d)},n.delay)}function Ce(d){i.platform.is.mobile===!0&&(pe(Q,"tooltipTemp"),ce(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),E(()=>{B(d)},n.hideDelay)}function ke(){if(n.noParentEvent===!0||T.value===null)return;const d=i.platform.is.mobile===!0?[[T.value,"touchstart","delayShow","passive"]]:[[T.value,"mouseenter","delayShow","passive"],[T.value,"mouseleave","delayHide","passive"]];ye(Q,"anchor",d)}function ne(){if(T.value!==null||n.scrollTarget!==void 0){A.value=Ne(T.value,n.scrollTarget);const d=n.noParentEvent===!0?F:B;Z(A.value,d)}}function we(){return v.value===!0?f("div",{...$,ref:g,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",$.class],style:[$.style,X.value],role:"tooltip"},Re(C.default)):null}function xe(){return f(se,J.value,we)}return ve(ue),Object.assign(h.proxy,{updatePosition:F}),t}});const dl=x("span",{class:"text-h6"},"TICKETS",-1),cl=x("div",{class:"q-pa-md bg-grey-2 text-primary"},"Buscar Folio",-1),fl={key:0,class:"text-right"},ml={class:"row justify-center"},vl={key:1},pl={key:0},yl={class:"text-h6"},hl={class:"text-subtitle2"},gl={class:"row justify-between"},bl={class:"text-subtitle2"},_l={class:"text-subtitle2"},Dl={__name:"ModifyLayout",setup(n){const C=ul(),V=qe(),$=C.series,S=_(null),m=_(null),h=_(""),i=_({state:!1,body:null}),g=_({state:!1,body:null}),v=_({val:null,body:null}),j=_(null),q=_(null),p=_({state:!1,body:null}),r=_(null),Y=["Devolucion","Modificacion","Reimpresion"],E=R(()=>m.value&&h.value.length),J=R(()=>g.value.body.product),X=R(()=>v.value.val&&(r.value=="Devolucion"&&A.value.length>10||r.value=="Reimpresion")||r.value=="Modificacion"),A=_(""),Z=async()=>{let o=`http://${C.session.store.ip}/access/public/modify/getPrinter`;z.get(o).then(t=>{v.value.body=t.data,console.log("Impresoras listas :)")}).catch(t=>{console.log(t.response.data.message)})},ee=async()=>{i.value.body=null;let b=m.value,o=h.value,k=`http://${C.session.store.ip}/access/public/modify/getTicket?serie=${b}&folio=${o}`;z.get(k).then(u=>{i.value.state=!0,i.value.body=u.data}).catch(u=>{console.log(u.response.data.message),V.notify({html:!0,message:u.response.data.message,color:"negative",position:"center"})})},T=async()=>{let b=C.session.store.ip,o=`${C.session.name} - ${C.session.store.alias}`;if(r.value=="Devolucion"){let t={type:r.value,serie:m.value,folio:h.value,mot:A.value,create:o,print:v.value.val.ip};console.log(t);let k=`http://${b}/access/public/modify/newmod`;z.post(k,t).then(u=>{i.value.state=!1,console.log(u),r.value=null,A.value="",v.value.val=null,m.value=null,h.value="",V.notify({html:!0,message:u.data.mssg,color:"positive",position:"center"})}).catch(u=>{console.log(u.response.data.message),V.notify({html:!0,message:u.response.data.message,color:"negative",position:"center"})})}else if(r.value=="Reimpresion"){let t={type:r.value,serie:m.value,folio:h.value,print:v.value.val.ip},k=`http://${b}/access/public/modify/newmod`;z.post(k,t).then(u=>{i.value.state=!1,console.log(u),r.value=null,v.value.val=null,m.value=null,h.value=""}).catch(u=>u)}else if(r.value=="Modificacion"){console.log("modificado");let t={type:r.value,serie:m.value,folio:h.value},k=`http://${b}/access/public/modify/newmod`;z.post(k,t).then(u=>{console.log(u),g.value.state=!0,i.value.state=!1,g.value.body=u.data,S.value=u.data.ticket.codcli,q.value=u.data.ticket.observacion}).catch(u=>u)}},le=()=>console.log("secambioelclientebro"),Q=b=>{console.log(`Mostrando Articulo ${b.ARTICULO}`),p.value.state=!0,p.value.body=b},te=()=>console.log("buscandoproducto"+j.value),B=()=>console.log("Pasa a cobros");return Z(),(b,o)=>(w(),O(al,{view:"hHh Lpr fFf"},{default:l(()=>[e(ze,{class:"transparent text-dark",bordered:""},{default:l(()=>[e(Fe),e(H),e(Be,{class:"justify-between"},{default:l(()=>[x("div",null,[s("Helpers "),e(He,{name:"navigate_next",color:"primary"}),s(),dl]),e(M,{color:"primary",icon:"add"},{default:l(()=>[e(Ie,null,{default:l(()=>[cl,e(H),e(K,{dense:"",onSubmit:ee,class:"q-gutter-md q-pa-md"},{default:l(()=>[e(oe,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=t=>m.value=t),options:W($),label:"Serie",autofocus:""},null,8,["modelValue","options"]),e(N,{modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=t=>h.value=t),type:"number",label:"Folio"},null,8,["modelValue"]),W(E)?(w(),G("div",fl,[e(M,{type:"submit",color:"primary",icon:"search"})])):U("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(sl,null,{default:l(()=>[e(ol,{class:"bg-grey-3",padding:""},{default:l(()=>[x("div",ml,[e(se,{name:"bounce"},{default:l(()=>[i.value.state?(w(),O(P,{key:0,style:{"min-width":"400px"},flat:"",bordered:""},{default:l(()=>[e(be,{bordered:""},{default:l(()=>[e(y,null,{default:l(()=>[e(a,null,{default:l(()=>[s("Ticket : ")]),_:1}),e(a,null,{default:l(()=>[s(c(i.value.body.ticket),1)]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(a,null,{default:l(()=>[s("Cliente : ")]),_:1}),e(a,null,{default:l(()=>[s(c(i.value.body.cliente),1)]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(a,null,{default:l(()=>[s("Fecha : ")]),_:1}),e(a,null,{default:l(()=>[s(c(i.value.body.fecha),1)]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(a,null,{default:l(()=>[s("Total : ")]),_:1}),e(a,null,{default:l(()=>[s("$ "+c(i.value.body.total),1)]),_:1})]),_:1}),e(H),e(y,{class:"bg-indigo-2"},{default:l(()=>[e(a,null,{default:l(()=>[s("Movimiento")]),_:1}),e(a,null,{default:l(()=>[e(oe,{dense:"",modelValue:r.value,"onUpdate:modelValue":o[2]||(o[2]=t=>r.value=t),options:Y,label:"Seleccione",filled:"",autofocus:""},null,8,["modelValue"])]),_:1})]),_:1}),r.value=="Devolucion"||r.value=="Reimpresion"?(w(),O(y,{key:0},{default:l(()=>[e(a,null,{default:l(()=>[s("Impresora")]),_:1}),v.value.body?(w(),O(a,{key:1},{default:l(()=>[e(oe,{dense:"","option-label":"name",modelValue:v.value.val,"onUpdate:modelValue":o[3]||(o[3]=t=>v.value.val=t),options:v.value.body,label:"Impresora",filled:"",autofocus:""},null,8,["modelValue","options"])]),_:1})):(w(),O(a,{key:0},{default:l(()=>[e(il,{color:"purple",size:"2em"}),e(rl,{offset:[0,8]},{default:l(()=>[s("Obteniendo Impresoras")]),_:1})]),_:1}))]),_:1})):U("",!0),r.value=="Devolucion"?(w(),G("div",vl,[e(y,null,{default:l(()=>[e(a,null,{default:l(()=>[s("Motivo de la devolucion")]),_:1}),e(a,null,{default:l(()=>[e(N,{modelValue:A.value,"onUpdate:modelValue":o[4]||(o[4]=t=>A.value=t),type:"text",label:"describe el motivo"},null,8,["modelValue"])]),_:1})]),_:1})])):U("",!0)]),_:1}),W(X)?(w(),G("div",pl,[e(ge,{align:"between"},{default:l(()=>[e(M,{flat:"",icon:"cancel"}),e(M,{flat:"",icon:"arrow_forward",onClick:T})]),_:1})])):U("",!0)]),_:1})):U("",!0)]),_:1})]),e(se,{name:"bounce"},{default:l(()=>[g.value.state?(w(),O(P,{key:0,class:"my-card",style:{"min-width":"400px"},flat:"",bordered:""},{default:l(()=>[e(be,{bordered:""},{default:l(()=>[e(P,{class:"my-card"},{default:l(()=>[e(D,null,{default:l(()=>[e(y,{class:"text-center"},{default:l(()=>[e(a,null,{default:l(()=>[e(L,{caption:"",lines:"2"},{default:l(()=>[s("Ticket")]),_:1}),e(L,{class:"text-h4"},{default:l(()=>[s(c(g.value.body.ticket.ticket),1)]),_:1})]),_:1}),e(a,null,{default:l(()=>[e(L,{caption:"",lines:"2"},{default:l(()=>[s("Fecha")]),_:1}),e(L,{class:"text-h6"},{default:l(()=>[s(c(g.value.body.ticket.fecha),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(H,{spaced:"",inset:"",vertical:"",dark:""}),e(P,{class:"my-card"},{default:l(()=>[e(D,null,{default:l(()=>[e(y,{class:"text-h6"},{default:l(()=>[e(a,null,{default:l(()=>[e(L,{lines:"2"},{default:l(()=>[s("Cliente")]),_:1}),e(L,null,{default:l(()=>[e(K,{onSubmit:le,class:"q-gutter-md q-display-flex q-justify-center"},{default:l(()=>[e(N,{modelValue:S.value,"onUpdate:modelValue":o[5]||(o[5]=t=>S.value=t),type:"number",style:{"max-width":"100px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(a,null,{default:l(()=>[s(c(g.value.body.ticket.cliente),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(H,{spaced:"",inset:"",vertical:"",dark:""}),e(P,{class:"my-card"},{default:l(()=>[e(D,null,{default:l(()=>[e(y,null,{default:l(()=>[e(a,null,{default:l(()=>[s("ARTICULO")]),_:1}),e(a,null,{default:l(()=>[s("DESCRIPCION")]),_:1}),e(a,null,{default:l(()=>[s("CANTIDAD")]),_:1}),e(a,null,{default:l(()=>[s("PRECIO")]),_:1}),e(a,null,{default:l(()=>[s("TOTAL")]),_:1})]),_:1}),(w(!0),G($e,null,Ue(W(J),(t,k)=>he((w(),O(y,{key:k,onClick:u=>Q(t),clickable:""},{default:l(()=>[e(a,null,{default:l(()=>[s(c(t.ARTICULO),1)]),_:2},1024),e(a,null,{default:l(()=>[s(c(t.DESCRIPCION),1)]),_:2},1024),e(a,null,{default:l(()=>[s(c(t.CANTIDAD),1)]),_:2},1024),e(a,null,{default:l(()=>[s(c(t.PRECIO),1)]),_:2},1024),e(a,null,{default:l(()=>[s(c(t.TOTAL),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[je]])),128))]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(a)]),_:1}),e(H,{spaced:"",inset:"",vertical:"",dark:""}),e(P,{class:"my-card"},{default:l(()=>[e(D,null,{default:l(()=>[e(y,null,{default:l(()=>[e(a,null,{default:l(()=>[e(L,null,{default:l(()=>[s("Observaciones")]),_:1})]),_:1}),e(a,{side:"",top:""},{default:l(()=>[e(N,{modelValue:q.value,"onUpdate:modelValue":o[6]||(o[6]=t=>q.value=t),type:"text",label:"observaciones",style:{"max-width":"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(a,null,{default:l(()=>[e(P,{class:"my-card"},{default:l(()=>[e(D,null,{default:l(()=>[e(K,{onSubmit:te,class:"q-gutter-md"},{default:l(()=>[x("div",null,[e(N,{modelValue:j.value,"onUpdate:modelValue":o[7]||(o[7]=t=>j.value=t),type:"text",label:"Agregar Modelo"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(M,{class:"full-width",color:"primary",icon:"receipt",label:"PAGAR",onClick:B}),e(tl,{modelValue:p.value.state,"onUpdate:modelValue":o[10]||(o[10]=t=>p.value.state=t),position:"right",persistent:""},{default:l(()=>[e(P,{class:"my-card"},{default:l(()=>[e(D,null,{default:l(()=>[x("div",yl,"Articulo : "+c(p.value.body.ARTICULO),1),x("div",hl,"Descripcion : "+c(p.value.body.DESCRIPCION),1)]),_:1}),e(D,{class:"row"},{default:l(()=>[e(K,null,{default:l(()=>[x("div",gl,[e(N,{modelValue:p.value.body.CANTIDAD,"onUpdate:modelValue":o[8]||(o[8]=t=>p.value.body.CANTIDAD=t),type:"number",label:"Cantidad",style:{"max-width":"50%"}},null,8,["modelValue"]),e(N,{modelValue:p.value.body.CANTIDAD,"onUpdate:modelValue":o[9]||(o[9]=t=>p.value.body.CANTIDAD=t),type:"number",label:"Tarifa",style:{"max-width":"50%"}},null,8,["modelValue"])])]),_:1})]),_:1}),e(D,{class:"row justify-between"},{default:l(()=>[x("div",bl,"Precio : "+c(p.value.body.PRECIO),1),x("div",_l,"Total : "+c(p.value.body.TOTAL),1)]),_:1}),e(ge,{class:"row justify-between"},{default:l(()=>[e(M,{flat:"",icon:"delete",color:"negative"}),he(e(M,{flat:"",icon:"arrow_forward_ios",disable:p.value.body.CANTIDAD.length<=0},null,8,["disable"]),[[We]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Dl as default};
