import{u as U,a as E,r as p,o as r,g as c,f as i,e,Q as d,a1 as l,a0 as f,h as _,d as y,w as o,a3 as w,a2 as V,a4 as C,ak as S,al as D,am as I,an as R}from"./index.7472d83d.js";import{Q as P,a as B}from"./QSelect.9c578d5e.js";import{a as T,b as v,d as z,e as $,Q as F}from"./QList.29a048b6.js";import{Q as M,a as W,b as j}from"./QDrawer.674253bc.js";import{Q as G}from"./QCardSection.a4068b08.js";import{Q as H}from"./QCardActions.ba667a3f.js";import{Q as J}from"./QCard.18c8f449.js";import{C as K}from"./ClosePopup.36a74c4f.js";import{a as O}from"./auth.28094f72.js";import{u as X}from"./use-quasar.532a0fa7.js";const Y={class:"q-pa-sm transparent text-dark row items-center"},Z={class:"col"},ee={key:0,class:"col text-center fs-inc1 text-primary fw-sbold"},se={class:"text-center fs-inc1 text-primary fw-sbold"},te={class:"row"},fe={__name:"UserToolbar",setup(ae){const t=U(),b=t.session,g=E(),k=p({state:!1}),h=()=>{t.sessionDestroy(),g.replace("/auth")},Q=X();p([]);const m=p(!1),u=p({val:t.session,opts:[]}),A=async()=>{const n=await O.getResources(b.credentials.id);n.fail?console.log(n):(console.log(n),t.setModules(n.grouped_modules),t.setStores(n.stores),t.modulesLoaded=!0)},N=()=>{Q.loading.show({message:"Cambiando sucursal"}),t.session.store=u.value.val.store,t.setSession({...t.session,store:u.value.val.store}),console.log(t.session),window.location.reload(),Q.loading.hide()};return A(),(n,s)=>(r(),c(w,null,[i("div",Y,[e(d,{color:"primary",icon:"list",flat:"",dense:"",class:"q-mr-sm",onClick:s[0]||(s[0]=a=>m.value=!m.value)}),i("div",Z,[e(d,{class:"text-pink",flat:"",label:l(b).credentials.nick,onClick:s[1]||(s[1]=a=>l(g).push("/"))},null,8,["label"])]),l(t).stores.length==0?(r(),c("div",ee,f(l(b).store.name),1)):_("",!0),l(t).stores.length>1?(r(),y(P,{key:1,modelValue:u.value.val,"onUpdate:modelValue":[s[2]||(s[2]=a=>u.value.val=a),N],options:l(t).stores,"option-label":a=>a.store.name,borderless:"",color:"primary",dense:"",class:"text-center","options-selected-class":"text-primary text-bold"},{selected:o(()=>[i("div",se,f(u.value.val.store.name),1)]),_:1},8,["modelValue","options","option-label"])):_("",!0),s[7]||(s[7]=i("div",{class:"col text-right"},null,-1))]),e(j,{modelValue:m.value,"onUpdate:modelValue":s[5]||(s[5]=a=>m.value=a),width:300,breakpoint:500,bordered:"",class:R(l(Q).dark.isActive?"bg-grey-9":"bg-grey-3")},{default:o(()=>[e(M,{class:"fit text-bold text-dark"},{default:o(()=>[e(T,null,{default:o(()=>[i("div",te,[e(d,{color:"primary",icon:"home",flat:"",dense:"",class:"col",onClick:s[3]||(s[3]=a=>l(g).push("/"))}),e(v,{spaced:"",inset:"",vertical:"",dark:""}),e(d,{class:"col",color:"pink",icon:"logout","no-caps":"",flat:"",onClick:s[4]||(s[4]=a=>k.value.state=!0)})]),e(v),e(v,{spaced:"",inset:"",vertical:"",dark:""}),(r(!0),c(w,null,V(l(t).modules,(a,q)=>(r(),y(W,{key:q,"expand-separator":"",label:a.name,"content-inset-level":.5},{default:o(()=>[(r(!0),c(w,null,V(a.modules,(x,L)=>(r(),c("div",{key:L},[C((r(),y(z,{clickable:"",to:`/${x.path}`},{default:o(()=>[e($,null,{default:o(()=>[e(B,{class:"text-dark tex-bold"},{default:o(()=>[S(f(x.name),1)]),_:2},1024),e(B,{caption:""},{default:o(()=>[S(f(x.desc),1)]),_:2},1024)]),_:2},1024),e($,{avatar:""},{default:o(()=>[e(D,{flat:"",color:"transparent","text-color":"primary",icon:"arrow_forward"})]),_:1})]),_:2},1032,["to"])),[[I]]),e(v)]))),128))]),_:2},1032,["label"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","class"]),e(F,{modelValue:k.value.state,"onUpdate:modelValue":s[6]||(s[6]=a=>k.value.state=a),persistent:""},{default:o(()=>[e(J,null,{default:o(()=>[e(G,{class:"row items-center"},{default:o(()=>[e(D,{icon:"logout",color:"primary","text-color":"white"}),s[8]||(s[8]=i("span",{class:"q-ml-sm"},"Estas por cerrar sesion",-1))]),_:1}),e(H,{align:"right"},{default:o(()=>[C(e(d,{flat:"",label:"Nope!",color:"primary"},null,512),[[K]]),e(d,{flat:"",label:"Simon!",color:"primary",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{fe as _};
