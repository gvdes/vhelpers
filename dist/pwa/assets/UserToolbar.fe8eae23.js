import{u as U,a as E,r as p,o as r,g as u,f as i,e,Q as d,a1 as l,a0 as f,h as _,d as y,w as o,a3 as w,a4 as V,a5 as C,a6 as S,a7 as D,a8 as I,a9 as R}from"./index.afd768e7.js";import{Q as P,a as B}from"./QSelect.a3428ae8.js";import{Q as v,a as T,b as $,c as z}from"./QSeparator.ce112ec0.js";import{Q as F}from"./QExpansionItem.d295a512.js";import{Q as M}from"./QList.8bcc3c08.js";import{Q as W,a as j}from"./QDrawer.d1c9622e.js";import{Q as G,a as H}from"./QCard.3913e517.js";import{Q as J}from"./QCardActions.66eb3c12.js";import{C as K}from"./ClosePopup.171604ef.js";import{a as O}from"./auth.4d57eb79.js";import{u as X}from"./axios.694c069c.js";const Y={class:"q-pa-sm transparent text-dark row items-center"},Z={class:"col"},ee={key:0,class:"col text-center fs-inc1 text-primary fw-sbold"},se={class:"text-center fs-inc1 text-primary fw-sbold"},te={class:"row"},ve={__name:"UserToolbar",setup(ae){const t=U(),g=t.session,Q=E(),b=p({state:!1}),h=()=>{t.sessionDestroy(),Q.replace("/auth")},k=X();p([]);const m=p(!1),c=p({val:t.session,opts:[]}),A=async()=>{const n=await O.getResources(g.credentials.id);n.fail?console.log(n):(console.log(n),t.setModules(n.grouped_modules),t.setStores(n.stores),t.modulesLoaded=!0)},N=()=>{k.loading.show({message:"Cambiando sucursal"}),t.session.store=c.value.val.store,t.setSession({...t.session,store:c.value.val.store}),console.log(t.session),window.location.reload(),k.loading.hide()};return A(),(n,s)=>(r(),u(w,null,[i("div",Y,[e(d,{color:"primary",icon:"list",flat:"",dense:"",class:"q-mr-sm",onClick:s[0]||(s[0]=a=>m.value=!m.value)}),i("div",Z,[e(d,{class:"text-pink",flat:"",label:l(g).credentials.nick,onClick:s[1]||(s[1]=a=>l(Q).push("/"))},null,8,["label"])]),l(t).stores.length==0?(r(),u("div",ee,f(l(g).store.name),1)):_("",!0),l(t).stores.length>1?(r(),y(P,{key:1,modelValue:c.value.val,"onUpdate:modelValue":[s[2]||(s[2]=a=>c.value.val=a),N],options:l(t).stores,"option-label":a=>a.store.name,borderless:"",color:"primary",dense:"",class:"text-center","options-selected-class":"text-primary text-bold"},{selected:o(()=>[i("div",se,f(c.value.val.store.name),1)]),_:1},8,["modelValue","options","option-label"])):_("",!0),s[7]||(s[7]=i("div",{class:"col text-right"},null,-1))]),e(j,{modelValue:m.value,"onUpdate:modelValue":s[5]||(s[5]=a=>m.value=a),width:300,breakpoint:500,bordered:"",class:R(l(k).dark.isActive?"bg-grey-9":"bg-grey-3")},{default:o(()=>[e(W,{class:"fit text-bold text-dark"},{default:o(()=>[e(M,null,{default:o(()=>[i("div",te,[e(d,{color:"primary",icon:"home",flat:"",dense:"",class:"col",onClick:s[3]||(s[3]=a=>l(Q).push("/"))}),e(v,{spaced:"",inset:"",vertical:"",dark:""}),e(d,{class:"col",color:"pink",icon:"logout","no-caps":"",flat:"",onClick:s[4]||(s[4]=a=>b.value.state=!0)})]),e(v),e(v,{spaced:"",inset:"",vertical:"",dark:""}),(r(!0),u(w,null,V(l(t).modules,(a,q)=>(r(),y(F,{key:q,"expand-separator":"",label:a.name,"content-inset-level":.5},{default:o(()=>[(r(!0),u(w,null,V(a.modules,(x,L)=>(r(),u("div",{key:L},[C((r(),y(T,{clickable:"",to:`/${x.path}`},{default:o(()=>[e($,null,{default:o(()=>[e(B,{class:"text-dark tex-bold"},{default:o(()=>[S(f(x.name),1)]),_:2},1024),e(B,{caption:""},{default:o(()=>[S(f(x.desc),1)]),_:2},1024)]),_:2},1024),e($,{avatar:""},{default:o(()=>[e(D,{flat:"",color:"transparent","text-color":"primary",icon:"arrow_forward"})]),_:1})]),_:2},1032,["to"])),[[I]]),e(v)]))),128))]),_:2},1032,["label"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","class"]),e(z,{modelValue:b.value.state,"onUpdate:modelValue":s[6]||(s[6]=a=>b.value.state=a),persistent:""},{default:o(()=>[e(G,null,{default:o(()=>[e(H,{class:"row items-center"},{default:o(()=>[e(D,{icon:"logout",color:"primary","text-color":"white"}),s[8]||(s[8]=i("span",{class:"q-ml-sm"},"Estas por cerrar sesion",-1))]),_:1}),e(J,{align:"right"},{default:o(()=>[C(e(d,{flat:"",label:"Nope!",color:"primary"},null,512),[[K]]),e(d,{flat:"",label:"Simon!",color:"primary",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{ve as _};
