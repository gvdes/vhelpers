import{Q as m}from"./QSeparator.970ad44f.js";import{r as w,c as C,o as S,a as F,w as i,e as o,i as P,a3 as u,Y,Q,f as y,g as A,ax as W,ay as G,a4 as v,h as q,a$ as Z,a2 as ee}from"./index.d6535de1.js";import{Q as ke}from"./QToolbar.e7b8b60f.js";import{Q as Ve}from"./QHeader.d986479a.js";import{Q as O,a as M}from"./QCard.eab9b540.js";import{Q as k,a as J}from"./QSelect.6babb7a7.js";import{Q as we}from"./QForm.8c4b5b3d.js";import{Q as le}from"./QDialog.5e34c3f3.js";import{Q as K,a as T}from"./QItemSection.db0401dc.js";import{Q as H}from"./QRadio.4f224920.js";import{Q as D}from"./QInput.ae6dc5c4.js";import{Q as he,a as f}from"./QTr.ae457c7e.js";import{Q as _e}from"./QPopupEdit.e32fa753.js";import{Q as xe}from"./QTable.de8ccdc4.js";import{Q as Ce}from"./QCardActions.60a5f8a8.js";import{Q as Qe}from"./QPage.4498dc94.js";import{Q as Ue,a as Be}from"./QLayout.0f77cedd.js";import{C as ae}from"./ClosePopup.1d106147.js";import{u as Se}from"./VDB.6b3d0108.js";import{_ as Pe}from"./UserToolbar.19b8884d.js";import{i as N}from"./resoursesApi.a3328345.js";import{a as qe}from"./axios.d0e8637f.js";import{u as Ne}from"./use-quasar.505fcb9f.js";import"./jspdf.plugin.autotable.c08a6e5a.js";import{E as Ee}from"./exceljs.min.9e24d01d.js";import"./browser.94c942de.js";import"./QResizeObserver.36001cf2.js";import"./use-key-composition.3e547522.js";import"./uid.42677368.js";import"./position-engine.3b6f86a4.js";import"./rtl.b51694b1.js";import"./QCheckbox.c4301fab.js";import"./QList.bed8137d.js";import"./QLinearProgress.79a1d568.js";import"./axios.f1f32898.js";import"./_commonjsHelpers.88e99c8f.js";const Re=P("span",{class:"text-h6"},"Resurtido",-1),ze=P("div",{class:"text-h6 text-center"},"Impresora",-1),Le={class:"row"},je={key:0,class:"row"},Me={key:1,class:"row"},Te={key:2,class:"row"},$e={class:"row"},Ie=P("div",{class:"text-h6"},"Agrega una nota",-1),Cl={__name:"RequisitionLYT",setup(Fe){const p=Se(),g=Ne(),$=w({status:!1}),x=w({val:null,opts:[]}),E=w({val:null,opts:[{id:1,label:"Ubicaciones"},{id:2,label:"Categorias"}]}),r=w({state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}}),s=w({state:!1,seccion:{val:[],opts:[]},familias:{val:[],opts:[]},categorias:{val:[],opts:[]}}),I=w({val:20}),b=w({state:"percentage"}),V=w([]),R=w(null),h=w({state:!1,val:null,body:[]}),d=w({state:!1,val:[],opts:[],locaciones:{val:[]}}),U=w({columns:[{name:"codigo",required:!0,label:"Codigo",align:"left",sortable:!0,field:e=>e.code},{name:"description",label:"Descripcion",align:"left",sortable:!0,field:e=>e.description},{name:"Seccion",label:"Seccion",align:"left",sortable:!0,field:e=>e.categories.familia.seccion.name},{name:"Familia",label:"Familia",align:"left",sortable:!0,field:e=>e.categories.familia.name},{name:"Categoria",label:"Categoria",align:"left",sortable:!0,field:e=>e.categories.name},{name:"pieces",label:"PXC",align:"center",sortable:!0,field:e=>e.pieces},{name:"locations",label:"Ubicacion",align:"center",sortable:!0,field:e=>e.locations},{name:"cedis",label:"Ced CJ",align:"center",sortable:!0,field:e=>e.cedis},{name:"texcoco",label:"Tex CJ",align:"center",sortable:!0,field:e=>e.texcoco},{name:"brasil",label:"Bra CJ",align:"center",sortable:!0,field:e=>e.brasil},{name:"Sucursal",label:`${p.session.store.name}`,align:"center",sortable:!0,field:e=>e.sucursal},{name:"min",label:"Minimo",align:"center",sortable:!0,field:e=>e.min},{name:"max",label:"Maximo",align:"center",sortable:!0,field:e=>e.max},{name:"Percentge",label:`${p.session.store.name} % `,align:"center",sortable:!0,field:e=>e.percentage},{name:"required",label:"Solicitado CJ",align:"center",sortable:!0,field:e=>e.required},{name:"action",label:"Accion",align:"center"}],filter:"",visible:["codigo","description","Seccion","Familia","Categoria","pieces","cedis","texcoco","Sucursal","required","action"]}),oe=C(()=>r.value.all.filter(e=>e.deep==0)),X=C(()=>r.value.seccion.val.length>0?r.value.all.filter(e=>e.deep==1&&r.value.seccion.val.map(a=>a.id).includes(e.root)):r.value.all.filter(e=>e.deep==1)),te=C(()=>{if(r.value.seccion.val.length>0&&r.value.familias.val.length==0){let e=r.value.all.filter(a=>a.deep==1&&r.value.seccion.val.map(l=>l.id).includes(a.root)).map(a=>a.id);return r.value.all.filter(a=>a.deep==2&&e.includes(a.root))}else return r.value.familias.val.length>0?r.value.all.filter(e=>e.deep==2&&r.value.familias.val.map(a=>a.id).includes(e.root)):r.value.all.filter(e=>e.deep==2)}),ie=C(()=>r.value.seccion.val.length>0),se=C(()=>{if(d.value.val.length>0){let e=[];return d.value.opts.filter(a=>d.value.val.map(l=>l.id).includes(a.id)).forEach(a=>a.sections.forEach(l=>e.push(l))),e}else{let e=[];return d.value.opts.forEach(a=>a.sections.forEach(l=>e.push(l))),e}}),z=C(()=>V.value.map(e=>{let a=Math.round(Number(e.stocks.filter(n=>n.id==1).map(n=>n.pivot.stock))/Number(e.pieces)),l=Math.round(Number(e.stocks.filter(n=>n.id==2).map(n=>n.pivot.stock))/Number(e.pieces)),t=Math.round(Number(e.stocks.filter(n=>n.id==16).map(n=>n.pivot.stock))/Number(e.pieces)),c=Number(e.stocks.filter(n=>n.id==p.session.store.id_viz).map(n=>n.pivot.stock)),_=Math.round(Number(e.stocks.filter(n=>n.id==p.session.store.id_viz).map(n=>n.pivot.stock))*100/Number(e.pieces));return{id:e.id,name:e.name,code:e.code,cost:e.cost,description:e.description,categories:e.categories,pieces:e.pieces,min:Number(e.stocks.filter(n=>n.id==p.session.store.id_viz).map(n=>n.pivot.min)),max:Number(e.stocks.filter(n=>n.id==p.session.store.id_viz).map(n=>n.pivot.max)),cedis:a,texcoco:l,brasil:t,sucursal:c,percentage:_,required:e.required,locations:e.locations}}).filter(e=>{if(b.value.state=="percentage")return p.session.store.id_viz==1?e.texcoco>0&&e.percentage<=I.value.val:e.cedis+e.texcoco>0&&e.percentage<=I.value.val;if(b.value.state=="minmax")return p.session.store.id_viz==1?e.texcoco>0&&e.sucursal<=e.min&&e.min>0:e.cedis+e.texcoco>0&&e.sucursal<=e.min&&e.min>0;if(b.value.state=="query")return e})),B=C(()=>{if(E.value.val.id==2)return z.value;if(s.value.seccion.val.length==0&&s.value.familias.val.length==0&&s.value.categorias.val.length==0)return z.value;if(s.value.seccion.val.length>0&&s.value.familias.val.length==0&&s.value.categorias.val.length==0)return z.value.filter(e=>s.value.seccion.val.map(a=>a.id).includes(e.categories.familia.seccion.id));if(s.value.seccion.val.length>0&&s.value.familias.val.length>0&&s.value.categorias.val.length==0)return z.value.filter(e=>s.value.seccion.val.map(a=>a.id).includes(e.categories.familia.seccion.id)&&s.value.familias.val.map(a=>a.id).includes(e.categories.familia.id));if(s.value.seccion.val.length>0&&s.value.familias.val.length>0&&s.value.categorias.val.length>0)return z.value.filter(e=>s.value.seccion.val.map(a=>a.id).includes(e.categories.familia.seccion.id)&&s.value.familias.val.map(a=>a.id).includes(e.categories.familia.id)&&s.value.categorias.val.map(a=>a.id).includes(e.categories.id))}),ne=C(()=>s.value.seccion.val.length>0?s.value.familias.opts.filter(e=>s.value.seccion.val.map(a=>a.id).includes(e.root)):s.value.familias.opts),re=C(()=>s.value.familias.val.length>0?s.value.categorias.opts.filter(e=>s.value.familias.val.map(a=>a.id).includes(e.root)):s.value.categorias.opts),ue=async()=>{g.loading.show({message:"Obteniendo secciones"});const e=await N.getCedis();e.fail?console.log(e):(console.log(e),x.value.opts=e,g.loading.hide()),console.log(e)},de=async()=>{r.value={state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}},d.value={state:!1,val:[],opts:[],locaciones:{val:[]}};let e=p.session.store.id_viz,a=E.value.val.id;g.loading.show({message:"Obteniendo secciones"});const l=await N.getSeccion(e,{_type:a});l.fail?console.log(l):(console.log(l),l.message?g.notify({message:"No existe la categoria",type:"negative",position:"center"}):l.families?(r.value.all=l.families,r.value.state=!0):l.locations&&(d.value.state=!0,d.value.opts=l.locations,r.value.all=l.sections),g.loading.hide())},ce=async()=>{g.loading.show({message:"Obteniendo Reporte"});let e=p.session.store.id_viz,a={_workpoint_to:x.value.val.id,_workpoint_from:e,seccion:r.value.seccion.val.map(t=>t.id),familia:r.value.familias.val.map(t=>t.id),categoria:r.value.categories.val.map(t=>t.id)};const l=await N.reportProductsCategories(a);l.fail?console.log(l):(g.loading.hide(),console.log(l),V.value=l,L())},me=async()=>{g.loading.show({message:"Obteniendo Reporte"});let e=p.session.store.id_viz,a={_workpoint_to:x.value.val.id,_workpoint_from:e,celler:d.value.val.map(t=>t.id),locations:d.value.locaciones.val.map(t=>t.id),section:r.value.seccion.val.map(t=>t.id)};console.log(a);const l=await N.getProductsCompareLocation(a);console.log(l),l.fail?console.log(l):(g.loading.hide(),console.log(l),V.value=l,V.value.forEach(t=>{const c=t.categories.familia.seccion;c&&!s.value.seccion.opts.map(j=>j.id).includes(c.id)&&s.value.seccion.opts.push(c);const _=t.categories.familia;_&&!s.value.familias.opts.map(j=>j.id).includes(_.id)&&s.value.familias.opts.push(_);const n=t.categories;n&&!s.value.categorias.opts.map(j=>j.id).includes(n.id)&&s.value.categorias.opts.push(n)}),s.value.state=!0,L())},ve=(e,a)=>{const l=V.value.find(t=>t.id===e);console.log(l),l&&(l.required=a.value,a.set())},pe=async()=>{g.loading.show({message:"Creando Pedido"});let e={workpoint_from:p.session.store.id_viz,workpoint_to:x.value.val.id,products:B.value,notes:R.value,id_userviz:p.session.id,type:2};console.log(e);const a=await N.create(e);a.fail?console.log(a):(console.log(a),g.notify({message:`Se creo el pedido ${a.order.id}`,type:"positive",position:"center"}),V.value=[],R.value=[],X.value.val=[],d.value.val=[],r.value.val=[],g.loading.hide(),window.location.reload())},fe=e=>{console.log(e);let a=V.value.findIndex(l=>l.id===e.id);console.log(a),a>=0&&V.value.splice(a,1)},ge=async()=>{console.log("aqui imprimo");let e={products:B.value,from:p.session.store,ip_address:h.value.val.ip_address};const a=await N.preview(e);a.fail?console.log(a):(console.log(a),g.notify({message:"Impresion Correcta",type:"positive",position:"center"}),h.value.val=null,h.value.state=!1)},be=async()=>{const e=new Ee.Workbook,a=e.addWorksheet("Resurtido");console.log(),a.addTable({name:"Resurtido",ref:"A1",headerRow:!0,totalsRow:!1,style:{showRowStripes:!0},columns:[{name:"Codigo",filterButton:!0},{name:"Descripcion",filterButton:!0},{name:"Seccion",filterButton:!0},{name:"Familia",filterButton:!0},{name:"Categoria",filterButton:!0},{name:"PXC",filterButton:!0},{name:"Ubicacion",filterButton:!0},{name:"Cedis CJ",filterButton:!0},{name:"Texcoco CJ",filterButton:!0},{name:"Brasil CJ",filterButton:!0},{name:"Sucursal",filterButton:!0},{name:"MIN",filterButton:!0},{name:"MAX",filterButton:!0},{name:"Porcentaje",filterButton:!0},{name:"Solicitado",filterButton:!0}],rows:B.value.map(t=>[t.code,t.description,t.categories.familia.seccion.name,t.categories.familia.name,t.categories.name,t.pieces,t.locations.map(c=>c.path).join(", "),t.cedis,t.texcoco,t.brasil,t.sucursal,t.min,t.max,t.percentage,t.required])}),a.columns.forEach(t=>{let c=0;t.eachCell({includeEmpty:!0},_=>{const n=_.value?_.value.toString().length:10;n>c&&(c=n)}),t.width=c<10?10:c}),(async()=>{const t=await e.xlsx.writeBuffer(),c=new Blob([t],{type:"application/octet-stream"}),_=URL.createObjectURL(c),n=document.createElement("a");n.href=_,n.download="Resurtido.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n)})()},ye=async()=>{let e=p.session.store.id;console.log(e);try{let a=await qe.get(`/cashier/getPrinters/${e}`);a.status==200&&(h.value.body=a.data,console.log(a),h.value.state=!0)}catch(a){console.log(a),g.notify({message:"No se pudiron obtener las impresoras",type:"negative",position:"center",icon:"error"})}},L=async()=>{if(console.log(b.value.state),V.value.length>0)return b.value.state=="minmax"?V.value.forEach(e=>{let a=Math.round(Number(e.stocks.filter(t=>t.id==p.session.store.id_viz).map(t=>t.pivot.stock))/Number(e.pieces)),l=Math.round(Number(e.stocks.filter(t=>t.id==p.session.store.id_viz).map(t=>t.pivot.max))/Number(e.pieces));l-a>=1?e.required=Math.round(l-a):e.required=1}):V.value.forEach(e=>e.required=1)};return ue(),(e,a)=>(S(),F(Ue,{view:"hHh Lpr fFf"},{default:i(()=>[o(Ve,{class:"transparent text-dark",bordered:""},{default:i(()=>[o(Pe),o(m),o(ke,{class:"justify-between"},{default:i(()=>[P("div",null,[u("Helpers "),o(Y,{name:"navigate_next",color:"primary"}),u(),Re])]),_:1})]),_:1}),o(le,{modelValue:h.value.state,"onUpdate:modelValue":a[1]||(a[1]=l=>h.value.state=l)},{default:i(()=>[o(O,{class:"my-card"},{default:i(()=>[o(M,null,{default:i(()=>[ze]),_:1}),o(M,null,{default:i(()=>[o(we,{onSubmit:ge,class:"q-gutter-md"},{default:i(()=>[o(k,{dense:"","option-label":"name",modelValue:h.value.val,"onUpdate:modelValue":a[0]||(a[0]=l=>h.value.val=l),options:h.value.body,label:"Impresora",filled:"",autofocus:"",style:{width:"200px"}},null,8,["modelValue","options"]),P("div",null,[o(Q,{label:"Enviar",type:"submit",color:"primary",style:{width:"200px"},disable:h.value.val===null},null,8,["disable"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Be,null,{default:i(()=>[o(Qe,{padding:""},{default:i(()=>[P("div",Le,[o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(k,{class:"col",modelValue:x.value.val,"onUpdate:modelValue":a[2]||(a[2]=l=>x.value.val=l),options:x.value.opts,label:"Pedido Para","option-label":"name",filled:"",disable:x.value.val!=null,"option-disable":l=>l.id==y(p).session.store.id_viz},null,8,["modelValue","options","disable","option-disable"]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(k,{class:"col",modelValue:E.value.val,"onUpdate:modelValue":[a[3]||(a[3]=l=>E.value.val=l),de],options:E.value.opts,label:"Tipo",filled:"",disable:!x.value.val},null,8,["modelValue","options","disable"])]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),r.value.state?(S(),A("div",je,[o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(k,{dense:"",class:"col",modelValue:r.value.seccion.val,"onUpdate:modelValue":a[4]||(a[4]=l=>r.value.seccion.val=l),options:y(oe),label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(k,{dense:"",class:"col",modelValue:r.value.familias.val,"onUpdate:modelValue":a[5]||(a[5]=l=>r.value.familias.val=l),options:y(X),label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:r.value.seccion.val.length==0},{option:i(l=>[o(K,W(G(l.itemProps)),{default:i(()=>[o(T,null,{default:i(()=>[o(J,null,{default:i(()=>[u(v(l.opt.name),1)]),_:2},1024),o(J,{caption:""},{default:i(()=>[u(v(l.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(k,{dense:"",class:"col",modelValue:r.value.categories.val,"onUpdate:modelValue":a[6]||(a[6]=l=>r.value.categories.val=l),options:y(te),label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:r.value.familias.val.length==0},{option:i(l=>[o(K,W(G(l.itemProps)),{default:i(()=>[o(T,null,{default:i(()=>[o(J,null,{default:i(()=>[u(v(l.opt.name),1)]),_:2},1024),o(J,{caption:""},{default:i(()=>[u(v(l.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(Q,{color:"primary",icon:"send",onClick:ce,disable:!y(ie),flat:"",dense:"",rounded:""},null,8,["disable"])])):q("",!0),d.value.state?(S(),A("div",Me,[o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(k,{dense:"",class:"col",modelValue:r.value.seccion.val,"onUpdate:modelValue":a[7]||(a[7]=l=>r.value.seccion.val=l),options:r.value.all,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(k,{dense:"",class:"col",modelValue:d.value.val,"onUpdate:modelValue":a[8]||(a[8]=l=>d.value.val=l),options:d.value.opts,label:"Ubicacion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(k,{dense:"",class:"col",modelValue:d.value.locaciones.val,"onUpdate:modelValue":a[9]||(a[9]=l=>d.value.locaciones.val=l),options:y(se),label:"Locaciones","option-label":"name",filled:"",multiple:"","use-chips":"",disable:d.value.val.length==0},null,8,["modelValue","options","disable"]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(Q,{color:"primary",icon:"send",onClick:me,flat:"",dense:"",rounded:"",disable:d.value.val.length==0||d.value.locaciones.val.length==0},null,8,["disable"])])):q("",!0),o(m,{spaced:"",inset:"",vertical:"",dark:""}),s.value.state?(S(),A("div",Te,[o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(k,{dense:"",class:"col",modelValue:s.value.seccion.val,"onUpdate:modelValue":a[10]||(a[10]=l=>s.value.seccion.val=l),options:s.value.seccion.opts,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(k,{dense:"",class:"col",modelValue:s.value.familias.val,"onUpdate:modelValue":a[11]||(a[11]=l=>s.value.familias.val=l),options:y(ne),label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:s.value.seccion.val.length==0},null,8,["modelValue","options","disable"]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(k,{dense:"",class:"col",modelValue:s.value.categorias.val,"onUpdate:modelValue":a[12]||(a[12]=l=>s.value.categorias.val=l),options:y(re),label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:s.value.familias.val.length==0},null,8,["modelValue","options","disable"]),o(m,{spaced:"",inset:"",vertical:"",dark:""})])):q("",!0),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(O,{class:"my-card"},{default:i(()=>[o(M,null,{default:i(()=>[P("div",$e,[o(K,{class:"col"},{default:i(()=>[o(T,null,{default:i(()=>[o(H,{dense:"",modelValue:b.value.state,"onUpdate:modelValue":[a[13]||(a[13]=l=>b.value.state=l),L],val:"percentage",label:"Porcentaje"},null,8,["modelValue"])]),_:1}),b.value.state=="percentage"?(S(),F(T,{key:0,caption:""},{default:i(()=>[o(D,{dense:"",modelValue:I.value.val,"onUpdate:modelValue":a[14]||(a[14]=l=>I.value.val=l),type:"number",filled:"",label:"Porcentaje",disable:b.value.state=="minmax"},null,8,["modelValue","disable"])]),_:1})):q("",!0),o(T)]),_:1}),o(H,{dense:"",class:"col",modelValue:b.value.state,"onUpdate:modelValue":[a[15]||(a[15]=l=>b.value.state=l),L],val:"minmax",label:"Minimo y Maximo"},null,8,["modelValue"]),o(H,{dense:"",class:"col",modelValue:b.value.state,"onUpdate:modelValue":[a[16]||(a[16]=l=>b.value.state=l),L],val:"query",label:"Consultas"},null,8,["modelValue"])])]),_:1})]),_:1}),o(m,{spaced:"",inset:"",vertical:"",dark:""}),V.value.length>0?(S(),F(xe,{key:3,rows:y(B),columns:U.value.columns,separator:"cell",filter:U.value.filter,flat:"",bordered:"",class:"my-sticky-header-column-table","visible-columns":U.value.visible},{"top-right":i(()=>[o(D,{borderless:"",dense:"",debounce:"300",modelValue:U.value.filter,"onUpdate:modelValue":a[17]||(a[17]=l=>U.value.filter=l),placeholder:"Buscar"},{append:i(()=>[o(Y,{name:"search"})]),_:1},8,["modelValue"]),b.value.state!=="query"?(S(),F(Q,{key:0,color:"primary","icon-right":"send",flat:"",onClick:a[18]||(a[18]=l=>$.value.state=!$.value.state),disable:y(B).length==0},null,8,["disable"])):q("",!0),o(Q,{color:"primary",icon:"print",flat:"",onClick:ye,disable:y(B).length==0},null,8,["disable"]),o(Q,{color:"primary",icon:"download",flat:"",onClick:be,disable:y(B).length==0},null,8,["disable"]),o(k,{modelValue:U.value.visible,"onUpdate:modelValue":a[19]||(a[19]=l=>U.value.visible=l),multiple:"",outlined:"",dense:"","options-dense":"","display-value":y(g).lang.table.columns,"emit-value":"","map-options":"",options:U.value.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])]),body:i(l=>[o(he,{props:l},{default:i(()=>[o(f,{key:"codigo",props:l},{default:i(()=>[u(v(l.row.code),1)]),_:2},1032,["props"]),o(f,{key:"description",props:l},{default:i(()=>[u(v(l.row.description),1)]),_:2},1032,["props"]),o(f,{key:"Seccion",props:l},{default:i(()=>[u(v(l.row.categories.familia.seccion.name),1)]),_:2},1032,["props"]),o(f,{key:"Familia",props:l},{default:i(()=>[u(v(l.row.categories.familia.name),1)]),_:2},1032,["props"]),o(f,{key:"Categoria",props:l},{default:i(()=>[u(v(l.row.categories.name),1)]),_:2},1032,["props"]),o(f,{key:"pieces",props:l},{default:i(()=>[u(v(l.row.pieces),1)]),_:2},1032,["props"]),o(f,{key:"locations",props:l},{default:i(()=>{var t;return[u(v((t=l.row.locations)==null?void 0:t.map(c=>c.path).join(", ")),1)]}),_:2},1032,["props"]),o(f,{key:"cedis",props:l},{default:i(()=>[u(v(l.row.cedis),1)]),_:2},1032,["props"]),o(f,{key:"texcoco",props:l},{default:i(()=>[u(v(l.row.texcoco),1)]),_:2},1032,["props"]),o(f,{key:"brasil",props:l},{default:i(()=>[u(v(l.row.brasil),1)]),_:2},1032,["props"]),o(f,{key:"Sucursal",props:l},{default:i(()=>[u(v(l.row.sucursal),1)]),_:2},1032,["props"]),o(f,{key:"min",props:l},{default:i(()=>[u(v(l.row.min),1)]),_:2},1032,["props"]),o(f,{key:"max",props:l},{default:i(()=>[u(v(l.row.max),1)]),_:2},1032,["props"]),o(f,{key:"Percentge",props:l},{default:i(()=>[u(v(l.row.percentage)+" % ",1)]),_:2},1032,["props"]),o(f,{key:"required",props:l},{default:i(()=>[u(v(l.row.required)+" ",1),o(_e,{modelValue:l.row.required,"onUpdate:modelValue":t=>l.row.required=t},{default:i(t=>[o(D,{modelValue:t.value,"onUpdate:modelValue":c=>t.value=c,dense:"",autofocus:"",counter:"",onKeyup:Z(c=>ve(l.row.id,t),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),o(f,{key:"action",props:l},{default:i(()=>[o(Q,{color:"negative",icon:"delete",onClick:t=>fe(l.row),flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","visible-columns"])):q("",!0),o(le,{modelValue:$.value.state,"onUpdate:modelValue":a[23]||(a[23]=l=>$.value.state=l),persistent:""},{default:i(()=>[o(O,{style:{"min-width":"350px"}},{default:i(()=>[o(M,null,{default:i(()=>[Ie]),_:1}),o(M,{class:"q-pt-none"},{default:i(()=>[o(D,{dense:"",modelValue:R.value,"onUpdate:modelValue":a[20]||(a[20]=l=>R.value=l),autofocus:"",onKeyup:a[21]||(a[21]=Z(l=>e.prompt=!1,["enter"]))},null,8,["modelValue"])]),_:1}),o(Ce,{align:"right",class:"text-primary"},{default:i(()=>[ee(o(Q,{flat:"",label:"Cancelar",onClick:a[22]||(a[22]=l=>R.value=null)},null,512),[[ae]]),ee(o(Q,{flat:"",label:"Enviar Pedido",onClick:pe},null,512),[[ae]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{Cl as default};
