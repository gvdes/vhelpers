import{b as n}from"./QList.afdddd43.js";import{Q as y}from"./QHeader.72838204.js";import{u as b,a as h,aH as x,r as u,a$ as V,o as k,d as P,w as p,e as t,f as l,ak as S,S as L,a0 as A,a1 as B,Q as I}from"./index.a9a112a6.js";import{Q as C}from"./QToolbar.574b3ebc.js";import{Q as U}from"./QSelect.1e0417f3.js";import{Q as q}from"./QInput.a037e4fd.js";import{Q as F,a as H}from"./QLayout.c6dc08a5.js";import{_ as $}from"./UserToolbar.8919e01b.js";import{u as D}from"./use-quasar.bb3321c5.js";import"./dayjs.min.cbcf888d.js";import{u as N}from"./layoutStore.3975a7d9.js";import{a as f}from"./axios.39db32aa.js";import"./use-key-composition.38918a2a.js";import"./QResizeObserver.3e75f45c.js";import"./QScrollObserver.d28ac75c.js";import"./QDrawer.31d963c7.js";import"./QCardSection.8b2e34ee.js";import"./QCardActions.340d90fe.js";import"./QCard.432c7e9b.js";import"./ClosePopup.b92cb407.js";import"./auth.58dac777.js";import"./_commonjsHelpers.88e99c8f.js";var v={getPrints(i){return f.get(`/cashier/getPrinters/${i}`).then(o=>o.data).catch(o=>({fail:o}))},PrintAttention(i){return f.post("/prints/PrintAttention",i).then(o=>o.data).catch(o=>({fail:o}))}};const T={class:"row items-center"},j={class:"text-center"},R={class:"q-ml-lg q-mr-lg row"},z={class:"flex justify-center"},de={__name:"FileAttentionLYT",setup(i){const o=b();N(),h(),x();const a=D(),s=u({val:null,opts:[]}),m=u(1),g=async()=>{let r=o.session.store.id;console.log(r);const e=await v.getPrints(r);e.fail?console.log(e):(console.log(e),s.value.opts=e,console.log("Impresoras listas :)"))},_=async()=>{a.loading.show({message:"Imprimiendo"});let r={print:s.value.val.ip_address,staff:o.session.credentials.staff,amount:m.value};const e=await v.PrintAttention(r);e.fail?console.log(e):(console.log(e),a.loading.hide(),a.notify({type:"positive",icon:"check"}))},Q=()=>{a.localStorage.set("LUP",{wkp:o.session.store,printer:s.value.val})},d=a.localStorage.getItem("LUP");return d&&(s.value.val=d.printer),g(),(r,e)=>{const w=V("router-view");return k(),P(F,{view:"hHh Lpr fFf"},{default:p(()=>[t(y,{class:"transparent text-dark",bordered:""},{default:p(()=>[t($),t(n)]),_:1}),t(H,null,{default:p(()=>[t(C,{class:"justify-between"},{default:p(()=>[l("div",T,[e[2]||(e[2]=S(" Helpers ")),t(L,{name:"navigate_next",color:"primary",class:"q-mx-sm"}),e[3]||(e[3]=l("span",{class:"text-h6"},"Ficha Atencion ",-1))])]),_:1}),l("div",j,A(B(o).session.credentials.staff.complete_name),1),t(n,{spaced:"",inset:"",vertical:"",dark:""}),l("div",R,[t(U,{class:"col",modelValue:s.value.val,"onUpdate:modelValue":[e[0]||(e[0]=c=>s.value.val=c),Q],options:s.value.opts,label:"Impresora",filled:"","option-label":"name"},null,8,["modelValue","options"]),t(n,{spaced:"",inset:"",vertical:"",dark:""}),t(q,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=c=>m.value=c),type:"number",label:"Cantidad",filled:"",min:1},null,8,["modelValue"])]),t(n,{spaced:"",inset:"",vertical:"",dark:""}),l("div",z,[t(I,{rounded:"",flat:"",color:"primary",icon:"print",size:"xl",disabled:!s.value.val,onClick:_},null,8,["disabled"])]),t(w)]),_:1})]),_:1})}}};export{de as default};
