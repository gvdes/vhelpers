import{W as h,a as x,u as A,r as i,c as S,o as p,d as f,w as r,a4 as n,e as t,ae as c,Y as g,k as I,h as k,Q as B,f as b,a2 as E,aV as $,j as v,a3 as N}from"./index.4f1e6b8e.js";import{Q as O}from"./QBanner.d1eed7e8.js";import{Q as P}from"./QTable.518e2186.js";import{Q as R}from"./QSelect.892f55ae.js";import{Q as T}from"./QPage.8631fb96.js";import{C as D}from"./ClosePopup.6c60b3b0.js";import{d as L}from"./dayjs.min.cbcf888d.js";import"./axios.5ba2e0bd.js";import{o as H}from"./orderApi.ce184b27.js";import{u as U}from"./OrderStore.235660b3.js";import{u as j}from"./use-quasar.cb4b6b35.js";import"./QList.a6fb43f5.js";import"./QExpansionItem.2b7b0a36.js";import"./QDrawer.4fdf7e95.js";/* empty css                                                                         */import"./socket.168d2ba4.js";import"./QLinearProgress.f72e9ab7.js";import"./_commonjsHelpers.88e99c8f.js";import"./QResizeObserver.8e6a85ba.js";import"./QScrollObserver.47f50e70.js";const me={__name:"Warehouse",setup(W){h(),x();const l=U();l.setTitle("ALMACEN"),l.setshowLyt(!0),l.setShowEvent(!0);const m=j();A();const _=i({rowsPerPage:20}),s=i({state:!1}),d=i(null),w=new AudioContext,u=i({columns:[{name:"id",label:"FOLIO",field:e=>e.id,align:"left",sortable:!0},{name:"created",label:"Creado Por",field:e=>`${e.created_by.names} ${e.created_by.surname_pat} ${e.created_by.surname_mat}`,align:"left",sortable:!0},{name:"client",label:"CLIENTE",field:e=>e.name,align:"left",sortable:!0},{name:"status",label:"ESTADO",field:e=>{var a;return(a=e.status)==null?void 0:a.name},align:"center",classes:e=>`text-${Q.value[e.status.id-1]}`,sortable:!0},{name:"created",label:"HORA",field:e=>L(e.created_at).format("HH:mm:ss"),align:"center",sortable:!0}],filter:null}),Q=i(["grey-6","red-5","deep-orange-10","blue-4","blue-10","teal-4","teal-10","green-5","green-10","light-green-10"]),y=S(()=>l.orders.filter(e=>e._status>=3&&e._status<=10)),V=(e,a)=>{a._status>=5?(d.value=a.id,s.value.state=!s.value.state):m.notify({message:"Aun no se puede Imprimir la comanda :/",type:"negative",position:"top"})},C=async()=>{m.loading.show({message:"Reimprimiendo"});let e={_order:d.value,_printer:l.printers.val.id};const a=await H.reimpresion(e);a.fail?console.log(a):(s.value.state=!1,d.value=null,m.loading.hide())};return(e,a)=>(p(),f(T,{padding:""},{default:r(()=>[n(w).state!="running"?(p(),f(O,{key:0,"inline-actions":"",class:"text-white bg-red-11"},{avatar:r(()=>[t(c,{name:"volume_off",color:"white"})]),default:r(()=>[a[3]||(a[3]=g(" El permiso del sonido no esta habilitado! "))]),_:1})):I("",!0),t(P,{rows:y.value,columns:u.value.columns,filter:u.value.filter,onRowClick:V,pagination:_.value},{"top-right":r(()=>[t(k,{borderless:"",dense:"",debounce:"300",modelValue:u.value.filter,"onUpdate:modelValue":a[0]||(a[0]=o=>u.value.filter=o),placeholder:"Buscar"},{append:r(()=>[t(c,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","pagination"]),t(N,{modelValue:s.value.state,"onUpdate:modelValue":a[2]||(a[2]=o=>s.value.state=o),persistent:""},{default:r(()=>[t(B,null,{default:r(()=>[t(b,{class:"row items-center bg-primary text-white text-h6"},{default:r(()=>a[4]||(a[4]=[g(" Selecciona Impresora ")])),_:1}),t(b,{class:""},{default:r(()=>[t(R,{modelValue:n(l).printers.val,"onUpdate:modelValue":a[1]||(a[1]=o=>n(l).printers.val=o),options:n(l).printers.opts.filter(o=>o._type==2),label:"Impresoras","option-label":"name",filled:""},null,8,["modelValue","options"])]),_:1}),t(E,{align:"right"},{default:r(()=>[$(t(v,{flat:"",label:"Cancelar",color:"primary"},null,512),[[D]]),t(v,{flat:"",label:"Imprimir",color:"primary",disabled:!n(l).printers.val,onClick:C},null,8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{me as default};
