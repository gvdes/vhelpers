import{aH as S,a as h,u as x,r as i,c as I,o as d,d as f,w as o,a1 as n,e as a,S as c,ak as g,h as k,a4 as A,Q as b}from"./index.58dcc675.js";import{Q as B}from"./QBanner.3e298fc4.js";import{Q as D}from"./QInput.11c80820.js";import{Q as P}from"./QTable.510b10d3.js";import{Q as v}from"./QCardSection.32868f4f.js";import{Q as $}from"./QSelect.3cdc3928.js";import{Q as E}from"./QCardActions.575b453c.js";import{Q as O}from"./QCard.3c01dca0.js";import{Q as T}from"./QList.d0909d9b.js";import{Q as N}from"./QPage.9a5867f0.js";import{C as R}from"./ClosePopup.8cd31eef.js";import"./dayjs.min.cbcf888d.js";import"./axios.728b615c.js";import{o as L}from"./orderApi.d2e787ed.js";import{u as U}from"./OrderStore.d359adc3.js";import{u as q}from"./use-quasar.5e8d4942.js";import"./QExpansionItem.85bfd031.js";import"./QDrawer.07dbdf7f.js";/* empty css                                                                         */import"./socket.05630e21.js";import"./use-key-composition.b4996e1c.js";import"./QLinearProgress.e8da1d37.js";import"./QCheckbox.1cd5627a.js";import"./use-checkbox.ad84c5c4.js";import"./_commonjsHelpers.88e99c8f.js";import"./QResizeObserver.17f6c006.js";import"./QScrollObserver.76e993cf.js";const be={__name:"Warehouse",setup(F){S(),h();const r=U();r.setTitle("PEDIDOS"),r.setshowLyt(!0);const u=q();x();const Q=i({rowsPerPage:20}),s=i({state:!1}),p=i(null),_=new AudioContext,m=i({columns:[{name:"id",label:"FOLIO",field:t=>t.id,align:"left",sortable:!0},{name:"created",label:"Creado Por",field:t=>`${t.created_by.names} ${t.created_by.surname_pat} ${t.created_by.surname_mat}`,align:"left",sortable:!0},{name:"client",label:"CLIENTE",field:t=>t.name,align:"left",sortable:!0},{name:"status",label:"ESTADO",field:t=>{var e;return(e=t.status)==null?void 0:e.name},align:"center",classes:t=>`text-${w.value[t.status.id-1]}`,sortable:!0}],filter:null}),w=i(["grey-6","red-5","deep-orange-10","blue-4","blue-10","teal-4","teal-10","green-5","green-10","light-green-10"]),y=I(()=>r.orders.filter(t=>t._status>=3&&t._status<=10)),V=(t,e)=>{e._status>=5?(p.value=e.id,s.value.state=!s.value.state):u.notify({message:"Aun no se puede Imprimir la comanda :/",type:"negative",position:"top"})},C=async()=>{u.loading.show({message:"Reimprimiendo"});let t={_order:p.value,_printer:r.printers.val.id};const e=await L.reimpresion(t);e.fail?console.log(e):(s.value.state=!1,p.value=null,u.loading.hide())};return(t,e)=>(d(),f(N,{padding:""},{default:o(()=>[n(_).state!="running"?(d(),f(B,{key:0,"inline-actions":"",class:"text-white bg-red-11"},{avatar:o(()=>[a(c,{name:"volume_off",color:"white"})]),default:o(()=>[e[3]||(e[3]=g(" El permiso del sonido no esta habilitado! "))]),_:1})):k("",!0),a(P,{rows:y.value,columns:m.value.columns,filter:m.value.filter,onRowClick:V,pagination:Q.value},{"top-right":o(()=>[a(D,{borderless:"",dense:"",debounce:"300",modelValue:m.value.filter,"onUpdate:modelValue":e[0]||(e[0]=l=>m.value.filter=l),placeholder:"Buscar"},{append:o(()=>[a(c,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","pagination"]),a(T,{modelValue:s.value.state,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.state=l),persistent:""},{default:o(()=>[a(O,null,{default:o(()=>[a(v,{class:"row items-center bg-primary text-white text-h6"},{default:o(()=>e[4]||(e[4]=[g(" Selecciona Impresora ")])),_:1}),a(v,{class:""},{default:o(()=>[a($,{modelValue:n(r).printers.val,"onUpdate:modelValue":e[1]||(e[1]=l=>n(r).printers.val=l),options:n(r).printers.opts.filter(l=>l._type==2),label:"Impresoras","option-label":"name",filled:""},null,8,["modelValue","options"])]),_:1}),a(E,{align:"right"},{default:o(()=>[A(a(b,{flat:"",label:"Cancelar",color:"primary"},null,512),[[R]]),a(b,{flat:"",label:"Imprimir",color:"primary",disabled:!n(r).printers.val,onClick:C},null,8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{be as default};
