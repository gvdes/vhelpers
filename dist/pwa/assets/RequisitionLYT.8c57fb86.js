import{Q as p}from"./QSeparator.2ed53e30.js";import{r as y,c as Q,o as q,a as K,w as i,e as t,i as N,a3 as m,Y as G,Q as P,f as w,g as H,ax as Z,ay as ee,a4 as f,h as M,a$ as ae,a2 as le}from"./index.fbad9e40.js";import{Q as Ve}from"./QToolbar.03a0633b.js";import{Q as Ce}from"./QHeader.9d073b66.js";import{u as _e,Q as X,a as j}from"./use-quasar.aefc3bfd.js";import{Q as V,a as W,b as $,c as J}from"./QSelect.f3c5eacf.js";import{Q as xe}from"./QForm.7b0eac58.js";import{Q as te}from"./QDialog.076e111e.js";import{Q as oe}from"./QRadio.f6524e81.js";import{Q as D}from"./QInput.d0e45fb1.js";import{Q as Qe,a as b}from"./QTr.f4acd275.js";import{Q as Pe}from"./QPopupEdit.51f6622a.js";import{Q as Se}from"./QTable.a3285e8e.js";import{Q as Ue}from"./QCardActions.5b4bcc67.js";import{Q as Be}from"./QPage.4e7f95a9.js";import{Q as Ne,a as qe}from"./QLayout.ca1195e5.js";import{C as ie}from"./ClosePopup.e7ba3a08.js";import{u as ze}from"./VDB.e4db0a52.js";import{_ as Ee}from"./UserToolbar.bc5d7e22.js";import{v as B,a as Re}from"./axios.ae0a941c.js";import"./jspdf.plugin.autotable.59f81822.js";import{E as Le}from"./exceljs.min.9e24d01d.js";import"./browser.94c942de.js";import"./QResizeObserver.8021a2d6.js";import"./use-key-composition.ba86cd7b.js";import"./uid.42677368.js";import"./position-engine.fda72c89.js";import"./rtl.b51694b1.js";import"./QCheckbox.14ed1e48.js";import"./QList.02a6084b.js";import"./QLinearProgress.d0384775.js";import"./axios.f1f32898.js";import"./_commonjsHelpers.88e99c8f.js";var z={getSeccion(g,r){return B.post(`/resources/getSeccion/${g}`,r).then(c=>c.data).catch(c=>({fail:c}))},getCedis(){return B.get("/resources/getCedis").then(g=>g.data).catch(g=>({fail:g}))},getProductsCompare(g,r){return B.post(`/resources/getProductReport/${g}`,r).then(c=>c.data).catch(c=>({fail:c}))},getProductsCompareLocation(g){return B.post("/resources/getProductReportLocations",g).then(r=>r.data).catch(r=>({fail:r}))},create(g){return B.post("/resources/create",g).then(r=>r.data).catch(r=>({fail:r}))},preview(g){return B.post("/resources/preview",g).then(r=>r.data).catch(r=>({fail:r}))},reportProductsCategories(g){return B.post("/resources/reportProductsCategories",g).then(r=>r.data).catch(r=>({fail:r}))}};const Me=N("span",{class:"text-h6"},"Resurtido",-1),je=N("div",{class:"text-h6 text-center"},"Impresora",-1),$e={class:"row"},Te={key:0,class:"row"},Ie={key:1,class:"row"},Fe={key:2,class:"row"},Je={class:"row"},De=N("div",{class:"text-h6"},"Agrega una nota",-1),_a={__name:"RequisitionLYT",setup(g){const r=ze(),c=_e(),T=y({status:!1}),x=y({val:null,opts:[]}),E=y({val:null,opts:[{id:1,label:"Ubicaciones"},{id:2,label:"Categorias"}]}),u=y({state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}}),n=y({state:!1,seccion:{val:[],opts:[]},familias:{val:[],opts:[]},categorias:{val:[],opts:[]}}),I=y({val:20}),S=y({state:"percentage"}),C=y([]),R=y(null),_=y({state:!1,val:null,body:[]}),v=y({state:!1,val:[],opts:[],locaciones:{val:[]}}),F=y({columns:[{name:"codigo",label:"Codigo",align:"left",sortable:!0,field:e=>e.code},{name:"description",label:"Descripcion",align:"left",sortable:!0,field:e=>e.description},{name:"Seccion",label:"Seccion",align:"left",sortable:!0,field:e=>e.categories.familia.seccion.name},{name:"Familia",label:"Familia",align:"left",sortable:!0,field:e=>e.categories.familia.name},{name:"Categoria",label:"Categoria",align:"left",sortable:!0,field:e=>e.categories.name},{name:"pieces",label:"PXC",align:"center",sortable:!0,field:e=>e.pieces},{name:"locations",label:"Ubicacion",align:"center",sortable:!0,field:e=>e.locations},{name:"cedis",label:"Ced CJ",align:"center",sortable:!0,field:e=>e.cedis},{name:"texcoco",label:"Tex CJ",align:"center",sortable:!0,field:e=>e.texcoco},{name:"brasil",label:"Bra CJ",align:"center",sortable:!0,field:e=>e.brasil},{name:"Sucursal",label:`${r.session.store.name}`,align:"center",sortable:!0,field:e=>e.sucursal},{name:"min",label:"Minimo",align:"center",sortable:!0,field:e=>e.min},{name:"max",label:"Maximo",align:"center",sortable:!0,field:e=>e.max},{name:"Percentge",label:`${r.session.store.name} % `,align:"center",sortable:!0,field:e=>e.percentage},{name:"required",label:"Solicitado CJ",align:"center",sortable:!0,field:e=>e.required},{name:"action",align:"center"}],filter:""}),se=Q(()=>u.value.all.filter(e=>e.deep==0)),Y=Q(()=>u.value.seccion.val.length>0?u.value.all.filter(e=>e.deep==1&&u.value.seccion.val.map(l=>l.id).includes(e.root)):u.value.all.filter(e=>e.deep==1)),ne=Q(()=>{if(u.value.seccion.val.length>0&&u.value.familias.val.length==0){let e=u.value.all.filter(l=>l.deep==1&&u.value.seccion.val.map(a=>a.id).includes(l.root)).map(l=>l.id);return u.value.all.filter(l=>l.deep==2&&e.includes(l.root))}else return u.value.familias.val.length>0?u.value.all.filter(e=>e.deep==2&&u.value.familias.val.map(l=>l.id).includes(e.root)):u.value.all.filter(e=>e.deep==2)}),re=Q(()=>u.value.seccion.val.length>0),ue=Q(()=>{if(v.value.val.length>0){let e=[];return v.value.opts.filter(l=>v.value.val.map(a=>a.id).includes(l.id)).forEach(l=>l.sections.forEach(a=>e.push(a))),e}else{let e=[];return v.value.opts.forEach(l=>l.sections.forEach(a=>e.push(a))),e}}),L=Q(()=>C.value.map(e=>{let l=Math.round(Number(e.stocks.filter(s=>s.id==1).map(s=>s.pivot.stock))/Number(e.pieces)),a=Math.round(Number(e.stocks.filter(s=>s.id==2).map(s=>s.pivot.stock))/Number(e.pieces)),o=Math.round(Number(e.stocks.filter(s=>s.id==16).map(s=>s.pivot.stock))/Number(e.pieces)),d=Number(e.stocks.filter(s=>s.id==r.session.store.id_viz).map(s=>s.pivot.stock)),k=Math.round(Number(e.stocks.filter(s=>s.id==r.session.store.id_viz).map(s=>s.pivot.stock))*100/Number(e.pieces));return{id:e.id,name:e.name,code:e.code,cost:e.cost,description:e.description,categories:e.categories,pieces:e.pieces,min:Number(e.stocks.filter(s=>s.id==r.session.store.id_viz).map(s=>s.pivot.min)),max:Number(e.stocks.filter(s=>s.id==r.session.store.id_viz).map(s=>s.pivot.max)),cedis:l,texcoco:a,brasil:o,sucursal:d,percentage:k,required:e.required,locations:e.locations}}).filter(e=>{if(S.value.state=="percentage")return r.session.store.id_viz==1?e.texcoco>0&&e.percentage<=I.value.val:e.cedis+e.texcoco>0&&e.percentage<=I.value.val;if(S.value.state=="minmax")return r.session.store.id_viz==1?e.texcoco>0&&e.sucursal<=e.min&&e.min>0:e.cedis+e.texcoco>0&&e.sucursal<=e.min&&e.min>0})),U=Q(()=>{if(E.value.val.id==2)return L.value;if(n.value.seccion.val.length==0&&n.value.familias.val.length==0&&n.value.categorias.val.length==0)return L.value;if(n.value.seccion.val.length>0&&n.value.familias.val.length==0&&n.value.categorias.val.length==0)return L.value.filter(e=>n.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id));if(n.value.seccion.val.length>0&&n.value.familias.val.length>0&&n.value.categorias.val.length==0)return L.value.filter(e=>n.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id)&&n.value.familias.val.map(l=>l.id).includes(e.categories.familia.id));if(n.value.seccion.val.length>0&&n.value.familias.val.length>0&&n.value.categorias.val.length>0)return L.value.filter(e=>n.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id)&&n.value.familias.val.map(l=>l.id).includes(e.categories.familia.id)&&n.value.categorias.val.map(l=>l.id).includes(e.categories.id))}),ce=Q(()=>n.value.seccion.val.length>0?n.value.familias.opts.filter(e=>n.value.seccion.val.map(l=>l.id).includes(e.root)):n.value.familias.opts),de=Q(()=>n.value.familias.val.length>0?n.value.categorias.opts.filter(e=>n.value.familias.val.map(l=>l.id).includes(e.root)):n.value.categorias.opts),me=async()=>{c.loading.show({message:"Obteniendo secciones"});const e=await z.getCedis();e.fail?console.log(e):(console.log(e),x.value.opts=e,c.loading.hide()),console.log(e)},ve=async()=>{u.value={state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}},v.value={state:!1,val:[],opts:[],locaciones:{val:[]}};let e=r.session.store.id_viz,l=E.value.val.id;c.loading.show({message:"Obteniendo secciones"});const a=await z.getSeccion(e,{_type:l});a.fail?console.log(a):(console.log(a),a.message?c.notify({message:"No existe la categoria",type:"negative",position:"center"}):a.families?(u.value.all=a.families,u.value.state=!0):a.locations&&(v.value.state=!0,v.value.opts=a.locations,u.value.all=a.sections),c.loading.hide())},pe=async()=>{c.loading.show({message:"Obteniendo Reporte"});let e=r.session.store.id_viz,l={_workpoint_to:x.value.val.id,_workpoint_from:e,seccion:u.value.seccion.val.map(o=>o.id),familia:u.value.familias.val.map(o=>o.id),categoria:u.value.categories.val.map(o=>o.id)};const a=await z.reportProductsCategories(l);a.fail?console.log(a):(c.loading.hide(),console.log(a),C.value=a,C.value.forEach(o=>{let d=Math.round(Number(o.stocks.filter(s=>s.id==r.session.store.id_viz).map(s=>s.pivot.stock))/Number(o.pieces)),k=Math.round(Number(o.stocks.filter(s=>s.id==r.session.store.id_viz).map(s=>s.pivot.max))/Number(o.pieces));k-d>=1?o.required=Math.round(k-d):o.required=1}))},fe=async()=>{c.loading.show({message:"Obteniendo Reporte"});let e=r.session.store.id_viz,l={_workpoint_to:x.value.val.id,_workpoint_from:e,celler:v.value.val.map(o=>o.id),locations:v.value.locaciones.val.map(o=>o.id),section:u.value.seccion.val.map(o=>o.id)};console.log(l);const a=await z.getProductsCompareLocation(l);console.log(a),a.fail?console.log(a):(c.loading.hide(),console.log(a),C.value=a,C.value.forEach(o=>o.required=1),C.value.forEach(o=>{let d=Math.round(Number(o.stocks.filter(h=>h.id==r.session.store.id_viz).map(h=>h.pivot.stock))/Number(o.pieces)),k=Math.round(Number(o.stocks.filter(h=>h.id==r.session.store.id_viz).map(h=>h.pivot.max))/Number(o.pieces));k-d>=1?o.required=Math.round(k-d):o.required=1;const s=o.categories.familia.seccion;s&&!n.value.seccion.opts.map(h=>h.id).includes(s.id)&&n.value.seccion.opts.push(s);const O=o.categories.familia;O&&!n.value.familias.opts.map(h=>h.id).includes(O.id)&&n.value.familias.opts.push(O);const A=o.categories;A&&!n.value.categorias.opts.map(h=>h.id).includes(A.id)&&n.value.categorias.opts.push(A)}),n.value.state=!0)},ge=(e,l)=>{const a=C.value.find(o=>o.id===e);console.log(a),a&&(a.required=l.value,l.set())},be=async()=>{c.loading.show({message:"Creando Pedido"});let e={workpoint_from:r.session.store.id_viz,workpoint_to:x.value.val.id,products:U.value,notes:R.value,id_userviz:r.session.id,type:2};console.log(e);const l=await z.create(e);l.fail?console.log(l):(console.log(l),c.notify({message:`Se creo el pedido ${l.order.id}`,type:"positive",position:"center"}),C.value=[],R.value=[],Y.value.val=[],v.value.val=[],u.value.val=[],c.loading.hide(),window.location.reload())},he=e=>{console.log(e);let l=C.value.findIndex(a=>a.id===e.id);console.log(l),l>=0&&C.value.splice(l,1)},ke=async()=>{console.log("aqui imprimo");let e={products:U.value,from:r.session.store,ip_address:_.value.val.ip_address};const l=await z.preview(e);l.fail?console.log(l):(console.log(l),c.notify({message:"Impresion Correcta",type:"positive",position:"center"}),_.value.val=null,_.value.state=!1)},ye=async()=>{const e=new Le.Workbook,l=e.addWorksheet("Resurtido");console.log(),l.addTable({name:"Resurtido",ref:"A1",headerRow:!0,totalsRow:!1,style:{showRowStripes:!0},columns:[{name:"Codigo",filterButton:!0},{name:"Descripcion",filterButton:!0},{name:"Seccion",filterButton:!0},{name:"Familia",filterButton:!0},{name:"Categoria",filterButton:!0},{name:"PXC",filterButton:!0},{name:"Ubicacion",filterButton:!0},{name:"Cedis CJ",filterButton:!0},{name:"Texcoco CJ",filterButton:!0},{name:"Brasil CJ",filterButton:!0},{name:"Sucursal",filterButton:!0},{name:"MIN",filterButton:!0},{name:"MAX",filterButton:!0},{name:"Porcentaje",filterButton:!0},{name:"Solicitado",filterButton:!0}],rows:U.value.map(o=>[o.code,o.description,o.categories.familia.seccion.name,o.categories.familia.name,o.categories.name,o.pieces,o.locations.map(d=>d.path).join(", "),o.cedis,o.texcoco,o.brasil,o.sucursal,o.min,o.max,o.percentage,o.required])}),l.columns.forEach(o=>{let d=0;o.eachCell({includeEmpty:!0},k=>{const s=k.value?k.value.toString().length:10;s>d&&(d=s)}),o.width=d<10?10:d}),(async()=>{const o=await e.xlsx.writeBuffer(),d=new Blob([o],{type:"application/octet-stream"}),k=URL.createObjectURL(d),s=document.createElement("a");s.href=k,s.download="Resurtido.xlsx",document.body.appendChild(s),s.click(),document.body.removeChild(s)})()},we=async()=>{let e=r.session.store.id;console.log(e);try{let l=await Re.get(`/cashier/getPrinters/${e}`);l.status==200&&(_.value.body=l.data,console.log(l),_.value.state=!0)}catch(l){console.log(l),c.notify({message:"No se pudiron obtener las impresoras",type:"negative",position:"center",icon:"error"})}};return me(),(e,l)=>(q(),K(Ne,{view:"hHh Lpr fFf"},{default:i(()=>[t(Ce,{class:"transparent text-dark",bordered:""},{default:i(()=>[t(Ee),t(p),t(Ve,{class:"justify-between"},{default:i(()=>[N("div",null,[m("Helpers "),t(G,{name:"navigate_next",color:"primary"}),m(),Me])]),_:1})]),_:1}),t(te,{modelValue:_.value.state,"onUpdate:modelValue":l[1]||(l[1]=a=>_.value.state=a)},{default:i(()=>[t(X,{class:"my-card"},{default:i(()=>[t(j,null,{default:i(()=>[je]),_:1}),t(j,null,{default:i(()=>[t(xe,{onSubmit:ke,class:"q-gutter-md"},{default:i(()=>[t(V,{dense:"","option-label":"name",modelValue:_.value.val,"onUpdate:modelValue":l[0]||(l[0]=a=>_.value.val=a),options:_.value.body,label:"Impresora",filled:"",autofocus:"",style:{width:"200px"}},null,8,["modelValue","options"]),N("div",null,[t(P,{label:"Enviar",type:"submit",color:"primary",style:{width:"200px"},disable:_.value.val===null},null,8,["disable"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(qe,null,{default:i(()=>[t(Be,{padding:""},{default:i(()=>[N("div",$e,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(V,{class:"col",modelValue:x.value.val,"onUpdate:modelValue":l[2]||(l[2]=a=>x.value.val=a),options:x.value.opts,label:"Pedido Para","option-label":"name",filled:"",disable:x.value.val!=null,"option-disable":a=>a.id==w(r).session.store.id_viz},null,8,["modelValue","options","disable","option-disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(V,{class:"col",modelValue:E.value.val,"onUpdate:modelValue":[l[3]||(l[3]=a=>E.value.val=a),ve],options:E.value.opts,label:"Tipo",filled:"",disable:!x.value.val},null,8,["modelValue","options","disable"])]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),u.value.state?(q(),H("div",Te,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(V,{dense:"",class:"col",modelValue:u.value.seccion.val,"onUpdate:modelValue":l[4]||(l[4]=a=>u.value.seccion.val=a),options:w(se),label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(V,{dense:"",class:"col",modelValue:u.value.familias.val,"onUpdate:modelValue":l[5]||(l[5]=a=>u.value.familias.val=a),options:w(Y),label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:u.value.seccion.val.length==0},{option:i(a=>[t(W,Z(ee(a.itemProps)),{default:i(()=>[t($,null,{default:i(()=>[t(J,null,{default:i(()=>[m(f(a.opt.name),1)]),_:2},1024),t(J,{caption:""},{default:i(()=>[m(f(a.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(V,{dense:"",class:"col",modelValue:u.value.categories.val,"onUpdate:modelValue":l[6]||(l[6]=a=>u.value.categories.val=a),options:w(ne),label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:u.value.familias.val.length==0},{option:i(a=>[t(W,Z(ee(a.itemProps)),{default:i(()=>[t($,null,{default:i(()=>[t(J,null,{default:i(()=>[m(f(a.opt.name),1)]),_:2},1024),t(J,{caption:""},{default:i(()=>[m(f(a.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(P,{color:"primary",icon:"send",onClick:pe,disable:!w(re),flat:"",dense:"",rounded:""},null,8,["disable"])])):M("",!0),v.value.state?(q(),H("div",Ie,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(V,{dense:"",class:"col",modelValue:u.value.seccion.val,"onUpdate:modelValue":l[7]||(l[7]=a=>u.value.seccion.val=a),options:u.value.all,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(V,{dense:"",class:"col",modelValue:v.value.val,"onUpdate:modelValue":l[8]||(l[8]=a=>v.value.val=a),options:v.value.opts,label:"Ubicacion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(V,{dense:"",class:"col",modelValue:v.value.locaciones.val,"onUpdate:modelValue":l[9]||(l[9]=a=>v.value.locaciones.val=a),options:w(ue),label:"Locaciones","option-label":"name",filled:"",multiple:"","use-chips":"",disable:v.value.val.length==0},null,8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(P,{color:"primary",icon:"send",onClick:fe,flat:"",dense:"",rounded:"",disable:v.value.val.length==0||v.value.locaciones.val.length==0},null,8,["disable"])])):M("",!0),t(p,{spaced:"",inset:"",vertical:"",dark:""}),n.value.state?(q(),H("div",Fe,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(V,{dense:"",class:"col",modelValue:n.value.seccion.val,"onUpdate:modelValue":l[10]||(l[10]=a=>n.value.seccion.val=a),options:n.value.seccion.opts,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(V,{dense:"",class:"col",modelValue:n.value.familias.val,"onUpdate:modelValue":l[11]||(l[11]=a=>n.value.familias.val=a),options:w(ce),label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:n.value.seccion.val.length==0},null,8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(V,{dense:"",class:"col",modelValue:n.value.categorias.val,"onUpdate:modelValue":l[12]||(l[12]=a=>n.value.categorias.val=a),options:w(de),label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:n.value.familias.val.length==0},null,8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""})])):M("",!0),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(X,{class:"my-card"},{default:i(()=>[t(j,null,{default:i(()=>[N("div",Je,[t(W,{class:"col"},{default:i(()=>[t($,null,{default:i(()=>[t(oe,{dense:"",modelValue:S.value.state,"onUpdate:modelValue":l[13]||(l[13]=a=>S.value.state=a),val:"percentage",label:"Porcentaje"},null,8,["modelValue"])]),_:1}),S.value.state=="percentage"?(q(),K($,{key:0,caption:""},{default:i(()=>[t(D,{dense:"",modelValue:I.value.val,"onUpdate:modelValue":l[14]||(l[14]=a=>I.value.val=a),type:"number",filled:"",label:"Porcentaje",disable:S.value.state=="minmax"},null,8,["modelValue","disable"])]),_:1})):M("",!0),t($)]),_:1}),t(oe,{dense:"",class:"col",modelValue:S.value.state,"onUpdate:modelValue":l[15]||(l[15]=a=>S.value.state=a),val:"minmax",label:"Minimo y Maximo"},null,8,["modelValue"])])]),_:1})]),_:1}),t(p,{spaced:"",inset:"",vertical:"",dark:""}),C.value.length>0?(q(),K(Se,{key:3,rows:w(U),columns:F.value.columns,separator:"cell",filter:F.value.filter},{"top-right":i(()=>[t(D,{borderless:"",dense:"",debounce:"300",modelValue:F.value.filter,"onUpdate:modelValue":l[16]||(l[16]=a=>F.value.filter=a),placeholder:"Buscar"},{append:i(()=>[t(G,{name:"search"})]),_:1},8,["modelValue"]),t(P,{color:"primary","icon-right":"send",flat:"",onClick:l[17]||(l[17]=a=>T.value.state=!T.value.state),disable:w(U).length==0},null,8,["disable"]),t(P,{color:"primary",icon:"print",flat:"",onClick:we,disable:w(U).length==0},null,8,["disable"]),t(P,{color:"primary",icon:"download",flat:"",onClick:ye,disable:w(U).length==0},null,8,["disable"])]),body:i(a=>[t(Qe,{props:a},{default:i(()=>[t(b,{key:"codigo",props:a},{default:i(()=>[m(f(a.row.code),1)]),_:2},1032,["props"]),t(b,{key:"description",props:a},{default:i(()=>[m(f(a.row.description),1)]),_:2},1032,["props"]),t(b,{key:"Seccion",props:a},{default:i(()=>[m(f(a.row.categories.familia.seccion.name),1)]),_:2},1032,["props"]),t(b,{key:"Familia",props:a},{default:i(()=>[m(f(a.row.categories.familia.name),1)]),_:2},1032,["props"]),t(b,{key:"Categoria",props:a},{default:i(()=>[m(f(a.row.categories.name),1)]),_:2},1032,["props"]),t(b,{key:"pieces",props:a},{default:i(()=>[m(f(a.row.pieces),1)]),_:2},1032,["props"]),t(b,{key:"locations",props:a},{default:i(()=>{var o;return[m(f((o=a.row.locations)==null?void 0:o.map(d=>d.path).join(", ")),1)]}),_:2},1032,["props"]),t(b,{key:"cedis",props:a},{default:i(()=>[m(f(a.row.cedis),1)]),_:2},1032,["props"]),t(b,{key:"texcoco",props:a},{default:i(()=>[m(f(a.row.texcoco),1)]),_:2},1032,["props"]),t(b,{key:"brasil",props:a},{default:i(()=>[m(f(a.row.brasil),1)]),_:2},1032,["props"]),t(b,{key:"Sucursal",props:a},{default:i(()=>[m(f(a.row.sucursal),1)]),_:2},1032,["props"]),t(b,{key:"min",props:a},{default:i(()=>[m(f(a.row.min),1)]),_:2},1032,["props"]),t(b,{key:"max",props:a},{default:i(()=>[m(f(a.row.max),1)]),_:2},1032,["props"]),t(b,{key:"Percentge",props:a},{default:i(()=>[m(f(a.row.percentage)+" % ",1)]),_:2},1032,["props"]),t(b,{key:"required",props:a},{default:i(()=>[m(f(a.row.required)+" ",1),t(Pe,{modelValue:a.row.required,"onUpdate:modelValue":o=>a.row.required=o},{default:i(o=>[t(D,{modelValue:o.value,"onUpdate:modelValue":d=>o.value=d,dense:"",autofocus:"",counter:"",onKeyup:ae(d=>ge(a.row.id,o),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),t(b,{key:"action",props:a},{default:i(()=>[t(P,{color:"negative",icon:"delete",onClick:o=>he(a.row),flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])):M("",!0),t(te,{modelValue:T.value.state,"onUpdate:modelValue":l[21]||(l[21]=a=>T.value.state=a),persistent:""},{default:i(()=>[t(X,{style:{"min-width":"350px"}},{default:i(()=>[t(j,null,{default:i(()=>[De]),_:1}),t(j,{class:"q-pt-none"},{default:i(()=>[t(D,{dense:"",modelValue:R.value,"onUpdate:modelValue":l[18]||(l[18]=a=>R.value=a),autofocus:"",onKeyup:l[19]||(l[19]=ae(a=>e.prompt=!1,["enter"]))},null,8,["modelValue"])]),_:1}),t(Ue,{align:"right",class:"text-primary"},{default:i(()=>[le(t(P,{flat:"",label:"Cancelar",onClick:l[20]||(l[20]=a=>R.value=null)},null,512),[[ie]]),le(t(P,{flat:"",label:"Enviar Pedido",onClick:be},null,512),[[ie]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{_a as default};
