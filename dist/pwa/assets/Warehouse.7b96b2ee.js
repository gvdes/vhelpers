import{aI as h,a as S,u as x,r as i,c as A,o as p,d as f,w as r,a1 as n,e as a,S as c,al as g,h as I,a4 as B,Q as b}from"./index.a870245a.js";import{Q as E}from"./QBanner.28bb17ec.js";import{Q as $}from"./QInput.fd99f261.js";import{Q as k}from"./QTable.a6272314.js";import{Q as v}from"./QCardSection.91064c30.js";import{Q as N}from"./QSelect.8deb40ca.js";import{Q as O}from"./QCardActions.39598358.js";import{Q as P}from"./QCard.e9b66d19.js";import{Q as R}from"./QList.d78e7ab0.js";import{Q as T}from"./QPage.c4e74ae1.js";import{C as D}from"./ClosePopup.5155137b.js";import{d as L}from"./dayjs.min.cbcf888d.js";import"./axios.a3d47f46.js";import{o as H}from"./orderApi.fb008667.js";import{u as U}from"./OrderStore.294b1d3c.js";import{u as j}from"./use-quasar.f7e2bae4.js";import"./QDrawer.fcce590c.js";import"./QExpansionItem.1badb8bf.js";/* empty css                                                                         */import"./socket.05630e21.js";import"./use-key-composition.cb7b2501.js";import"./QLinearProgress.e1500b90.js";import"./QCheckbox.9bd5e2a2.js";import"./use-checkbox.cc0344f2.js";import"./_commonjsHelpers.88e99c8f.js";import"./QResizeObserver.a16ed928.js";import"./QScrollObserver.26750571.js";const ve={__name:"Warehouse",setup(q){h(),S();const o=U();o.setTitle("ALMACEN"),o.setshowLyt(!0),o.setShowEvent(!0);const u=j();x();const Q=i({rowsPerPage:20}),s=i({state:!1}),d=i(null),_=new AudioContext,m=i({columns:[{name:"id",label:"FOLIO",field:e=>e.id,align:"left",sortable:!0},{name:"created",label:"Creado Por",field:e=>`${e.created_by.names} ${e.created_by.surname_pat} ${e.created_by.surname_mat}`,align:"left",sortable:!0},{name:"client",label:"CLIENTE",field:e=>e.name,align:"left",sortable:!0},{name:"status",label:"ESTADO",field:e=>{var t;return(t=e.status)==null?void 0:t.name},align:"center",classes:e=>`text-${w.value[e.status.id-1]}`,sortable:!0},{name:"created",label:"HORA",field:e=>L(e.created_at).format("HH:mm:ss"),align:"center",sortable:!0}],filter:null}),w=i(["grey-6","red-5","deep-orange-10","blue-4","blue-10","teal-4","teal-10","green-5","green-10","light-green-10"]),y=A(()=>o.orders.filter(e=>e._status>=3&&e._status<=10)),C=(e,t)=>{t._status>=5?(d.value=t.id,s.value.state=!s.value.state):u.notify({message:"Aun no se puede Imprimir la comanda :/",type:"negative",position:"top"})},V=async()=>{u.loading.show({message:"Reimprimiendo"});let e={_order:d.value,_printer:o.printers.val.id};const t=await H.reimpresion(e);t.fail?console.log(t):(s.value.state=!1,d.value=null,u.loading.hide())};return(e,t)=>(p(),f(T,{padding:""},{default:r(()=>[n(_).state!="running"?(p(),f(E,{key:0,"inline-actions":"",class:"text-white bg-red-11"},{avatar:r(()=>[a(c,{name:"volume_off",color:"white"})]),default:r(()=>[t[3]||(t[3]=g(" El permiso del sonido no esta habilitado! "))]),_:1})):I("",!0),a(k,{rows:y.value,columns:m.value.columns,filter:m.value.filter,onRowClick:C,pagination:Q.value},{"top-right":r(()=>[a($,{borderless:"",dense:"",debounce:"300",modelValue:m.value.filter,"onUpdate:modelValue":t[0]||(t[0]=l=>m.value.filter=l),placeholder:"Buscar"},{append:r(()=>[a(c,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","pagination"]),a(R,{modelValue:s.value.state,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.state=l),persistent:""},{default:r(()=>[a(P,null,{default:r(()=>[a(v,{class:"row items-center bg-primary text-white text-h6"},{default:r(()=>t[4]||(t[4]=[g(" Selecciona Impresora ")])),_:1}),a(v,{class:""},{default:r(()=>[a(N,{modelValue:n(o).printers.val,"onUpdate:modelValue":t[1]||(t[1]=l=>n(o).printers.val=l),options:n(o).printers.opts.filter(l=>l._type==2),label:"Impresoras","option-label":"name",filled:""},null,8,["modelValue","options"])]),_:1}),a(O,{align:"right"},{default:r(()=>[B(a(b,{flat:"",label:"Cancelar",color:"primary"},null,512),[[D]]),a(b,{flat:"",label:"Imprimir",color:"primary",disabled:!n(o).printers.val,onClick:V},null,8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{ve as default};
