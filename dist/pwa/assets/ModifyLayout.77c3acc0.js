import{e as tt,Q as K}from"./position-engine.c2caf540.js";import{k,j as Ge,aL as lt,aM as at,aa as ot,Y as ve,z as st,aA as ut,ap as he,aB as ke,T as Oe,Z as De,av as Ne,aq as xe,O as it,r as h,c as V,L as nt,v as rt,R as dt,S as ct,y as vt,J as ft,a2 as te,m as mt,aN as Fe,aO as Ve,o as O,a as j,w as t,e,i as v,a3 as g,U as pt,Q as F,f as ae,g as ne,h as L,W as qe,a4 as T,a0 as bt,a1 as ht,a6 as yt}from"./index.c3d9833c.js";import{d as ye,a as gt,Q as oe}from"./QSelect.d5fe288c.js";import{Q as W}from"./QInput.f4f4ecad.js";import{Q as fe}from"./QForm.276d304b.js";import{Q as _t,a as G}from"./axios.11ef4378.js";import{_ as Ct,Q as St,a as ge,C as me}from"./UserToolbar.8d482447.js";import{Q,a as _,b as Z}from"./QItem.64d28008.js";import{Q as zt}from"./QTooltip.4b759cdd.js";import{Q as Me}from"./QList.e4b5ef88.js";import{u as Tt,e as wt,f as $e,i as At,Q as kt,a as B,b as P,c as Dt}from"./QLayout.4cd2a9f4.js";import{g as Qe,s as Ue}from"./touch.70a9dd44.js";import{Q as pe}from"./QDialog.49f1c047.js";import{Q as xt}from"./QCheckbox.485b8a7e.js";import{Q as Vt}from"./QPage.e3bb98d1.js";import{u as It}from"./VDB.c199a4fb.js";import{u as Et}from"./use-quasar.311b872a.js";import{a as Nt}from"./axios.629313f8.js";const Pt=[k("g",[k("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),k("clipPath",{id:"uil-hourglass-clip1"},[k("rect",{x:"15",y:"20",width:" 70",height:"25"},[k("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),k("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),k("clipPath",{id:"uil-hourglass-clip2"},[k("rect",{x:"15",y:"55",width:" 70",height:"25"},[k("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),k("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),k("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),k("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),k("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var Rt=Ge({name:"QSpinnerHourglass",props:lt,setup(f){const{cSize:r,classes:d}=at(f);return()=>k("svg",{class:d.value,width:r.value,height:r.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Pt)}});function Ie(f,r,d){const I=Ne(f);let l,u=I.left-r.event.x,n=I.top-r.event.y,a=Math.abs(u),m=Math.abs(n);const c=r.direction;c.horizontal===!0&&c.vertical!==!0?l=u<0?"left":"right":c.horizontal!==!0&&c.vertical===!0?l=n<0?"up":"down":c.up===!0&&n<0?(l="up",a>m&&(c.left===!0&&u<0?l="left":c.right===!0&&u>0&&(l="right"))):c.down===!0&&n>0?(l="down",a>m&&(c.left===!0&&u<0?l="left":c.right===!0&&u>0&&(l="right"))):c.left===!0&&u<0?(l="left",a<m&&(c.up===!0&&n<0?l="up":c.down===!0&&n>0&&(l="down"))):c.right===!0&&u>0&&(l="right",a<m&&(c.up===!0&&n<0?l="up":c.down===!0&&n>0&&(l="down")));let y=!1;if(l===void 0&&d===!1){if(r.event.isFirst===!0||r.event.lastDir===void 0)return{};l=r.event.lastDir,y=!0,l==="left"||l==="right"?(I.left-=u,a=0,u=0):(I.top-=n,m=0,n=0)}return{synthetic:y,payload:{evt:f,touch:r.event.mouse!==!0,mouse:r.event.mouse===!0,position:I,direction:l,isFirst:r.event.isFirst,isFinal:d===!0,duration:Date.now()-r.event.time,distance:{x:a,y:m},offset:{x:u,y:n},delta:{x:I.left-r.event.lastX,y:I.top-r.event.lastY}}}}let Ot=0;var Le=ot({name:"touch-pan",beforeMount(f,{value:r,modifiers:d}){if(d.mouse!==!0&&ve.has.touch!==!0)return;function I(u,n){d.mouse===!0&&n===!0?it(u):(d.stop===!0&&De(u),d.prevent===!0&&Oe(u))}const l={uid:"qvtp_"+Ot++,handler:r,modifiers:d,direction:Qe(d),noop:st,mouseStart(u){Ue(u,l)&&ut(u)&&(he(l,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),l.start(u,!0))},touchStart(u){if(Ue(u,l)){const n=u.target;he(l,"temp",[[n,"touchmove","move","notPassiveCapture"],[n,"touchcancel","end","passiveCapture"],[n,"touchend","end","passiveCapture"]]),l.start(u)}},start(u,n){if(ve.is.firefox===!0&&ke(f,!0),l.lastEvt=u,n===!0||d.stop===!0){if(l.direction.all!==!0&&(n!==!0||l.modifiers.mouseAllDir!==!0&&l.modifiers.mousealldir!==!0)){const c=u.type.indexOf("mouse")>-1?new MouseEvent(u.type,u):new TouchEvent(u.type,u);u.defaultPrevented===!0&&Oe(c),u.cancelBubble===!0&&De(c),Object.assign(c,{qKeyEvent:u.qKeyEvent,qClickOutside:u.qClickOutside,qAnchorHandled:u.qAnchorHandled,qClonedBy:u.qClonedBy===void 0?[l.uid]:u.qClonedBy.concat(l.uid)}),l.initialEvent={target:u.target,event:c}}De(u)}const{left:a,top:m}=Ne(u);l.event={x:a,y:m,time:Date.now(),mouse:n===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:a,lastY:m}},move(u){if(l.event===void 0)return;const n=Ne(u),a=n.left-l.event.x,m=n.top-l.event.y;if(a===0&&m===0)return;l.lastEvt=u;const c=l.event.mouse===!0,y=()=>{I(u,c);let R;d.preserveCursor!==!0&&d.preservecursor!==!0&&(R=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),c===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),tt(),l.styleCleanup=U=>{if(l.styleCleanup=void 0,R!==void 0&&(document.documentElement.style.cursor=R),document.body.classList.remove("non-selectable"),c===!0){const N=()=>{document.body.classList.remove("no-pointer-events--children")};U!==void 0?setTimeout(()=>{N(),U()},50):N()}else U!==void 0&&U()}};if(l.event.detected===!0){l.event.isFirst!==!0&&I(u,l.event.mouse);const{payload:R,synthetic:U}=Ie(u,l,!1);R!==void 0&&(l.handler(R)===!1?l.end(u):(l.styleCleanup===void 0&&l.event.isFirst===!0&&y(),l.event.lastX=R.position.left,l.event.lastY=R.position.top,l.event.lastDir=U===!0?void 0:R.direction,l.event.isFirst=!1));return}if(l.direction.all===!0||c===!0&&(l.modifiers.mouseAllDir===!0||l.modifiers.mousealldir===!0)){y(),l.event.detected=!0,l.move(u);return}const C=Math.abs(a),E=Math.abs(m);C!==E&&(l.direction.horizontal===!0&&C>E||l.direction.vertical===!0&&C<E||l.direction.up===!0&&C<E&&m<0||l.direction.down===!0&&C<E&&m>0||l.direction.left===!0&&C>E&&a<0||l.direction.right===!0&&C>E&&a>0?(l.event.detected=!0,l.move(u)):l.end(u,!0))},end(u,n){if(l.event!==void 0){if(xe(l,"temp"),ve.is.firefox===!0&&ke(f,!1),n===!0)l.styleCleanup!==void 0&&l.styleCleanup(),l.event.detected!==!0&&l.initialEvent!==void 0&&l.initialEvent.target.dispatchEvent(l.initialEvent.event);else if(l.event.detected===!0){l.event.isFirst===!0&&l.handler(Ie(u===void 0?l.lastEvt:u,l).payload);const{payload:a}=Ie(u===void 0?l.lastEvt:u,l,!0),m=()=>{l.handler(a)};l.styleCleanup!==void 0?l.styleCleanup(m):m()}l.event=void 0,l.initialEvent=void 0,l.lastEvt=void 0}}};if(f.__qtouchpan=l,d.mouse===!0){const u=d.mouseCapture===!0||d.mousecapture===!0?"Capture":"";he(l,"main",[[f,"mousedown","mouseStart",`passive${u}`]])}ve.has.touch===!0&&he(l,"main",[[f,"touchstart","touchStart",`passive${d.capture===!0?"Capture":""}`],[f,"touchmove","noop","notPassiveCapture"]])},updated(f,r){const d=f.__qtouchpan;d!==void 0&&(r.oldValue!==r.value&&(typeof value!="function"&&d.end(),d.handler=r.value),d.direction=Qe(r.modifiers))},beforeUnmount(f){const r=f.__qtouchpan;r!==void 0&&(r.event!==void 0&&r.end(),xe(r,"main"),xe(r,"temp"),ve.is.firefox===!0&&ke(f,!1),r.styleCleanup!==void 0&&r.styleCleanup(),delete f.__qtouchpan)}});const Be=["vertical","horizontal"],Ee={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},He={prevent:!0,mouse:!0,mouseAllDir:!0},je=f=>f>=250?50:Math.ceil(f/5);var Ft=Ge({name:"QScrollArea",props:{...Tt,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(f,{slots:r,emit:d}){const I=h(!1),l=h(!1),u=h(!1),n={vertical:h(0),horizontal:h(0)},a={vertical:{ref:h(null),position:h(0),size:h(0)},horizontal:{ref:h(null),position:h(0),size:h(0)}},{proxy:m}=mt(),c=wt(f,m.$q);let y=null,C;const E=h(null),R=V(()=>"q-scrollarea"+(c.value===!0?" q-scrollarea--dark":""));a.vertical.percentage=V(()=>{const i=a.vertical.size.value-n.vertical.value;if(i<=0)return 0;const p=ye(a.vertical.position.value/i,0,1);return Math.round(p*1e4)/1e4}),a.vertical.thumbHidden=V(()=>(f.visible===null?u.value:f.visible)!==!0&&I.value===!1&&l.value===!1||a.vertical.size.value<=n.vertical.value+1),a.vertical.thumbStart=V(()=>a.vertical.percentage.value*(n.vertical.value-a.vertical.thumbSize.value)),a.vertical.thumbSize=V(()=>Math.round(ye(n.vertical.value*n.vertical.value/a.vertical.size.value,je(n.vertical.value),n.vertical.value))),a.vertical.style=V(()=>({...f.thumbStyle,...f.verticalThumbStyle,top:`${a.vertical.thumbStart.value}px`,height:`${a.vertical.thumbSize.value}px`})),a.vertical.thumbClass=V(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(a.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),a.vertical.barClass=V(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(a.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),a.horizontal.percentage=V(()=>{const i=a.horizontal.size.value-n.horizontal.value;if(i<=0)return 0;const p=ye(Math.abs(a.horizontal.position.value)/i,0,1);return Math.round(p*1e4)/1e4}),a.horizontal.thumbHidden=V(()=>(f.visible===null?u.value:f.visible)!==!0&&I.value===!1&&l.value===!1||a.horizontal.size.value<=n.horizontal.value+1),a.horizontal.thumbStart=V(()=>a.horizontal.percentage.value*(n.horizontal.value-a.horizontal.thumbSize.value)),a.horizontal.thumbSize=V(()=>Math.round(ye(n.horizontal.value*n.horizontal.value/a.horizontal.size.value,je(n.horizontal.value),n.horizontal.value))),a.horizontal.style=V(()=>({...f.thumbStyle,...f.horizontalThumbStyle,[m.$q.lang.rtl===!0?"right":"left"]:`${a.horizontal.thumbStart.value}px`,width:`${a.horizontal.thumbSize.value}px`})),a.horizontal.thumbClass=V(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(a.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),a.horizontal.barClass=V(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(a.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const U=V(()=>a.vertical.thumbHidden.value===!0&&a.horizontal.thumbHidden.value===!0?f.contentStyle:f.contentActiveStyle),N=[[Le,i=>{H(i,"vertical")},void 0,{vertical:!0,...He}]],D=[[Le,i=>{H(i,"horizontal")},void 0,{horizontal:!0,...He}]];function ee(){const i={};return Be.forEach(p=>{const z=a[p];i[p+"Position"]=z.position.value,i[p+"Percentage"]=z.percentage.value,i[p+"Size"]=z.size.value,i[p+"ContainerSize"]=n[p].value}),i}const re=nt(()=>{const i=ee();i.ref=m,d("scroll",i)},0);function q(i,p,z){if(Be.includes(i)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(i==="vertical"?Fe:Ve)(E.value,p,z)}function le({height:i,width:p}){let z=!1;n.vertical.value!==i&&(n.vertical.value=i,z=!0),n.horizontal.value!==p&&(n.horizontal.value=p,z=!0),z===!0&&A()}function M({position:i}){let p=!1;a.vertical.position.value!==i.top&&(a.vertical.position.value=i.top,p=!0),a.horizontal.position.value!==i.left&&(a.horizontal.position.value=i.left,p=!0),p===!0&&A()}function de({height:i,width:p}){a.horizontal.size.value!==p&&(a.horizontal.size.value=p,A()),a.vertical.size.value!==i&&(a.vertical.size.value=i,A())}function H(i,p){const z=a[p];if(i.isFirst===!0){if(z.thumbHidden.value===!0)return;C=z.position.value,l.value=!0}else if(l.value!==!0)return;i.isFinal===!0&&(l.value=!1);const J=Ee[p],ue=n[p].value,ze=(z.size.value-ue)/(ue-z.thumbSize.value),Te=i.distance[J.dist],we=C+(i.direction===J.dir?1:-1)*Te*ze;be(we,p)}function $(i,p){const z=a[p];if(z.thumbHidden.value!==!0){const J=i[Ee[p].offset];if(J<z.thumbStart.value||J>z.thumbStart.value+z.thumbSize.value){const ue=J-z.thumbSize.value/2;be(ue/n[p].value*z.size.value,p)}z.ref.value!==null&&z.ref.value.dispatchEvent(new MouseEvent(i.type,i))}}function x(i){$(i,"vertical")}function _e(i){$(i,"horizontal")}function A(){I.value=!0,y!==null&&clearTimeout(y),y=setTimeout(()=>{y=null,I.value=!1},f.delay),f.onScroll!==void 0&&re()}function be(i,p){E.value[Ee[p].scroll]=i}function Ce(){u.value=!0}function Se(){u.value=!1}let se=null;return rt(()=>m.$q.lang.rtl,i=>{E.value!==null&&Ve(E.value,Math.abs(a.horizontal.position.value)*(i===!0?-1:1))}),dt(()=>{se={top:a.vertical.position.value,left:a.horizontal.position.value}}),ct(()=>{if(se===null)return;const i=E.value;i!==null&&(Ve(i,se.left),Fe(i,se.top))}),vt(re.cancel),Object.assign(m,{getScrollTarget:()=>E.value,getScroll:ee,getScrollPosition:()=>({top:a.vertical.position.value,left:a.horizontal.position.value}),getScrollPercentage:()=>({top:a.vertical.percentage.value,left:a.horizontal.percentage.value}),setScrollPosition:q,setScrollPercentage(i,p,z){q(i,p*(a[i].size.value-n[i].value)*(i==="horizontal"&&m.$q.lang.rtl===!0?-1:1),z)}}),()=>k("div",{class:R.value,onMouseenter:Ce,onMouseleave:Se},[k("div",{ref:E,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:f.tabindex!==void 0?f.tabindex:void 0},[k("div",{class:"q-scrollarea__content absolute",style:U.value},ft(r.default,[k($e,{debounce:0,onResize:de})])),k(At,{axis:"both",onScroll:M})]),k($e,{debounce:0,onResize:le}),k("div",{class:a.vertical.barClass.value,style:[f.barStyle,f.verticalBarStyle],"aria-hidden":"true",onMousedown:x}),k("div",{class:a.horizontal.barClass.value,style:[f.barStyle,f.horizontalBarStyle],"aria-hidden":"true",onMousedown:_e}),te(k("div",{ref:a.vertical.ref,class:a.vertical.thumbClass.value,style:a.vertical.style.value,"aria-hidden":"true"}),N),te(k("div",{ref:a.horizontal.ref,class:a.horizontal.thumbClass.value,style:a.horizontal.style.value,"aria-hidden":"true"}),D)])}});const qt=v("span",{class:"text-h6"},"TICKETS",-1),Mt=v("div",{class:"q-pa-md bg-grey-2 text-primary"},"Buscar Folio",-1),$t={key:0,class:"text-right"},Qt={class:"row justify-center"},Ut={key:1},Lt={key:0},Bt={class:"text-h6"},Ht={class:"text-subtitle2"},jt={class:"row justify-between"},Gt={class:"text-subtitle2"},Yt={class:"text-subtitle2"},Xt={class:"text-h6"},Kt={class:"text-subtitle2"},Jt={class:"row justify-between"},Wt={class:"text-subtitle2"},Zt={class:"text-subtitle2"},el=v("div",{class:"text-h5"},"Se cambiara el cliente a:",-1),tl={class:"text-h6 text-center text-bold"},ll=v("div",{class:"q-ml-sm text-center"},"Desea recalcular el ticket ?",-1),al={class:"bg-primary row items-center justify-between q-pa-md text-white"},ol=v("div",{class:"fs-dec3"},"TICKET",-1),sl={class:"text-h4"},ul={class:"text-center"},il=v("div",{class:"fs-dec3"},"Total Anterior",-1),nl={class:"fw-bold text-h6"},rl={class:"text-right"},dl=v("div",{class:"fs-dec3"},"Total Actual",-1),cl={class:"fw-bold text-h4"},vl={class:"row items-center"},fl=v("div",{class:"col-3"},"Efectivo",-1),ml={class:"row"},pl={class:"row items-center"},bl=v("div",{class:"col-3"},"No. Vale",-1),hl={key:0,class:"col-3 bg-blue-grey-2"},yl={class:"fs-dec3 row items-center justify-end q-pa-xs text-black"},gl={class:"bg-deep-purple-3 row items-center justify-between q-pa-md text-black"},_l=v("div",{class:"fs-dec3"},"Cambio",-1),Cl={class:"text-h5"},Sl={key:0,class:"text-center"},zl=v("div",{class:"text-h6 text-center"},"Impresora",-1),Ul={__name:"ModifyLayout",setup(f){const r=It(),d=Et(),I=h(!1),l=r.series,u=h(null),n=h(!1),a=h(null),m=h(""),c=h({state:!1,body:null}),y=h({state:!1,body:null}),C=h({val:null,body:null}),E=h(!1),R=h(null),U=h(null),N=h({state:!1,body:null}),D=h({state:!1,body:null,account:0}),ee=h({state:!1,body:null}),re=h(null),q=h(null),le=h({val:null,opts:["SI","NO"]}),M=h({prc:null,body:null}),de=h(0),H=h(""),$=h(null),x=h({EFE:0,DIG:{id:null,val:0}}),_e=[{id:"TBA",desc:"TARJETA C/D BANCOMER"},{id:"TSA",desc:"TARJETA C/D SANTANDER"},{id:"TDB",desc:"TRA/DEP BANCOMER"},{id:"TDA",desc:"TRA/DEP Santander"},{id:"TDS",desc:"TRA/DEP Scotiabank"},{id:"C30",desc:"CREDITO"}],A=h(null),be=["Devolucion","Modificacion","Reimpresion"],Ce=V(()=>a.value&&m.value.length),Se=V(()=>y.value.body.product),se=V(()=>C.value.val&&(A.value=="Devolucion"&&H.value.length>10||A.value=="Reimpresion")||A.value=="Modificacion"),i=V(()=>Number.parseFloat(x.value.DIG.val)+Number.parseFloat(x.value.EFE)+Number.parseFloat(de.value)-q.value),p=V(()=>!!(Number.parseFloat(x.value.DIG.val)&&Number.parseFloat(x.value.DIG.val)>q.value&&Number.parseFloat(x.value.EFE)==0)),z=async()=>{let S=r.session.store.id;console.log(S);try{let s=await Nt.get(`/cashier/getPrinters/${S}`);s.status==200&&(C.value.body=s.data,console.log("Impresoras listas :)"))}catch(s){console.log(s),d.notify({message:"No se pudiron obtener las impresoras",type:"negative",position:"center",icon:"error"})}},J=async()=>{c.value.body=null;let S=a.value,s=m.value,w=`http://${r.session.store.ip}/access/public/modify/getTicket?serie=${S}&folio=${s}`;G.get(w).then(b=>{c.value.state=!0,c.value.body=b.data}).catch(b=>{console.log(b.response.data.message),d.notify({html:!0,message:b.response.data.message,color:"negative",position:"center"})})},ue=async()=>{let S=r.session.store.ip,s=`${r.session.name} - ${r.session.store.alias}`;if(A.value=="Devolucion"){$.value=!0;let o={type:A.value,serie:a.value,folio:m.value,mot:H.value,create:s,print:C.value.val.ip_address};console.log(o);let w=`http://${S}/access/public/modify/newmod`;G.post(w,o).then(b=>{c.value.state=!1,console.log(b),b.status==200?d.notify({html:!0,message:b.data.original.mssg,color:"positive",position:"center"}):d.notify({html:!0,message:b.data.original.message,color:"negative",position:"center"}),A.value=null,H.value="",C.value.val=null,a.value=null,m.value="",$.value=!1}).catch(b=>{console.log(b.response.data.original.message),$.value=!1,d.notify({html:!0,message:b.response.data.original.message,color:"negative",position:"center"}),c.value.state=!1,A.value=null,H.value="",C.value.val=null,a.value=null,m.value="",$.value=!1})}else if(A.value=="Reimpresion"){console.log(C.value.val),$.value=!0;let o={type:A.value,serie:a.value,folio:m.value,print:C.value.val.ip_address},w=`http://${S}/access/public/modify/newmod`;G.post(w,o).then(b=>{c.value.state=!1,console.log(b),A.value=null,C.value.val=null,a.value=null,m.value="",$.value=!1}).catch(b=>b)}else if(A.value=="Modificacion"){console.log("modificado");let o={type:A.value,serie:a.value,folio:m.value};$.value=!0;let w=`http://${S}/access/public/modify/newmod`;G.post(w,o).then(b=>{console.log(b.data),y.value.state=!0,c.value.state=!1,y.value.body=b.data,q.value=Number(b.data.ticket.total),u.value=b.data.ticket.codcli,U.value=b.data.ticket.observacion,$.value=!1}).catch(b=>{console.log(b.response.data.message),$.value=!1,d.notify({html:!0,message:b.response.data.message,color:"negative",position:"center"})})}},ze=async()=>{console.log("cambio de cliente");let S=u.value;console.log(S);let o=`http://${r.session.store.ip}/access/public/modify/getClient?client=${S}`;G.get(o).then(w=>{console.log(w.data),ee.value.body=w.data,y.value.body.ticket.cliente=w.data.NOFCLI,ee.value.state=!0}).catch(w=>{console.log(w.response.data),d.notify({html:!0,message:w.response.data,color:"negative",position:"center"})})},Te=S=>{console.log(`Mostrando Articulo ${S.ARTICULO}`),N.value.state=!0,N.value.body=S},we=async()=>{console.log("Buscando Producto Y propiedades");let S={product:R.value,price:u.value};if(y.value.body.product.findIndex(o=>o.ARTICULO==R.value)==-1){let w=`http://${r.session.store.ip}/access/public/modify/getProduct`;G.get(w,{params:S}).then(b=>{console.log(b.data),D.value.body=b.data,D.value.state=!0}).catch(b=>{console.log(b.response.data),d.notify({html:!0,message:b.response.data,color:"negative",position:"center"})})}else d.notify({html:!0,message:`El productos ${R.value} ya esta en el ticket`,color:"negative",position:"center"})},Ye=()=>{n.value=!0},Xe=()=>{console.log("Se eliminara el articulo");let S=N.value.body.ARTICULO,s=y.value.body.product.findIndex(o=>o.ARTICULO==S);console.log(s),y.value.body.product.splice(s,1),N.value.state=!1,q.value=y.value.body.product.reduce((o,w)=>o+Number(w.CANTIDAD)*Number(w.PRECIO),0)},Ke=()=>{let S={ARTICULO:D.value.body.CODART,DESCRIPCION:D.value.body.DESART,CANTIDAD:D.value.account,PRECIO:D.value.body.PRELTA,TOTAL:D.value.account*D.value.body.PRELTA};y.value.body.product.push(S),q.value=y.value.body.product.reduce((s,o)=>s+Number(o.CANTIDAD)*Number(o.PRECIO),0),D.value.account=0,R.value=null},Je=()=>{console.log("recalculando ticket");let S=y.value.body.product,o={cliente:u.value,productos:S},b=`http://${r.session.store.ip}/access/public/modify/getPrices`;G.get(b,{params:o}).then(Y=>{console.log(Y.data),re.value=Y.data,re.value.forEach(ie=>{let X=y.value.body.product.findIndex(Ae=>Ae.ARTICULO==ie.CODART);y.value.body.product[X].PRECIO=ie.PRELTA}),q.value=y.value.body.product.reduce((ie,X)=>ie+Number(X.CANTIDAD)*Number(X.PRECIO),0),d.notify({html:!0,message:"Total cambiado",color:"positive",position:"center"})}).catch(Y=>{console.log(Y.response.data),d.notify({html:!0,message:Y.response.data,color:"negative",position:"center"})})},We=()=>{q.value=y.value.body.product.reduce((S,s)=>S+Number(s.CANTIDAD)*Number(s.PRECIO),0)},Ze=async()=>{if(le.value.val=="SI"){console.log("Buscando vales");let s=`http://${r.session.store.ip}/access/public/modify/vales?price=${u.value}`;G.get(s).then(o=>{console.log(o.data),M.value.body=o.data}).catch(o=>{console.log(o.response.data),d.notify({html:!0,message:o.response.data,color:"negative",position:"center"})})}else console.log("No se buscan vales"),M.value.body=null,de.value=0},Pe=()=>E.value=!0,et=async()=>{let S=r.session.store.ip,s=`${r.session.name} - ${r.session.store.alias}`;console.log("Realizando proceso de modificacion de tickeet");let o={type:A.value,serie:a.value,folio:m.value,mot:H.value,create:s,print:C.value.val.ip_address},w={serdev:a.value,foldev:m.value,fdp:{efedig:x.value,vale:M.value.prc},total:q.value,create:s,productos:y.value.body.product,print:C.value.val.ip_address,cliente:u.value};console.log(M.value.prc),console.log(w);let b=`http://${S}/access/public/modify/modificacion`;G.post(b,o).then(Y=>{c.value.state=!1,console.log(Y),A.value=null,H.value="",m.value="",E.value=!1,n.value=!1,y.value.state=!1,y.value.body=null,d.notify({html:!0,message:Y.data.mssg,color:"positive",position:"center"});let ie=`http://${S}/access/public/modify/nwtck`;G.post(ie,w).then(X=>{if(d.notify({html:!0,message:X.data.mssg,color:"positive",position:"center"}),I.value==!0){let Ae=`http://${S}/access/public/modify/retirada`,Re={nota:X.data.mssg,retiro:i.value,serdev:a.value,print:C.value.val.ip_address,create:s};console.log(Re),G.post(Ae,Re).then(ce=>{console.log(ce),d.notify({html:!0,message:ce.data.mssg,color:"positive",postion:"center"}),C.value.val=null,a.value=null,I.value=!1,x.value={EFE:0,DIG:{id:null,val:0}},M.value={prc:null,body:null}}).catch(ce=>{console.log(ce),d.notify({html:!0,message:ce.data,color:"negative",position:"center"})})}}).catch(X=>{console.log(X),d.notify({html:!0,message:X.data,color:"negative",position:"center"})})}).catch(Y=>{d.notify({html:!0,message:Y.data.mssg,color:"negative",position:"center"})})};return z(),(S,s)=>(O(),j(kt,{view:"hHh Lpr fFf"},{default:t(()=>[e(St,{class:"transparent text-dark",bordered:""},{default:t(()=>[e(Ct),e(K),e(_t,{class:"justify-between"},{default:t(()=>[v("div",null,[g("Helpers "),e(pt,{name:"navigate_next",color:"primary"}),g(),qt]),e(F,{color:"primary",icon:"add"},{default:t(()=>[e(gt,null,{default:t(()=>[Mt,e(K),e(fe,{dense:"",onSubmit:J,class:"q-gutter-md q-pa-md"},{default:t(()=>[e(oe,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),options:ae(l),label:"Serie",autofocus:""},null,8,["modelValue","options"]),e(W,{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=o=>m.value=o),type:"number",label:"Folio"},null,8,["modelValue"]),ae(Ce)?(O(),ne("div",$t,[e(F,{type:"submit",color:"primary",icon:"search"})])):L("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Dt,null,{default:t(()=>[e(Vt,{class:"bg-grey-3",padding:""},{default:t(()=>[v("div",Qt,[e(qe,{name:"bounce"},{default:t(()=>[c.value.state?(O(),j(B,{key:0,style:{"min-width":"400px"},flat:"",bordered:""},{default:t(()=>[e(Me,{bordered:""},{default:t(()=>[e(Q,null,{default:t(()=>[e(_,null,{default:t(()=>[g("Ticket : ")]),_:1}),e(_,null,{default:t(()=>[g(T(c.value.body.ticket),1)]),_:1})]),_:1}),e(Q,null,{default:t(()=>[e(_,null,{default:t(()=>[g("Cliente : ")]),_:1}),e(_,null,{default:t(()=>[g(T(c.value.body.cliente),1)]),_:1})]),_:1}),e(Q,null,{default:t(()=>[e(_,null,{default:t(()=>[g("Fecha : ")]),_:1}),e(_,null,{default:t(()=>[g(T(c.value.body.fecha),1)]),_:1})]),_:1}),e(Q,null,{default:t(()=>[e(_,null,{default:t(()=>[g("Total : ")]),_:1}),e(_,null,{default:t(()=>[g("$ "+T(c.value.body.total),1)]),_:1})]),_:1}),e(K),e(Q,{class:"bg-indigo-2"},{default:t(()=>[e(_,null,{default:t(()=>[g("Movimiento")]),_:1}),e(_,null,{default:t(()=>[e(oe,{dense:"",modelValue:A.value,"onUpdate:modelValue":s[2]||(s[2]=o=>A.value=o),options:be,label:"Seleccione",filled:"",autofocus:""},null,8,["modelValue"])]),_:1})]),_:1}),A.value=="Devolucion"||A.value=="Reimpresion"?(O(),j(Q,{key:0},{default:t(()=>[e(_,null,{default:t(()=>[g("Impresora")]),_:1}),C.value.body?(O(),j(_,{key:1},{default:t(()=>[e(oe,{dense:"","option-label":"name",modelValue:C.value.val,"onUpdate:modelValue":s[3]||(s[3]=o=>C.value.val=o),options:C.value.body,label:"Impresora",filled:"",autofocus:""},null,8,["modelValue","options"])]),_:1})):(O(),j(_,{key:0},{default:t(()=>[e(Rt,{color:"purple",size:"2em"}),e(zt,{offset:[0,8]},{default:t(()=>[g("Obteniendo Impresoras")]),_:1})]),_:1}))]),_:1})):L("",!0),A.value=="Devolucion"?(O(),ne("div",Ut,[e(Q,null,{default:t(()=>[e(_,null,{default:t(()=>[g("Motivo de la devolucion")]),_:1}),e(_,null,{default:t(()=>[e(W,{modelValue:H.value,"onUpdate:modelValue":s[4]||(s[4]=o=>H.value=o),type:"text",label:"describe el motivo"},null,8,["modelValue"])]),_:1})]),_:1})])):L("",!0)]),_:1}),ae(se)?(O(),ne("div",Lt,[e(ge,{align:"between"},{default:t(()=>[e(F,{flat:"",icon:"cancel"}),e(F,{flat:"",icon:"arrow_forward",onClick:ue,disable:$.value},null,8,["disable"])]),_:1})])):L("",!0)]),_:1})):L("",!0)]),_:1})]),e(qe,{name:"bounce"},{default:t(()=>[y.value.state?(O(),j(B,{key:0,class:"my-card",style:{"min-width":"400px"},flat:"",bordered:""},{default:t(()=>[e(Me,{bordered:""},{default:t(()=>[e(B,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(Q,{class:"text-center"},{default:t(()=>[e(_,null,{default:t(()=>[e(Z,{caption:"",lines:"2"},{default:t(()=>[g("Ticket")]),_:1}),e(Z,{class:"text-h4"},{default:t(()=>[g(T(y.value.body.ticket.ticket),1)]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(Z,{caption:"",lines:"2"},{default:t(()=>[g("Fecha")]),_:1}),e(Z,{class:"text-h6"},{default:t(()=>[g(T(y.value.body.ticket.fecha),1)]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(Z,{caption:"",lines:"2"},{default:t(()=>[g("Total")]),_:1}),e(Z,{class:"text-h6"},{default:t(()=>[g(T(Number.parseFloat(q.value).toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(K,{spaced:"",inset:"",vertical:"",dark:""}),e(B,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(Q,{class:"text-h6"},{default:t(()=>[e(_,null,{default:t(()=>[e(Z,{lines:"2"},{default:t(()=>[g("Cliente")]),_:1}),e(Z,null,{default:t(()=>[e(fe,{onSubmit:ze,class:"q-gutter-md q-display-flex q-justify-center"},{default:t(()=>[e(W,{modelValue:u.value,"onUpdate:modelValue":s[5]||(s[5]=o=>u.value=o),type:"number",style:{"max-width":"100px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[g(T(y.value.body.ticket.cliente),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(K,{spaced:"",inset:"",vertical:"",dark:""}),e(B,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(Q,null,{default:t(()=>[e(_,null,{default:t(()=>[e(fe,{onSubmit:we,class:"q-gutter-md"},{default:t(()=>[v("div",null,[e(W,{modelValue:R.value,"onUpdate:modelValue":s[6]||(s[6]=o=>R.value=o),type:"text",label:"Agregar Modelo"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(K,{spaced:"",inset:"",vertical:"",dark:""}),e(B,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(Q,null,{default:t(()=>[e(_,null,{default:t(()=>[g("ARTICULO")]),_:1}),e(_,null,{default:t(()=>[g("DESCRIPCION")]),_:1}),e(_,null,{default:t(()=>[g("CANTIDAD")]),_:1}),e(_,null,{default:t(()=>[g("PRECIO")]),_:1}),e(_,null,{default:t(()=>[g("TOTAL")]),_:1})]),_:1}),e(Ft,{style:{height:"300px","max-width":"1700px"}},{default:t(()=>[(O(!0),ne(ht,null,bt(ae(Se),(o,w)=>te((O(),j(Q,{class:"border",key:w,onClick:b=>Te(o),clickable:""},{default:t(()=>[e(_,null,{default:t(()=>[g(T(o.ARTICULO),1)]),_:2},1024),e(_,null,{default:t(()=>[g(T(o.DESCRIPCION),1)]),_:2},1024),e(_,null,{default:t(()=>[g(T(Number.parseFloat(o.CANTIDAD).toFixed(2)),1)]),_:2},1024),e(_,null,{default:t(()=>[g("$ "+T(Number.parseFloat(o.PRECIO).toFixed(2)),1)]),_:2},1024),e(_,null,{default:t(()=>[g("$ "+T(Number.parseFloat(o.PRECIO*o.CANTIDAD).toFixed(2)),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[yt]])),128))]),_:1})]),_:1})]),_:1}),e(K,{spaced:"",inset:"",vertical:"",dark:""}),e(B,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(Q,null,{default:t(()=>[e(_,null,{default:t(()=>[e(Z,null,{default:t(()=>[g("Observaciones")]),_:1})]),_:1}),e(_,{side:"",top:""},{default:t(()=>[e(W,{modelValue:U.value,"onUpdate:modelValue":s[7]||(s[7]=o=>U.value=o),type:"text",label:"observaciones",style:{"max-width":"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{class:"full-width",color:"primary",icon:"receipt",label:"PAGAR",onClick:Ye})]),_:1})]),_:1})):L("",!0)]),_:1}),e(pe,{modelValue:N.value.state,"onUpdate:modelValue":s[9]||(s[9]=o=>N.value.state=o),position:"right",persistent:""},{default:t(()=>[e(B,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[v("div",Bt,"Articulo : "+T(N.value.body.ARTICULO),1),v("div",Ht,"Descripcion : "+T(N.value.body.DESCRIPCION),1)]),_:1}),e(P,{class:"row"},{default:t(()=>[v("div",jt,[e(W,{modelValue:N.value.body.CANTIDAD,"onUpdate:modelValue":s[8]||(s[8]=o=>N.value.body.CANTIDAD=o),type:"number",label:"Cantidad",style:{"max-width":"50%"}},null,8,["modelValue"])])]),_:1}),e(P,{class:"row justify-between"},{default:t(()=>[v("div",Gt,"Precio : "+T(Number.parseFloat(N.value.body.PRECIO).toFixed(2)),1),v("div",Yt,"Total : "+T(Number.parseFloat(N.value.body.PRECIO*N.value.body.CANTIDAD).toFixed(2)),1)]),_:1}),e(ge,{class:"row justify-between"},{default:t(()=>[e(F,{flat:"",icon:"delete",color:"negative",onClick:Xe}),te(e(F,{flat:"",icon:"arrow_forward_ios",disable:N.value.body.CANTIDAD.length<=0,onClick:We},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(pe,{modelValue:D.value.state,"onUpdate:modelValue":s[11]||(s[11]=o=>D.value.state=o),position:"left",persistent:""},{default:t(()=>[e(B,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[v("div",Xt,"Articulo : "+T(D.value.body.CODART),1),v("div",Kt,"Descripcion : "+T(D.value.body.DESART),1)]),_:1}),e(P,{class:"row"},{default:t(()=>[v("div",Jt,[e(W,{modelValue:D.value.account,"onUpdate:modelValue":s[10]||(s[10]=o=>D.value.account=o),type:"number",label:"Cantidad",style:{"max-width":"50%"}},null,8,["modelValue"])])]),_:1}),e(P,{class:"row justify-between"},{default:t(()=>[v("div",Wt,"Precio : "+T(Number.parseFloat(D.value.body.PRELTA).toFixed(2)),1),v("div",Zt,"Total : "+T(Number.parseFloat(D.value.body.PRELTA*D.value.account).toFixed(2)),1)]),_:1}),e(ge,{class:"row justify-between"},{default:t(()=>[te(e(F,{flat:"",icon:"close",color:"positive"},null,512),[[me]]),te(e(F,{flat:"",icon:"arrow_forward_ios",disable:D.value.account<=0,onClick:Ke},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(pe,{modelValue:ee.value.state,"onUpdate:modelValue":s[12]||(s[12]=o=>ee.value.state=o)},{default:t(()=>[e(B,null,{default:t(()=>[e(P,{class:"items-center"},{default:t(()=>[el,e(K,{spaced:"",inset:"",vertical:"",dark:""}),v("div",tl,T(ee.value.body.NOFCLI),1),e(K,{spaced:"",inset:"",vertical:"",dark:""}),ll]),_:1}),e(ge,{align:"center"},{default:t(()=>[te(e(F,{flat:"",icon:"close",color:"primary"},null,512),[[me]]),te(e(F,{flat:"",icon:"check",color:"positive",onClick:Je},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(pe,{modelValue:n.value,"onUpdate:modelValue":s[24]||(s[24]=o=>n.value=o)},{default:t(()=>[e(B,{class:"my-card",style:{width:"700px","max-width":"80vw"}},{default:t(()=>[v("div",al,[v("div",null,[ol,v("div",sl,T(y.value.body.ticket.ticket),1)]),v("div",ul,[il,v("div",nl,"$ "+T(c.value.body.total),1)]),v("div",rl,[dl,v("div",cl,"$ "+T(q.value),1)])]),v("div",null,[e(fe,{onSubmit:Pe,class:"q-gutter-md"},{default:t(()=>[e(P,null,{default:t(()=>[v("div",vl,[fl,e(W,{class:"col",modelValue:x.value.EFE,"onUpdate:modelValue":s[13]||(s[13]=o=>x.value.EFE=o),type:"number",autofocus:"",min:0,step:"any",dense:"","input-class":"q-pl-md fw-sbold fs-inc4"},null,8,["modelValue","min"]),parseFloat(x.value.EFE)?(O(),j(F,{key:0,color:"primary",icon:"backspace",flat:"",dense:"",round:"",onClick:s[14]||(s[14]=o=>x.value.EFE=0)})):L("",!0)])]),_:1}),v("div",null,[e(P,null,{default:t(()=>[v("div",ml,[e(oe,{class:"col-3",modelValue:x.value.DIG.id,"onUpdate:modelValue":s[15]||(s[15]=o=>x.value.DIG.id=o),options:_e,label:"Terminal","option-value":"id","option-label":"desc",dense:""},null,8,["modelValue"]),e(W,{class:"col",modelValue:x.value.DIG.val,"onUpdate:modelValue":s[16]||(s[16]=o=>x.value.DIG.val=o),type:"number",min:0,step:"any",dense:"","input-class":"q-pl-md fw-sbold fs-inc4",disable:!x.value.DIG.id},null,8,["modelValue","min","disable"]),parseFloat(x.value.DIG.val)?(O(),j(F,{key:0,color:"primary",icon:"backspace",flat:"",dense:"",round:"",onClick:s[17]||(s[17]=o=>{x.value.DIG.val=0,x.value.DIG.id=null})})):L("",!0)])]),_:1}),e(P,null,{default:t(()=>[e(oe,{modelValue:le.value.val,"onUpdate:modelValue":[s[18]||(s[18]=o=>le.value.val=o),Ze],options:le.value.opts,label:"Descontar Vale",filled:""},null,8,["modelValue","options"])]),_:1}),le.value.val=="SI"?(O(),j(P,{key:0},{default:t(()=>[v("div",pl,[bl,e(oe,{modelValue:M.value.prc,"onUpdate:modelValue":[s[19]||(s[19]=o=>M.value.prc=o),s[20]||(s[20]=o=>de.value=M.value.prc.IMPANT)],options:M.value.body,"option-label":"CODANT",label:"Descontar Vale",filled:"",style:{width:"250px"}},null,8,["modelValue","options"]),e(K,{spaced:"",inset:"",vertical:"",dark:""}),M.value.prc?(O(),ne("div",hl," $ "+T(Number.parseFloat(M.value.prc.IMPANT).toFixed(2)),1)):L("",!0)])]),_:1})):L("",!0),ae(p)?(O(),j(P,{key:1},{default:t(()=>[v("div",yl,[e(xt,{"left-label":"",modelValue:I.value,"onUpdate:modelValue":s[21]||(s[21]=o=>I.value=o),label:"Hacer Retirada de el sobrante"},null,8,["modelValue"])])]),_:1})):L("",!0)])]),_:1})]),v("div",gl,[v("div",null,[_l,v("div",Cl," $ "+T(ae(i)),1)]),ae(i)>=0?(O(),ne("div",Sl,[e(F,{color:"primary",icon:"payment",label:"Pagar",onClick:Pe})])):L("",!0)]),e(pe,{modelValue:E.value,"onUpdate:modelValue":s[23]||(s[23]=o=>E.value=o)},{default:t(()=>[e(B,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[zl]),_:1}),e(P,null,{default:t(()=>[e(fe,{onSubmit:et,class:"q-gutter-md"},{default:t(()=>[e(oe,{dense:"","option-label":"name",modelValue:C.value.val,"onUpdate:modelValue":s[22]||(s[22]=o=>C.value.val=o),options:C.value.body,label:"Impresora",filled:"",autofocus:"",style:{width:"200px"}},null,8,["modelValue","options"]),v("div",null,[e(F,{label:"Enviar",type:"submit",color:"primary",style:{width:"200px"}})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{Ul as default};
