import{aH as N,a as U,u as L,r as y,o as r,d as f,w as o,f as V,e,S,ak as u,g as m,a2 as w,a3 as C,a4 as Q,a0 as $,am as k}from"./index.3d27d392.js";import{d as c,e as i,a as p,b as O}from"./QList.3a4c80c6.js";import{Q as x}from"./QToggle.fe9d42c8.js";import{Q as R}from"./QPage.8a30e7ea.js";import"./dayjs.min.cbcf888d.js";import"./axios.f0ecc4e1.js";import{o as v}from"./orderApi.0bf12524.js";import{u as q}from"./OrderStore.08b1c70f.js";import{u as T}from"./use-quasar.16e47760.js";import"./QSelect.24284ad2.js";import"./QExpansionItem.b9c5589c.js";import"./QDrawer.c294c082.js";import"./QCardSection.ea3ea6ae.js";import"./QCardActions.13024e38.js";import"./QCard.81ef4faa.js";import"./ClosePopup.a54716ba.js";import"./socket.05630e21.js";import"./use-key-composition.3630ea1e.js";import"./use-checkbox.7a414abf.js";import"./_commonjsHelpers.88e99c8f.js";import"./QResizeObserver.9db6fde7.js";import"./QScrollObserver.d7606f15.js";const j={class:"q-mb-xl"},E={class:"q-mb-xl"},me={__name:"Config",setup(F){N(),U();const _=q();_.setTitle("CONFIGURACION"),_.setshowLyt(!0);const l=T(),h=L(),b=y([]),g=y([]),B=async()=>{l.loading.show({message:"Obteniendo Informacion"});const a=await v.getSettings(h.session.store.id_viz);a.fail?console.log(a):(console.log(a),b.value=a.config,g.value=a.cash,l.loading.hide())},D=async a=>{console.log(a),l.loading.show({messsage:"Cambiando Estado Caja"});const s=await v.changeStatusCash(a);if(s.fail)console.log(s);else{console.log(s),l.loading.hide();let t=a._status==2?"Desactivada":"Activada";l.notify({message:`${a.name} ${t}`,type:`${a._status==2?"negative":"positive"}`,position:"top"})}},I=a=>g.value.filter(t=>t._status==1).length===1&&a._status==1,A=async a=>{console.log(a.config[0].pivot);let s=a.config[0].pivot;l.loading.show({message:"Cambiando Status"});const t=await v.changeConfig(s);if(t.fail)console.log(t);else{console.log(t),l.loading.hide();let n=s.active==0?"Desactivada":"Activada";l.notify({message:`${a.name} ${n}`,type:`${s.active==0?"negative":"positive"}`,position:"top"})}};return B(),(a,s)=>(r(),f(R,{padding:""},{default:o(()=>[V("div",j,[e(p,{bordered:"",class:"text-bold bg-grey-11",dense:""},{default:o(()=>[e(c,null,{default:o(()=>[e(i,{avatar:""},{default:o(()=>[e(S,{color:"primary",name:"list"})]),_:1}),e(i,null,{default:o(()=>s[0]||(s[0]=[u("Modulos")])),_:1})]),_:1})]),_:1}),(r(!0),m(C,null,w(b.value,(t,n)=>(r(),m("div",{key:n},[e(p,{bordered:"",dense:""},{default:o(()=>[Q((r(),f(c,{tag:"label",clickable:""},{default:o(()=>[e(i,null,{default:o(()=>[u($(t.name),1)]),_:2},1024),e(i,{side:""},{default:o(()=>[e(x,{color:"primary",modelValue:t.config[0].pivot.active,"onUpdate:modelValue":[d=>t.config[0].pivot.active=d,d=>A(t)],"false-value":0,"true-value":1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[k]])]),_:2},1024)]))),128))]),e(O),V("div",E,[e(p,{bordered:"",class:"text-bold bg-grey-11",dense:""},{default:o(()=>[e(c,null,{default:o(()=>[e(i,{avatar:""},{default:o(()=>[e(S,{color:"primary",name:"point_of_sale"})]),_:1}),e(i,null,{default:o(()=>s[1]||(s[1]=[u("Cajas")])),_:1})]),_:1})]),_:1}),(r(!0),m(C,null,w(g.value,(t,n)=>(r(),m("div",{key:n},[e(p,{bordered:"",dense:""},{default:o(()=>[Q((r(),f(c,{tag:"label",clickable:""},{default:o(()=>[e(i,null,{default:o(()=>[u($(t.name),1)]),_:2},1024),e(i,{side:""},{default:o(()=>[e(x,{color:"primary",modelValue:t._status,"onUpdate:modelValue":[d=>t._status=d,d=>D(t)],"false-value":2,"true-value":1,disable:I(t)},null,8,["modelValue","onUpdate:modelValue","disable"])]),_:2},1024)]),_:2},1024)),[[k]])]),_:2},1024)]))),128))])]),_:1}))}};export{me as default};
