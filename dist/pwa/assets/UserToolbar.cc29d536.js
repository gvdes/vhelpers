import{u as R,d as T,r as v,a as i,c as m,j as d,h as e,m as c,a6 as s,a0 as f,n as A,f as w,g as r,b6 as g,a3 as p,b7 as P,a2 as V,a1 as C,aW as S,i as h,b8 as D,ai as W,Q as j,k as z,a4 as F,a5 as M}from"./index.02fec612.js";import{Q as G,a as B}from"./QSelect.4e4b152c.js";import{Q as H,a as J,b as $}from"./QList.ec23182b.js";import{Q as K}from"./QExpansionItem.267ef44c.js";import{Q as O,a as X}from"./QDrawer.210381f4.js";import{C as Y}from"./ClosePopup.b90a3e10.js";import{a as Z}from"./auth.622669d6.js";import{u as ee}from"./use-quasar.5cb75810.js";const ae={class:"col"},se={key:0,class:"col text-center fs-inc1 text-primary fw-sbold"},te={class:"text-center fs-inc1 text-primary fw-sbold"},oe={class:"row"},ke={__name:"UserToolbar",setup(le){const l=R(),x=l.session,b=T(),y=v({state:!1}),I=()=>{l.sessionDestroy(),b.replace("/auth")},t=ee();v([]);const k=v(!1),u=v({val:l.session,opts:[]}),N=async()=>{const n=await Z.getResources(x.credentials.id);n.fail?console.log(n):(console.log(n),l.setModules(n.grouped_modules),l.setStores(n.stores),l.modulesLoaded=!0)},U=()=>{t.loading.show({message:"Cambiando sucursal"}),l.session.store=u.value.val.store,l.setSession({...l.session,store:u.value.val.store}),console.log(l.session),window.location.reload(),t.loading.hide()},_=localStorage.getItem("mode");_&&t.dark.set(_==="dark");const q=()=>{t.dark.toggle(),localStorage.setItem("mode",t.dark.isActive?"dark":"light")};return N(),(n,a)=>(i(),m(V,null,[d("div",{class:g(["q-pa-sm row items-center",s(t).dark.isActive?"text-white bg-dark":"text-dark bg-white"])},[e(c,{color:"primary",icon:"list",flat:"",dense:"",class:"q-mr-sm",onClick:a[0]||(a[0]=o=>k.value=!k.value)}),d("div",ae,[e(c,{class:"text-pink",flat:"",label:s(x).credentials.nick,onClick:a[1]||(a[1]=o=>s(b).push("/"))},null,8,["label"])]),s(l).stores.length==0?(i(),m("div",se,f(s(x).store.name),1)):A("",!0),s(l).stores.length>1?(i(),w(G,{key:1,modelValue:u.value.val,"onUpdate:modelValue":[a[2]||(a[2]=o=>u.value.val=o),U],options:s(l).stores,"option-label":o=>o.store.name,borderless:"",color:"primary",dense:"",class:"text-center","options-selected-class":"text-primary text-bold"},{selected:r(()=>[d("div",te,f(u.value.val.store.name),1)]),_:1},8,["modelValue","options","option-label"])):A("",!0),a[8]||(a[8]=d("div",{class:"col text-right"},null,-1))],2),e(X,{modelValue:k.value,"onUpdate:modelValue":a[6]||(a[6]=o=>k.value=o),width:300,breakpoint:500,bordered:"",class:g(s(t).dark.isActive?"bg-grey-9":"bg-grey-3")},{default:r(()=>[e(O,{class:"fit text-bold text-dark"},{default:r(()=>[e(H,null,{default:r(()=>[d("div",oe,[e(c,{color:"primary",icon:"home",flat:"",dense:"",class:"col",onClick:a[3]||(a[3]=o=>s(b).push("/"))}),e(p,{spaced:"",inset:"",vertical:"",dark:""}),e(c,{class:"col",color:"pink",icon:"logout","no-caps":"",flat:"",onClick:a[4]||(a[4]=o=>y.value.state=!0)}),e(p,{spaced:"",inset:"",vertical:"",dark:""}),e(P,{modelValue:s(t).dark.mode,"onUpdate:modelValue":[a[5]||(a[5]=o=>s(t).dark.mode=o),q],color:"primary",icon:s(t).dark.mode?"light_mode":"dark_mode","keep-color":"",class:"col text-center"},null,8,["modelValue","icon"])]),e(p),e(p,{spaced:"",inset:"",vertical:"",dark:""}),(i(!0),m(V,null,C(s(l).modules,(o,L)=>(i(),w(K,{key:L,"expand-separator":"",label:o.name,dark:s(t).dark.isActive,"header-class":s(t).dark.isActive?"text-white":"text-dark"},{default:r(()=>[(i(!0),m(V,null,C(o.modules,(Q,E)=>(i(),m("div",{key:E},[S((i(),w(J,{clickable:"",to:`/${Q.path}`,dark:s(t).dark.isActive},{default:r(()=>[e($,null,{default:r(()=>[e(B,{class:g(s(t).dark.isActive?"text-white":"text-dark")},{default:r(()=>[h(f(Q.name),1)]),_:2},1032,["class"]),e(B,{caption:"",class:g(s(t).dark.isActive?"text-grey-4":"text-grey-7")},{default:r(()=>[h(f(Q.desc),1)]),_:2},1032,["class"])]),_:2},1024),e($,{avatar:""},{default:r(()=>[e(D,{flat:"",color:"transparent","text-color":(s(t).dark.isActive,"primary"),icon:"arrow_forward"},null,8,["text-color"])]),_:1})]),_:2},1032,["to","dark"])),[[W]]),e(p,{dark:s(t).dark.isActive},null,8,["dark"])]))),128))]),_:2},1032,["label","dark","header-class"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","class"]),e(M,{modelValue:y.value.state,"onUpdate:modelValue":a[7]||(a[7]=o=>y.value.state=o),persistent:""},{default:r(()=>[e(j,null,{default:r(()=>[e(z,{class:"row items-center"},{default:r(()=>[e(D,{icon:"logout",color:"primary","text-color":"white"}),a[9]||(a[9]=d("span",{class:"q-ml-sm"},"Estas por cerrar sesion",-1))]),_:1}),e(F,{align:"right"},{default:r(()=>[S(e(c,{flat:"",label:"Nope!",color:"primary"},null,512),[[Y]]),e(c,{flat:"",label:"Simon!",color:"primary",onClick:I})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{ke as _};
