import{e as Ke,Q as j}from"./position-engine.53842f55.js";import{k as w,j as Be,aL as Je,aM as We,aa as Ze,Y as de,z as et,aA as tt,ap as he,aB as we,T as Pe,Z as Ae,av as Ie,aq as ke,O as lt,r as _,c as V,L as at,v as ot,R as st,S as ut,y as it,J as nt,a2 as ee,m as rt,aN as Ne,aO as xe,o as O,a as G,w as t,e,i as v,a3 as h,U as dt,Q as F,f as I,g as ne,h as U,W as Oe,a4 as z,a0 as ct,a1 as vt,aP as ft,a6 as mt}from"./index.6bbbe671.js";import{d as ye,a as pt,Q as ae}from"./QSelect.9d159285.js";import{Q as K}from"./QInput.86e848ae.js";import{Q as ce}from"./QForm.223445a6.js";import{a as B,Q as bt}from"./axios.62d0ef44.js";import{_ as ht,Q as yt,a as _e,C as ve}from"./UserToolbar.3d0fe261.js";import{Q as Re,a as M,b as y,c as J}from"./QList.0c14bc24.js";import{Q as _t}from"./QTooltip.e8d8716f.js";import{u as gt,f as Ct,g as qe,j as St,Q as zt,a as Tt,b as L,c as P,d as wt}from"./QLayout.53fa629c.js";import{g as Fe,s as Me}from"./touch.70a9dd44.js";import{Q as fe}from"./QDialog.b3f64587.js";import{u as At}from"./VDB.f419d993.js";import{u as kt}from"./use-quasar.c9d0ae77.js";const xt=[w("g",[w("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),w("clipPath",{id:"uil-hourglass-clip1"},[w("rect",{x:"15",y:"20",width:" 70",height:"25"},[w("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),w("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),w("clipPath",{id:"uil-hourglass-clip2"},[w("rect",{x:"15",y:"55",width:" 70",height:"25"},[w("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),w("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),w("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),w("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),w("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var Dt=Be({name:"QSpinnerHourglass",props:Je,setup(c){const{cSize:d,classes:f}=We(c);return()=>w("svg",{class:f.value,width:d.value,height:d.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},xt)}});function De(c,d,f){const N=Ie(c);let l,u=N.left-d.event.x,i=N.top-d.event.y,a=Math.abs(u),m=Math.abs(i);const r=d.direction;r.horizontal===!0&&r.vertical!==!0?l=u<0?"left":"right":r.horizontal!==!0&&r.vertical===!0?l=i<0?"up":"down":r.up===!0&&i<0?(l="up",a>m&&(r.left===!0&&u<0?l="left":r.right===!0&&u>0&&(l="right"))):r.down===!0&&i>0?(l="down",a>m&&(r.left===!0&&u<0?l="left":r.right===!0&&u>0&&(l="right"))):r.left===!0&&u<0?(l="left",a<m&&(r.up===!0&&i<0?l="up":r.down===!0&&i>0&&(l="down"))):r.right===!0&&u>0&&(l="right",a<m&&(r.up===!0&&i<0?l="up":r.down===!0&&i>0&&(l="down")));let g=!1;if(l===void 0&&f===!1){if(d.event.isFirst===!0||d.event.lastDir===void 0)return{};l=d.event.lastDir,g=!0,l==="left"||l==="right"?(N.left-=u,a=0,u=0):(N.top-=i,m=0,i=0)}return{synthetic:g,payload:{evt:c,touch:d.event.mouse!==!0,mouse:d.event.mouse===!0,position:N,direction:l,isFirst:d.event.isFirst,isFinal:f===!0,duration:Date.now()-d.event.time,distance:{x:a,y:m},offset:{x:u,y:i},delta:{x:N.left-d.event.lastX,y:N.top-d.event.lastY}}}}let Vt=0;var $e=Ze({name:"touch-pan",beforeMount(c,{value:d,modifiers:f}){if(f.mouse!==!0&&de.has.touch!==!0)return;function N(u,i){f.mouse===!0&&i===!0?lt(u):(f.stop===!0&&Ae(u),f.prevent===!0&&Pe(u))}const l={uid:"qvtp_"+Vt++,handler:d,modifiers:f,direction:Fe(f),noop:et,mouseStart(u){Me(u,l)&&tt(u)&&(he(l,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),l.start(u,!0))},touchStart(u){if(Me(u,l)){const i=u.target;he(l,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),l.start(u)}},start(u,i){if(de.is.firefox===!0&&we(c,!0),l.lastEvt=u,i===!0||f.stop===!0){if(l.direction.all!==!0&&(i!==!0||l.modifiers.mouseAllDir!==!0&&l.modifiers.mousealldir!==!0)){const r=u.type.indexOf("mouse")>-1?new MouseEvent(u.type,u):new TouchEvent(u.type,u);u.defaultPrevented===!0&&Pe(r),u.cancelBubble===!0&&Ae(r),Object.assign(r,{qKeyEvent:u.qKeyEvent,qClickOutside:u.qClickOutside,qAnchorHandled:u.qAnchorHandled,qClonedBy:u.qClonedBy===void 0?[l.uid]:u.qClonedBy.concat(l.uid)}),l.initialEvent={target:u.target,event:r}}Ae(u)}const{left:a,top:m}=Ie(u);l.event={x:a,y:m,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:a,lastY:m}},move(u){if(l.event===void 0)return;const i=Ie(u),a=i.left-l.event.x,m=i.top-l.event.y;if(a===0&&m===0)return;l.lastEvt=u;const r=l.event.mouse===!0,g=()=>{N(u,r);let q;f.preserveCursor!==!0&&f.preservecursor!==!0&&(q=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),r===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ke(),l.styleCleanup=A=>{if(l.styleCleanup=void 0,q!==void 0&&(document.documentElement.style.cursor=q),document.body.classList.remove("non-selectable"),r===!0){const T=()=>{document.body.classList.remove("no-pointer-events--children")};A!==void 0?setTimeout(()=>{T(),A()},50):T()}else A!==void 0&&A()}};if(l.event.detected===!0){l.event.isFirst!==!0&&N(u,l.event.mouse);const{payload:q,synthetic:A}=De(u,l,!1);q!==void 0&&(l.handler(q)===!1?l.end(u):(l.styleCleanup===void 0&&l.event.isFirst===!0&&g(),l.event.lastX=q.position.left,l.event.lastY=q.position.top,l.event.lastDir=A===!0?void 0:q.direction,l.event.isFirst=!1));return}if(l.direction.all===!0||r===!0&&(l.modifiers.mouseAllDir===!0||l.modifiers.mousealldir===!0)){g(),l.event.detected=!0,l.move(u);return}const R=Math.abs(a),x=Math.abs(m);R!==x&&(l.direction.horizontal===!0&&R>x||l.direction.vertical===!0&&R<x||l.direction.up===!0&&R<x&&m<0||l.direction.down===!0&&R<x&&m>0||l.direction.left===!0&&R>x&&a<0||l.direction.right===!0&&R>x&&a>0?(l.event.detected=!0,l.move(u)):l.end(u,!0))},end(u,i){if(l.event!==void 0){if(ke(l,"temp"),de.is.firefox===!0&&we(c,!1),i===!0)l.styleCleanup!==void 0&&l.styleCleanup(),l.event.detected!==!0&&l.initialEvent!==void 0&&l.initialEvent.target.dispatchEvent(l.initialEvent.event);else if(l.event.detected===!0){l.event.isFirst===!0&&l.handler(De(u===void 0?l.lastEvt:u,l).payload);const{payload:a}=De(u===void 0?l.lastEvt:u,l,!0),m=()=>{l.handler(a)};l.styleCleanup!==void 0?l.styleCleanup(m):m()}l.event=void 0,l.initialEvent=void 0,l.lastEvt=void 0}}};if(c.__qtouchpan=l,f.mouse===!0){const u=f.mouseCapture===!0||f.mousecapture===!0?"Capture":"";he(l,"main",[[c,"mousedown","mouseStart",`passive${u}`]])}de.has.touch===!0&&he(l,"main",[[c,"touchstart","touchStart",`passive${f.capture===!0?"Capture":""}`],[c,"touchmove","noop","notPassiveCapture"]])},updated(c,d){const f=c.__qtouchpan;f!==void 0&&(d.oldValue!==d.value&&(typeof value!="function"&&f.end(),f.handler=d.value),f.direction=Fe(d.modifiers))},beforeUnmount(c){const d=c.__qtouchpan;d!==void 0&&(d.event!==void 0&&d.end(),ke(d,"main"),ke(d,"temp"),de.is.firefox===!0&&we(c,!1),d.styleCleanup!==void 0&&d.styleCleanup(),delete c.__qtouchpan)}});const Qe=["vertical","horizontal"],Ve={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Le={prevent:!0,mouse:!0,mouseAllDir:!0},Ue=c=>c>=250?50:Math.ceil(c/5);var It=Be({name:"QScrollArea",props:{...gt,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(c,{slots:d,emit:f}){const N=_(!1),l=_(!1),u=_(!1),i={vertical:_(0),horizontal:_(0)},a={vertical:{ref:_(null),position:_(0),size:_(0)},horizontal:{ref:_(null),position:_(0),size:_(0)}},{proxy:m}=rt(),r=Ct(c,m.$q);let g=null,R;const x=_(null),q=V(()=>"q-scrollarea"+(r.value===!0?" q-scrollarea--dark":""));a.vertical.percentage=V(()=>{const n=a.vertical.size.value-i.vertical.value;if(n<=0)return 0;const p=ye(a.vertical.position.value/n,0,1);return Math.round(p*1e4)/1e4}),a.vertical.thumbHidden=V(()=>(c.visible===null?u.value:c.visible)!==!0&&N.value===!1&&l.value===!1||a.vertical.size.value<=i.vertical.value+1),a.vertical.thumbStart=V(()=>a.vertical.percentage.value*(i.vertical.value-a.vertical.thumbSize.value)),a.vertical.thumbSize=V(()=>Math.round(ye(i.vertical.value*i.vertical.value/a.vertical.size.value,Ue(i.vertical.value),i.vertical.value))),a.vertical.style=V(()=>({...c.thumbStyle,...c.verticalThumbStyle,top:`${a.vertical.thumbStart.value}px`,height:`${a.vertical.thumbSize.value}px`})),a.vertical.thumbClass=V(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(a.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),a.vertical.barClass=V(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(a.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),a.horizontal.percentage=V(()=>{const n=a.horizontal.size.value-i.horizontal.value;if(n<=0)return 0;const p=ye(Math.abs(a.horizontal.position.value)/n,0,1);return Math.round(p*1e4)/1e4}),a.horizontal.thumbHidden=V(()=>(c.visible===null?u.value:c.visible)!==!0&&N.value===!1&&l.value===!1||a.horizontal.size.value<=i.horizontal.value+1),a.horizontal.thumbStart=V(()=>a.horizontal.percentage.value*(i.horizontal.value-a.horizontal.thumbSize.value)),a.horizontal.thumbSize=V(()=>Math.round(ye(i.horizontal.value*i.horizontal.value/a.horizontal.size.value,Ue(i.horizontal.value),i.horizontal.value))),a.horizontal.style=V(()=>({...c.thumbStyle,...c.horizontalThumbStyle,[m.$q.lang.rtl===!0?"right":"left"]:`${a.horizontal.thumbStart.value}px`,width:`${a.horizontal.thumbSize.value}px`})),a.horizontal.thumbClass=V(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(a.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),a.horizontal.barClass=V(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(a.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const A=V(()=>a.vertical.thumbHidden.value===!0&&a.horizontal.thumbHidden.value===!0?c.contentStyle:c.contentActiveStyle),T=[[$e,n=>{E(n,"vertical")},void 0,{vertical:!0,...Le}]],te=[[$e,n=>{E(n,"horizontal")},void 0,{horizontal:!0,...Le}]];function re(){const n={};return Qe.forEach(p=>{const C=a[p];n[p+"Position"]=C.position.value,n[p+"Percentage"]=C.percentage.value,n[p+"Size"]=C.size.value,n[p+"ContainerSize"]=i[p].value}),n}const $=at(()=>{const n=re();n.ref=m,f("scroll",n)},0);function W(n,p,C){if(Qe.includes(n)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(n==="vertical"?Ne:xe)(x.value,p,C)}function Q({height:n,width:p}){let C=!1;i.vertical.value!==n&&(i.vertical.value=n,C=!0),i.horizontal.value!==p&&(i.horizontal.value=p,C=!0),C===!0&&oe()}function le({position:n}){let p=!1;a.vertical.position.value!==n.top&&(a.vertical.position.value=n.top,p=!0),a.horizontal.position.value!==n.left&&(a.horizontal.position.value=n.left,p=!0),p===!0&&oe()}function Y({height:n,width:p}){a.horizontal.size.value!==p&&(a.horizontal.size.value=p,oe()),a.vertical.size.value!==n&&(a.vertical.size.value=n,oe())}function E(n,p){const C=a[p];if(n.isFirst===!0){if(C.thumbHidden.value===!0)return;R=C.position.value,l.value=!0}else if(l.value!==!0)return;n.isFinal===!0&&(l.value=!1);const X=Ve[p],ue=i[p].value,Se=(C.size.value-ue)/(ue-C.thumbSize.value),ze=n.distance[X.dist],Te=R+(n.direction===X.dir?1:-1)*ze*Se;pe(Te,p)}function me(n,p){const C=a[p];if(C.thumbHidden.value!==!0){const X=n[Ve[p].offset];if(X<C.thumbStart.value||X>C.thumbStart.value+C.thumbSize.value){const ue=X-C.thumbSize.value/2;pe(ue/i[p].value*C.size.value,p)}C.ref.value!==null&&C.ref.value.dispatchEvent(new MouseEvent(n.type,n))}}function D(n){me(n,"vertical")}function ge(n){me(n,"horizontal")}function oe(){N.value=!0,g!==null&&clearTimeout(g),g=setTimeout(()=>{g=null,N.value=!1},c.delay),c.onScroll!==void 0&&$()}function pe(n,p){x.value[Ve[p].scroll]=n}function Ce(){u.value=!0}function be(){u.value=!1}let se=null;return ot(()=>m.$q.lang.rtl,n=>{x.value!==null&&xe(x.value,Math.abs(a.horizontal.position.value)*(n===!0?-1:1))}),st(()=>{se={top:a.vertical.position.value,left:a.horizontal.position.value}}),ut(()=>{if(se===null)return;const n=x.value;n!==null&&(xe(n,se.left),Ne(n,se.top))}),it($.cancel),Object.assign(m,{getScrollTarget:()=>x.value,getScroll:re,getScrollPosition:()=>({top:a.vertical.position.value,left:a.horizontal.position.value}),getScrollPercentage:()=>({top:a.vertical.percentage.value,left:a.horizontal.percentage.value}),setScrollPosition:W,setScrollPercentage(n,p,C){W(n,p*(a[n].size.value-i[n].value)*(n==="horizontal"&&m.$q.lang.rtl===!0?-1:1),C)}}),()=>w("div",{class:q.value,onMouseenter:Ce,onMouseleave:be},[w("div",{ref:x,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:c.tabindex!==void 0?c.tabindex:void 0},[w("div",{class:"q-scrollarea__content absolute",style:A.value},nt(d.default,[w(qe,{debounce:0,onResize:Y})])),w(St,{axis:"both",onScroll:le})]),w(qe,{debounce:0,onResize:Q}),w("div",{class:a.vertical.barClass.value,style:[c.barStyle,c.verticalBarStyle],"aria-hidden":"true",onMousedown:D}),w("div",{class:a.horizontal.barClass.value,style:[c.barStyle,c.horizontalBarStyle],"aria-hidden":"true",onMousedown:ge}),ee(w("div",{ref:a.vertical.ref,class:a.vertical.thumbClass.value,style:a.vertical.style.value,"aria-hidden":"true"}),T),ee(w("div",{ref:a.horizontal.ref,class:a.horizontal.thumbClass.value,style:a.horizontal.style.value,"aria-hidden":"true"}),te)])}});const Et=v("span",{class:"text-h6"},"TICKETS",-1),Pt=v("div",{class:"q-pa-md bg-grey-2 text-primary"},"Buscar Folio",-1),Nt={key:0,class:"text-right"},Ot={class:"row justify-center"},Rt={key:1},qt={key:0},Ft={class:"text-h6"},Mt={class:"text-subtitle2"},$t={class:"row justify-between"},Qt={class:"text-subtitle2"},Lt={class:"text-subtitle2"},Ut={class:"text-h6"},Bt={class:"text-subtitle2"},Ht={class:"row justify-between"},jt={class:"text-subtitle2"},Gt={class:"text-subtitle2"},Yt=v("div",{class:"text-h5"},"Se cambiara el cliente a:",-1),Xt={class:"text-h6 text-center text-bold"},Kt=v("div",{class:"q-ml-sm text-center"},"Desea recalcular el ticket ?",-1),Jt={class:"bg-primary row items-center justify-between q-pa-md text-white"},Wt=v("div",{class:"fs-dec3"},"TICKET",-1),Zt={class:"text-h4"},el={class:"text-center"},tl=v("div",{class:"fs-dec3"},"Total Anterior",-1),ll={class:"fw-bold text-h6"},al={class:"text-right"},ol=v("div",{class:"fs-dec3"},"Total Actual",-1),sl={class:"fw-bold text-h4"},ul={class:"row items-center"},il=v("div",{class:"col-3"},"Efectivo",-1),nl={class:"row"},rl={class:"row items-center"},dl=v("div",{class:"col-3"},"No. Vale",-1),cl={key:0,class:"col-3 bg-blue-grey-2"},vl={class:"bg-deep-purple-3 row items-center justify-between q-pa-md text-black"},fl=v("div",{class:"fs-dec3"},"Cambio",-1),ml={class:"text-h5"},pl={key:0,class:"text-center"},bl=v("div",{class:"text-h6 text-center"},"Impresora",-1),Il={__name:"ModifyLayout",setup(c){const d=At(),f=kt(),N=d.series,l=_(null),u=_(!1),i=_(null),a=_(""),m=_({state:!1,body:null}),r=_({state:!1,body:null}),g=_({val:null,body:null}),R=_(!1),x=_(null),q=_(null),A=_({state:!1,body:null}),T=_({state:!1,body:null,account:0}),te=_({state:!1,body:null}),re=_(null);let $=_(null),W=_({val:null,opts:["SI","NO"]}),Q=_({val:null,body:null}),le=_(0);const Y=_(""),E=_({EFE:0,DIG:{id:null,val:0}}),me=[{id:"TBA",desc:"TARJETA C/D BANCOMER"},{id:"TSA",desc:"TARJETA C/D SANTANDER"},{id:"TDB",desc:"TRA/DEP BANCOMER"},{id:"TDA",desc:"TRA/DEP Santander"},{id:"TDS",desc:"TRA/DEP Scotiabank"},{id:"C30",desc:"CREDITO"}],D=_(null),ge=["Devolucion","Modificacion","Reimpresion"],oe=V(()=>i.value&&a.value.length),pe=V(()=>r.value.body.product),Ce=V(()=>g.value.val&&(D.value=="Devolucion"&&Y.value.length>10||D.value=="Reimpresion")||D.value=="Modificacion"),be=V(()=>Number.parseFloat(E.value.DIG.val)+Number.parseFloat(E.value.EFE)+Number.parseFloat(le.value)-$.value),se=async()=>{let s=`http://${d.session.store.ip}/access/public/modify/getPrinter`;B.get(s).then(o=>{g.value.body=o.data,console.log("Impresoras listas :)")}).catch(o=>{console.log(o.response.data.message)})},n=async()=>{m.value.body=null;let S=i.value,s=a.value,k=`http://${d.session.store.ip}/access/public/modify/getTicket?serie=${S}&folio=${s}`;B.get(k).then(b=>{m.value.state=!0,m.value.body=b.data}).catch(b=>{console.log(b.response.data.message),f.notify({html:!0,message:b.response.data.message,color:"negative",position:"center"})})},p=async()=>{let S=d.session.store.ip,s=`${d.session.name} - ${d.session.store.alias}`;if(D.value=="Devolucion"){let o={type:D.value,serie:i.value,folio:a.value,mot:Y.value,create:s,print:g.value.val.ip};console.log(o);let k=`http://${S}/access/public/modify/newmod`;B.post(k,o).then(b=>{m.value.state=!1,console.log(b),D.value=null,Y.value="",g.value.val=null,i.value=null,a.value="",f.notify({html:!0,message:b.data.mssg,color:"positive",position:"center"})}).catch(b=>{console.log(b.response.data.message),f.notify({html:!0,message:b.response.data.message,color:"negative",position:"center"})})}else if(D.value=="Reimpresion"){let o={type:D.value,serie:i.value,folio:a.value,print:g.value.val.ip},k=`http://${S}/access/public/modify/newmod`;B.post(k,o).then(b=>{m.value.state=!1,console.log(b),D.value=null,g.value.val=null,i.value=null,a.value=""}).catch(b=>b)}else if(D.value=="Modificacion"){console.log("modificado");let o={type:D.value,serie:i.value,folio:a.value},k=`http://${S}/access/public/modify/newmod`;B.post(k,o).then(b=>{console.log(b),r.value.state=!0,m.value.state=!1,r.value.body=b.data,$.value=Number(b.data.ticket.total),l.value=b.data.ticket.codcli,q.value=b.data.ticket.observacion}).catch(b=>{console.log(b.response.data.message),f.notify({html:!0,message:b.response.data.message,color:"negative",position:"center"})})}},C=async()=>{console.log("cambio de cliente");let S=l.value;console.log(S);let o=`http://${d.session.store.ip}/access/public/modify/getClient?client=${S}`;B.get(o).then(k=>{console.log(k.data),te.value.body=k.data,r.value.body.ticket.cliente=k.data.NOFCLI,te.value.state=!0}).catch(k=>{console.log(k.response.data),f.notify({html:!0,message:k.response.data,color:"negative",position:"center"})})},X=S=>{console.log(`Mostrando Articulo ${S.ARTICULO}`),A.value.state=!0,A.value.body=S},ue=async()=>{console.log("Buscando Producto Y propiedades");let S={product:x.value,price:l.value};if(r.value.body.product.findIndex(o=>o.ARTICULO==x.value)==-1){let k=`http://${d.session.store.ip}/access/public/modify/getProduct`;B.get(k,{params:S}).then(b=>{console.log(b.data),T.value.body=b.data,T.value.state=!0}).catch(b=>{console.log(b.response.data),f.notify({html:!0,message:b.response.data,color:"negative",position:"center"})})}else f.notify({html:!0,message:`El productos ${x.value} ya esta en el ticket`,color:"negative",position:"center"})},Se=()=>{u.value=!0},ze=()=>{console.log("Se eliminara el articulo");let S=A.value.body.ARTICULO,s=r.value.body.product.findIndex(o=>o.ARTICULO==S);console.log(s),r.value.body.product.splice(s,1),A.value.state=!1,$.value=r.value.body.product.reduce((o,k)=>o+Number(k.TOTAL),0)},Te=()=>{let S={ARTICULO:T.value.body.CODART,DESCRIPCION:T.value.body.DESART,CANTIDAD:T.value.account,PRECIO:T.value.body.PRELTA,TOTAL:T.value.account*T.value.body.PRELTA};r.value.body.product.push(S),$.value=r.value.body.product.reduce((s,o)=>s+Number(o.TOTAL),0),T.value.account=0,x.value=null},He=()=>{console.log("recalculando ticket");let S=r.value.body.product,o={cliente:l.value,productos:S},b=`http://${d.session.store.ip}/access/public/modify/getPrices`;B.get(b,{params:o}).then(H=>{console.log(H.data),re.value=H.data,re.value.forEach(ie=>{let Z=r.value.body.product.findIndex(Xe=>Xe.ARTICULO==ie.CODART);r.value.body.product[Z].PRECIO=ie.PRELTA}),$.value=r.value.body.product.reduce((ie,Z)=>ie+Number(Z.CANTIDAD)*Number(Z.PRECIO),0),f.notify({html:!0,message:"Total cambiado",color:"positive",position:"center"})}).catch(H=>{console.log(H.response.data),f.notify({html:!0,message:H.response.data,color:"negative",position:"center"})})},je=()=>{$.value=r.value.body.product.reduce((S,s)=>S+Number(s.CANTIDAD)*Number(s.PRECIO),0)},Ge=async()=>{if(W.value.val=="SI"){console.log("Buscando vales");let s=`http://${d.session.store.ip}/access/public/modify/vales?price=${l.value}`;B.get(s).then(o=>{console.log(o.data),Q.value.body=o.data}).catch(o=>{console.log(o.response.data),f.notify({html:!0,message:o.response.data,color:"negative",position:"center"})})}else console.log("No se buscan vales"),Q.value.body=null,le.value=0},Ee=()=>R.value=!0,Ye=async()=>{let S=d.session.store.ip,s=`${d.session.name} - ${d.session.store.alias}`;console.log("Realizando proceso de modificacion de tickeet");let o={type:D.value,serie:i.value,folio:a.value,mot:Y.value,create:s,print:g.value.val.ip},k={serdev:i.value,foldev:a.value,fdp:{efedig:E.value,vale:Q.value.val},total:$.value,create:s,productos:r.value.body.product,print:g.value.val.ip,cliente:l.value};console.log(o);let b=`http://${S}/access/public/modify/modificacion`;B.post(b,o).then(H=>{m.value.state=!1,console.log(H),D.value=null,Y.value="",g.value.val=null,i.value=null,a.value="",R.value=!1,u.value=!1,r.value.state=!1,r.value.body=null,f.notify({html:!0,message:H.data.mssg,color:"positive",position:"center"});let ie=`http://${S}/access/public/modify/nwtck`;B.post(ie,k).then(Z=>{f.notify({html:!0,message:Z.data.mssg,color:"positive",position:"center"})}).catch(Z=>{f.notify({html:!0,message:Z.data.mssg,color:"positive",position:"center"})})}).catch(H=>{f.notify({html:!0,message:H.data.mssg,color:"negative",position:"center"})})};return se(),(S,s)=>(O(),G(zt,{view:"hHh Lpr fFf"},{default:t(()=>[e(yt,{class:"transparent text-dark",bordered:""},{default:t(()=>[e(ht),e(j),e(bt,{class:"justify-between"},{default:t(()=>[v("div",null,[h("Helpers "),e(dt,{name:"navigate_next",color:"primary"}),h(),Et]),e(F,{color:"primary",icon:"add"},{default:t(()=>[e(pt,null,{default:t(()=>[Pt,e(j),e(ce,{dense:"",onSubmit:n,class:"q-gutter-md q-pa-md"},{default:t(()=>[e(ae,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=o=>i.value=o),options:I(N),label:"Serie",autofocus:""},null,8,["modelValue","options"]),e(K,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a.value=o),type:"number",label:"Folio"},null,8,["modelValue"]),I(oe)?(O(),ne("div",Nt,[e(F,{type:"submit",color:"primary",icon:"search"})])):U("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(wt,null,{default:t(()=>[e(Tt,{class:"bg-grey-3",padding:""},{default:t(()=>[v("div",Ot,[e(Oe,{name:"bounce"},{default:t(()=>[m.value.state?(O(),G(L,{key:0,style:{"min-width":"400px"},flat:"",bordered:""},{default:t(()=>[e(Re,{bordered:""},{default:t(()=>[e(M,null,{default:t(()=>[e(y,null,{default:t(()=>[h("Ticket : ")]),_:1}),e(y,null,{default:t(()=>[h(z(m.value.body.ticket),1)]),_:1})]),_:1}),e(M,null,{default:t(()=>[e(y,null,{default:t(()=>[h("Cliente : ")]),_:1}),e(y,null,{default:t(()=>[h(z(m.value.body.cliente),1)]),_:1})]),_:1}),e(M,null,{default:t(()=>[e(y,null,{default:t(()=>[h("Fecha : ")]),_:1}),e(y,null,{default:t(()=>[h(z(m.value.body.fecha),1)]),_:1})]),_:1}),e(M,null,{default:t(()=>[e(y,null,{default:t(()=>[h("Total : ")]),_:1}),e(y,null,{default:t(()=>[h("$ "+z(m.value.body.total),1)]),_:1})]),_:1}),e(j),e(M,{class:"bg-indigo-2"},{default:t(()=>[e(y,null,{default:t(()=>[h("Movimiento")]),_:1}),e(y,null,{default:t(()=>[e(ae,{dense:"",modelValue:D.value,"onUpdate:modelValue":s[2]||(s[2]=o=>D.value=o),options:ge,label:"Seleccione",filled:"",autofocus:""},null,8,["modelValue"])]),_:1})]),_:1}),D.value=="Devolucion"||D.value=="Reimpresion"?(O(),G(M,{key:0},{default:t(()=>[e(y,null,{default:t(()=>[h("Impresora")]),_:1}),g.value.body?(O(),G(y,{key:1},{default:t(()=>[e(ae,{dense:"","option-label":"name",modelValue:g.value.val,"onUpdate:modelValue":s[3]||(s[3]=o=>g.value.val=o),options:g.value.body,label:"Impresora",filled:"",autofocus:""},null,8,["modelValue","options"])]),_:1})):(O(),G(y,{key:0},{default:t(()=>[e(Dt,{color:"purple",size:"2em"}),e(_t,{offset:[0,8]},{default:t(()=>[h("Obteniendo Impresoras")]),_:1})]),_:1}))]),_:1})):U("",!0),D.value=="Devolucion"?(O(),ne("div",Rt,[e(M,null,{default:t(()=>[e(y,null,{default:t(()=>[h("Motivo de la devolucion")]),_:1}),e(y,null,{default:t(()=>[e(K,{modelValue:Y.value,"onUpdate:modelValue":s[4]||(s[4]=o=>Y.value=o),type:"text",label:"describe el motivo"},null,8,["modelValue"])]),_:1})]),_:1})])):U("",!0)]),_:1}),I(Ce)?(O(),ne("div",qt,[e(_e,{align:"between"},{default:t(()=>[e(F,{flat:"",icon:"cancel"}),e(F,{flat:"",icon:"arrow_forward",onClick:p})]),_:1})])):U("",!0)]),_:1})):U("",!0)]),_:1})]),e(Oe,{name:"bounce"},{default:t(()=>[r.value.state?(O(),G(L,{key:0,class:"my-card",style:{"min-width":"400px"},flat:"",bordered:""},{default:t(()=>[e(Re,{bordered:""},{default:t(()=>[e(L,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(M,{class:"text-center"},{default:t(()=>[e(y,null,{default:t(()=>[e(J,{caption:"",lines:"2"},{default:t(()=>[h("Ticket")]),_:1}),e(J,{class:"text-h4"},{default:t(()=>[h(z(r.value.body.ticket.ticket),1)]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(J,{caption:"",lines:"2"},{default:t(()=>[h("Fecha")]),_:1}),e(J,{class:"text-h6"},{default:t(()=>[h(z(r.value.body.ticket.fecha),1)]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(J,{caption:"",lines:"2"},{default:t(()=>[h("Total")]),_:1}),e(J,{class:"text-h6"},{default:t(()=>[h(z(Number.parseFloat(I($)).toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(j,{spaced:"",inset:"",vertical:"",dark:""}),e(L,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(M,{class:"text-h6"},{default:t(()=>[e(y,null,{default:t(()=>[e(J,{lines:"2"},{default:t(()=>[h("Cliente")]),_:1}),e(J,null,{default:t(()=>[e(ce,{onSubmit:C,class:"q-gutter-md q-display-flex q-justify-center"},{default:t(()=>[e(K,{modelValue:l.value,"onUpdate:modelValue":s[5]||(s[5]=o=>l.value=o),type:"number",style:{"max-width":"100px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,null,{default:t(()=>[h(z(r.value.body.ticket.cliente),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(j,{spaced:"",inset:"",vertical:"",dark:""}),e(L,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(M,null,{default:t(()=>[e(y,null,{default:t(()=>[e(ce,{onSubmit:ue,class:"q-gutter-md"},{default:t(()=>[v("div",null,[e(K,{modelValue:x.value,"onUpdate:modelValue":s[6]||(s[6]=o=>x.value=o),type:"text",label:"Agregar Modelo"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(j,{spaced:"",inset:"",vertical:"",dark:""}),e(L,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(M,null,{default:t(()=>[e(y,null,{default:t(()=>[h("ARTICULO")]),_:1}),e(y,null,{default:t(()=>[h("DESCRIPCION")]),_:1}),e(y,null,{default:t(()=>[h("CANTIDAD")]),_:1}),e(y,null,{default:t(()=>[h("PRECIO")]),_:1}),e(y,null,{default:t(()=>[h("TOTAL")]),_:1})]),_:1}),e(It,{style:{height:"300px","max-width":"1700px"}},{default:t(()=>[(O(!0),ne(vt,null,ct(I(pe),(o,k)=>ee((O(),G(M,{class:"border",key:k,onClick:b=>X(o),clickable:""},{default:t(()=>[e(y,null,{default:t(()=>[h(z(o.ARTICULO),1)]),_:2},1024),e(y,null,{default:t(()=>[h(z(o.DESCRIPCION),1)]),_:2},1024),e(y,null,{default:t(()=>[h(z(Number.parseFloat(o.CANTIDAD).toFixed(2)),1)]),_:2},1024),e(y,null,{default:t(()=>[h("$ "+z(Number.parseFloat(o.PRECIO).toFixed(2)),1)]),_:2},1024),e(y,null,{default:t(()=>[h("$ "+z(Number.parseFloat(o.PRECIO*o.CANTIDAD).toFixed(2)),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[mt]])),128))]),_:1})]),_:1})]),_:1}),e(j,{spaced:"",inset:"",vertical:"",dark:""}),e(L,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(M,null,{default:t(()=>[e(y,null,{default:t(()=>[e(J,null,{default:t(()=>[h("Observaciones")]),_:1})]),_:1}),e(y,{side:"",top:""},{default:t(()=>[e(K,{modelValue:q.value,"onUpdate:modelValue":s[7]||(s[7]=o=>q.value=o),type:"text",label:"observaciones",style:{"max-width":"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{class:"full-width",color:"primary",icon:"receipt",label:"PAGAR",onClick:Se})]),_:1})]),_:1})):U("",!0)]),_:1}),e(fe,{modelValue:A.value.state,"onUpdate:modelValue":s[9]||(s[9]=o=>A.value.state=o),position:"right",persistent:""},{default:t(()=>[e(L,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[v("div",Ft,"Articulo : "+z(A.value.body.ARTICULO),1),v("div",Mt,"Descripcion : "+z(A.value.body.DESCRIPCION),1)]),_:1}),e(P,{class:"row"},{default:t(()=>[v("div",$t,[e(K,{modelValue:A.value.body.CANTIDAD,"onUpdate:modelValue":s[8]||(s[8]=o=>A.value.body.CANTIDAD=o),type:"number",label:"Cantidad",style:{"max-width":"50%"}},null,8,["modelValue"])])]),_:1}),e(P,{class:"row justify-between"},{default:t(()=>[v("div",Qt,"Precio : "+z(Number.parseFloat(A.value.body.PRECIO).toFixed(2)),1),v("div",Lt,"Total : "+z(Number.parseFloat(A.value.body.PRECIO*A.value.body.CANTIDAD).toFixed(2)),1)]),_:1}),e(_e,{class:"row justify-between"},{default:t(()=>[e(F,{flat:"",icon:"delete",color:"negative",onClick:ze}),ee(e(F,{flat:"",icon:"arrow_forward_ios",disable:A.value.body.CANTIDAD.length<=0,onClick:je},null,8,["disable"]),[[ve]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(fe,{modelValue:T.value.state,"onUpdate:modelValue":s[11]||(s[11]=o=>T.value.state=o),position:"left",persistent:""},{default:t(()=>[e(L,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[v("div",Ut,"Articulo : "+z(T.value.body.CODART),1),v("div",Bt,"Descripcion : "+z(T.value.body.DESART),1)]),_:1}),e(P,{class:"row"},{default:t(()=>[v("div",Ht,[e(K,{modelValue:T.value.account,"onUpdate:modelValue":s[10]||(s[10]=o=>T.value.account=o),type:"number",label:"Cantidad",style:{"max-width":"50%"}},null,8,["modelValue"])])]),_:1}),e(P,{class:"row justify-between"},{default:t(()=>[v("div",jt,"Precio : "+z(Number.parseFloat(T.value.body.PRELTA).toFixed(2)),1),v("div",Gt,"Total : "+z(Number.parseFloat(T.value.body.PRELTA*T.value.account).toFixed(2)),1)]),_:1}),e(_e,{class:"row justify-between"},{default:t(()=>[ee(e(F,{flat:"",icon:"close",color:"positive"},null,512),[[ve]]),ee(e(F,{flat:"",icon:"arrow_forward_ios",disable:T.value.account<=0,onClick:Te},null,8,["disable"]),[[ve]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(fe,{modelValue:te.value.state,"onUpdate:modelValue":s[12]||(s[12]=o=>te.value.state=o)},{default:t(()=>[e(L,null,{default:t(()=>[e(P,{class:"items-center"},{default:t(()=>[Yt,e(j,{spaced:"",inset:"",vertical:"",dark:""}),v("div",Xt,z(te.value.body.NOFCLI),1),e(j,{spaced:"",inset:"",vertical:"",dark:""}),Kt]),_:1}),e(_e,{align:"center"},{default:t(()=>[ee(e(F,{flat:"",icon:"close",color:"primary"},null,512),[[ve]]),ee(e(F,{flat:"",icon:"check",color:"positive",onClick:He},null,512),[[ve]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(fe,{modelValue:u.value,"onUpdate:modelValue":s[23]||(s[23]=o=>u.value=o)},{default:t(()=>[e(L,{class:"my-card",style:{width:"700px","max-width":"80vw"}},{default:t(()=>[v("div",Jt,[v("div",null,[Wt,v("div",Zt,z(r.value.body.ticket.ticket),1)]),v("div",el,[tl,v("div",ll,"$ "+z(m.value.body.total),1)]),v("div",al,[ol,v("div",sl,"$ "+z(I($)),1)])]),v("div",null,[e(ce,{onSubmit:Ee,class:"q-gutter-md"},{default:t(()=>[e(P,null,{default:t(()=>[v("div",ul,[il,e(K,{class:"col",modelValue:E.value.EFE,"onUpdate:modelValue":s[13]||(s[13]=o=>E.value.EFE=o),type:"number",autofocus:"",min:0,step:"any",dense:"","input-class":"q-pl-md fw-sbold fs-inc4"},null,8,["modelValue","min"]),parseFloat(E.value.EFE)?(O(),G(F,{key:0,color:"primary",icon:"backspace",flat:"",dense:"",round:"",onClick:s[14]||(s[14]=o=>E.value.EFE=0)})):U("",!0)])]),_:1}),v("div",null,[e(P,null,{default:t(()=>[v("div",nl,[e(ae,{class:"col-3",modelValue:E.value.DIG.id,"onUpdate:modelValue":s[15]||(s[15]=o=>E.value.DIG.id=o),options:me,label:"Terminal","option-value":"id","option-label":"desc",dense:""},null,8,["modelValue"]),e(K,{class:"col",modelValue:E.value.DIG.val,"onUpdate:modelValue":s[16]||(s[16]=o=>E.value.DIG.val=o),type:"number",min:0,step:"any",dense:"","input-class":"q-pl-md fw-sbold fs-inc4",disable:!E.value.DIG.id},null,8,["modelValue","min","disable"]),parseFloat(E.value.DIG.val)?(O(),G(F,{key:0,color:"primary",icon:"backspace",flat:"",dense:"",round:"",onClick:s[17]||(s[17]=o=>{E.value.DIG.val=0,E.value.DIG.id=null})})):U("",!0)])]),_:1}),e(P,null,{default:t(()=>[e(ae,{modelValue:I(W).val,"onUpdate:modelValue":[s[18]||(s[18]=o=>I(W).val=o),Ge],options:I(W).opts,label:"Descontar Vale",filled:""},null,8,["modelValue","options"])]),_:1}),I(W).val=="SI"?(O(),G(P,{key:0},{default:t(()=>[v("div",rl,[dl,e(ae,{modelValue:I(Q).val,"onUpdate:modelValue":[s[19]||(s[19]=o=>I(Q).val=o),s[20]||(s[20]=o=>ft(le)?le.value=I(Q).val.IMPANT:le=I(Q).val.IMPANT)],options:I(Q).body,"option-label":"CODANT",label:"Descontar Vale",filled:"",style:{width:"250px"}},null,8,["modelValue","options"]),e(j,{spaced:"",inset:"",vertical:"",dark:""}),I(Q).val?(O(),ne("div",cl," $ "+z(Number.parseFloat(I(Q).val.IMPANT).toFixed(2)),1)):U("",!0)])]),_:1})):U("",!0)])]),_:1})]),v("div",vl,[v("div",null,[fl,v("div",ml," $ "+z(I(be)),1)]),I(be)>=0?(O(),ne("div",pl,[e(F,{color:"primary",icon:"payment",label:"Pagar",onClick:Ee})])):U("",!0)]),e(fe,{modelValue:R.value,"onUpdate:modelValue":s[22]||(s[22]=o=>R.value=o)},{default:t(()=>[e(L,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[bl]),_:1}),e(P,null,{default:t(()=>[e(ce,{onSubmit:Ye,class:"q-gutter-md"},{default:t(()=>[e(ae,{dense:"","option-label":"name",modelValue:g.value.val,"onUpdate:modelValue":s[21]||(s[21]=o=>g.value.val=o),options:g.value.body,label:"Impresora",filled:"",autofocus:"",style:{width:"200px"}},null,8,["modelValue","options"]),v("div",null,[e(F,{label:"Enviar",type:"submit",color:"primary",style:{width:"200px"}})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{Il as default};
