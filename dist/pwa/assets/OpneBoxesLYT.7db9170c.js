import{Q as b}from"./QSeparator.5eac6a8c.js";import{r as v,c as L,o as g,a as C,w as a,aD as Y,u as N,aV as P,e,i as s,Y as k,Q,a4 as h,a3 as m,a2 as V,aX as j,g as S,a1 as q,a0 as R,h as H,a6 as O}from"./index.d2a553ed.js";import{Q as U}from"./QToolbar.4cede2c8.js";import{Q as F}from"./QHeader.efc338ad.js";import{Q as K}from"./QInput.805ec13a.js";import{a as x,b as p,c as M}from"./QSelect.b141be1a.js";import{Q as J}from"./auto.7cb29034.js";import{Q as X}from"./QList.c9c4c107.js";import{Q as z}from"./QTable.ef2af850.js";import{Q as G}from"./QDate.6b529489.js";import{Q as W,a as D}from"./QCard.ad2a31d8.js";import{Q as Z}from"./QCardActions.e734b15f.js";import{Q as ee}from"./QDialog.1a2f4a9a.js";import{Q as ae,a as oe}from"./QLayout.46c914ba.js";import"./AppFullscreen.c3bbe910.js";import{u as te}from"./use-quasar.18afcf87.js";import{d as se}from"./dayjs.min.25545ff6.js";import{_ as le}from"./UserToolbar.652faaa8.js";import{A as re}from"./assistApi.428bd712.js";import{u as ie}from"./VDB.a650b002.js";import{a as ne}from"./axios.f1f32898.js";import"./QResizeObserver.86bd2f7c.js";import"./use-key-composition.be89f92d.js";import"./uid.42677368.js";import"./position-engine.8bc18375.js";import"./rtl.b51694b1.js";import"./format.2bc25e5f.js";import"./QLinearProgress.48a12111.js";import"./QCheckbox.bc107605.js";import"./use-cache.b0833c75.js";import"./date.5fd903b8.js";import"./_commonjsHelpers.88e99c8f.js";import"./ClosePopup.171f4986.js";import"./axios.eed4c97e.js";const de=s("span",{class:"text-grey"},"Helpers",-1),ue=s("span",{class:"text-h6"},"Cajas Abiertas",-1),ce={class:"row"},me={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition"},pe={class:"text-bold"},fe={class:"text-overline"},_e={key:0,class:""},ve={class:"q-pa-md"},ge=s("div",{class:"q-pb-sm"},null,-1),ea={__name:"OpneBoxesLYT",setup(Qe){const d=te();Y();const T=N(),B=ie(),l=v(!1),c=v(null),f=v([]),_=v({pagination:{rowsPerPage:0},filter:""});L(()=>d.platform.is.mobile);const I=async()=>{d.loading.show({message:"Cargando Informacion"}),console.log("se inicia el init");const r=await re.index();if(r.error)console.log(r);else{console.log(r),f.value=r;let t=new Date,u=se(t).format("YYYY/MM/DD");c.value=u,console.log(u),y(f.value,c.value)}},y=async(r,t)=>{console.log(t);const u=r.map((o,i)=>new Promise((w,A)=>{setTimeout(()=>{let E=`http://${o.ip_address}/access/public/reports/OpenCash`;ne.post(E,{filt:t}).then(n=>{o.sales=n.data==null?null:n.data,console.log(n),w(n)}).catch(n=>{console.log(n.response.data.message),A(n)})},i*1e3)}));try{await Promise.all(u)}catch(o){console.error("Error en alguna de las solicitudes:",o)}d.loading.hide()};B.session.rol==="adm"?I():(d.notify({message:"No tienes acceso a esta pagina",type:"negative",position:"center"}),T.replace("/"));const $=()=>{l.value=!1,d.loading.show({message:"Obteniendo Datos"}),y(f.value,c.value).finally(()=>{d.loading.hide()})};return(r,t)=>{const u=P("router-view");return g(),C(ae,{view:"hHh Lpr fFf"},{default:a(()=>[e(oe,null,{default:a(()=>[e(F,{class:"bg-grey-3 text-dark",bordered:""},{default:a(()=>[e(le),e(b),e(U,{class:"justify-between"},{default:a(()=>[s("div",null,[de,e(k,{name:"navigate_next",color:"primary"}),ue]),s("div",ce,[e(Q,{color:"primary",icon:"event",onClick:t[0]||(t[0]=o=>l.value=!l.value),flat:"",round:""})])]),_:1})]),_:1}),e(z,{title:"Sucursales",rows:f.value,"hide-header":"",pagination:_.value.pagination,filter:_.value.filter},{"top-right":a(()=>[e(K,{borderless:"",dense:"",debounce:"300",modelValue:_.value.filter,"onUpdate:modelValue":t[1]||(t[1]=o=>_.value.filter=o),placeholder:"Buscar"},{append:a(()=>[e(k,{name:"search"})]),_:1},8,["modelValue"])]),body:a(o=>[s("div",me,[e(X,{bordered:"",dense:""},{default:a(()=>[e(x,null,{default:a(()=>[e(p,null,{default:a(()=>[e(M,{class:"flex justify-between"},{default:a(()=>{var i;return[s("div",pe,h(o.row.name),1),s("div",fe,[m(h((i=o.row.sales)==null?void 0:i.length)+" ",1),e(Q,{color:"grey",flat:"",dense:"",icon:o.expand?"keyboard_arrow_up":"keyboard_arrow_down",onClick:w=>o.expand=!o.expand},null,8,["icon","onClick"])])]}),_:2},1024)]),_:2},1024)]),_:2},1024),e(J,null,{default:a(()=>[o.row.sales?V((g(),S("div",_e,[e(b),e(x,{class:"text-center"},{default:a(()=>[e(p,null,{default:a(()=>[m(" CAJA ")]),_:1}),e(p,null,{default:a(()=>[m(" TICKETS ")]),_:1})]),_:1}),(g(!0),S(q,null,R(o.row.sales,(i,w)=>V((g(),C(x,{class:"text-center",dense:"",clickable:""},{default:a(()=>[e(p,null,{default:a(()=>[m(h(i.DESTER),1)]),_:2},1024),e(p,null,{default:a(()=>[m(h(i.TICKETS),1)]),_:2},1024)]),_:2},1024)),[[O]])),256))],512)),[[j,o.expand]]):H("",!0)]),_:2},1024)]),_:2},1024),e(b,{spaced:"",inset:"",vertical:"",dark:""})])]),_:1},8,["rows","pagination","filter"]),e(ee,{modelValue:l.value,"onUpdate:modelValue":t[4]||(t[4]=o=>l.value=o)},{default:a(()=>[e(W,{class:"my-card"},{default:a(()=>[e(D,null,{default:a(()=>[s("div",ve,[ge,e(G,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=o=>c.value=o),range:"",minimal:""},null,8,["modelValue"])])]),_:1}),e(D,null,{default:a(()=>[e(Z,{align:"right"},{default:a(()=>[e(Q,{flat:"",icon:"close",color:"negative",onClick:t[3]||(t[3]=o=>l.value=!l.value)}),e(Q,{flat:"",icon:"check",color:"positive",onClick:$})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(u)]),_:1})]),_:1})}}};export{ea as default};
