import{Q as _}from"./position-engine.d6b7d24d.js";import{j,y as Y,k as z,W as K,aV as M,aW as U,r as q,c as J,o as k,a as T,w as a,aE as W,u as G,aX as X,e as t,i as r,U as H,f as $,h as S,Q as B,a4 as d,aY as Z,a3 as o,g as I,a2 as ee,aZ as te}from"./index.6c07c0bc.js";import{Q as ae}from"./QSelect.cdc5cac8.js";import{a as se,Q as le}from"./axios.d8d398ac.js";import{Q as ne,_ as ie}from"./UserToolbar.58d1b2ac.js";import{Q as oe,a as P,b as F,c as re}from"./QLayout.0fd08110.js";import{Q as de}from"./QInput.ff1969bf.js";import{Q as O,a as w,b as i}from"./QItem.5c0cb3a4.js";import{Q as ce}from"./QCircularProgress.9b2aeca7.js";import{Q as ue}from"./QList.f71d5cb8.js";import{Q as me}from"./QTable.c50a2c31.js";import{u as fe}from"./use-quasar.b12573d2.js";import"./dayjs.min.25545ff6.js";import{a as _e}from"./axios.6f2ddf82.js";import{u as ve}from"./VDB.dfa45c16.js";import"./QDialog.71f9eca3.js";import"./QLinearProgress.355a430d.js";import"./QCheckbox.dfec148b.js";import"./_commonjsHelpers.88e99c8f.js";var he=j({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(n,{slots:h,emit:b}){let N=!1,u,y,v=null,p=null,f,C;function Q(){u&&u(),u=null,N=!1,v!==null&&(clearTimeout(v),v=null),p!==null&&(clearTimeout(p),p=null),y!==void 0&&y.removeEventListener("transitionend",f),f=null}function A(e,s,l){s!==void 0&&(e.style.height=`${s}px`),e.style.transition=`height ${n.duration}ms cubic-bezier(.25, .8, .50, 1)`,N=!0,u=l}function E(e,s){e.style.overflowY=null,e.style.height=null,e.style.transition=null,Q(),s!==C&&b(s)}function x(e,s){let l=0;y=e,N===!0?(Q(),l=e.offsetHeight===e.scrollHeight?0:void 0):(C="hide",e.style.overflowY="hidden"),A(e,l,s),v=setTimeout(()=>{v=null,e.style.height=`${e.scrollHeight}px`,f=c=>{p=null,(Object(c)!==c||c.target===e)&&E(e,"show")},e.addEventListener("transitionend",f),p=setTimeout(f,n.duration*1.1)},100)}function g(e,s){let l;y=e,N===!0?Q():(C="show",e.style.overflowY="hidden",l=e.scrollHeight),A(e,l,s),v=setTimeout(()=>{v=null,e.style.height=0,f=c=>{p=null,(Object(c)!==c||c.target===e)&&E(e,"hide")},e.addEventListener("transitionend",f),p=setTimeout(f,n.duration*1.1)},100)}return Y(()=>{N===!0&&Q()}),()=>z(K,{css:!1,appear:n.appear,onEnter:x,onLeave:g},h.default)}});const V={};function be(n){Object.assign(m,{request:n,exit:n,toggle:n})}function L(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null}function R(){const n=m.activeEl=m.isActive===!1?null:L();U(n===null||n===document.documentElement?document.body:n)}function xe(){m.isActive=m.isActive===!1,R()}function D(n,h){try{const b=n[h]();return b===void 0?Promise.resolve():b}catch(b){return Promise.reject(b)}}const m=M({isActive:!1,activeEl:null},{isCapable:!1,install({$q:n}){n.fullscreen=this}});V.request=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"].find(n=>document.documentElement[n]!==void 0),m.isCapable=V.request!==void 0,m.isCapable===!1?be(()=>Promise.reject("Not capable")):(Object.assign(m,{request(n){const h=n||document.documentElement,{activeEl:b}=m;return h===b?Promise.resolve():(b!==null&&h.contains(b)===!0?m.exit():Promise.resolve()).finally(()=>D(h,V.request))},exit(){return m.isActive===!0?D(document,V.exit):Promise.resolve()},toggle(n){return m.isActive===!0?m.exit():m.request(n)}}),V.exit=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"].find(n=>document[n]),m.isActive=Boolean(L()),m.isActive===!0&&R(),["onfullscreenchange","onmsfullscreenchange","onwebkitfullscreenchange"].forEach(n=>{document[n]=xe}));var ge={index(){return _e.get("/sales/getSale").then(n=>n.data).catch(n=>({fail:n}))}};const pe=r("span",{class:"text-grey"},"Helpers",-1),ke=r("span",{class:"text-h6"},"Ventas Sucursales",-1),ye={class:"row"},we={class:"text-bold text-h6"},Ne=r("div",{class:"text-h6 text-center"},"Ventas 2023",-1),Ee={class:"text-h4 text-center"},Fe=r("div",{class:"text-h6 text-center"},"Tickets 2023",-1),Qe={class:"text-h4 text-center"},Te=r("div",{class:"text-h6 text-center"},"Ventas 2024",-1),Se={class:"text-h4 text-center"},Ce=r("div",{class:"text-h6 text-center"},"Tickets 2024",-1),$e={class:"text-h4 text-center"},Ve=r("div",{class:"text-h6 text-center"},"Diferencia",-1),Ae={class:"text-h4 text-center"},Pe=r("div",{class:"text-h6 text-center"},"Diferencia Tickets",-1),qe={class:"text-h4 text-center"},Ie=r("div",{class:"text-h6 text-center"},"VENTAS HOY",-1),He={class:"text-h4 text-center"},Be=r("div",{class:"text-h6 text-center"},"Tickets HOY",-1),Oe={class:"text-h4 text-center"},De={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition"},Le=r("div",null,null,-1),Re={key:0},je={key:1},Ye={key:0,class:""},ct={__name:"SaleStore",setup(n){const h=fe();W();const b=G(),N=ve(),u=q([]),y=q({pagination:{rowsPerPage:0},filter:""}),v=q({val:null}),p=[{id:1,label:"Enero"},{id:2,label:"Febrero"},{id:3,label:"Marzo"},{id:4,label:"Abril"},{id:5,label:"Mayo"},{id:6,label:"Junio"},{id:7,label:"Julio"},{id:8,label:"Agosto"},{id:9,label:"Septiembre"},{id:10,label:"Octubre"},{id:11,label:"Noviembre"},{id:12,label:"Diciembre"}],f=J(()=>h.platform.is.mobile),C=async()=>{const x=new Date().getMonth()+1;v.value.val=p.filter(e=>e.id===x)[0],h.loading.show({message:"Cargando Informacion"}),console.log("se inicia el init");const g=await ge.index();g.error?console.log(g):(console.log(g),u.value=g,Q(u.value,x))},Q=async(E,x)=>{E.forEach((g,e)=>{setTimeout(()=>{let l=`http://${g.ip_address}/access/public/reports/getSalesPerMonth/${x}`;se.get(l).then(c=>{g.sales=c.data==null?null:c.data,console.log(c)}).catch(c=>{console.log(c.response.data.message)})},e*1e3)}),h.loading.hide()};N.session.rol=="root"?C():(h.notify({message:"No tienes acceso a esta pagina",type:"negative",position:"center"}),b.replace("/"));const A=()=>{u.value.map(E=>E.sales=null),Q(u.value,v.value.val.id)};return(E,x)=>{const g=X("router-view");return k(),T(oe,{view:"hHh Lpr fFf"},{default:a(()=>[t(re,null,{default:a(()=>[t(ne,{class:"bg-grey-3 text-dark",bordered:""},{default:a(()=>[t(ie),t(_),t(le,{class:"justify-between"},{default:a(()=>[r("div",null,[pe,t(H,{name:"navigate_next",color:"primary"}),ke]),r("div",ye,[$(f)?S("",!0):(k(),T(ae,{key:0,modelValue:v.value.val,"onUpdate:modelValue":[x[0]||(x[0]=e=>v.value.val=e),A],options:p,label:"mes",outlined:"",dense:""},null,8,["modelValue"])),t(B,{dense:"",flat:"",color:"primary",icon:"autorenew",onClick:C})])]),_:1})]),_:1}),t(_,{spaced:"",inset:"",vertical:"",dark:""}),r("div",we,d(v.value.val.label),1),t(_,{spaced:"",inset:"",vertical:"",dark:""}),r("div",{class:Z($(f)?"":"row")},[$(f)?S("",!0):(k(),T(P,{key:0,class:"my-card col",bordered:"",dense:""},{default:a(()=>[t(F,null,{default:a(()=>[Ne,r("div",Ee,d(Number(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.salesant)*1.1||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),t(F,null,{default:a(()=>[Fe,r("div",Qe,d(Number(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.tiketsant)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1})),t(_,{spaced:"",inset:"",vertical:"",dark:""}),$(f)?S("",!0):(k(),T(P,{key:1,class:"my-card col",bordered:"",dense:""},{default:a(()=>[t(F,null,{default:a(()=>[Te,r("div",Se,d(Number(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.salesact)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),t(F,null,{default:a(()=>[Ce,r("div",$e,d(Number(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.tiketsact)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1})),t(_,{spaced:"",inset:"",vertical:"",dark:""}),$(f)?S("",!0):(k(),T(P,{key:2,class:"my-card col",bordered:"",dense:""},{default:a(()=>[t(F,null,{default:a(()=>[Ve,r("div",Ae,d(Number(u.value.reduce((e,s)=>{var l,c;return e+Number(((l=s.sales)==null?void 0:l.salesact)-((c=s.sales)==null?void 0:c.salesant)*1.1||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),t(F,null,{default:a(()=>[Pe,r("div",qe,d(Number(u.value.reduce((e,s)=>{var l,c;return e+Number(((l=s.sales)==null?void 0:l.tiketsact)-((c=s.sales)==null?void 0:c.tiketsant)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1})),t(_,{spaced:"",inset:"",vertical:"",dark:""}),t(P,{class:"my-card col",bordered:"",dense:""},{default:a(()=>[t(F,null,{default:a(()=>[Ie,r("div",He,d(Number(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.saleshoy)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),t(F,null,{default:a(()=>[Be,r("div",Oe,d(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.hoytck)||0)},0)),1)]),_:1})]),_:1})],2),t(_,{spaced:"",inset:"",vertical:"",dark:""}),t(me,{title:"Sucursales",rows:u.value,"row-key":"id",pagination:y.value.pagination,filter:y.value.filter,"hide-header":""},{"top-right":a(()=>[t(de,{borderless:"",dense:"",debounce:"300",modelValue:y.value.filter,"onUpdate:modelValue":x[1]||(x[1]=e=>y.value.filter=e),placeholder:"Buscar"},{append:a(()=>[t(H,{name:"search"})]),_:1},8,["modelValue"])]),body:a(e=>[r("div",De,[t(ue,{bordered:"",dense:""},{default:a(()=>[t(O,null,{default:a(()=>[t(w,null,{default:a(()=>[t(i,{overline:""},{default:a(()=>[o(d(e.row.name),1)]),_:2},1024),t(i,{caption:""},{default:a(()=>[o(d(e.row.alias),1)]),_:2},1024),Le]),_:2},1024),e.expand?S("",!0):(k(),T(w,{key:0,class:"text-right"},{default:a(()=>[e.row.sales?(k(),I("div",Re,[t(i,{overline:""},{default:a(()=>{var s;return[o("$ "+d(Number((s=e.row.sales)==null?void 0:s.saleshoy).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]}),_:2},1024),t(i,{caption:""},{default:a(()=>{var s;return[o("tickets: "+d((s=e.row.sales)==null?void 0:s.hoytck),1)]}),_:2},1024)])):(k(),I("div",je,[t(i,{caption:""},{default:a(()=>[t(ce,{indeterminate:"",rounded:"",size:"20px",color:"primary",class:"q-ma-md"})]),_:1})]))]),_:2},1024)),$(f)?S("",!0):(k(),T(w,{key:1,avatar:""},{default:a(()=>[t(B,{color:"grey",flat:"",dense:"",icon:e.expand?"keyboard_arrow_up":"keyboard_arrow_down",onClick:s=>e.expand=!e.expand},null,8,["icon","onClick"])]),_:2},1024))]),_:2},1024),t(he,null,{default:a(()=>[e.row.sales?ee((k(),I("div",Ye,[t(_),t(O,{class:"text-center",dense:""},{default:a(()=>[t(w,null,{default:a(()=>[t(i,{overline:""},{default:a(()=>[o("VENTAS 2023")]),_:1}),t(i,{caption:""},{default:a(()=>[o(d(Number(e.row.sales.salesant*1.1).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),t(_,{spaced:"",inset:"",vertical:"",dark:""}),t(i,{overline:""},{default:a(()=>[o("TICKETS 2023")]),_:1}),t(i,{caption:""},{default:a(()=>[o(d(e.row.sales.tiketsant),1)]),_:2},1024)]),_:2},1024),t(w,null,{default:a(()=>[t(i,{overline:""},{default:a(()=>[o("Promedio 2023")]),_:1}),t(i,{caption:""},{default:a(()=>[o(d(Number(Number(e.row.sales.salesant*1.1)/Number(e.row.sales.tiketsant)).toFixed(2)),1)]),_:2},1024),t(_,{spaced:"",inset:"",vertical:"",dark:""})]),_:2},1024),t(w,null,{default:a(()=>[t(i,{overline:""},{default:a(()=>[o("VENTAS 2024")]),_:1}),t(i,{caption:""},{default:a(()=>[o(d(Number(e.row.sales.salesact).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),t(_,{spaced:"",inset:"",vertical:"",dark:""}),t(i,{overline:""},{default:a(()=>[o("TICKETS 2024")]),_:1}),t(i,{caption:""},{default:a(()=>[o(d(e.row.sales.tiketsact),1)]),_:2},1024)]),_:2},1024),t(w,null,{default:a(()=>[t(i,{overline:""},{default:a(()=>[o("Promedio 2024 ")]),_:1}),t(i,{caption:""},{default:a(()=>[o(d(Number(Number(e.row.sales.salesact)/Number(e.row.sales.tiketsact)).toFixed(2)),1)]),_:2},1024),t(_,{spaced:"",inset:"",vertical:"",dark:""})]),_:2},1024),t(w,null,{default:a(()=>[t(i,{overline:""},{default:a(()=>[o("DIFERENCIA")]),_:1}),t(i,{caption:""},{default:a(()=>[o(d((Number(e.row.sales.salesact).toFixed(2)-Number(e.row.sales.salesant*1.1).toFixed(2)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),t(_,{spaced:"",inset:"",vertical:"",dark:""}),t(i,{overline:""},{default:a(()=>[o("DIFERENCIA TICKETS")]),_:1}),t(i,{caption:""},{default:a(()=>[o(d(e.row.sales.tiketsact-e.row.sales.tiketsant),1)]),_:2},1024)]),_:2},1024),t(w,null,{default:a(()=>[t(i,{overline:""},{default:a(()=>[o("VENTA HOY ")]),_:1}),t(i,{caption:""},{default:a(()=>[o(d(Number(e.row.sales.saleshoy).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),t(_,{spaced:"",inset:"",vertical:"",dark:""}),t(i,{overline:""},{default:a(()=>[o("TICKETS HOY")]),_:1}),t(i,{caption:""},{default:a(()=>[o(d(e.row.sales.hoytck),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)],512)),[[te,e.expand]]):S("",!0)]),_:2},1024)]),_:2},1024),t(_,{spaced:"",inset:"",vertical:"",dark:""})])]),_:1},8,["rows","pagination","filter"]),t(g)]),_:1})]),_:1})}}};export{ct as default};
