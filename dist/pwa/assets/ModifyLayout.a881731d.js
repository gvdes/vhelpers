import{e as Je,Q as G}from"./position-engine.cf4b3d7e.js";import{k as A,j as Be,aL as We,aM as Ze,aa as et,Y as ce,z as tt,aA as lt,ap as be,aB as Ae,T as Pe,Z as we,av as Ie,aq as ke,O as at,r as h,c as V,L as ot,v as st,R as ut,S as it,y as nt,J as rt,a2 as te,m as dt,aN as Ne,aO as De,o as R,a as Y,w as t,e,i as v,a3 as y,U as ct,Q as F,f as I,g as re,h as B,W as Re,a4 as z,a0 as vt,a1 as ft,aP as mt,a6 as pt}from"./index.af5422a8.js";import{d as he,a as bt,Q as se}from"./QSelect.a8412bb7.js";import{Q as J}from"./QInput.61615bfc.js";import{Q as ve}from"./QForm.c5de0ab1.js";import{a as H,Q as ht}from"./axios.f3f58f84.js";import{_ as yt,Q as _t,a as ye,C as fe}from"./UserToolbar.163446fb.js";import{Q as Oe,a as M,b as _,c as W}from"./QList.cc248545.js";import{Q as gt}from"./QTooltip.df5d4d6d.js";import{u as Ct,f as St,g as qe,j as zt,Q as Tt,a as At,b as U,c as P,d as wt}from"./QLayout.ef667e7c.js";import{g as Fe,s as Me}from"./touch.70a9dd44.js";import{Q as me}from"./QDialog.9bd7d34e.js";import{u as kt}from"./VDB.51597f76.js";import{u as Dt}from"./use-quasar.784d4105.js";const xt=[A("g",[A("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),A("clipPath",{id:"uil-hourglass-clip1"},[A("rect",{x:"15",y:"20",width:" 70",height:"25"},[A("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),A("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),A("clipPath",{id:"uil-hourglass-clip2"},[A("rect",{x:"15",y:"55",width:" 70",height:"25"},[A("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),A("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),A("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),A("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),A("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var Vt=Be({name:"QSpinnerHourglass",props:We,setup(c){const{cSize:d,classes:f}=Ze(c);return()=>A("svg",{class:f.value,width:d.value,height:d.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},xt)}});function xe(c,d,f){const N=Ie(c);let l,u=N.left-d.event.x,i=N.top-d.event.y,a=Math.abs(u),m=Math.abs(i);const r=d.direction;r.horizontal===!0&&r.vertical!==!0?l=u<0?"left":"right":r.horizontal!==!0&&r.vertical===!0?l=i<0?"up":"down":r.up===!0&&i<0?(l="up",a>m&&(r.left===!0&&u<0?l="left":r.right===!0&&u>0&&(l="right"))):r.down===!0&&i>0?(l="down",a>m&&(r.left===!0&&u<0?l="left":r.right===!0&&u>0&&(l="right"))):r.left===!0&&u<0?(l="left",a<m&&(r.up===!0&&i<0?l="up":r.down===!0&&i>0&&(l="down"))):r.right===!0&&u>0&&(l="right",a<m&&(r.up===!0&&i<0?l="up":r.down===!0&&i>0&&(l="down")));let g=!1;if(l===void 0&&f===!1){if(d.event.isFirst===!0||d.event.lastDir===void 0)return{};l=d.event.lastDir,g=!0,l==="left"||l==="right"?(N.left-=u,a=0,u=0):(N.top-=i,m=0,i=0)}return{synthetic:g,payload:{evt:c,touch:d.event.mouse!==!0,mouse:d.event.mouse===!0,position:N,direction:l,isFirst:d.event.isFirst,isFinal:f===!0,duration:Date.now()-d.event.time,distance:{x:a,y:m},offset:{x:u,y:i},delta:{x:N.left-d.event.lastX,y:N.top-d.event.lastY}}}}let It=0;var $e=et({name:"touch-pan",beforeMount(c,{value:d,modifiers:f}){if(f.mouse!==!0&&ce.has.touch!==!0)return;function N(u,i){f.mouse===!0&&i===!0?at(u):(f.stop===!0&&we(u),f.prevent===!0&&Pe(u))}const l={uid:"qvtp_"+It++,handler:d,modifiers:f,direction:Fe(f),noop:tt,mouseStart(u){Me(u,l)&&lt(u)&&(be(l,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),l.start(u,!0))},touchStart(u){if(Me(u,l)){const i=u.target;be(l,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),l.start(u)}},start(u,i){if(ce.is.firefox===!0&&Ae(c,!0),l.lastEvt=u,i===!0||f.stop===!0){if(l.direction.all!==!0&&(i!==!0||l.modifiers.mouseAllDir!==!0&&l.modifiers.mousealldir!==!0)){const r=u.type.indexOf("mouse")>-1?new MouseEvent(u.type,u):new TouchEvent(u.type,u);u.defaultPrevented===!0&&Pe(r),u.cancelBubble===!0&&we(r),Object.assign(r,{qKeyEvent:u.qKeyEvent,qClickOutside:u.qClickOutside,qAnchorHandled:u.qAnchorHandled,qClonedBy:u.qClonedBy===void 0?[l.uid]:u.qClonedBy.concat(l.uid)}),l.initialEvent={target:u.target,event:r}}we(u)}const{left:a,top:m}=Ie(u);l.event={x:a,y:m,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:a,lastY:m}},move(u){if(l.event===void 0)return;const i=Ie(u),a=i.left-l.event.x,m=i.top-l.event.y;if(a===0&&m===0)return;l.lastEvt=u;const r=l.event.mouse===!0,g=()=>{N(u,r);let q;f.preserveCursor!==!0&&f.preservecursor!==!0&&(q=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),r===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Je(),l.styleCleanup=w=>{if(l.styleCleanup=void 0,q!==void 0&&(document.documentElement.style.cursor=q),document.body.classList.remove("non-selectable"),r===!0){const T=()=>{document.body.classList.remove("no-pointer-events--children")};w!==void 0?setTimeout(()=>{T(),w()},50):T()}else w!==void 0&&w()}};if(l.event.detected===!0){l.event.isFirst!==!0&&N(u,l.event.mouse);const{payload:q,synthetic:w}=xe(u,l,!1);q!==void 0&&(l.handler(q)===!1?l.end(u):(l.styleCleanup===void 0&&l.event.isFirst===!0&&g(),l.event.lastX=q.position.left,l.event.lastY=q.position.top,l.event.lastDir=w===!0?void 0:q.direction,l.event.isFirst=!1));return}if(l.direction.all===!0||r===!0&&(l.modifiers.mouseAllDir===!0||l.modifiers.mousealldir===!0)){g(),l.event.detected=!0,l.move(u);return}const O=Math.abs(a),D=Math.abs(m);O!==D&&(l.direction.horizontal===!0&&O>D||l.direction.vertical===!0&&O<D||l.direction.up===!0&&O<D&&m<0||l.direction.down===!0&&O<D&&m>0||l.direction.left===!0&&O>D&&a<0||l.direction.right===!0&&O>D&&a>0?(l.event.detected=!0,l.move(u)):l.end(u,!0))},end(u,i){if(l.event!==void 0){if(ke(l,"temp"),ce.is.firefox===!0&&Ae(c,!1),i===!0)l.styleCleanup!==void 0&&l.styleCleanup(),l.event.detected!==!0&&l.initialEvent!==void 0&&l.initialEvent.target.dispatchEvent(l.initialEvent.event);else if(l.event.detected===!0){l.event.isFirst===!0&&l.handler(xe(u===void 0?l.lastEvt:u,l).payload);const{payload:a}=xe(u===void 0?l.lastEvt:u,l,!0),m=()=>{l.handler(a)};l.styleCleanup!==void 0?l.styleCleanup(m):m()}l.event=void 0,l.initialEvent=void 0,l.lastEvt=void 0}}};if(c.__qtouchpan=l,f.mouse===!0){const u=f.mouseCapture===!0||f.mousecapture===!0?"Capture":"";be(l,"main",[[c,"mousedown","mouseStart",`passive${u}`]])}ce.has.touch===!0&&be(l,"main",[[c,"touchstart","touchStart",`passive${f.capture===!0?"Capture":""}`],[c,"touchmove","noop","notPassiveCapture"]])},updated(c,d){const f=c.__qtouchpan;f!==void 0&&(d.oldValue!==d.value&&(typeof value!="function"&&f.end(),f.handler=d.value),f.direction=Fe(d.modifiers))},beforeUnmount(c){const d=c.__qtouchpan;d!==void 0&&(d.event!==void 0&&d.end(),ke(d,"main"),ke(d,"temp"),ce.is.firefox===!0&&Ae(c,!1),d.styleCleanup!==void 0&&d.styleCleanup(),delete c.__qtouchpan)}});const Qe=["vertical","horizontal"],Ve={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Le={prevent:!0,mouse:!0,mouseAllDir:!0},Ue=c=>c>=250?50:Math.ceil(c/5);var Et=Be({name:"QScrollArea",props:{...Ct,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(c,{slots:d,emit:f}){const N=h(!1),l=h(!1),u=h(!1),i={vertical:h(0),horizontal:h(0)},a={vertical:{ref:h(null),position:h(0),size:h(0)},horizontal:{ref:h(null),position:h(0),size:h(0)}},{proxy:m}=dt(),r=St(c,m.$q);let g=null,O;const D=h(null),q=V(()=>"q-scrollarea"+(r.value===!0?" q-scrollarea--dark":""));a.vertical.percentage=V(()=>{const n=a.vertical.size.value-i.vertical.value;if(n<=0)return 0;const p=he(a.vertical.position.value/n,0,1);return Math.round(p*1e4)/1e4}),a.vertical.thumbHidden=V(()=>(c.visible===null?u.value:c.visible)!==!0&&N.value===!1&&l.value===!1||a.vertical.size.value<=i.vertical.value+1),a.vertical.thumbStart=V(()=>a.vertical.percentage.value*(i.vertical.value-a.vertical.thumbSize.value)),a.vertical.thumbSize=V(()=>Math.round(he(i.vertical.value*i.vertical.value/a.vertical.size.value,Ue(i.vertical.value),i.vertical.value))),a.vertical.style=V(()=>({...c.thumbStyle,...c.verticalThumbStyle,top:`${a.vertical.thumbStart.value}px`,height:`${a.vertical.thumbSize.value}px`})),a.vertical.thumbClass=V(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(a.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),a.vertical.barClass=V(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(a.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),a.horizontal.percentage=V(()=>{const n=a.horizontal.size.value-i.horizontal.value;if(n<=0)return 0;const p=he(Math.abs(a.horizontal.position.value)/n,0,1);return Math.round(p*1e4)/1e4}),a.horizontal.thumbHidden=V(()=>(c.visible===null?u.value:c.visible)!==!0&&N.value===!1&&l.value===!1||a.horizontal.size.value<=i.horizontal.value+1),a.horizontal.thumbStart=V(()=>a.horizontal.percentage.value*(i.horizontal.value-a.horizontal.thumbSize.value)),a.horizontal.thumbSize=V(()=>Math.round(he(i.horizontal.value*i.horizontal.value/a.horizontal.size.value,Ue(i.horizontal.value),i.horizontal.value))),a.horizontal.style=V(()=>({...c.thumbStyle,...c.horizontalThumbStyle,[m.$q.lang.rtl===!0?"right":"left"]:`${a.horizontal.thumbStart.value}px`,width:`${a.horizontal.thumbSize.value}px`})),a.horizontal.thumbClass=V(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(a.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),a.horizontal.barClass=V(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(a.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const w=V(()=>a.vertical.thumbHidden.value===!0&&a.horizontal.thumbHidden.value===!0?c.contentStyle:c.contentActiveStyle),T=[[$e,n=>{L(n,"vertical")},void 0,{vertical:!0,...Le}]],le=[[$e,n=>{L(n,"horizontal")},void 0,{horizontal:!0,...Le}]];function de(){const n={};return Qe.forEach(p=>{const C=a[p];n[p+"Position"]=C.position.value,n[p+"Percentage"]=C.percentage.value,n[p+"Size"]=C.size.value,n[p+"ContainerSize"]=i[p].value}),n}const $=ot(()=>{const n=de();n.ref=m,f("scroll",n)},0);function Z(n,p,C){if(Qe.includes(n)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(n==="vertical"?Ne:De)(D.value,p,C)}function Q({height:n,width:p}){let C=!1;i.vertical.value!==n&&(i.vertical.value=n,C=!0),i.horizontal.value!==p&&(i.horizontal.value=p,C=!0),C===!0&&ue()}function ae({position:n}){let p=!1;a.vertical.position.value!==n.top&&(a.vertical.position.value=n.top,p=!0),a.horizontal.position.value!==n.left&&(a.horizontal.position.value=n.left,p=!0),p===!0&&ue()}function X({height:n,width:p}){a.horizontal.size.value!==p&&(a.horizontal.size.value=p,ue()),a.vertical.size.value!==n&&(a.vertical.size.value=n,ue())}function L(n,p){const C=a[p];if(n.isFirst===!0){if(C.thumbHidden.value===!0)return;O=C.position.value,l.value=!0}else if(l.value!==!0)return;n.isFinal===!0&&(l.value=!1);const K=Ve[p],ie=i[p].value,Se=(C.size.value-ie)/(ie-C.thumbSize.value),ze=n.distance[K.dist],Te=O+(n.direction===K.dir?1:-1)*ze*Se;pe(Te,p)}function E(n,p){const C=a[p];if(C.thumbHidden.value!==!0){const K=n[Ve[p].offset];if(K<C.thumbStart.value||K>C.thumbStart.value+C.thumbSize.value){const ie=K-C.thumbSize.value/2;pe(ie/i[p].value*C.size.value,p)}C.ref.value!==null&&C.ref.value.dispatchEvent(new MouseEvent(n.type,n))}}function _e(n){E(n,"vertical")}function x(n){E(n,"horizontal")}function ue(){N.value=!0,g!==null&&clearTimeout(g),g=setTimeout(()=>{g=null,N.value=!1},c.delay),c.onScroll!==void 0&&$()}function pe(n,p){D.value[Ve[p].scroll]=n}function ge(){u.value=!0}function Ce(){u.value=!1}let oe=null;return st(()=>m.$q.lang.rtl,n=>{D.value!==null&&De(D.value,Math.abs(a.horizontal.position.value)*(n===!0?-1:1))}),ut(()=>{oe={top:a.vertical.position.value,left:a.horizontal.position.value}}),it(()=>{if(oe===null)return;const n=D.value;n!==null&&(De(n,oe.left),Ne(n,oe.top))}),nt($.cancel),Object.assign(m,{getScrollTarget:()=>D.value,getScroll:de,getScrollPosition:()=>({top:a.vertical.position.value,left:a.horizontal.position.value}),getScrollPercentage:()=>({top:a.vertical.percentage.value,left:a.horizontal.percentage.value}),setScrollPosition:Z,setScrollPercentage(n,p,C){Z(n,p*(a[n].size.value-i[n].value)*(n==="horizontal"&&m.$q.lang.rtl===!0?-1:1),C)}}),()=>A("div",{class:q.value,onMouseenter:ge,onMouseleave:Ce},[A("div",{ref:D,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:c.tabindex!==void 0?c.tabindex:void 0},[A("div",{class:"q-scrollarea__content absolute",style:w.value},rt(d.default,[A(qe,{debounce:0,onResize:X})])),A(zt,{axis:"both",onScroll:ae})]),A(qe,{debounce:0,onResize:Q}),A("div",{class:a.vertical.barClass.value,style:[c.barStyle,c.verticalBarStyle],"aria-hidden":"true",onMousedown:_e}),A("div",{class:a.horizontal.barClass.value,style:[c.barStyle,c.horizontalBarStyle],"aria-hidden":"true",onMousedown:x}),te(A("div",{ref:a.vertical.ref,class:a.vertical.thumbClass.value,style:a.vertical.style.value,"aria-hidden":"true"}),T),te(A("div",{ref:a.horizontal.ref,class:a.horizontal.thumbClass.value,style:a.horizontal.style.value,"aria-hidden":"true"}),le)])}});const Pt=v("span",{class:"text-h6"},"TICKETS",-1),Nt=v("div",{class:"q-pa-md bg-grey-2 text-primary"},"Buscar Folio",-1),Rt={key:0,class:"text-right"},Ot={class:"row justify-center"},qt={key:1},Ft={key:0},Mt={class:"text-h6"},$t={class:"text-subtitle2"},Qt={class:"row justify-between"},Lt={class:"text-subtitle2"},Ut={class:"text-subtitle2"},Bt={class:"text-h6"},Ht={class:"text-subtitle2"},jt={class:"row justify-between"},Gt={class:"text-subtitle2"},Yt={class:"text-subtitle2"},Xt=v("div",{class:"text-h5"},"Se cambiara el cliente a:",-1),Kt={class:"text-h6 text-center text-bold"},Jt=v("div",{class:"q-ml-sm text-center"},"Desea recalcular el ticket ?",-1),Wt={class:"bg-primary row items-center justify-between q-pa-md text-white"},Zt=v("div",{class:"fs-dec3"},"TICKET",-1),el={class:"text-h4"},tl={class:"text-center"},ll=v("div",{class:"fs-dec3"},"Total Anterior",-1),al={class:"fw-bold text-h6"},ol={class:"text-right"},sl=v("div",{class:"fs-dec3"},"Total Actual",-1),ul={class:"fw-bold text-h4"},il={class:"row items-center"},nl=v("div",{class:"col-3"},"Efectivo",-1),rl={class:"row"},dl={class:"row items-center"},cl=v("div",{class:"col-3"},"No. Vale",-1),vl={key:0,class:"col-3 bg-blue-grey-2"},fl={class:"bg-deep-purple-3 row items-center justify-between q-pa-md text-black"},ml=v("div",{class:"fs-dec3"},"Cambio",-1),pl={class:"text-h5"},bl={key:0,class:"text-center"},hl=v("div",{class:"text-h6 text-center"},"Impresora",-1),El={__name:"ModifyLayout",setup(c){const d=kt(),f=Dt(),N=d.series,l=h(null),u=h(!1),i=h(null),a=h(""),m=h({state:!1,body:null}),r=h({state:!1,body:null}),g=h({val:null,body:null}),O=h(!1),D=h(null),q=h(null),w=h({state:!1,body:null}),T=h({state:!1,body:null,account:0}),le=h({state:!1,body:null}),de=h(null);let $=h(null),Z=h({val:null,opts:["SI","NO"]}),Q=h({val:null,body:null}),ae=h(0);const X=h(""),L=h(null),E=h({EFE:0,DIG:{id:null,val:0}}),_e=[{id:"TBA",desc:"TARJETA C/D BANCOMER"},{id:"TSA",desc:"TARJETA C/D SANTANDER"},{id:"TDB",desc:"TRA/DEP BANCOMER"},{id:"TDA",desc:"TRA/DEP Santander"},{id:"TDS",desc:"TRA/DEP Scotiabank"},{id:"C30",desc:"CREDITO"}],x=h(null),ue=["Devolucion","Modificacion","Reimpresion"],pe=V(()=>i.value&&a.value.length),ge=V(()=>r.value.body.product),Ce=V(()=>g.value.val&&(x.value=="Devolucion"&&X.value.length>10||x.value=="Reimpresion")||x.value=="Modificacion"),oe=V(()=>Number.parseFloat(E.value.DIG.val)+Number.parseFloat(E.value.EFE)+Number.parseFloat(ae.value)-$.value),n=async()=>{let s=`http://${d.session.store.ip}/access/public/modify/getPrinter`;H.get(s).then(o=>{g.value.body=o.data,console.log("Impresoras listas :)")}).catch(o=>{console.log(o.response.data.message)})},p=async()=>{m.value.body=null;let S=i.value,s=a.value,k=`http://${d.session.store.ip}/access/public/modify/getTicket?serie=${S}&folio=${s}`;H.get(k).then(b=>{m.value.state=!0,m.value.body=b.data}).catch(b=>{console.log(b.response.data.message),f.notify({html:!0,message:b.response.data.message,color:"negative",position:"center"})})},C=async()=>{let S=d.session.store.ip,s=`${d.session.name} - ${d.session.store.alias}`;if(x.value=="Devolucion"){L.value=!0;let o={type:x.value,serie:i.value,folio:a.value,mot:X.value,create:s,print:g.value.val.ip};console.log(o);let k=`http://${S}/access/public/modify/newmod`;H.post(k,o).then(b=>{m.value.state=!1,console.log(b),x.value=null,X.value="",g.value.val=null,i.value=null,a.value="",L.value=!1,f.notify({html:!0,message:b.data.mssg,color:"positive",position:"center"})}).catch(b=>{console.log(b.response.data.message),L.value=!1,f.notify({html:!0,message:b.response.data.message,color:"negative",position:"center"})})}else if(x.value=="Reimpresion"){L.value=!0;let o={type:x.value,serie:i.value,folio:a.value,print:g.value.val.ip},k=`http://${S}/access/public/modify/newmod`;H.post(k,o).then(b=>{m.value.state=!1,console.log(b),x.value=null,g.value.val=null,i.value=null,a.value="",L.value=!1}).catch(b=>b)}else if(x.value=="Modificacion"){console.log("modificado");let o={type:x.value,serie:i.value,folio:a.value};L.value=!0;let k=`http://${S}/access/public/modify/newmod`;H.post(k,o).then(b=>{console.log(b),r.value.state=!0,m.value.state=!1,r.value.body=b.data,$.value=Number(b.data.ticket.total),l.value=b.data.ticket.codcli,q.value=b.data.ticket.observacion,L.value=!1}).catch(b=>{console.log(b.response.data.message),L.value=!1,f.notify({html:!0,message:b.response.data.message,color:"negative",position:"center"})})}},K=async()=>{console.log("cambio de cliente");let S=l.value;console.log(S);let o=`http://${d.session.store.ip}/access/public/modify/getClient?client=${S}`;H.get(o).then(k=>{console.log(k.data),le.value.body=k.data,r.value.body.ticket.cliente=k.data.NOFCLI,le.value.state=!0}).catch(k=>{console.log(k.response.data),f.notify({html:!0,message:k.response.data,color:"negative",position:"center"})})},ie=S=>{console.log(`Mostrando Articulo ${S.ARTICULO}`),w.value.state=!0,w.value.body=S},Se=async()=>{console.log("Buscando Producto Y propiedades");let S={product:D.value,price:l.value};if(r.value.body.product.findIndex(o=>o.ARTICULO==D.value)==-1){let k=`http://${d.session.store.ip}/access/public/modify/getProduct`;H.get(k,{params:S}).then(b=>{console.log(b.data),T.value.body=b.data,T.value.state=!0}).catch(b=>{console.log(b.response.data),f.notify({html:!0,message:b.response.data,color:"negative",position:"center"})})}else f.notify({html:!0,message:`El productos ${D.value} ya esta en el ticket`,color:"negative",position:"center"})},ze=()=>{u.value=!0},Te=()=>{console.log("Se eliminara el articulo");let S=w.value.body.ARTICULO,s=r.value.body.product.findIndex(o=>o.ARTICULO==S);console.log(s),r.value.body.product.splice(s,1),w.value.state=!1,$.value=r.value.body.product.reduce((o,k)=>o+Number(k.TOTAL),0)},He=()=>{let S={ARTICULO:T.value.body.CODART,DESCRIPCION:T.value.body.DESART,CANTIDAD:T.value.account,PRECIO:T.value.body.PRELTA,TOTAL:T.value.account*T.value.body.PRELTA};r.value.body.product.push(S),$.value=r.value.body.product.reduce((s,o)=>s+Number(o.CANTIDAD)*Number(o.PRECIO),0),T.value.account=0,D.value=null},je=()=>{console.log("recalculando ticket");let S=r.value.body.product,o={cliente:l.value,productos:S},b=`http://${d.session.store.ip}/access/public/modify/getPrices`;H.get(b,{params:o}).then(j=>{console.log(j.data),de.value=j.data,de.value.forEach(ne=>{let ee=r.value.body.product.findIndex(Ke=>Ke.ARTICULO==ne.CODART);r.value.body.product[ee].PRECIO=ne.PRELTA}),$.value=r.value.body.product.reduce((ne,ee)=>ne+Number(ee.CANTIDAD)*Number(ee.PRECIO),0),f.notify({html:!0,message:"Total cambiado",color:"positive",position:"center"})}).catch(j=>{console.log(j.response.data),f.notify({html:!0,message:j.response.data,color:"negative",position:"center"})})},Ge=()=>{$.value=r.value.body.product.reduce((S,s)=>S+Number(s.CANTIDAD)*Number(s.PRECIO),0)},Ye=async()=>{if(Z.value.val=="SI"){console.log("Buscando vales");let s=`http://${d.session.store.ip}/access/public/modify/vales?price=${l.value}`;H.get(s).then(o=>{console.log(o.data),Q.value.body=o.data}).catch(o=>{console.log(o.response.data),f.notify({html:!0,message:o.response.data,color:"negative",position:"center"})})}else console.log("No se buscan vales"),Q.value.body=null,ae.value=0},Ee=()=>O.value=!0,Xe=async()=>{let S=d.session.store.ip,s=`${d.session.name} - ${d.session.store.alias}`;console.log("Realizando proceso de modificacion de tickeet");let o={type:x.value,serie:i.value,folio:a.value,mot:X.value,create:s,print:g.value.val.ip},k={serdev:i.value,foldev:a.value,fdp:{efedig:E.value,vale:Q.value.val},total:$.value,create:s,productos:r.value.body.product,print:g.value.val.ip,cliente:l.value};console.log(o);let b=`http://${S}/access/public/modify/modificacion`;H.post(b,o).then(j=>{m.value.state=!1,console.log(j),x.value=null,X.value="",g.value.val=null,i.value=null,a.value="",O.value=!1,u.value=!1,r.value.state=!1,r.value.body=null,f.notify({html:!0,message:j.data.mssg,color:"positive",position:"center"});let ne=`http://${S}/access/public/modify/nwtck`;H.post(ne,k).then(ee=>{f.notify({html:!0,message:ee.data.mssg,color:"positive",position:"center"})}).catch(ee=>{f.notify({html:!0,message:ee.data.mssg,color:"positive",position:"center"})})}).catch(j=>{f.notify({html:!0,message:j.data.mssg,color:"negative",position:"center"})})};return n(),(S,s)=>(R(),Y(Tt,{view:"hHh Lpr fFf"},{default:t(()=>[e(_t,{class:"transparent text-dark",bordered:""},{default:t(()=>[e(yt),e(G),e(ht,{class:"justify-between"},{default:t(()=>[v("div",null,[y("Helpers "),e(ct,{name:"navigate_next",color:"primary"}),y(),Pt]),e(F,{color:"primary",icon:"add"},{default:t(()=>[e(bt,null,{default:t(()=>[Nt,e(G),e(ve,{dense:"",onSubmit:p,class:"q-gutter-md q-pa-md"},{default:t(()=>[e(se,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=o=>i.value=o),options:I(N),label:"Serie",autofocus:""},null,8,["modelValue","options"]),e(J,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a.value=o),type:"number",label:"Folio"},null,8,["modelValue"]),I(pe)?(R(),re("div",Rt,[e(F,{type:"submit",color:"primary",icon:"search"})])):B("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(wt,null,{default:t(()=>[e(At,{class:"bg-grey-3",padding:""},{default:t(()=>[v("div",Ot,[e(Re,{name:"bounce"},{default:t(()=>[m.value.state?(R(),Y(U,{key:0,style:{"min-width":"400px"},flat:"",bordered:""},{default:t(()=>[e(Oe,{bordered:""},{default:t(()=>[e(M,null,{default:t(()=>[e(_,null,{default:t(()=>[y("Ticket : ")]),_:1}),e(_,null,{default:t(()=>[y(z(m.value.body.ticket),1)]),_:1})]),_:1}),e(M,null,{default:t(()=>[e(_,null,{default:t(()=>[y("Cliente : ")]),_:1}),e(_,null,{default:t(()=>[y(z(m.value.body.cliente),1)]),_:1})]),_:1}),e(M,null,{default:t(()=>[e(_,null,{default:t(()=>[y("Fecha : ")]),_:1}),e(_,null,{default:t(()=>[y(z(m.value.body.fecha),1)]),_:1})]),_:1}),e(M,null,{default:t(()=>[e(_,null,{default:t(()=>[y("Total : ")]),_:1}),e(_,null,{default:t(()=>[y("$ "+z(m.value.body.total),1)]),_:1})]),_:1}),e(G),e(M,{class:"bg-indigo-2"},{default:t(()=>[e(_,null,{default:t(()=>[y("Movimiento")]),_:1}),e(_,null,{default:t(()=>[e(se,{dense:"",modelValue:x.value,"onUpdate:modelValue":s[2]||(s[2]=o=>x.value=o),options:ue,label:"Seleccione",filled:"",autofocus:""},null,8,["modelValue"])]),_:1})]),_:1}),x.value=="Devolucion"||x.value=="Reimpresion"?(R(),Y(M,{key:0},{default:t(()=>[e(_,null,{default:t(()=>[y("Impresora")]),_:1}),g.value.body?(R(),Y(_,{key:1},{default:t(()=>[e(se,{dense:"","option-label":"name",modelValue:g.value.val,"onUpdate:modelValue":s[3]||(s[3]=o=>g.value.val=o),options:g.value.body,label:"Impresora",filled:"",autofocus:""},null,8,["modelValue","options"])]),_:1})):(R(),Y(_,{key:0},{default:t(()=>[e(Vt,{color:"purple",size:"2em"}),e(gt,{offset:[0,8]},{default:t(()=>[y("Obteniendo Impresoras")]),_:1})]),_:1}))]),_:1})):B("",!0),x.value=="Devolucion"?(R(),re("div",qt,[e(M,null,{default:t(()=>[e(_,null,{default:t(()=>[y("Motivo de la devolucion")]),_:1}),e(_,null,{default:t(()=>[e(J,{modelValue:X.value,"onUpdate:modelValue":s[4]||(s[4]=o=>X.value=o),type:"text",label:"describe el motivo"},null,8,["modelValue"])]),_:1})]),_:1})])):B("",!0)]),_:1}),I(Ce)?(R(),re("div",Ft,[e(ye,{align:"between"},{default:t(()=>[e(F,{flat:"",icon:"cancel"}),e(F,{flat:"",icon:"arrow_forward",onClick:C,disable:L.value},null,8,["disable"])]),_:1})])):B("",!0)]),_:1})):B("",!0)]),_:1})]),e(Re,{name:"bounce"},{default:t(()=>[r.value.state?(R(),Y(U,{key:0,class:"my-card",style:{"min-width":"400px"},flat:"",bordered:""},{default:t(()=>[e(Oe,{bordered:""},{default:t(()=>[e(U,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(M,{class:"text-center"},{default:t(()=>[e(_,null,{default:t(()=>[e(W,{caption:"",lines:"2"},{default:t(()=>[y("Ticket")]),_:1}),e(W,{class:"text-h4"},{default:t(()=>[y(z(r.value.body.ticket.ticket),1)]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(W,{caption:"",lines:"2"},{default:t(()=>[y("Fecha")]),_:1}),e(W,{class:"text-h6"},{default:t(()=>[y(z(r.value.body.ticket.fecha),1)]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(W,{caption:"",lines:"2"},{default:t(()=>[y("Total")]),_:1}),e(W,{class:"text-h6"},{default:t(()=>[y(z(Number.parseFloat(I($)).toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(G,{spaced:"",inset:"",vertical:"",dark:""}),e(U,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(M,{class:"text-h6"},{default:t(()=>[e(_,null,{default:t(()=>[e(W,{lines:"2"},{default:t(()=>[y("Cliente")]),_:1}),e(W,null,{default:t(()=>[e(ve,{onSubmit:K,class:"q-gutter-md q-display-flex q-justify-center"},{default:t(()=>[e(J,{modelValue:l.value,"onUpdate:modelValue":s[5]||(s[5]=o=>l.value=o),type:"number",style:{"max-width":"100px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[y(z(r.value.body.ticket.cliente),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(G,{spaced:"",inset:"",vertical:"",dark:""}),e(U,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(M,null,{default:t(()=>[e(_,null,{default:t(()=>[e(ve,{onSubmit:Se,class:"q-gutter-md"},{default:t(()=>[v("div",null,[e(J,{modelValue:D.value,"onUpdate:modelValue":s[6]||(s[6]=o=>D.value=o),type:"text",label:"Agregar Modelo"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(G,{spaced:"",inset:"",vertical:"",dark:""}),e(U,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(M,null,{default:t(()=>[e(_,null,{default:t(()=>[y("ARTICULO")]),_:1}),e(_,null,{default:t(()=>[y("DESCRIPCION")]),_:1}),e(_,null,{default:t(()=>[y("CANTIDAD")]),_:1}),e(_,null,{default:t(()=>[y("PRECIO")]),_:1}),e(_,null,{default:t(()=>[y("TOTAL")]),_:1})]),_:1}),e(Et,{style:{height:"300px","max-width":"1700px"}},{default:t(()=>[(R(!0),re(ft,null,vt(I(ge),(o,k)=>te((R(),Y(M,{class:"border",key:k,onClick:b=>ie(o),clickable:""},{default:t(()=>[e(_,null,{default:t(()=>[y(z(o.ARTICULO),1)]),_:2},1024),e(_,null,{default:t(()=>[y(z(o.DESCRIPCION),1)]),_:2},1024),e(_,null,{default:t(()=>[y(z(Number.parseFloat(o.CANTIDAD).toFixed(2)),1)]),_:2},1024),e(_,null,{default:t(()=>[y("$ "+z(Number.parseFloat(o.PRECIO).toFixed(2)),1)]),_:2},1024),e(_,null,{default:t(()=>[y("$ "+z(Number.parseFloat(o.PRECIO*o.CANTIDAD).toFixed(2)),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[pt]])),128))]),_:1})]),_:1})]),_:1}),e(G,{spaced:"",inset:"",vertical:"",dark:""}),e(U,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[e(M,null,{default:t(()=>[e(_,null,{default:t(()=>[e(W,null,{default:t(()=>[y("Observaciones")]),_:1})]),_:1}),e(_,{side:"",top:""},{default:t(()=>[e(J,{modelValue:q.value,"onUpdate:modelValue":s[7]||(s[7]=o=>q.value=o),type:"text",label:"observaciones",style:{"max-width":"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{class:"full-width",color:"primary",icon:"receipt",label:"PAGAR",onClick:ze})]),_:1})]),_:1})):B("",!0)]),_:1}),e(me,{modelValue:w.value.state,"onUpdate:modelValue":s[9]||(s[9]=o=>w.value.state=o),position:"right",persistent:""},{default:t(()=>[e(U,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[v("div",Mt,"Articulo : "+z(w.value.body.ARTICULO),1),v("div",$t,"Descripcion : "+z(w.value.body.DESCRIPCION),1)]),_:1}),e(P,{class:"row"},{default:t(()=>[v("div",Qt,[e(J,{modelValue:w.value.body.CANTIDAD,"onUpdate:modelValue":s[8]||(s[8]=o=>w.value.body.CANTIDAD=o),type:"number",label:"Cantidad",style:{"max-width":"50%"}},null,8,["modelValue"])])]),_:1}),e(P,{class:"row justify-between"},{default:t(()=>[v("div",Lt,"Precio : "+z(Number.parseFloat(w.value.body.PRECIO).toFixed(2)),1),v("div",Ut,"Total : "+z(Number.parseFloat(w.value.body.PRECIO*w.value.body.CANTIDAD).toFixed(2)),1)]),_:1}),e(ye,{class:"row justify-between"},{default:t(()=>[e(F,{flat:"",icon:"delete",color:"negative",onClick:Te}),te(e(F,{flat:"",icon:"arrow_forward_ios",disable:w.value.body.CANTIDAD.length<=0,onClick:Ge},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(me,{modelValue:T.value.state,"onUpdate:modelValue":s[11]||(s[11]=o=>T.value.state=o),position:"left",persistent:""},{default:t(()=>[e(U,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[v("div",Bt,"Articulo : "+z(T.value.body.CODART),1),v("div",Ht,"Descripcion : "+z(T.value.body.DESART),1)]),_:1}),e(P,{class:"row"},{default:t(()=>[v("div",jt,[e(J,{modelValue:T.value.account,"onUpdate:modelValue":s[10]||(s[10]=o=>T.value.account=o),type:"number",label:"Cantidad",style:{"max-width":"50%"}},null,8,["modelValue"])])]),_:1}),e(P,{class:"row justify-between"},{default:t(()=>[v("div",Gt,"Precio : "+z(Number.parseFloat(T.value.body.PRELTA).toFixed(2)),1),v("div",Yt,"Total : "+z(Number.parseFloat(T.value.body.PRELTA*T.value.account).toFixed(2)),1)]),_:1}),e(ye,{class:"row justify-between"},{default:t(()=>[te(e(F,{flat:"",icon:"close",color:"positive"},null,512),[[fe]]),te(e(F,{flat:"",icon:"arrow_forward_ios",disable:T.value.account<=0,onClick:He},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(me,{modelValue:le.value.state,"onUpdate:modelValue":s[12]||(s[12]=o=>le.value.state=o)},{default:t(()=>[e(U,null,{default:t(()=>[e(P,{class:"items-center"},{default:t(()=>[Xt,e(G,{spaced:"",inset:"",vertical:"",dark:""}),v("div",Kt,z(le.value.body.NOFCLI),1),e(G,{spaced:"",inset:"",vertical:"",dark:""}),Jt]),_:1}),e(ye,{align:"center"},{default:t(()=>[te(e(F,{flat:"",icon:"close",color:"primary"},null,512),[[fe]]),te(e(F,{flat:"",icon:"check",color:"positive",onClick:je},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(me,{modelValue:u.value,"onUpdate:modelValue":s[23]||(s[23]=o=>u.value=o)},{default:t(()=>[e(U,{class:"my-card",style:{width:"700px","max-width":"80vw"}},{default:t(()=>[v("div",Wt,[v("div",null,[Zt,v("div",el,z(r.value.body.ticket.ticket),1)]),v("div",tl,[ll,v("div",al,"$ "+z(m.value.body.total),1)]),v("div",ol,[sl,v("div",ul,"$ "+z(I($)),1)])]),v("div",null,[e(ve,{onSubmit:Ee,class:"q-gutter-md"},{default:t(()=>[e(P,null,{default:t(()=>[v("div",il,[nl,e(J,{class:"col",modelValue:E.value.EFE,"onUpdate:modelValue":s[13]||(s[13]=o=>E.value.EFE=o),type:"number",autofocus:"",min:0,step:"any",dense:"","input-class":"q-pl-md fw-sbold fs-inc4"},null,8,["modelValue","min"]),parseFloat(E.value.EFE)?(R(),Y(F,{key:0,color:"primary",icon:"backspace",flat:"",dense:"",round:"",onClick:s[14]||(s[14]=o=>E.value.EFE=0)})):B("",!0)])]),_:1}),v("div",null,[e(P,null,{default:t(()=>[v("div",rl,[e(se,{class:"col-3",modelValue:E.value.DIG.id,"onUpdate:modelValue":s[15]||(s[15]=o=>E.value.DIG.id=o),options:_e,label:"Terminal","option-value":"id","option-label":"desc",dense:""},null,8,["modelValue"]),e(J,{class:"col",modelValue:E.value.DIG.val,"onUpdate:modelValue":s[16]||(s[16]=o=>E.value.DIG.val=o),type:"number",min:0,step:"any",dense:"","input-class":"q-pl-md fw-sbold fs-inc4",disable:!E.value.DIG.id},null,8,["modelValue","min","disable"]),parseFloat(E.value.DIG.val)?(R(),Y(F,{key:0,color:"primary",icon:"backspace",flat:"",dense:"",round:"",onClick:s[17]||(s[17]=o=>{E.value.DIG.val=0,E.value.DIG.id=null})})):B("",!0)])]),_:1}),e(P,null,{default:t(()=>[e(se,{modelValue:I(Z).val,"onUpdate:modelValue":[s[18]||(s[18]=o=>I(Z).val=o),Ye],options:I(Z).opts,label:"Descontar Vale",filled:""},null,8,["modelValue","options"])]),_:1}),I(Z).val=="SI"?(R(),Y(P,{key:0},{default:t(()=>[v("div",dl,[cl,e(se,{modelValue:I(Q).val,"onUpdate:modelValue":[s[19]||(s[19]=o=>I(Q).val=o),s[20]||(s[20]=o=>mt(ae)?ae.value=I(Q).val.IMPANT:ae=I(Q).val.IMPANT)],options:I(Q).body,"option-label":"CODANT",label:"Descontar Vale",filled:"",style:{width:"250px"}},null,8,["modelValue","options"]),e(G,{spaced:"",inset:"",vertical:"",dark:""}),I(Q).val?(R(),re("div",vl," $ "+z(Number.parseFloat(I(Q).val.IMPANT).toFixed(2)),1)):B("",!0)])]),_:1})):B("",!0)])]),_:1})]),v("div",fl,[v("div",null,[ml,v("div",pl," $ "+z(I(oe)),1)]),I(oe)>=0?(R(),re("div",bl,[e(F,{color:"primary",icon:"payment",label:"Pagar",onClick:Ee})])):B("",!0)]),e(me,{modelValue:O.value,"onUpdate:modelValue":s[22]||(s[22]=o=>O.value=o)},{default:t(()=>[e(U,{class:"my-card"},{default:t(()=>[e(P,null,{default:t(()=>[hl]),_:1}),e(P,null,{default:t(()=>[e(ve,{onSubmit:Xe,class:"q-gutter-md"},{default:t(()=>[e(se,{dense:"","option-label":"name",modelValue:g.value.val,"onUpdate:modelValue":s[21]||(s[21]=o=>g.value.val=o),options:g.value.body,label:"Impresora",filled:"",autofocus:"",style:{width:"200px"}},null,8,["modelValue","options"]),v("div",null,[e(F,{label:"Enviar",type:"submit",color:"primary",style:{width:"200px"}})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{El as default};
