import{b as m}from"./QList.b9334b06.js";import{Q as y}from"./QHeader.aab1aaaf.js";import{u as x,a as k,aW as P,r as c,aX as C,o as A,d as B,w as d,e as o,f as i,al as I,S as L,Q as S}from"./index.722c96ba.js";import{Q as q}from"./QToolbar.d5567cb6.js";import{Q as _}from"./QSelect.c275295e.js";import{Q as U}from"./QInput.905c375d.js";import{Q as D,a as N}from"./QLayout.6aaa4ec7.js";import{_ as O}from"./UserToolbar.78c1fb01.js";import{u as F}from"./use-quasar.70cae317.js";import"./dayjs.min.cbcf888d.js";import{u as R}from"./layoutStore.0dd8c49c.js";import{a as v}from"./axios.511d92c0.js";import"./use-key-composition.4dbf594e.js";import"./QResizeObserver.36318aa8.js";import"./format.8ac60962.js";import"./QScrollObserver.1037fb2d.js";import"./QDrawer.66399704.js";import"./use-checkbox.eaa0af27.js";import"./QExpansionItem.73a1f451.js";import"./QCardSection.2772bee0.js";import"./QCardActions.acc2993a.js";import"./QCard.3248d843.js";import"./ClosePopup.fcc85c1b.js";import"./auth.b38f42a4.js";import"./_commonjsHelpers.88e99c8f.js";var f={getPrints(r){return v.get(`/cashier/getPrinters/${r}`).then(t=>t.data).catch(t=>({fail:t}))},PrintAttention(r){return v.post("/prints/PrintAttention",r).then(t=>t.data).catch(t=>({fail:t}))},getColab(r){return v.get(`/cashier/getDependients/${r}`).then(t=>t.data).catch(t=>({fail:t}))}};const T={class:"row items-center"},$={class:"q-ml-lg q-mr-lg"},E={class:"q-ml-lg q-mr-lg row"},H={class:"flex justify-center"},fe={__name:"FileAttentionLYT",setup(r){const t=x();R(),k(),P();const l=F(),s=c({val:null,opts:[]}),u=c(1),n=c({opts:[],val:t.session.credentials.staff}),b=async()=>{let a=t.session.store.id;console.log(a);const e=await f.getPrints(a);e.fail?console.log(e):(console.log(e),s.value.opts=e,console.log("Impresoras listas :)"))},Q=async()=>{l.loading.show({message:"OBTENIENDO COLABORADORES"});let a=t.session.store.id;console.log(a);const e=await f.getColab(a);e.fail?console.log(e):(console.log(e),n.value.opts=e,console.log("Impresoras listas :)"),l.loading.hide())},w=async()=>{l.loading.show({message:"Imprimiendo"});let a={print:s.value.val.ip_address,staff:n.value.val,amount:u.value};const e=await f.PrintAttention(a);e.fail?console.log(e):(console.log(e),l.loading.hide(),l.notify({type:"positive",icon:"check"}))},V=()=>{l.localStorage.set("LUP",{wkp:t.session.store,printer:s.value.val})},g=l.localStorage.getItem("LUP");return g&&(s.value.val=g.printer),b(),Q(),(a,e)=>{const h=C("router-view");return A(),B(D,{view:"hHh Lpr fFf"},{default:d(()=>[o(y,{class:"transparent text-dark",bordered:""},{default:d(()=>[o(O),o(m)]),_:1}),o(N,null,{default:d(()=>[o(q,{class:"justify-between"},{default:d(()=>[i("div",T,[e[3]||(e[3]=I(" Helpers ")),o(L,{name:"navigate_next",color:"primary",class:"q-mx-sm"}),e[4]||(e[4]=i("span",{class:"text-h6"},"Ficha Atencion ",-1))])]),_:1}),e[5]||(e[5]=i("div",{class:"text-center"},null,-1)),o(m,{spaced:"",inset:"",vertical:"",dark:""}),i("div",$,[o(_,{modelValue:n.value.val,"onUpdate:modelValue":e[0]||(e[0]=p=>n.value.val=p),options:n.value.opts,label:"Colaborador","option-label":"complete_name",filled:""},null,8,["modelValue","options"])]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),i("div",E,[o(_,{class:"col",modelValue:s.value.val,"onUpdate:modelValue":[e[1]||(e[1]=p=>s.value.val=p),V],options:s.value.opts,label:"Impresora",filled:"","option-label":"name"},null,8,["modelValue","options"]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(U,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=p=>u.value=p),type:"number",label:"Cantidad",filled:"",min:1},null,8,["modelValue"])]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),i("div",H,[o(S,{rounded:"",flat:"",color:"primary",icon:"print",size:"xl",disabled:!s.value.val,onClick:w},null,8,["disabled"])]),o(h)]),_:1})]),_:1})}}};export{fe as default};
