import{a as v,b as h,Q as Y,d as B,e as d}from"./QList.0aecb8c8.js";import{Q as _}from"./QTable.5e164c44.js";import{Q as C}from"./QExpansionItem.72fee22b.js";import{u as P,Q as V,a as m}from"./axios.ee701c42.js";import{aH as y,a as R,u as H,r as c,c as I,o as f,d as g,w as e,f as b,e as a,ak as i,a0 as r,g as T,a2 as $,a3 as M,a4 as N,Q as A,a1 as E}from"./index.c08fa6d1.js";import{Q as F}from"./QCardActions.6f72e4bf.js";import{Q as L}from"./QPage.60e34edc.js";import{C as U}from"./ClosePopup.44a15b05.js";import{d as w}from"./dayjs.min.cbcf888d.js";import{u as O}from"./Restock.93fce00c.js";import"./socket.3fae67a0.js";import"./QBtnGroup.7ccb95c6.js";import"./QSelect.22b991b8.js";import"./QLinearProgress.861f9119.js";import"./QCheckbox.253bc585.js";import"./_commonjsHelpers.88e99c8f.js";const j={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},ua={__name:"dashboardStore",setup(q){y(),R();const n=O();P();const Q=H(),s=c({state:!1,val:null}),D=c({rowsPerPage:[0]}),p=c({columns:[{name:"id",label:"ID",field:t=>t.id,align:"center"},{name:"invoice",label:"Factura",field:t=>t.invoice,align:"center"},{name:"invoiceReceived",label:"Factura R",field:t=>t.invoice_received,align:"center"},{name:"status",label:"Estado",field:t=>t.status.name,align:"left"},{name:"UACT",label:"U.Act",field:t=>{var l,o;return w((o=(l=t.log)==null?void 0:l.find(u=>u.id==t._status))==null?void 0:o.pivot.updated_at).format("YYYY/MM/DD HH:mm:ss")},align:"left"}],pagination:{rowsPerPage:10}}),S=I(()=>n.ordersok.filter(t=>t._workpoint_from==Q.session.store.id_viz)),k=async()=>{n.setShowLYT(!0),n.setTitle("Dashboard"),n.setButtonShow(!1)},x=(t,l)=>{s.value.state=!0,s.value.val=l};return k(),(t,l)=>(f(),g(L,{padding:""},{default:e(()=>[b("div",null,[a(_,{rows:S.value,"row-key":"name",grid:"",pagination:D.value,"hide-bottom":""},{item:e(o=>[b("div",j,[a(v,{bordered:""},{default:e(()=>[a(C,{dense:"",icon:"list",label:`${o.row.id.toString()} (${o.row.status.name})`,caption:`${o.row.to.name} (${o.row.notes})`},{default:e(()=>[a(h),a(_,{"hide-bottom":"",flat:"",rows:o.row.partition,columns:p.value.columns,pagination:p.value.pagination,onRowClick:x},null,8,["rows","columns","pagination"])]),_:2},1032,["label","caption"])]),_:2},1024)])]),_:1},8,["rows","pagination"])]),a(Y,{modelValue:s.value.state,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value.state=o),persistent:""},{default:e(()=>[a(V,null,{default:e(()=>[a(m,{class:"text-center text-h6"},{default:e(()=>[i(" ID: "+r(s.value.val.id),1)]),_:1}),a(m,{class:"text-center text-bold"},{default:e(()=>[i(r(s.value.val.status.name),1)]),_:1}),a(m,null,{default:e(()=>[(f(!0),T(M,null,$(s.value.val.log,(o,u)=>(f(),g(v,{bordered:"",key:u},{default:e(()=>[a(B,null,{default:e(()=>[a(d,null,{default:e(()=>[i(r(o.name),1)]),_:2},1024),a(d,null,{default:e(()=>[i(r(JSON.parse(o.pivot.details).responsable),1)]),_:2},1024),a(d,null,{default:e(()=>[i(r(E(w)(o.pivot.updated_at).format("YYYY/MM/DD HH:mm:ss")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(F,{align:"right"},{default:e(()=>[N(a(A,{flat:"",label:"OK",color:"primary"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{ua as default};
