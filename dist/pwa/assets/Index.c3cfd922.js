import{u as F,r as Q,o as V,a as k,w as t,e,f as b,a3 as o,Y as $,h,a4 as d,b0 as C,a2 as O,Q as D}from"./index.a5990bc3.js";import{a as c,Q as R}from"./QCard.60d6119c.js";import{Q as p}from"./QSeparator.ab9ec637.js";import{Q as P}from"./QTable.39b37b57.js";import{a as r}from"./QSelect.839ba1bc.js";import{Q as U,a as m}from"./QItemSection.cdb4e2cb.js";import{Q as A}from"./QList.162205f8.js";import{Q as q,a as x}from"./QTr.f3134d8f.js";import{Q as S}from"./QInput.5e9f74d4.js";import{Q as T}from"./QPopupEdit.f34080ea.js";import{Q as z}from"./QCardActions.2d41314a.js";import{Q as L}from"./QDialog.1324623e.js";import{Q as M}from"./QPage.2332f730.js";import{C as j}from"./ClosePopup.eb7ed3c0.js";import{u as H}from"./VDB.ca67c27e.js";import{u as Y}from"./use-quasar.66224bff.js";import"./jspdf.plugin.autotable.1a1584bd.js";import{r as B}from"./refundsApi.5721e871.js";import"./exceljs.min.9e24d01d.js";import"./browser.a927a609.js";import"./dayjs.min.cbcf888d.js";import"./QDate.889546b8.js";import"./QLinearProgress.37d71b42.js";import"./QCheckbox.01948c94.js";import"./use-key-composition.b73fdae9.js";import"./uid.937d8ee7.js";import"./position-engine.0aff5bbf.js";import"./rtl.276c3f1b.js";import"./_commonjsHelpers.88e99c8f.js";import"./axios.128a942b.js";import"./axios.9ab26c22.js";import"./use-render-cache.3aae9b27.js";import"./date.82bacd82.js";try{self["workbox:core:6.5.4"]&&_()}catch{}typeof registration!="undefined"&&registration.scope;try{self["workbox:precaching:6.5.4"]&&_()}catch{}try{self["workbox:strategies:6.5.4"]&&_()}catch{}try{self["workbox:routing:6.5.4"]&&_()}catch{}const G={class:"row justify-between"},J={class:"text-pre-wrap"},Ae={__name:"Index",setup(v){const E=F(),y=H(),u=Y(),w=Q([]),n=Q({state:!1,val:null}),g=Q({columns:[{name:"reference",label:"Referencia",field:l=>l.reference,align:"left"},{name:"storeFrom",label:"Origen",field:l=>l.storefrom.name,align:"left"},{name:"storeTo",label:"Destino",field:l=>l.storeto.name,align:"left"},{name:"type",label:"Tipo",field:l=>l.type.name,align:"left"},{name:"created_by",label:"Creado Por",field:l=>l.createdby.complete_name,align:"left"},{name:"refund",label:"Devolucion",field:l=>l.fs_id,align:"center"},{name:"season",label:"Abono",field:l=>l.season_ticket,align:"center"},{name:"invoice",label:"Factura",field:l=>l.invoice,align:"center"},{name:"entrt",label:"Entrada",field:l=>l.entry,align:"center"}],columnsProduct:[{name:"code",label:"Codigo",field:l=>l.product,align:"left"},{name:"description",label:"Descripcion",field:l=>l.description,align:"left"},{name:"delivered",label:"Enviado",field:l=>l.to_delivered,align:"center"},{name:"received",label:"Recibido",field:l=>l.to_received,align:"center"}],pagination:{rowsPerPage:0}}),I=async()=>{u.loading.show({message:"Obteniendo Datos",type:"positive",position:"center"});let l=y.session.store.id;const a=await B.getRefundDirerences(l);a.error?console.log(a):(console.log(a),w.value=a,u.loading.hide())},K=(l,a)=>{n.value.state=!0,n.value.val=a},N=async()=>{u.loading.show({message:"Editando TRASPASO"}),console.log(n.value.val);const l=await B.correction(n.value.val);l.fail?console.log(l):(console.log(l),u.notify({message:"Modificacion Realizada Favor de confirmarla",type:"positive",position:"bottom"}),u.loading.hide(),n.value.state=!1)};return y.session.rol==="aud"||y.session.rol==="root"?I():(u.notify({message:"No tienes acceso a esta pagina",type:"negative",position:"center"}),E.replace("/")),(l,a)=>(V(),k(M,{padding:""},{default:t(()=>[e(R,null,{default:t(()=>[e(c,null,{default:t(()=>[b("div",G,[b("div",null,[a[1]||(a[1]=o("Helpers ")),e($,{name:"navigate_next",color:"primary"}),a[2]||(a[2]=o()),a[3]||(a[3]=b("span",{class:"text-h6"},"Modificacion Devoluciones ",-1))])])]),_:1})]),_:1}),e(p,{spaced:"",inset:"",vertical:"",dark:""}),w.value.length>0?(V(),k(P,{key:0,rows:w.value,columns:g.value.columns,pagination:g.value.pagination,onRowClick:K},null,8,["rows","columns","pagination"])):h("",!0),e(L,{modelValue:n.value.state,"onUpdate:modelValue":a[0]||(a[0]=i=>n.value.state=i),persistent:""},{default:t(()=>[e(R,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(c,{class:"text-bold text-center text-h6"},{default:t(()=>a[4]||(a[4]=[o(" Edicion de Devolucion ")])),_:1}),e(c,{class:"q-ml-xl"},{default:t(()=>[o(" Referencia : "+d(n.value.val.reference),1)]),_:1}),e(c,null,{default:t(()=>[e(A,null,{default:t(()=>[e(U,null,{default:t(()=>[e(m,null,{default:t(()=>[e(r,{class:"text-bold text-center",caption:""},{default:t(()=>a[5]||(a[5]=[o(" Realiza ")])),_:1}),e(r,{class:"text-bold text-overline text-center"},{default:t(()=>[o(d(n.value.val.createdby.complete_name),1)]),_:1})]),_:1}),e(p,{spaced:"",inset:"",vertical:"",dark:""}),e(m,null,{default:t(()=>[e(r,{class:"text-bold text-center",caption:""},{default:t(()=>a[6]||(a[6]=[o(" Recibe ")])),_:1}),e(r,{class:"text-bold text-overline text-center"},{default:t(()=>[o(d(n.value.val.receiptby.complete_name),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(A,null,{default:t(()=>[e(U,null,{default:t(()=>[e(m,null,{default:t(()=>[e(r,{class:"text-bold text-center",caption:""},{default:t(()=>a[7]||(a[7]=[o(" Devolucion ")])),_:1}),e(r,{class:"text-bold text-overline text-center"},{default:t(()=>[o(d(n.value.val.fs_id),1)]),_:1})]),_:1}),e(p,{spaced:"",inset:"",vertical:"",dark:""}),e(m,null,{default:t(()=>[e(r,{class:"text-bold text-center",caption:""},{default:t(()=>a[8]||(a[8]=[o(" Abono ")])),_:1}),e(r,{class:"text-bold text-overline text-center"},{default:t(()=>[o(d(n.value.val.season_ticket),1)]),_:1})]),_:1}),e(p,{spaced:"",inset:"",vertical:"",dark:""}),e(m,null,{default:t(()=>[e(r,{class:"text-bold text-center",caption:""},{default:t(()=>a[9]||(a[9]=[o(" Factura ")])),_:1}),e(r,{class:"text-bold text-overline text-center"},{default:t(()=>[o(d(n.value.val.invoice),1)]),_:1})]),_:1}),e(p,{spaced:"",inset:"",vertical:"",dark:""}),e(m,null,{default:t(()=>[e(r,{class:"text-bold text-center",caption:""},{default:t(()=>a[10]||(a[10]=[o(" Entrada ")])),_:1}),e(r,{class:"text-bold text-overline text-center"},{default:t(()=>[o(d(n.value.val.entry),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(P,{rows:n.value.val.bodie,columns:g.value.columnsProduct,pagination:g.value.pagination,"hide-bottom":""},{body:t(i=>[e(q,{props:i},{default:t(()=>[e(x,{key:"code",props:i},{default:t(()=>[o(d(i.row.product),1)]),_:2},1032,["props"]),e(x,{key:"description",props:i},{default:t(()=>[o(d(i.row.description),1)]),_:2},1032,["props"]),e(x,{key:"delivered",props:i},{default:t(()=>[b("div",J,d(i.row.to_delivered),1),e(T,{modelValue:i.row.to_delivered,"onUpdate:modelValue":s=>i.row.to_delivered=s,persistent:""},{default:t(s=>[e(S,{type:"number",modelValue:s.value,"onUpdate:modelValue":f=>s.value=f,dense:"",autofocus:"",onKeyup:C(f=>s.set(),["enter"]),min:1},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),e(x,{key:"received",props:i},{default:t(()=>[o(d(i.row.to_received)+" ",1),e(T,{modelValue:i.row.to_received,"onUpdate:modelValue":s=>i.row.to_received=s,persistent:""},{default:t(s=>[e(S,{type:"number",modelValue:s.value,"onUpdate:modelValue":f=>s.value=f,dense:"",autofocus:"",onKeyup:C(f=>s.set(),["enter"]),min:1},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])]),_:1}),e(z,{align:"right"},{default:t(()=>[O(e(D,{flat:"",label:"Cancelar",color:"negative"},null,512),[[j]]),e(D,{flat:"",label:"Confirmar",color:"positive",onClick:N})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ae as default};
