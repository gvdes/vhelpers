import{b as c,Q as Z,d as O,e as T}from"./QList.357bdae8.js";import{u as _e,r as V,c as h,o as P,d as J,w as i,e as o,f as B,ak as m,S as ee,Q as _,a1 as le,g as K,aF as ae,aG as oe,a0 as p,h as z,b4 as te,a4 as ie}from"./index.0fdaff4d.js";import{Q as Qe}from"./QToolbar.6df42c8a.js";import{Q as $}from"./QCardSection.00fbc919.js";import{Q as y,a as D}from"./QSelect.cbeeb7c7.js";import{Q as Se}from"./QForm.0bd41dac.js";import{Q as X}from"./QCard.2a654ec9.js";import{Q as H}from"./QRadio.3ceb4768.js";import{Q as A}from"./QInput.fe7dff6e.js";import{Q as g}from"./QTd.c00cd811.js";import{Q as Ue}from"./QPopupEdit.e43883ac.js";import{Q as Pe}from"./QTr.bd3a1d24.js";import{Q as Be}from"./QTable.8cf7a817.js";import{Q as qe}from"./QCardActions.bc87cb95.js";import{Q as Ne}from"./QPage.64195f4d.js";import{Q as ze,a as Ee}from"./QLayout.f49b40ee.js";import{C as se}from"./ClosePopup.315b6bfc.js";import{_ as je}from"./UserToolbar.ca24bffd.js";import{i as E}from"./resoursesApi.0a55a7a0.js";import{a as Re}from"./axios.7d24dc86.js";import{u as Le}from"./use-quasar.3538a447.js";import"./jspdf.plugin.autotable.224ed27d.js";import{E as Me}from"./exceljs.min.9e24d01d.js";import"./JsBarcode.cb858474.js";import"./browser.c61f550a.js";/* empty css                                                       */import"./use-key-composition.b41d6ff8.js";import"./QCheckbox.1d3959e7.js";import"./QLinearProgress.883b4630.js";import"./QScrollObserver.dcb03ea8.js";import"./QResizeObserver.cdf99542.js";import"./QDrawer.e40ea7c6.js";import"./auth.c6bef323.js";import"./_commonjsHelpers.88e99c8f.js";const Te={class:"row"},$e={key:0,class:"row"},Fe={key:1,class:"row"},Ie={key:2,class:"row"},Je={class:"row"},_l={__name:"RequisitionLYT",setup(De){const d=_e(),b=Le(),F=V({status:!1}),q=V({val:{id:1,name:"Cedis"},opts:[{id:1,name:"Cedis"},{id:2,name:"Sucursal"}]}),j=V({val:{id:3,name:"Cajas"},opts:[{id:1,name:"Piezas"},{id:3,name:"Cajas"}]}),x=V({val:null,opts:[]}),R=V({val:null,opts:[{id:1,label:"Ubicaciones"},{id:2,label:"Categorias"}]}),r=V({state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}}),n=V({state:!1,seccion:{val:[],opts:[]},familias:{val:[],opts:[]},categorias:{val:[],opts:[]}}),I=V({val:20}),k=V({state:"percentage"}),w=V([]),L=V(null),C=V({state:!1,val:null,body:[]}),v=V({state:!1,val:[],opts:[],locaciones:{val:[]}}),Q=V({columns:[{name:"codigo",required:!0,label:"Codigo",align:"left",sortable:!0,field:e=>e.code},{name:"description",label:"Descripcion",align:"left",sortable:!0,field:e=>e.description},{name:"Seccion",label:"Seccion",align:"left",sortable:!0,field:e=>{var l,a,t;return(t=(a=(l=e.category)==null?void 0:l.familia)==null?void 0:a.seccion)==null?void 0:t.name}},{name:"Familia",label:"Familia",align:"left",sortable:!0,field:e=>{var l,a;return(a=(l=e.category)==null?void 0:l.familia)==null?void 0:a.name}},{name:"Categoria",label:"Categoria",align:"left",sortable:!0,field:e=>{var l;return(l=e.category)==null?void 0:l.name}},{name:"pieces",label:"PXC",align:"center",sortable:!0,field:e=>e.pieces},{name:"locations",label:"Ubicacion",align:"center",sortable:!0,field:e=>e.locations},{name:"cedis",label:"Ced CJ",align:"center",sortable:!0,field:e=>e.cedis},{name:"texcoco",label:"Tex CJ",align:"center",sortable:!0,field:e=>e.texcoco},{name:"brasil",label:"Bra CJ",align:"center",sortable:!0,field:e=>e.brasil},{name:"Sucursal",label:`${d.session.store.name}`,align:"center",sortable:!0,field:e=>e.sucursal},{name:"min",label:"Minimo",align:"center",sortable:!0,field:e=>e.min},{name:"max",label:"Maximo",align:"center",sortable:!0,field:e=>e.max},{name:"Percentge",label:`${d.session.store.name} % `,align:"center",sortable:!0,field:e=>e.percentage},{name:"required",label:"Solicitado CJ",align:"center",sortable:!0,field:e=>e.required},{name:"action",label:"Accion",align:"center"}],filter:"",visible:["codigo","description","Seccion","Familia","Categoria","pieces","cedis","texcoco","Sucursal","required","action"]}),ne=h(()=>r.value.all.filter(e=>e.deep==0)),W=h(()=>r.value.seccion.val.length>0?r.value.all.filter(e=>e.deep==1&&r.value.seccion.val.map(l=>l.id).includes(e.root)):r.value.all.filter(e=>e.deep==1)),re=h(()=>{if(r.value.seccion.val.length>0&&r.value.familias.val.length==0){let e=r.value.all.filter(l=>l.deep==1&&r.value.seccion.val.map(a=>a.id).includes(l.root)).map(l=>l.id);return r.value.all.filter(l=>l.deep==2&&e.includes(l.root))}else return r.value.familias.val.length>0?r.value.all.filter(e=>e.deep==2&&r.value.familias.val.map(l=>l.id).includes(e.root)):r.value.all.filter(e=>e.deep==2)}),ue=h(()=>r.value.seccion.val.length>0),de=h(()=>{if(v.value.val.length>0){let e=[];return v.value.opts.filter(l=>v.value.val.map(a=>a.id).includes(l.id)).forEach(l=>l.sections.forEach(a=>e.push(a))),e}else{let e=[];return v.value.opts.forEach(l=>l.sections.forEach(a=>e.push(a))),e}}),ce=h(()=>x.value.opts.filter(e=>e._type==q.value.val.id)),M=h(()=>w.value.map(e=>{let l=Math.round(Number(e.stocks.filter(s=>s.id==1).map(s=>s.pivot.stock))/Number(e.pieces)),a=Math.round(Number(e.stocks.filter(s=>s.id==2).map(s=>s.pivot.stock))/Number(e.pieces)),t=Math.round(Number(e.stocks.filter(s=>s.id==16).map(s=>s.pivot.stock))/Number(e.pieces)),u=Number(e.stocks.filter(s=>s.id==d.session.store.id_viz).map(s=>s.pivot.stock+s.pivot.in_transit)),f=Math.round(Number(e.stocks.filter(s=>s.id==d.session.store.id_viz).map(s=>s.pivot.stock))*100/Number(e.pieces));return{id:e.id,name:e.name,code:e.code,cost:e.cost,description:e.description,category:e.category,pieces:e.pieces,min:Number(e.stocks.filter(s=>s.id==d.session.store.id_viz).map(s=>s.pivot.min)),max:Number(e.stocks.filter(s=>s.id==d.session.store.id_viz).map(s=>s.pivot.max)),cedis:l,texcoco:a,brasil:t,sucursal:u,transito:Number(e.stocks.filter(s=>s.id==d.session.store.id_viz).map(s=>s.pivot.in_transit)),percentage:f,required:e.required,locations:e.locations}}).filter(e=>{if(k.value.state=="percentage")return d.session.store.id_viz==1?e.texcoco>0&&e.percentage<=I.value.val:e.cedis+e.texcoco>0&&e.percentage<=I.value.val&&e.sucursal<=0;if(k.value.state=="minmax")return d.session.store.id_viz==1?e.texcoco>0&&e.sucursal<=e.min&&e.min>0:e.cedis+e.texcoco>0&&e.sucursal<=e.min&&e.min>0;if(k.value.state=="query")return e})),U=h(()=>{if(R.value.val.id==2)return M.value;if(n.value.seccion.val.length==0&&n.value.familias.val.length==0&&n.value.categorias.val.length==0)return M.value;if(n.value.seccion.val.length>0&&n.value.familias.val.length==0&&n.value.categorias.val.length==0)return M.value.filter(e=>n.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id));if(n.value.seccion.val.length>0&&n.value.familias.val.length>0&&n.value.categorias.val.length==0)return M.value.filter(e=>n.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id)&&n.value.familias.val.map(l=>l.id).includes(e.categories.familia.id));if(n.value.seccion.val.length>0&&n.value.familias.val.length>0&&n.value.categorias.val.length>0)return M.value.filter(e=>n.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id)&&n.value.familias.val.map(l=>l.id).includes(e.categories.familia.id)&&n.value.categorias.val.map(l=>l.id).includes(e.categories.id))}),me=h(()=>n.value.seccion.val.length>0?n.value.familias.opts.filter(e=>n.value.seccion.val.map(l=>l.id).includes(e.root)):n.value.familias.opts),ve=h(()=>n.value.familias.val.length>0?n.value.categorias.opts.filter(e=>n.value.familias.val.map(l=>l.id).includes(e.root)):n.value.categorias.opts),pe=async()=>{b.loading.show({message:"Obteniendo secciones"});const e=await E.getCedis();e.fail?console.log(e):(console.log(e),x.value.opts=e,b.loading.hide()),console.log(e)},fe=async()=>{r.value={state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}},v.value={state:!1,val:[],opts:[],locaciones:{val:[]}};let e=d.session.store.id_viz,l=R.value.val.id;b.loading.show({message:"Obteniendo secciones"});const a=await E.getSeccion(e,{_type:l});a.fail?console.log(a):(console.log(a),a.message?b.notify({message:"No existe la categoria",type:"negative",position:"center"}):a.families?(r.value.all=a.families,r.value.state=!0):a.locations&&(v.value.state=!0,v.value.opts=a.locations,r.value.all=a.sections),b.loading.hide())},ge=async()=>{b.loading.show({message:"Obteniendo Reporte"});let e=d.session.store.id_viz,l={_workpoint_to:x.value.val.id,_workpoint_from:e,seccion:r.value.seccion.val.map(t=>t.id),familia:r.value.familias.val.map(t=>t.id),categoria:r.value.categories.val.map(t=>t.id)};const a=await E.reportProductsCategories(l);a.fail?console.log(a):(b.loading.hide(),console.log(a),w.value=a,N())},be=async()=>{b.loading.show({message:"Obteniendo Reporte"});let e=d.session.store.id_viz,l={_workpoint_to:x.value.val.id,_workpoint_from:e,celler:v.value.val.map(t=>t.id),locations:v.value.locaciones.val.map(t=>t.id),section:r.value.seccion.val.map(t=>t.id)};console.log(l);const a=await E.getProductsCompareLocation(l);console.log(a),a.fail?console.log(a):(b.loading.hide(),console.log(a),w.value=a,w.value.forEach(t=>{const u=t.category.familia.seccion;u&&!n.value.seccion.opts.map(S=>S.id).includes(u.id)&&n.value.seccion.opts.push(u);const f=t.category.familia;f&&!n.value.familias.opts.map(S=>S.id).includes(f.id)&&n.value.familias.opts.push(f);const s=t.category;s&&!n.value.categorias.opts.map(S=>S.id).includes(s.id)&&n.value.categorias.opts.push(s)}),n.value.state=!0,N())},ye=(e,l)=>{const a=w.value.find(t=>t.id===e);console.log(a),a&&(a.required=l.value,l.set())},ke=async()=>{b.loading.show({message:"Creando Pedido"});let e={workpoint_from:d.session.store.id_viz,workpoint_to:x.value.val.id,products:U.value,notes:L.value,id_userviz:d.session.credentials.staff.id_va,type:2,supply_by:j.value.val.id};console.log(e);const l=await E.create(e);l.fail?console.log(l):(console.log(l),b.notify({message:`Se creo el pedido ${l.order.id}`,type:"positive",position:"center"}),w.value=[],L.value=[],W.value.val=[],v.value.val=[],r.value.val=[],b.loading.hide())},Ve=e=>{console.log(e);let l=w.value.findIndex(a=>a.id===e.id);console.log(l),l>=0&&w.value.splice(l,1)},we=async()=>{console.log("aqui imprimo");let e={products:U.value,from:d.session.store,ip_address:C.value.val.ip_address};const l=await E.preview(e);l.fail?console.log(l):(console.log(l),b.notify({message:"Impresion Correcta",type:"positive",position:"center"}),C.value.val=null,C.value.state=!1)},Ce=async()=>{const e=new Me.Workbook,l=e.addWorksheet("Resurtido");console.log(),l.addTable({name:"Resurtido",ref:"A1",headerRow:!0,totalsRow:!1,style:{showRowStripes:!0},columns:[{name:"Codigo",filterButton:!0},{name:"Descripcion",filterButton:!0},{name:"Seccion",filterButton:!0},{name:"Familia",filterButton:!0},{name:"Categoria",filterButton:!0},{name:"PXC",filterButton:!0},{name:"Ubicacion",filterButton:!0},{name:"Cedis CJ",filterButton:!0},{name:"Texcoco CJ",filterButton:!0},{name:"Brasil CJ",filterButton:!0},{name:"Sucursal",filterButton:!0},{name:"Transito",filterButton:!0},{name:"MIN",filterButton:!0},{name:"MAX",filterButton:!0},{name:"Porcentaje",filterButton:!0},{name:"Solicitado",filterButton:!0}],rows:U.value.map(t=>{var u,f,s,S,G,Y;return[t.code,t.description,(s=(f=(u=t.category)==null?void 0:u.familia)==null?void 0:f.seccion)==null?void 0:s.name,(G=(S=t.category)==null?void 0:S.familia)==null?void 0:G.name,(Y=t.category)==null?void 0:Y.name,t.pieces,t.locations.map(he=>he.path).join(", "),t.cedis,t.texcoco,t.brasil,t.sucursal,t.transito,t.min,t.max,t.percentage,t.required]})}),l.columns.forEach(t=>{let u=0;t.eachCell({includeEmpty:!0},f=>{const s=f.value?f.value.toString().length:10;s>u&&(u=s)}),t.width=u<10?10:u}),(async()=>{const t=await e.xlsx.writeBuffer(),u=new Blob([t],{type:"application/octet-stream"}),f=URL.createObjectURL(u),s=document.createElement("a");s.href=f,s.download="Resurtido.xlsx",document.body.appendChild(s),s.click(),document.body.removeChild(s)})()},xe=async()=>{let e=d.session.store.id;console.log(e);try{let l=await Re.get(`/cashier/getPrinters/${e}`);l.status==200&&(C.value.body=l.data,console.log(l),C.value.state=!0)}catch(l){console.log(l),b.notify({message:"No se pudiron obtener las impresoras",type:"negative",position:"center",icon:"error"})}},N=async()=>{if(console.log(k.value.state),w.value.length>0)return k.value.state=="minmax"?j.value.val.id==3?w.value.forEach(e=>{let l=Number(e.stocks.filter(t=>t.id==d.session.store.id_viz).map(t=>t.pivot.stock+t.pivot.in_transit))/Number(e.pieces),a=Number(e.stocks.filter(t=>t.id==d.session.store.id_viz).map(t=>t.pivot.max))/Number(e.pieces);a-l>=1?e.required=Math.round(a-l):e.required=1}):w.value.forEach(e=>{let l=Math.round(Number(e.stocks.filter(t=>t.id==d.session.store.id_viz).map(t=>t.pivot.stock+t.pivot.in_transit))),a=Math.round(Number(e.stocks.filter(t=>t.id==d.session.store.id_viz).map(t=>t.pivot.max)));a-l>=1?e.required=Math.round(a-l):e.required=1}):w.value.forEach(e=>e.required=1)};return pe(),(e,l)=>(P(),J(ze,{view:"hHh Lpr fFf"},{default:i(()=>[o(je),o(c),o(Qe,{class:"justify-between"},{default:i(()=>[B("div",null,[l[27]||(l[27]=m("Helpers ")),o(ee,{name:"navigate_next",color:"primary"}),l[28]||(l[28]=m()),l[29]||(l[29]=B("span",{class:"text-h6"},"Resurtido",-1))])]),_:1}),o(Z,{modelValue:C.value.state,"onUpdate:modelValue":l[1]||(l[1]=a=>C.value.state=a)},{default:i(()=>[o(X,{class:"my-card"},{default:i(()=>[o($,null,{default:i(()=>l[30]||(l[30]=[B("div",{class:"text-h6 text-center"},"Impresora",-1)])),_:1}),o($,null,{default:i(()=>[o(Se,{onSubmit:we,class:"q-gutter-md"},{default:i(()=>[o(y,{dense:"","option-label":"name",modelValue:C.value.val,"onUpdate:modelValue":l[0]||(l[0]=a=>C.value.val=a),options:C.value.body,label:"Impresora",filled:"",autofocus:"",style:{width:"200px"}},null,8,["modelValue","options"]),B("div",null,[o(_,{label:"Enviar",type:"submit",color:"primary",style:{width:"200px"},disable:C.value.val===null},null,8,["disable"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Ee,null,{default:i(()=>[o(Ne,{padding:""},{default:i(()=>[B("div",Te,[o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{class:"col",modelValue:q.value.val,"onUpdate:modelValue":[l[2]||(l[2]=a=>q.value.val=a),l[3]||(l[3]=()=>{x.value.val=null})],options:q.value.opts,label:"Tipo","option-label":"name",filled:"",dense:""},null,8,["modelValue","options"]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{class:"col",modelValue:x.value.val,"onUpdate:modelValue":l[4]||(l[4]=a=>x.value.val=a),options:ce.value,label:"Pedido Para",filled:"",dense:"","option-label":"name",disable:!q.value.val||x.value.val!=null,"option-disable":a=>a.id==le(d).session.store.id_viz},null,8,["modelValue","options","disable","option-disable"]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{class:"col",modelValue:R.value.val,"onUpdate:modelValue":[l[5]||(l[5]=a=>R.value.val=a),fe],options:R.value.opts,label:"Tipo",filled:"",disable:!x.value.val,dense:""},null,8,["modelValue","options","disable"]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{class:"col",modelValue:j.value.val,"onUpdate:modelValue":[l[6]||(l[6]=a=>j.value.val=a),N],options:j.value.opts,label:"Surtir Por",filled:"",dense:"","option-label":"name",disable:q.value.val.id==1},null,8,["modelValue","options","disable"])]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),r.value.state?(P(),K("div",$e,[o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{dense:"",class:"col",modelValue:r.value.seccion.val,"onUpdate:modelValue":l[7]||(l[7]=a=>r.value.seccion.val=a),options:ne.value,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{dense:"",class:"col",modelValue:r.value.familias.val,"onUpdate:modelValue":l[8]||(l[8]=a=>r.value.familias.val=a),options:W.value,label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:r.value.seccion.val.length==0},{option:i(a=>[o(O,ae(oe(a.itemProps)),{default:i(()=>[o(T,null,{default:i(()=>[o(D,null,{default:i(()=>[m(p(a.opt.name),1)]),_:2},1024),o(D,{caption:""},{default:i(()=>[m(p(a.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{dense:"",class:"col",modelValue:r.value.categories.val,"onUpdate:modelValue":l[9]||(l[9]=a=>r.value.categories.val=a),options:re.value,label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:r.value.familias.val.length==0},{option:i(a=>[o(O,ae(oe(a.itemProps)),{default:i(()=>[o(T,null,{default:i(()=>[o(D,null,{default:i(()=>[m(p(a.opt.name),1)]),_:2},1024),o(D,{caption:""},{default:i(()=>[m(p(a.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(_,{color:"primary",icon:"send",onClick:ge,disable:!ue.value,flat:"",dense:"",rounded:""},null,8,["disable"])])):z("",!0),v.value.state?(P(),K("div",Fe,[o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{dense:"",class:"col",modelValue:r.value.seccion.val,"onUpdate:modelValue":l[10]||(l[10]=a=>r.value.seccion.val=a),options:r.value.all,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{dense:"",class:"col",modelValue:v.value.val,"onUpdate:modelValue":l[11]||(l[11]=a=>v.value.val=a),options:v.value.opts,label:"Ubicacion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{dense:"",class:"col",modelValue:v.value.locaciones.val,"onUpdate:modelValue":l[12]||(l[12]=a=>v.value.locaciones.val=a),options:de.value,label:"Locaciones","option-label":"name",filled:"",multiple:"","use-chips":"",disable:v.value.val.length==0},null,8,["modelValue","options","disable"]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(_,{color:"primary",icon:"send",onClick:be,flat:"",dense:"",rounded:"",disable:v.value.val.length==0||v.value.locaciones.val.length==0},null,8,["disable"])])):z("",!0),o(c,{spaced:"",inset:"",vertical:"",dark:""}),n.value.state?(P(),K("div",Ie,[o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{dense:"",class:"col",modelValue:n.value.seccion.val,"onUpdate:modelValue":l[13]||(l[13]=a=>n.value.seccion.val=a),options:n.value.seccion.opts,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{dense:"",class:"col",modelValue:n.value.familias.val,"onUpdate:modelValue":l[14]||(l[14]=a=>n.value.familias.val=a),options:me.value,label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:n.value.seccion.val.length==0},null,8,["modelValue","options","disable"]),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(y,{dense:"",class:"col",modelValue:n.value.categorias.val,"onUpdate:modelValue":l[15]||(l[15]=a=>n.value.categorias.val=a),options:ve.value,label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:n.value.familias.val.length==0},null,8,["modelValue","options","disable"]),o(c,{spaced:"",inset:"",vertical:"",dark:""})])):z("",!0),o(c,{spaced:"",inset:"",vertical:"",dark:""}),o(X,{class:"my-card"},{default:i(()=>[o($,null,{default:i(()=>[B("div",Je,[o(O,{class:"col"},{default:i(()=>[o(T,null,{default:i(()=>[o(H,{dense:"",modelValue:k.value.state,"onUpdate:modelValue":[l[16]||(l[16]=a=>k.value.state=a),N],val:"percentage",label:"Porcentaje"},null,8,["modelValue"])]),_:1}),k.value.state=="percentage"?(P(),J(T,{key:0,caption:""},{default:i(()=>[o(A,{dense:"",modelValue:I.value.val,"onUpdate:modelValue":l[17]||(l[17]=a=>I.value.val=a),type:"number",filled:"",label:"Porcentaje",disable:k.value.state=="minmax"},null,8,["modelValue","disable"])]),_:1})):z("",!0),o(T)]),_:1}),o(H,{dense:"",class:"col",modelValue:k.value.state,"onUpdate:modelValue":[l[18]||(l[18]=a=>k.value.state=a),N],val:"minmax",label:"Minimo y Maximo"},null,8,["modelValue"]),o(H,{dense:"",class:"col",modelValue:k.value.state,"onUpdate:modelValue":[l[19]||(l[19]=a=>k.value.state=a),N],val:"query",label:"Consultas"},null,8,["modelValue"])])]),_:1})]),_:1}),o(c,{spaced:"",inset:"",vertical:"",dark:""}),w.value.length>0?(P(),J(Be,{key:3,rows:U.value,columns:Q.value.columns,separator:"cell",filter:Q.value.filter,flat:"",bordered:"",class:"my-sticky-header-column-table","visible-columns":Q.value.visible},{"top-right":i(()=>[o(A,{borderless:"",dense:"",debounce:"300",modelValue:Q.value.filter,"onUpdate:modelValue":l[20]||(l[20]=a=>Q.value.filter=a),placeholder:"Buscar"},{append:i(()=>[o(ee,{name:"search"})]),_:1},8,["modelValue"]),k.value.state!=="query"?(P(),J(_,{key:0,color:"primary","icon-right":"send",flat:"",onClick:l[21]||(l[21]=a=>F.value.state=!F.value.state),disable:U.value.length==0},null,8,["disable"])):z("",!0),o(_,{color:"primary",icon:"print",flat:"",onClick:xe,disable:U.value.length==0},null,8,["disable"]),o(_,{color:"primary",icon:"download",flat:"",onClick:Ce,disable:U.value.length==0},null,8,["disable"]),o(y,{modelValue:Q.value.visible,"onUpdate:modelValue":l[22]||(l[22]=a=>Q.value.visible=a),multiple:"",outlined:"",dense:"","options-dense":"","display-value":le(b).lang.table.columns,"emit-value":"","map-options":"",options:Q.value.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])]),body:i(a=>[o(Pe,{props:a},{default:i(()=>[o(g,{key:"codigo",props:a},{default:i(()=>[m(p(a.row.code),1)]),_:2},1032,["props"]),o(g,{key:"description",props:a},{default:i(()=>[m(p(a.row.description),1)]),_:2},1032,["props"]),o(g,{key:"Seccion",props:a},{default:i(()=>{var t,u,f;return[m(p((f=(u=(t=a.row.category)==null?void 0:t.familia)==null?void 0:u.seccion)==null?void 0:f.name),1)]}),_:2},1032,["props"]),o(g,{key:"Familia",props:a},{default:i(()=>{var t,u;return[m(p((u=(t=a.row.category)==null?void 0:t.familia)==null?void 0:u.name),1)]}),_:2},1032,["props"]),o(g,{key:"Categoria",props:a},{default:i(()=>{var t;return[m(p((t=a.row.category)==null?void 0:t.name),1)]}),_:2},1032,["props"]),o(g,{key:"pieces",props:a},{default:i(()=>[m(p(a.row.pieces),1)]),_:2},1032,["props"]),o(g,{key:"locations",props:a},{default:i(()=>{var t;return[m(p((t=a.row.locations)==null?void 0:t.map(u=>u.path).join(", ")),1)]}),_:2},1032,["props"]),o(g,{key:"cedis",props:a},{default:i(()=>[m(p(a.row.cedis),1)]),_:2},1032,["props"]),o(g,{key:"texcoco",props:a},{default:i(()=>[m(p(a.row.texcoco),1)]),_:2},1032,["props"]),o(g,{key:"brasil",props:a},{default:i(()=>[m(p(a.row.brasil),1)]),_:2},1032,["props"]),o(g,{key:"Sucursal",props:a},{default:i(()=>[m(p(a.row.sucursal),1)]),_:2},1032,["props"]),o(g,{key:"min",props:a},{default:i(()=>[m(p(a.row.min),1)]),_:2},1032,["props"]),o(g,{key:"max",props:a},{default:i(()=>[m(p(a.row.max),1)]),_:2},1032,["props"]),o(g,{key:"Percentge",props:a},{default:i(()=>[m(p(a.row.percentage)+" % ",1)]),_:2},1032,["props"]),o(g,{key:"required",props:a},{default:i(()=>[m(p(a.row.required)+" ",1),o(Ue,{modelValue:a.row.required,"onUpdate:modelValue":t=>a.row.required=t},{default:i(t=>[o(A,{modelValue:t.value,"onUpdate:modelValue":u=>t.value=u,dense:"",autofocus:"",counter:"",onKeyup:te(u=>ye(a.row.id,t),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),o(g,{key:"action",props:a},{default:i(()=>[o(_,{color:"negative",icon:"delete",onClick:t=>Ve(a.row),flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","visible-columns"])):z("",!0),o(Z,{modelValue:F.value.state,"onUpdate:modelValue":l[26]||(l[26]=a=>F.value.state=a),persistent:""},{default:i(()=>[o(X,{style:{"min-width":"350px"}},{default:i(()=>[o($,null,{default:i(()=>l[31]||(l[31]=[B("div",{class:"text-h6"},"Agrega una nota",-1)])),_:1}),o($,{class:"q-pt-none"},{default:i(()=>[o(A,{dense:"",modelValue:L.value,"onUpdate:modelValue":l[23]||(l[23]=a=>L.value=a),autofocus:"",onKeyup:l[24]||(l[24]=te(a=>e.prompt=!1,["enter"]))},null,8,["modelValue"])]),_:1}),o(qe,{align:"right",class:"text-primary"},{default:i(()=>[ie(o(_,{flat:"",label:"Cancelar",onClick:l[25]||(l[25]=a=>L.value=null)},null,512),[[se]]),ie(o(_,{flat:"",label:"Enviar Pedido",onClick:ke},null,512),[[se]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{_l as default};
