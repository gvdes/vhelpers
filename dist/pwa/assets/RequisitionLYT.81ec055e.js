import{b as d,Q as G,d as O,e as T}from"./QList.dd4d59e8.js";import{u as Ce,r as k,c as h,o as S,d as J,w as t,e as o,f as P,ak as c,I as Y,Q as _,a1 as Z,g as K,aF as ee,aG as le,a0 as p,h as N,b4 as ae,a4 as oe}from"./index.de3088e3.js";import{Q as xe}from"./QToolbar.2d53ae37.js";import{Q as I}from"./QCardSection.1a4fdb88.js";import{Q as b,a as D}from"./QSelect.f39034e2.js";import{Q as he}from"./QForm.49c0557c.js";import{Q as X}from"./QCard.c25cd91f.js";import{Q as H}from"./QRadio.fae179d1.js";import{Q as A}from"./QInput.a03c90e1.js";import{Q as f}from"./QTd.7126ae3b.js";import{Q as _e}from"./QPopupEdit.b01a535f.js";import{Q as Qe}from"./QTr.d5767203.js";import{Q as Ue}from"./QTable.c5eb2e47.js";import{Q as Se}from"./QCardActions.f2699149.js";import{Q as Pe}from"./QPage.7fe2bce4.js";import{Q as Be,a as qe}from"./QLayout.b1a88e7f.js";import{C as ie}from"./ClosePopup.37b35588.js";import{_ as Ne}from"./UserToolbar.a563bfd2.js";import{i as z}from"./resoursesApi.0e7a7102.js";import{a as ze}from"./axios.95586aa9.js";import{u as Ee}from"./use-quasar.3f13bfc6.js";import"./jspdf.plugin.autotable.89f1b69d.js";import{E as je}from"./exceljs.min.9e24d01d.js";import"./JsBarcode.cb858474.js";import"./browser.c61f550a.js";/* empty css                                                       */import"./QCheckbox.5154826f.js";import"./QLinearProgress.e351826b.js";import"./QScrollObserver.8fa9657c.js";import"./QResizeObserver.b97dc59d.js";import"./QDrawer.f65e0654.js";import"./auth.f2342809.js";import"./_commonjsHelpers.88e99c8f.js";const Re={class:"row"},Le={key:0,class:"row"},Me={key:1,class:"row"},Te={key:2,class:"row"},Ie={class:"row"},wl={__name:"RequisitionLYT",setup($e){const u=Ce(),g=Ee(),$=k({status:!1}),B=k({val:{id:1,name:"Cedis"},opts:[{id:1,name:"Cedis"},{id:2,name:"Sucursal"}]}),E=k({val:{id:3,name:"Cajas"},opts:[{id:1,name:"Piezas"},{id:3,name:"Cajas"}]}),C=k({val:null,opts:[]}),j=k({val:null,opts:[{id:1,label:"Ubicaciones"},{id:2,label:"Categorias"}]}),r=k({state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}}),n=k({state:!1,seccion:{val:[],opts:[]},familias:{val:[],opts:[]},categorias:{val:[],opts:[]}}),F=k({val:20}),y=k({state:"percentage"}),V=k([]),R=k(null),w=k({state:!1,val:null,body:[]}),m=k({state:!1,val:[],opts:[],locaciones:{val:[]}}),Q=k({columns:[{name:"codigo",required:!0,label:"Codigo",align:"left",sortable:!0,field:e=>e.code},{name:"description",label:"Descripcion",align:"left",sortable:!0,field:e=>e.description},{name:"Seccion",label:"Seccion",align:"left",sortable:!0,field:e=>e.categories.familia.seccion.name},{name:"Familia",label:"Familia",align:"left",sortable:!0,field:e=>e.categories.familia.name},{name:"Categoria",label:"Categoria",align:"left",sortable:!0,field:e=>e.categories.name},{name:"pieces",label:"PXC",align:"center",sortable:!0,field:e=>e.pieces},{name:"locations",label:"Ubicacion",align:"center",sortable:!0,field:e=>e.locations},{name:"cedis",label:"Ced CJ",align:"center",sortable:!0,field:e=>e.cedis},{name:"texcoco",label:"Tex CJ",align:"center",sortable:!0,field:e=>e.texcoco},{name:"brasil",label:"Bra CJ",align:"center",sortable:!0,field:e=>e.brasil},{name:"Sucursal",label:`${u.session.store.name}`,align:"center",sortable:!0,field:e=>e.sucursal},{name:"min",label:"Minimo",align:"center",sortable:!0,field:e=>e.min},{name:"max",label:"Maximo",align:"center",sortable:!0,field:e=>e.max},{name:"Percentge",label:`${u.session.store.name} % `,align:"center",sortable:!0,field:e=>e.percentage},{name:"required",label:"Solicitado CJ",align:"center",sortable:!0,field:e=>e.required},{name:"action",label:"Accion",align:"center"}],filter:"",visible:["codigo","description","Seccion","Familia","Categoria","pieces","cedis","texcoco","Sucursal","required","action"]}),te=h(()=>r.value.all.filter(e=>e.deep==0)),W=h(()=>r.value.seccion.val.length>0?r.value.all.filter(e=>e.deep==1&&r.value.seccion.val.map(a=>a.id).includes(e.root)):r.value.all.filter(e=>e.deep==1)),se=h(()=>{if(r.value.seccion.val.length>0&&r.value.familias.val.length==0){let e=r.value.all.filter(a=>a.deep==1&&r.value.seccion.val.map(l=>l.id).includes(a.root)).map(a=>a.id);return r.value.all.filter(a=>a.deep==2&&e.includes(a.root))}else return r.value.familias.val.length>0?r.value.all.filter(e=>e.deep==2&&r.value.familias.val.map(a=>a.id).includes(e.root)):r.value.all.filter(e=>e.deep==2)}),ne=h(()=>r.value.seccion.val.length>0),re=h(()=>{if(m.value.val.length>0){let e=[];return m.value.opts.filter(a=>m.value.val.map(l=>l.id).includes(a.id)).forEach(a=>a.sections.forEach(l=>e.push(l))),e}else{let e=[];return m.value.opts.forEach(a=>a.sections.forEach(l=>e.push(l))),e}}),ue=h(()=>C.value.opts.filter(e=>e._type==B.value.val.id)),L=h(()=>V.value.map(e=>{let a=Math.round(Number(e.stocks.filter(s=>s.id==1).map(s=>s.pivot.stock))/Number(e.pieces)),l=Math.round(Number(e.stocks.filter(s=>s.id==2).map(s=>s.pivot.stock))/Number(e.pieces)),i=Math.round(Number(e.stocks.filter(s=>s.id==16).map(s=>s.pivot.stock))/Number(e.pieces)),v=Number(e.stocks.filter(s=>s.id==u.session.store.id_viz).map(s=>s.pivot.stock+s.pivot.in_transit)),x=Math.round(Number(e.stocks.filter(s=>s.id==u.session.store.id_viz).map(s=>s.pivot.stock))*100/Number(e.pieces));return{id:e.id,name:e.name,code:e.code,cost:e.cost,description:e.description,categories:e.categories,pieces:e.pieces,min:Number(e.stocks.filter(s=>s.id==u.session.store.id_viz).map(s=>s.pivot.min)),max:Number(e.stocks.filter(s=>s.id==u.session.store.id_viz).map(s=>s.pivot.max)),cedis:a,texcoco:l,brasil:i,sucursal:v,transito:Number(e.stocks.filter(s=>s.id==u.session.store.id_viz).map(s=>s.pivot.in_transit)),percentage:x,required:e.required,locations:e.locations}}).filter(e=>{if(y.value.state=="percentage")return u.session.store.id_viz==1?e.texcoco>0&&e.percentage<=F.value.val:e.cedis+e.texcoco>0&&e.percentage<=F.value.val&&e.sucursal<=0;if(y.value.state=="minmax")return u.session.store.id_viz==1?e.texcoco>0&&e.sucursal<=e.min&&e.min>0:e.cedis+e.texcoco>0&&e.sucursal<=e.min&&e.min>0;if(y.value.state=="query")return e})),U=h(()=>{if(j.value.val.id==2)return L.value;if(n.value.seccion.val.length==0&&n.value.familias.val.length==0&&n.value.categorias.val.length==0)return L.value;if(n.value.seccion.val.length>0&&n.value.familias.val.length==0&&n.value.categorias.val.length==0)return L.value.filter(e=>n.value.seccion.val.map(a=>a.id).includes(e.categories.familia.seccion.id));if(n.value.seccion.val.length>0&&n.value.familias.val.length>0&&n.value.categorias.val.length==0)return L.value.filter(e=>n.value.seccion.val.map(a=>a.id).includes(e.categories.familia.seccion.id)&&n.value.familias.val.map(a=>a.id).includes(e.categories.familia.id));if(n.value.seccion.val.length>0&&n.value.familias.val.length>0&&n.value.categorias.val.length>0)return L.value.filter(e=>n.value.seccion.val.map(a=>a.id).includes(e.categories.familia.seccion.id)&&n.value.familias.val.map(a=>a.id).includes(e.categories.familia.id)&&n.value.categorias.val.map(a=>a.id).includes(e.categories.id))}),de=h(()=>n.value.seccion.val.length>0?n.value.familias.opts.filter(e=>n.value.seccion.val.map(a=>a.id).includes(e.root)):n.value.familias.opts),ce=h(()=>n.value.familias.val.length>0?n.value.categorias.opts.filter(e=>n.value.familias.val.map(a=>a.id).includes(e.root)):n.value.categorias.opts),me=async()=>{g.loading.show({message:"Obteniendo secciones"});const e=await z.getCedis();e.fail?console.log(e):(console.log(e),C.value.opts=e,g.loading.hide()),console.log(e)},ve=async()=>{r.value={state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}},m.value={state:!1,val:[],opts:[],locaciones:{val:[]}};let e=u.session.store.id_viz,a=j.value.val.id;g.loading.show({message:"Obteniendo secciones"});const l=await z.getSeccion(e,{_type:a});l.fail?console.log(l):(console.log(l),l.message?g.notify({message:"No existe la categoria",type:"negative",position:"center"}):l.families?(r.value.all=l.families,r.value.state=!0):l.locations&&(m.value.state=!0,m.value.opts=l.locations,r.value.all=l.sections),g.loading.hide())},pe=async()=>{g.loading.show({message:"Obteniendo Reporte"});let e=u.session.store.id_viz,a={_workpoint_to:C.value.val.id,_workpoint_from:e,seccion:r.value.seccion.val.map(i=>i.id),familia:r.value.familias.val.map(i=>i.id),categoria:r.value.categories.val.map(i=>i.id)};const l=await z.reportProductsCategories(a);l.fail?console.log(l):(g.loading.hide(),console.log(l),V.value=l,q())},fe=async()=>{g.loading.show({message:"Obteniendo Reporte"});let e=u.session.store.id_viz,a={_workpoint_to:C.value.val.id,_workpoint_from:e,celler:m.value.val.map(i=>i.id),locations:m.value.locaciones.val.map(i=>i.id),section:r.value.seccion.val.map(i=>i.id)};console.log(a);const l=await z.getProductsCompareLocation(a);console.log(l),l.fail?console.log(l):(g.loading.hide(),console.log(l),V.value=l,V.value.forEach(i=>{const v=i.categories.familia.seccion;v&&!n.value.seccion.opts.map(M=>M.id).includes(v.id)&&n.value.seccion.opts.push(v);const x=i.categories.familia;x&&!n.value.familias.opts.map(M=>M.id).includes(x.id)&&n.value.familias.opts.push(x);const s=i.categories;s&&!n.value.categorias.opts.map(M=>M.id).includes(s.id)&&n.value.categorias.opts.push(s)}),n.value.state=!0,q())},ge=(e,a)=>{const l=V.value.find(i=>i.id===e);console.log(l),l&&(l.required=a.value,a.set())},be=async()=>{g.loading.show({message:"Creando Pedido"});let e={workpoint_from:u.session.store.id_viz,workpoint_to:C.value.val.id,products:U.value,notes:R.value,id_userviz:u.session.credentials.staff.id_va,type:2,supply_by:E.value.val.id};console.log(e);const a=await z.create(e);a.fail?console.log(a):(console.log(a),g.notify({message:`Se creo el pedido ${a.order.id}`,type:"positive",position:"center"}),V.value=[],R.value=[],W.value.val=[],m.value.val=[],r.value.val=[],g.loading.hide())},ye=e=>{console.log(e);let a=V.value.findIndex(l=>l.id===e.id);console.log(a),a>=0&&V.value.splice(a,1)},ke=async()=>{console.log("aqui imprimo");let e={products:U.value,from:u.session.store,ip_address:w.value.val.ip_address};const a=await z.preview(e);a.fail?console.log(a):(console.log(a),g.notify({message:"Impresion Correcta",type:"positive",position:"center"}),w.value.val=null,w.value.state=!1)},Ve=async()=>{const e=new je.Workbook,a=e.addWorksheet("Resurtido");console.log(),a.addTable({name:"Resurtido",ref:"A1",headerRow:!0,totalsRow:!1,style:{showRowStripes:!0},columns:[{name:"Codigo",filterButton:!0},{name:"Descripcion",filterButton:!0},{name:"Seccion",filterButton:!0},{name:"Familia",filterButton:!0},{name:"Categoria",filterButton:!0},{name:"PXC",filterButton:!0},{name:"Ubicacion",filterButton:!0},{name:"Cedis CJ",filterButton:!0},{name:"Texcoco CJ",filterButton:!0},{name:"Brasil CJ",filterButton:!0},{name:"Sucursal",filterButton:!0},{name:"Transito",filterButton:!0},{name:"MIN",filterButton:!0},{name:"MAX",filterButton:!0},{name:"Porcentaje",filterButton:!0},{name:"Solicitado",filterButton:!0}],rows:U.value.map(i=>[i.code,i.description,i.categories.familia.seccion.name,i.categories.familia.name,i.categories.name,i.pieces,i.locations.map(v=>v.path).join(", "),i.cedis,i.texcoco,i.brasil,i.sucursal,i.transito,i.min,i.max,i.percentage,i.required])}),a.columns.forEach(i=>{let v=0;i.eachCell({includeEmpty:!0},x=>{const s=x.value?x.value.toString().length:10;s>v&&(v=s)}),i.width=v<10?10:v}),(async()=>{const i=await e.xlsx.writeBuffer(),v=new Blob([i],{type:"application/octet-stream"}),x=URL.createObjectURL(v),s=document.createElement("a");s.href=x,s.download="Resurtido.xlsx",document.body.appendChild(s),s.click(),document.body.removeChild(s)})()},we=async()=>{let e=u.session.store.id;console.log(e);try{let a=await ze.get(`/cashier/getPrinters/${e}`);a.status==200&&(w.value.body=a.data,console.log(a),w.value.state=!0)}catch(a){console.log(a),g.notify({message:"No se pudiron obtener las impresoras",type:"negative",position:"center",icon:"error"})}},q=async()=>{if(console.log(y.value.state),V.value.length>0)return y.value.state=="minmax"?E.value.val.id==3?V.value.forEach(e=>{let a=Number(e.stocks.filter(i=>i.id==u.session.store.id_viz).map(i=>i.pivot.stock+i.pivot.in_transit))/Number(e.pieces),l=Number(e.stocks.filter(i=>i.id==u.session.store.id_viz).map(i=>i.pivot.max))/Number(e.pieces);l-a>=1?e.required=Math.round(l-a):e.required=1}):V.value.forEach(e=>{let a=Math.round(Number(e.stocks.filter(i=>i.id==u.session.store.id_viz).map(i=>i.pivot.stock+i.pivot.in_transit))),l=Math.round(Number(e.stocks.filter(i=>i.id==u.session.store.id_viz).map(i=>i.pivot.max)));l-a>=1?e.required=Math.round(l-a):e.required=1}):V.value.forEach(e=>e.required=1)};return me(),(e,a)=>(S(),J(Be,{view:"hHh Lpr fFf"},{default:t(()=>[o(Ne),o(d),o(xe,{class:"justify-between"},{default:t(()=>[P("div",null,[a[27]||(a[27]=c("Helpers ")),o(Y,{name:"navigate_next",color:"primary"}),a[28]||(a[28]=c()),a[29]||(a[29]=P("span",{class:"text-h6"},"Resurtido",-1))])]),_:1}),o(G,{modelValue:w.value.state,"onUpdate:modelValue":a[1]||(a[1]=l=>w.value.state=l)},{default:t(()=>[o(X,{class:"my-card"},{default:t(()=>[o(I,null,{default:t(()=>a[30]||(a[30]=[P("div",{class:"text-h6 text-center"},"Impresora",-1)])),_:1}),o(I,null,{default:t(()=>[o(he,{onSubmit:ke,class:"q-gutter-md"},{default:t(()=>[o(b,{dense:"","option-label":"name",modelValue:w.value.val,"onUpdate:modelValue":a[0]||(a[0]=l=>w.value.val=l),options:w.value.body,label:"Impresora",filled:"",autofocus:"",style:{width:"200px"}},null,8,["modelValue","options"]),P("div",null,[o(_,{label:"Enviar",type:"submit",color:"primary",style:{width:"200px"},disable:w.value.val===null},null,8,["disable"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(qe,null,{default:t(()=>[o(Pe,{padding:""},{default:t(()=>[P("div",Re,[o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{class:"col",modelValue:B.value.val,"onUpdate:modelValue":[a[2]||(a[2]=l=>B.value.val=l),a[3]||(a[3]=()=>{C.value.val=null})],options:B.value.opts,label:"Tipo","option-label":"name",filled:"",dense:""},null,8,["modelValue","options"]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{class:"col",modelValue:C.value.val,"onUpdate:modelValue":a[4]||(a[4]=l=>C.value.val=l),options:ue.value,label:"Pedido Para",filled:"",dense:"","option-label":"name",disable:!B.value.val||C.value.val!=null,"option-disable":l=>l.id==Z(u).session.store.id_viz},null,8,["modelValue","options","disable","option-disable"]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{class:"col",modelValue:j.value.val,"onUpdate:modelValue":[a[5]||(a[5]=l=>j.value.val=l),ve],options:j.value.opts,label:"Tipo",filled:"",disable:!C.value.val,dense:""},null,8,["modelValue","options","disable"]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{class:"col",modelValue:E.value.val,"onUpdate:modelValue":[a[6]||(a[6]=l=>E.value.val=l),q],options:E.value.opts,label:"Surtir Por",filled:"",dense:"","option-label":"name",disable:B.value.val.id==1},null,8,["modelValue","options","disable"])]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),r.value.state?(S(),K("div",Le,[o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{dense:"",class:"col",modelValue:r.value.seccion.val,"onUpdate:modelValue":a[7]||(a[7]=l=>r.value.seccion.val=l),options:te.value,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{dense:"",class:"col",modelValue:r.value.familias.val,"onUpdate:modelValue":a[8]||(a[8]=l=>r.value.familias.val=l),options:W.value,label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:r.value.seccion.val.length==0},{option:t(l=>[o(O,ee(le(l.itemProps)),{default:t(()=>[o(T,null,{default:t(()=>[o(D,null,{default:t(()=>[c(p(l.opt.name),1)]),_:2},1024),o(D,{caption:""},{default:t(()=>[c(p(l.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{dense:"",class:"col",modelValue:r.value.categories.val,"onUpdate:modelValue":a[9]||(a[9]=l=>r.value.categories.val=l),options:se.value,label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:r.value.familias.val.length==0},{option:t(l=>[o(O,ee(le(l.itemProps)),{default:t(()=>[o(T,null,{default:t(()=>[o(D,null,{default:t(()=>[c(p(l.opt.name),1)]),_:2},1024),o(D,{caption:""},{default:t(()=>[c(p(l.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(_,{color:"primary",icon:"send",onClick:pe,disable:!ne.value,flat:"",dense:"",rounded:""},null,8,["disable"])])):N("",!0),m.value.state?(S(),K("div",Me,[o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{dense:"",class:"col",modelValue:r.value.seccion.val,"onUpdate:modelValue":a[10]||(a[10]=l=>r.value.seccion.val=l),options:r.value.all,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{dense:"",class:"col",modelValue:m.value.val,"onUpdate:modelValue":a[11]||(a[11]=l=>m.value.val=l),options:m.value.opts,label:"Ubicacion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{dense:"",class:"col",modelValue:m.value.locaciones.val,"onUpdate:modelValue":a[12]||(a[12]=l=>m.value.locaciones.val=l),options:re.value,label:"Locaciones","option-label":"name",filled:"",multiple:"","use-chips":"",disable:m.value.val.length==0},null,8,["modelValue","options","disable"]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(_,{color:"primary",icon:"send",onClick:fe,flat:"",dense:"",rounded:"",disable:m.value.val.length==0||m.value.locaciones.val.length==0},null,8,["disable"])])):N("",!0),o(d,{spaced:"",inset:"",vertical:"",dark:""}),n.value.state?(S(),K("div",Te,[o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{dense:"",class:"col",modelValue:n.value.seccion.val,"onUpdate:modelValue":a[13]||(a[13]=l=>n.value.seccion.val=l),options:n.value.seccion.opts,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{dense:"",class:"col",modelValue:n.value.familias.val,"onUpdate:modelValue":a[14]||(a[14]=l=>n.value.familias.val=l),options:de.value,label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:n.value.seccion.val.length==0},null,8,["modelValue","options","disable"]),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(b,{dense:"",class:"col",modelValue:n.value.categorias.val,"onUpdate:modelValue":a[15]||(a[15]=l=>n.value.categorias.val=l),options:ce.value,label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:n.value.familias.val.length==0},null,8,["modelValue","options","disable"]),o(d,{spaced:"",inset:"",vertical:"",dark:""})])):N("",!0),o(d,{spaced:"",inset:"",vertical:"",dark:""}),o(X,{class:"my-card"},{default:t(()=>[o(I,null,{default:t(()=>[P("div",Ie,[o(O,{class:"col"},{default:t(()=>[o(T,null,{default:t(()=>[o(H,{dense:"",modelValue:y.value.state,"onUpdate:modelValue":[a[16]||(a[16]=l=>y.value.state=l),q],val:"percentage",label:"Porcentaje"},null,8,["modelValue"])]),_:1}),y.value.state=="percentage"?(S(),J(T,{key:0,caption:""},{default:t(()=>[o(A,{dense:"",modelValue:F.value.val,"onUpdate:modelValue":a[17]||(a[17]=l=>F.value.val=l),type:"number",filled:"",label:"Porcentaje",disable:y.value.state=="minmax"},null,8,["modelValue","disable"])]),_:1})):N("",!0),o(T)]),_:1}),o(H,{dense:"",class:"col",modelValue:y.value.state,"onUpdate:modelValue":[a[18]||(a[18]=l=>y.value.state=l),q],val:"minmax",label:"Minimo y Maximo"},null,8,["modelValue"]),o(H,{dense:"",class:"col",modelValue:y.value.state,"onUpdate:modelValue":[a[19]||(a[19]=l=>y.value.state=l),q],val:"query",label:"Consultas"},null,8,["modelValue"])])]),_:1})]),_:1}),o(d,{spaced:"",inset:"",vertical:"",dark:""}),V.value.length>0?(S(),J(Ue,{key:3,rows:U.value,columns:Q.value.columns,separator:"cell",filter:Q.value.filter,flat:"",bordered:"",class:"my-sticky-header-column-table","visible-columns":Q.value.visible},{"top-right":t(()=>[o(A,{borderless:"",dense:"",debounce:"300",modelValue:Q.value.filter,"onUpdate:modelValue":a[20]||(a[20]=l=>Q.value.filter=l),placeholder:"Buscar"},{append:t(()=>[o(Y,{name:"search"})]),_:1},8,["modelValue"]),y.value.state!=="query"?(S(),J(_,{key:0,color:"primary","icon-right":"send",flat:"",onClick:a[21]||(a[21]=l=>$.value.state=!$.value.state),disable:U.value.length==0},null,8,["disable"])):N("",!0),o(_,{color:"primary",icon:"print",flat:"",onClick:we,disable:U.value.length==0},null,8,["disable"]),o(_,{color:"primary",icon:"download",flat:"",onClick:Ve,disable:U.value.length==0},null,8,["disable"]),o(b,{modelValue:Q.value.visible,"onUpdate:modelValue":a[22]||(a[22]=l=>Q.value.visible=l),multiple:"",outlined:"",dense:"","options-dense":"","display-value":Z(g).lang.table.columns,"emit-value":"","map-options":"",options:Q.value.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])]),body:t(l=>[o(Qe,{props:l},{default:t(()=>[o(f,{key:"codigo",props:l},{default:t(()=>[c(p(l.row.code),1)]),_:2},1032,["props"]),o(f,{key:"description",props:l},{default:t(()=>[c(p(l.row.description),1)]),_:2},1032,["props"]),o(f,{key:"Seccion",props:l},{default:t(()=>[c(p(l.row.categories.familia.seccion.name),1)]),_:2},1032,["props"]),o(f,{key:"Familia",props:l},{default:t(()=>[c(p(l.row.categories.familia.name),1)]),_:2},1032,["props"]),o(f,{key:"Categoria",props:l},{default:t(()=>[c(p(l.row.categories.name),1)]),_:2},1032,["props"]),o(f,{key:"pieces",props:l},{default:t(()=>[c(p(l.row.pieces),1)]),_:2},1032,["props"]),o(f,{key:"locations",props:l},{default:t(()=>{var i;return[c(p((i=l.row.locations)==null?void 0:i.map(v=>v.path).join(", ")),1)]}),_:2},1032,["props"]),o(f,{key:"cedis",props:l},{default:t(()=>[c(p(l.row.cedis),1)]),_:2},1032,["props"]),o(f,{key:"texcoco",props:l},{default:t(()=>[c(p(l.row.texcoco),1)]),_:2},1032,["props"]),o(f,{key:"brasil",props:l},{default:t(()=>[c(p(l.row.brasil),1)]),_:2},1032,["props"]),o(f,{key:"Sucursal",props:l},{default:t(()=>[c(p(l.row.sucursal),1)]),_:2},1032,["props"]),o(f,{key:"min",props:l},{default:t(()=>[c(p(l.row.min),1)]),_:2},1032,["props"]),o(f,{key:"max",props:l},{default:t(()=>[c(p(l.row.max),1)]),_:2},1032,["props"]),o(f,{key:"Percentge",props:l},{default:t(()=>[c(p(l.row.percentage)+" % ",1)]),_:2},1032,["props"]),o(f,{key:"required",props:l},{default:t(()=>[c(p(l.row.required)+" ",1),o(_e,{modelValue:l.row.required,"onUpdate:modelValue":i=>l.row.required=i},{default:t(i=>[o(A,{modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,dense:"",autofocus:"",counter:"",onKeyup:ae(v=>ge(l.row.id,i),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),o(f,{key:"action",props:l},{default:t(()=>[o(_,{color:"negative",icon:"delete",onClick:i=>ye(l.row),flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","visible-columns"])):N("",!0),o(G,{modelValue:$.value.state,"onUpdate:modelValue":a[26]||(a[26]=l=>$.value.state=l),persistent:""},{default:t(()=>[o(X,{style:{"min-width":"350px"}},{default:t(()=>[o(I,null,{default:t(()=>a[31]||(a[31]=[P("div",{class:"text-h6"},"Agrega una nota",-1)])),_:1}),o(I,{class:"q-pt-none"},{default:t(()=>[o(A,{dense:"",modelValue:R.value,"onUpdate:modelValue":a[23]||(a[23]=l=>R.value=l),autofocus:"",onKeyup:a[24]||(a[24]=ae(l=>e.prompt=!1,["enter"]))},null,8,["modelValue"])]),_:1}),o(Se,{align:"right",class:"text-primary"},{default:t(()=>[oe(o(_,{flat:"",label:"Cancelar",onClick:a[25]||(a[25]=l=>R.value=null)},null,512),[[ie]]),oe(o(_,{flat:"",label:"Enviar Pedido",onClick:be},null,512),[[ie]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{wl as default};
