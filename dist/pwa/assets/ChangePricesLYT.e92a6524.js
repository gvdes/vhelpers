import{Q as V}from"./QSeparator.b7378484.js";import{r as Y,c as j,o as Se,a as ze,w as R,e as $,f as A,a4 as K,Y as ye,Q as X,b2 as ee,a5 as $e,a6 as Ce,a3 as Ee}from"./index.50497003.js";import{Q as we}from"./QToolbar.c120565d.js";import{Q as Ne}from"./QHeader.3b36a558.js";import{Q as J}from"./QSelect.fd4d6bc1.js";import{u as He,Q as ae,a as B}from"./use-quasar.5cce40e5.js";import{Q as Ie}from"./QTable.1d8893a7.js";import{Q as Le}from"./QOptionGroup.65ba7318.js";import{Q as We}from"./QCardActions.2311fb52.js";import{Q as ke}from"./QDialog.3fcd9258.js";import{Q as qe}from"./QPage.c368fd4b.js";import{Q as Te,a as Re}from"./QLayout.fda8f0cd.js";import{C as Me}from"./ClosePopup.f16f15a0.js";import{u as Qe}from"./VDB.234a11da.js";import{_ as _e}from"./UserToolbar.c3d595c5.js";import{v as Oe}from"./axios.ba7b1b0e.js";import{E as O}from"./jspdf.plugin.autotable.b07a20f4.js";import{E as Ve}from"./exceljs.min.9e24d01d.js";import"./browser.a927a609.js";import"./QResizeObserver.49f684c8.js";import"./use-key-composition.31220566.js";import"./uid.937d8ee7.js";import"./position-engine.48a133d1.js";import"./rtl.276c3f1b.js";import"./QList.9abf679a.js";import"./QLinearProgress.63f85242.js";import"./QCheckbox.e06e280f.js";import"./QRadio.458ec6d8.js";import"./axios.9ab26c22.js";import"./_commonjsHelpers.88e99c8f.js";var Ye={getData(te){return Oe.get(`/compare/getChangePrices/${te}`).then(T=>T.data).catch(T=>({fail:T}))}};const Ae={class:"row"},Xe={class:"q-pa-md"},St={__name:"ChangePricesLYT",setup(te){const T=Qe(),H=He(),D=Y([]),Z=Y([]),oe=Y([{name:"stock_exh",label:"EXHIBICION",field:s=>{var i,d,r;return((r=(d=(i=s.stocks)==null?void 0:i.find(g=>g.pivot))==null?void 0:d.pivot)==null?void 0:r.exh)||0},align:"center"},{name:"stock_gen",label:"GENERAL",field:s=>{var i,d,r;return((r=(d=(i=s.stocks)==null?void 0:i.find(g=>g.pivot))==null?void 0:d.pivot)==null?void 0:r.gen)||0},align:"center"}]),x=Y({seccion:{val:null,opts:[]},familias:{val:null,opts:[]},categorias:{val:null,opts:[]}}),G=Y({columns:[{name:"code",label:"CODIGO",field:s=>s.code,align:"left"},{name:"barcode",label:"CB",field:s=>s.barcode,align:"left"},{name:"description",label:"DESCRIPCION",field:s=>s.description,align:"left"},{name:"section",label:"SECCION",field:s=>s.categories.familia.seccion.name,align:"left"},{name:"family",label:"FAMILIA",field:s=>s.categories.familia.name,align:"left"},{name:"category",label:"CATEGORIA",field:s=>s.categories.name,align:"left"},{name:"locations",label:"UBICACION",field:s=>{var i;return(i=s.locations)==null?void 0:i.map(d=>d.path).join("/")},align:"center"},...Z.value,...oe.value]}),m=Y({state:!1,val:null,opts:[{id:1,label:"Navidad Extra Grande"},{id:2,label:"Navidad Grande"},{id:3,label:"Navidad Mediano"},{id:4,label:"Navidad Pequeno"},{id:5,label:"Navidad Vertical"},{id:6,label:"Juguete Ni\xF1o"},{id:7,label:"Juguete Ni\xF1a"},{id:8,label:"Juguete Extra Ni\xF1a"},{id:9,label:"Juguete Extra Ni\xF1o"},{id:10,label:"Juguete Horizontal Ni\xF1o"},{id:11,label:"Juguete Horizontal Ni\xF1a"},{id:12,label:"Rectangular 2x4"}]}),M=Y({val:[0,1,2,4],opts:[{label:"Menudeo",value:1},{label:"Mayoreo",value:2},{label:"Docena",value:3},{label:"Caja",value:4}]}),U=j(()=>D.value.filter(s=>s.prices.some(i=>i.pivot.price!=0))),_=j(()=>{var s,i,d,r,g,c,P,e,k,q,w,I,b,y,N,L,p,W,F,a,n,Q,f;return((i=(s=x.value)==null?void 0:s.seccion)==null?void 0:i.val)&&!((g=(r=(d=x.value)==null?void 0:d.seccion)==null?void 0:r.familia)!=null&&g.val)?U.value.filter(S=>{var z,t,o;return((o=(t=(z=S.categories)==null?void 0:z.familia)==null?void 0:t.seccion)==null?void 0:o.id)===x.value.seccion.val.id}):((P=(c=x.value)==null?void 0:c.seccion)==null?void 0:P.val)&&((q=(k=(e=x.value)==null?void 0:e.seccion)==null?void 0:k.familia)==null?void 0:q.val)&&!((y=(b=(I=(w=x.value)==null?void 0:w.seccion)==null?void 0:I.familia)==null?void 0:b.categorias)!=null&&y.val)?U.value.filter(S=>{var z,t,o;return((o=(t=(z=S.categories)==null?void 0:z.familia)==null?void 0:t.seccion)==null?void 0:o.id)===x.value.seccion.val.id}):((L=(N=x.value)==null?void 0:N.seccion)==null?void 0:L.val)&&((F=(W=(p=x.value)==null?void 0:p.seccion)==null?void 0:W.familia)==null?void 0:F.val)&&((f=(Q=(n=(a=x.value)==null?void 0:a.seccion)==null?void 0:n.familia)==null?void 0:Q.categorias)==null?void 0:f.val)?U.value.filter(S=>{var z,t,o;return((o=(t=(z=S.categories)==null?void 0:z.familia)==null?void 0:t.seccion)==null?void 0:o.id)===x.value.seccion.val.id}):U.value}),le=j(()=>{var s,i;return(i=(s=x.value)==null?void 0:s.seccion)!=null&&i.val?x.value.familias.opts.filter(d=>{var r,g;return d.root==((g=(r=x.value)==null?void 0:r.seccion)==null?void 0:g.val.id)}):x.value.familias.opts}),se=j(()=>{var s,i;return(i=(s=x.value)==null?void 0:s.familias)!=null&&i.val?x.value.categorias.opts.filter(d=>{var r,g;return d.root==((g=(r=x.value)==null?void 0:r.familias)==null?void 0:g.val.id)}):x.value.categorias.opts}),ie=async()=>{H.loading.show({message:"Obteniendo Informacion"});let s=T.session.store.id_viz;const i=await Ye.getData(s);if(i.fail)console.log(i);else{if(console.log(i),D.value=i,D.value.forEach(d=>{let r=ce(d.prices);d._copies=1,d.type=r.type,d.usedPrices=r.prices;const g=d.categories.familia.seccion;g&&!x.value.seccion.opts.map(e=>e.id).includes(g.id)&&x.value.seccion.opts.push(g);const c=d.categories.familia;c&&!x.value.familias.opts.map(e=>e.id).includes(c.id)&&x.value.familias.opts.push(c);const P=d.categories;P&&!x.value.categorias.opts.map(e=>e.id).includes(P.id)&&x.value.categorias.opts.push(P)}),D.value.length>0){const d=D.value[0];d.prices&&d.prices.forEach(r=>{Z.value.push({name:`price_${r.id}`,label:r.name,field:g=>{var c,P;return((P=(c=g.prices.find(e=>e.id===r.id))==null?void 0:c.pivot)==null?void 0:P.price)||0},align:"center"})}),G.value.columns=[...G.value.columns,...Z.value]}H.loading.hide()}},ne=async()=>{const s=new Ve.Workbook,i=s.addWorksheet("Comparativo");i.addRow(G.value.columns.map(P=>P.label)),_.value.forEach(P=>{i.addRow(G.value.columns.map(e=>typeof e.field=="function"?e.field(P):P[e.field]||"-"))}),i.columns.forEach(P=>{let e=0;P.eachCell({includeEmpty:!0},k=>{const q=k.value?k.value.toString().length:10;q>e&&(e=q)}),P.width=e<10?10:e});const d=await s.xlsx.writeBuffer(),r=new Blob([d],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),g=URL.createObjectURL(r),c=document.createElement("a");c.href=g,c.download="Cambio_Precios.xlsx",document.body.appendChild(c),c.click(),document.body.removeChild(c)},ce=(s,i)=>{let d=[...s];const r=d.find(c=>c.pivot._type==4),g=d.find(c=>c.pivot._type==1);if(r.pivot.price==g.pivot.price){let c={id:0,alias:"OFERTA",name:"Oferta",pivot:{price:d[0].pivot.price},used:!0};return console.log("oferta"),{type:"off",prices:[c]}}else return console.log("estandar"),{type:"std",prices:d}},re=()=>{H.loading.show({message:"Generando Etiquetas"}),m.value.val.id==1?ve(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==2?de(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==3?ue(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==4?ge(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==5?me(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==6?pe(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==7?he(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==8?fe(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==9?be(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==10?xe(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==11?Fe(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==12&&Pe(_.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{console.log(s),alert("Hubo un error al descargar las etiquetas")})},de=s=>new Promise((i,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let n=0;n<a._copies;n++)g.push(a)});const c="/icons/Navidad/Navidad6(2).png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=100,y=85,N=5,L=5,p=2,F=p*3;g.forEach((a,n)=>{const Q=Math.floor(n/F),f=n%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);n>0&&f===0&&e.addPage(),e.addImage(c,P,t,o,b,y),e.setFontSize(30),e.setFont("helvetica","bold"),e.text(a.name,t+61,o+77),e.setFontSize(14),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+10,o+25),e.setFontSize(12);let v=o+39,u=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(22),e.setFont("helvetica","bold"),e.text("Unico Precio",t+30,v+h*u+5),e.setFontSize(28),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+34,v+h*u+20)):(e.setFontSize(22),e.setFont("helvetica","bold"),e.text(l.alias,t+23,v+h*u),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+45,v+h*u))}),e.setFontSize(16),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+10,o+12),e.text(a.large,t+18,o+74),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+70,o+12),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+19,o+77)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}}),ve=s=>new Promise((i,d)=>{try{const r=s;console.log(r);const g=[];r.forEach(a=>{for(let n=0;n<a._copies;n++)g.push(a)});const c="/icons/Navidad/Navidad6(2).png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=205,y=125,N=5,L=5,p=1,F=p*2;g.forEach((a,n)=>{const Q=Math.floor(n/F),f=n%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);n>0&&f===0&&e.addPage(),e.addImage(c,P,t,o,b,y),e.setFontSize(70),e.setFont("helvetica","bold"),e.text(a.name,t+120,o+112),e.setFontSize(20),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+18,o+31),e.setFontSize(12);let v=o+39,u=12;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(35),e.setFont("helvetica","bold"),e.text("Unico Precio",t+60,v+h*u+10),e.setFontSize(50),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+64,v+h*u+35)):(e.setFontSize(35),e.setFont("helvetica","bold"),e.text(l.alias,t+60,v+h*u+15),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+93,v+h*u+15))}),e.setFontSize(45),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+18,o+23),e.text(a.large,t+35,o+112),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+185,o+23,{align:"right"}),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+38,o+114)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}}),ue=s=>new Promise((i,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let n=0;n<a._copies;n++)g.push(a)});const c="/icons/Navidad/Navidad9(1).png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=65,y=85,N=5,L=5,p=3,F=p*3;g.forEach((a,n)=>{const Q=Math.floor(n/F),f=n%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);n>0&&f===0&&e.addPage(),e.addImage(c,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+37,o+77),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+5,o+25),e.setFontSize(12);let v=o+40,u=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(18),e.setFont("helvetica","bold"),e.text("Unico Precio",t+13,v+h*u),e.setFontSize(26),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+13,v+h*u+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+10,v+h*u),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+30,v+h*u))}),e.setFontSize(12),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+25,o+20),e.text(a.large,t+18,o+77),e.text(`${a.pieces} PZS`,t+20,o+73),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+79)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}}),ge=s=>new Promise((i,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let n=0;n<a._copies;n++)g.push(a)});const c="/icons/Navidad/NaviSan(1).png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=67,y=63,N=0,L=3,p=3,F=p*4;g.forEach((a,n)=>{const Q=Math.floor(n/F),f=n%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);n>0&&f===0&&e.addPage(),e.addImage(c,P,t,o,b,y),e.setFontSize(18),e.setFont("helvetica","bold"),e.text(a.name,t+23,o+37),e.setFontSize(8),e.setFont("helvetica","normal"),e.text(a.label.substring(0,25),t+15,o+43),e.setFontSize(10);let C=o+36,E=12;a.usedPrices.filter(v=>M.value.val.includes(v.id)).forEach((v,u)=>{v.alias=="OFERTA"?(e.setFontSize(10),e.setFont("helvetica","bold"),e.text("Unico Precio",t+23,C+u*E+12),e.setFontSize(14),e.text(`$ ${Number(v.pivot.price).toFixed(0)}`,t+27,C+u*E+17)):(e.setFontSize(10),e.setFont("helvetica","bold"),e.text(v.alias,t+u*E+10,C+12),e.text(`$ ${Number(v.pivot.price).toFixed(0)}`,t+u*E+10,C+16))}),e.setFontSize(6),e.setFont("helvetica","bold"),e.text(`(${a.code})`,t+28,o+40),e.text(a.large,t+40,o+55),e.text(`${a.pieces} PZS`,t+40,o+57)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}}),me=s=>new Promise((i,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let n=0;n<a._copies;n++)g.push(a)});const c="/icons/Navidad/NavidadVer(2).png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=48,y=85,N=5,L=5,p=4,F=p*4;g.forEach((a,n)=>{const Q=Math.floor(n/F),f=n%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);n>0&&f===0&&e.addPage(),e.addImage(c,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+20,o+80),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-15,E=e.splitTextToSize(a.label,C);e.text(E,t+5,o+22),e.setFontSize(12);let v=o+35,u=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(18),e.setFont("helvetica","bold"),e.text("Unico Precio",t+5,v+h*u),e.setFontSize(26),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+10,v+h*u+15)):(e.setFontSize(16),e.setFont("helvetica","bold"),e.text(l.alias,t+5,v+h*u),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+20,v+h*u))}),e.setFontSize(12),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+24,o+17,{align:"center"}),e.text(a.large,t+20,o+68),e.text(`${a.pieces} PZS`,t+20,o+73),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+81)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}}),pe=s=>new Promise((i,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let n=0;n<a._copies;n++)g.push(a)});const c="/icons/Juguete/Ninio.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=65,y=85,N=5,L=5,p=3,F=p*3;g.forEach((a,n)=>{const Q=Math.floor(n/F),f=n%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);n>0&&f===0&&e.addPage(),e.addImage(c,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+15,o+10),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+3,o+25),e.setFontSize(12);let v=o+40,u=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+5,v+h*u),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+5,v+h*u+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+2,v+h*u),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+19,v+h*u))}),e.setFontSize(10),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+45,o+40),e.text(a.large,t+45,o+52),e.text(`${a.pieces} PZS`,t+45,o+46),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}}),he=s=>new Promise((i,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let n=0;n<a._copies;n++)g.push(a)});const c="/icons/Juguete/Ninia.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=65,y=85,N=5,L=5,p=3,F=p*3;g.forEach((a,n)=>{const Q=Math.floor(n/F),f=n%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);n>0&&f===0&&e.addPage(),e.addImage(c,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+15,o+20),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+5,o+25),e.setFontSize(12);let v=o+40,u=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+15,v+h*u),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+15,v+h*u+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+15,v+h*u),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+32,v+h*u))}),e.setFontSize(13),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+62,o+70,{align:"right"}),e.setFont("helvetica","normal"),e.text(a.large,t+15,o+65),e.text(`${a.pieces} PZS`,t+15,o+70),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}}),fe=s=>new Promise((i,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let n=0;n<a._copies;n++)g.push(a)});const c="/icons/Juguete/xlargeninia.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=205,y=125,N=5,L=5,p=1,F=p*2;g.forEach((a,n)=>{const Q=Math.floor(n/F),f=n%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);n>0&&f===0&&e.addPage(),e.addImage(c,P,t,o,b,y),e.setFontSize(70),e.setFont("helvetica","bold"),e.text(a.name,t+120,o+112),e.setFontSize(20),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+18,o+31),e.setFontSize(12);let v=o+39,u=12;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(35),e.setFont("helvetica","bold"),e.text("Unico Precio",t+60,v+h*u+10),e.setFontSize(50),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+64,v+h*u+35)):(e.setFontSize(35),e.setFont("helvetica","bold"),e.text(l.alias,t+60,v+h*u+15),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+93,v+h*u+15))}),e.setFontSize(45),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+18,o+23),e.text(a.large,t+35,o+112),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+185,o+23,{align:"right"}),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+38,o+114)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}}),be=s=>new Promise((i,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let n=0;n<a._copies;n++)g.push(a)});const c="/icons/Juguete/xlargeninio.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=205,y=125,N=5,L=5,p=1,F=p*2;g.forEach((a,n)=>{const Q=Math.floor(n/F),f=n%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);n>0&&f===0&&e.addPage(),e.addImage(c,P,t,o,b,y),e.setFontSize(70),e.setFont("helvetica","bold"),e.text(a.name,t+120,o+112),e.setFontSize(20),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+18,o+31),e.setFontSize(12);let v=o+39,u=12;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(35),e.setFont("helvetica","bold"),e.text("Unico Precio",t+60,v+h*u+10),e.setFontSize(50),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+64,v+h*u+35)):(e.setFontSize(35),e.setFont("helvetica","bold"),e.text(l.alias,t+60,v+h*u+15),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+93,v+h*u+15))}),e.setFontSize(45),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+18,o+23),e.text(a.large,t+35,o+112),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+185,o+23,{align:"right"}),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+38,o+114)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}}),xe=s=>new Promise((i,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let n=0;n<a._copies;n++)g.push(a)});const c="/icons/Juguete/Ninio.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=100,y=60,N=5,L=5,p=2,F=p*4;g.forEach((a,n)=>{const Q=Math.floor(n/F),f=n%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);n>0&&f===0&&e.addPage(),e.addImage(c,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+5,o+10),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+5,o+15),e.setFontSize(12);let v=o+25,u=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+15,v+h*u),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+15,v+h*u+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+15,v+h*u),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+32,v+h*u))}),e.setFontSize(13),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+70,o+25),e.text(a.large,t+45,o+52),e.text(`${a.pieces} PZS`,t+70,o+30),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}}),Fe=s=>new Promise((i,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let n=0;n<a._copies;n++)g.push(a)});const c="/icons/Juguete/Ninia.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=100,y=60,N=5,L=5,p=2,F=p*4;g.forEach((a,n)=>{const Q=Math.floor(n/F),f=n%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);n>0&&f===0&&e.addPage(),e.addImage(c,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+5,o+20),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+5,o+25),e.setFontSize(12);let v=o+32,u=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+20,v+h*u),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+20,v+h*u+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+20,v+h*u),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+37,v+h*u))}),e.setFontSize(13),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+70,o+32),e.text(a.large,t+45,o+52),e.text(`${a.pieces} PZS`,t+70,o+37),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}}),Pe=s=>new Promise((i,d)=>{try{const r=s,g=[];r.forEach(W=>{for(let F=0;F<W._copies;F++)g.push(W)});const c=new O({format:"letter"}),P=c.internal.pageSize.getWidth(),e=c.internal.pageSize.getHeight(),k=5,q=10,w=100,I=60,b=5,y=5,N=2,p=N*4;g.forEach((W,F)=>{const a=Math.floor(F/p),n=F%p,Q=Math.floor(n/N),f=n%N,S=k+f*(w+b),z=q+Q*(I+y);F>0&&n===0&&c.addPage(),c.setDrawColor(0),c.setLineWidth(.5),c.rect(S,z,w,I),c.setFontSize(12),c.setFont("helvetica","bold"),c.text("Grupo Vizcarra",S+40,z+5),c.setFontSize(33),c.setFont("helvetica","bold"),c.text(W.name,S+5,z+15),c.setFontSize(10),c.setFont("helvetica","normal");const t=w-20,o=c.splitTextToSize(W.label.toUpperCase(),t);c.text(o,S+5,z+20),c.setFontSize(12);let C=z+32,E=7;W.usedPrices.filter(v=>M.value.val.includes(v.id)).forEach((v,u)=>{v.alias=="OFERTA"?(c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Unico Precio",S+15,C+u*E),c.setFontSize(25),c.text(`$ ${Number(v.pivot.price).toFixed(2)}`,S+20,C+u*E+15)):(c.setFontSize(18),c.setFont("helvetica","bold"),c.text(v.alias,S+15,C+u*E),c.text(`$${Number(v.pivot.price).toFixed(0)}`,S+37,C+u*E))}),c.setFontSize(13),c.setFont("helvetica","bold"),c.text(`${W.code}`,S+66,z+32),c.text(W.large,S+45,z+52),c.text(`${W.pieces} PZS`,S+70,z+37),c.setFontSize(4),c.setFont("helvetica","normal"),c.text(W.locations?W.locations.map(v=>v.path).join("/"):"",S+18,z+55)}),c.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),i()}catch(r){d(r)}});return ie(),(s,i)=>(Se(),ze(Te,{view:"hHh Lpr fFf"},{default:R(()=>[$(Ne,{class:"transparent text-dark",bordered:""},{default:R(()=>[$(_e),$(V),$(we,{class:"justify-between"},{default:R(()=>[A("div",null,[i[10]||(i[10]=K("Helpers ")),$(ye,{name:"navigate_next",color:"primary"}),i[11]||(i[11]=K()),i[12]||(i[12]=A("span",{class:"text-h6"},"Cambios de precio",-1))]),A("div",Ae,[$(X,{class:"col",flat:"",color:"primary",icon:"download",rounded:"",title:"Importar Excel",onClick:ne}),$(V,{spaced:"",inset:"",vertical:"",dark:""}),$(X,{class:"col",flat:"",color:"primary",icon:"label",rounded:"",title:"Crear Etiquetas",onClick:i[0]||(i[0]=d=>m.value.state=!m.value.state)})])]),_:1})]),_:1}),$(Re,null,{default:R(()=>[$(qe,{padding:""},{default:R(()=>[$(ae,{class:"my-card"},{default:R(()=>[$(B,{class:"row"},{default:R(()=>[$(J,{class:"col",modelValue:x.value.seccion.val,"onUpdate:modelValue":i[2]||(i[2]=d=>x.value.seccion.val=d),options:x.value.seccion.opts,label:"SECCION",filled:"","option-label":"name"},ee({_:2},[x.value.seccion.val?{name:"append",fn:R(()=>[$(X,{round:"",dense:"",flat:"",icon:"close",onClick:i[1]||(i[1]=d=>{x.value.seccion.val=null,x.value.familias.val=null,x.value.categorias.val=null})})]),key:"0"}:void 0]),1032,["modelValue","options"]),$(V,{spaced:"",inset:"",vertical:"",dark:""}),$(J,{class:"col",modelValue:x.value.familias.val,"onUpdate:modelValue":i[4]||(i[4]=d=>x.value.familias.val=d),options:le.value,label:"FAMILIA",filled:"","option-label":"name",disable:!x.value.seccion.val},ee({_:2},[x.value.familias.val?{name:"append",fn:R(()=>[$(X,{round:"",dense:"",flat:"",icon:"close",onClick:i[3]||(i[3]=d=>{x.value.familias.val=null,x.value.categorias.val=null})})]),key:"0"}:void 0]),1032,["modelValue","options","disable"]),$(V,{spaced:"",inset:"",vertical:"",dark:""}),$(J,{class:"col",modelValue:x.value.categorias.val,"onUpdate:modelValue":i[6]||(i[6]=d=>x.value.categorias.val=d),options:se.value,label:"CATEGORIA",filled:"","option-label":"name",disable:!x.value.familias.val},ee({_:2},[x.value.categorias.val?{name:"append",fn:R(()=>[$(X,{round:"",dense:"",flat:"",icon:"close",onClick:i[5]||(i[5]=d=>x.value.categorias.val=null)})]),key:"0"}:void 0]),1032,["modelValue","options","disable"]),$(V,{spaced:"",inset:"",vertical:"",dark:""})]),_:1})]),_:1}),$(V,{spaced:"",inset:"",vertical:"",dark:""}),K(" "+$e()+" ",1),$(Ie,{rows:_.value,columns:G.value.columns},null,8,["rows","columns"]),$(ke,{modelValue:m.value.state,"onUpdate:modelValue":i[9]||(i[9]=d=>m.value.state=d),persistent:""},{default:R(()=>[$(ae,null,{default:R(()=>[$(B,null,{default:R(()=>[A("div",null,[$(V,{spaced:"",inset:"",vertical:"",dark:""}),i[13]||(i[13]=A("div",{class:"text-center text-bold"},"Precios",-1)),A("div",Xe,[$(Le,{options:M.value.opts,type:"checkbox",modelValue:M.value.val,"onUpdate:modelValue":i[7]||(i[7]=d=>M.value.val=d),inline:""},null,8,["options","modelValue"])])])]),_:1}),$(B,{class:"row items-center"},{default:R(()=>[$(Ce,{icon:"picture_as_pdf",color:"white","text-color":"red"}),i[14]||(i[14]=A("div",{class:"q-ml-sm"},"En que Formato deseas las etiquetas?",-1))]),_:1}),$(B,null,{default:R(()=>[$(J,{modelValue:m.value.val,"onUpdate:modelValue":i[8]||(i[8]=d=>m.value.val=d),options:m.value.opts,label:"Etiquetas",filled:""},null,8,["modelValue","options"])]),_:1}),$(We,{align:"right"},{default:R(()=>[Ee($(X,{flat:"",label:"Cancel",color:"negative"},null,512),[[Me]]),$(X,{flat:"",label:"Generar",color:"positive",onClick:re,disable:m.value.val==null},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{St as default};
