import{Q as r}from"./position-engine.987468e8.js";import{r as p,c as h,o as R,a as V,w as n,e as o,i as l,U as I,f,Q as x}from"./index.11398e2a.js";import{Q as D}from"./QSelect.b66a4f2a.js";import{a as F,Q as H}from"./axios.151676c1.js";import{Q as L,_ as N}from"./UserToolbar.3d4348d4.js";import{Q as $}from"./QInput.5a643509.js";import{Q as J}from"./QForm.880a82f4.js";import{Q}from"./QTable.2b8a8012.js";import{Q as O}from"./QPage.3c7e04df.js";import{Q as P,c as M}from"./QLayout.78a5e73d.js";import{u as U}from"./VDB.ac75e5f5.js";import{e as y}from"./jspdf.plugin.autotable.eca4e2f5.js";import{u as q}from"./use-quasar.cc6b1f0b.js";import"./axios.96785de2.js";import"./index.6ece48f5.js";import"./QDialog.42c0b89a.js";import"./QItem.1144fac9.js";import"./QList.1af89808.js";import"./QLinearProgress.578c9c15.js";import"./QCheckbox.78315402.js";import"./_commonjsHelpers.88e99c8f.js";const K=l("span",{class:"text-grey"},"Helpers",-1),z=l("span",{class:"text-h6"},"Tarjetas",-1),G={class:"row"},W={class:"row"},X={class:"row"},Y={class:"col"},Z={class:"row"},ee={class:"col"},te={class:"row"},ae={class:"col"},Ce={__name:"PagosTarjetas",setup(oe){const k=U(),i=q(),v=p(null),c=p([]),C=p([]),u=p({val:"SELECCIONA CAJA",opts:[]}),_=p([{name:"bauchers",label:"Baucher",field:t=>t}]),d=p([{name:"terminal",label:"Caja",align:"left",field:t=>t.TERMINAL},{name:"ticket",label:"Ticket",field:t=>t.TICKET},{name:"total",label:"Total",field:t=>t.TARJETAS},{name:"fecha",label:"Fecha",field:t=>t.FECHA},{name:"hora",label:"Hora",field:t=>t.HORA},{name:"cliente",label:"Cliente",align:"left",field:t=>t.CLIENTE}]),g=h(()=>u.value.val?C.value.filter(t=>t.TERMINAL==u.value.val.DESTER):[]),b=h(()=>{if(c.value.length>0){let t=[...c.value];return g.value.filter(s=>{const e=t.indexOf(s.TARJETAS);return e!==-1?(t.splice(e,1),!0):!1})}else return[]}),T=h(()=>{if(c.value.length>0){let t=[...c.value];return g.value.filter(s=>{const e=t.indexOf(s.TARJETAS);return e!==-1?(t.splice(e,1),!1):!0})}else return g.value}),w=h(()=>{let t=[...g.value];return c.value.filter(s=>{const e=t.findIndex(a=>a.TARJETAS===s);return e!==-1?(t.splice(e,1),!1):!0})}),E=()=>{v.value&&(c.value.push(v.value),v.value=null)},S=async()=>{console.log("Recibiendo Datos :)");let s=`http://${k.session.store.ip}/access/public/reports/getCashCard`;F.get(s).then(e=>{console.log(e),C.value=e.data.formaspagos,u.value.opts=e.data.terminales}).catch(e=>console.log(e))},j=()=>{const t=[_.value.map(e=>m(e.label))].concat(w.value.map(e=>_.value.map(a=>m(typeof a.field=="function"?a.field(e):e[a.field===void 0?a.name:a.field],a.format,e)).join(","))).join(`\r
`);y("SobrantesBauchers.csv",t,"text/csv")!==!0?i.notify({message:"Browser denied file download...",color:"negative",icon:"warning"}):i.notify({message:"Descarga Completa :)",color:"positive",icon:"check",position:"center"})},A=()=>{const t=[d.value.map(e=>m(e.label))].concat(T.value.map(e=>d.value.map(a=>m(typeof a.field=="function"?a.field(e):e[a.field===void 0?a.name:a.field],a.format,e)).join(","))).join(`\r
`);y("BucherFaltantes.csv",t,"text/csv")!==!0?i.notify({message:"Browser denied file download...",color:"negative",icon:"warning"}):i.notify({message:"Descarga Completa :)",color:"positive",icon:"check",position:"center"})},B=()=>{const t=[d.value.map(e=>m(e.label))].concat(b.value.map(e=>d.value.map(a=>m(typeof a.field=="function"?a.field(e):e[a.field===void 0?a.name:a.field],a.format,e)).join(","))).join(`\r
`);y("BauchersEncontrados.csv",t,"text/csv")!==!0?i.notify({message:"Browser denied file download...",color:"negative",icon:"warning"}):i.notify({message:"Descarga Completa :)",color:"positive",icon:"check",position:"center"})},m=(t,s,e)=>{let a=s!==void 0?s(t,e):t;return a=a==null?"":String(a),a=a.split('"').join('""'),/^\d{1,2}-\d{4}$/.test(a)&&(a=`'${a}`),`"${a}"`};return S(),(t,s)=>(R(),V(P,{view:"hHh Lpr fFf"},{default:n(()=>[o(M,null,{default:n(()=>[o(O,{padding:""},{default:n(()=>[o(L,{class:"bg-grey-3 text-dark",bordered:""},{default:n(()=>[o(N),o(r),o(H,{class:"justify-between"},{default:n(()=>[l("div",null,[K,o(I,{name:"navigate_next",color:"primary"}),z]),l("div",G,[o(D,{modelValue:u.value.val,"onUpdate:modelValue":s[0]||(s[0]=e=>u.value.val=e),options:u.value.opts,"option-label":"DESTER",label:"Caja",outlined:"",dense:""},null,8,["modelValue","options"])])]),_:1})]),_:1}),o(r,{spaced:"",inset:"",vertical:"",dark:""}),o(J,{onSubmit:E,class:"q-gutter-md"},{default:n(()=>[o($,{modelValue:v.value,"onUpdate:modelValue":s[1]||(s[1]=e=>v.value=e),type:"number",label:"IMPORTE",outlined:""},null,8,["modelValue"])]),_:1}),o(r,{spaced:"",inset:"",vertical:"",dark:""}),l("div",W,[o(Q,{title:"Bauchers Faltantes",rows:f(w),"row-key":"name",class:"col",columns:_.value},{"top-right":n(()=>[l("div",X,[o(r,{spaced:"",inset:"",vertical:"",dark:""}),l("div",Y,[o(x,{color:"primary",icon:"archive",dense:"","no-caps":"",flat:"",round:"",onClick:j,disable:!(f(w).length>0)},null,8,["disable"])])])]),_:1},8,["rows","columns"]),o(r,{spaced:"",inset:"",vertical:"",dark:""}),o(Q,{title:"Cobros Faltantes",rows:f(T),"row-key":"name",class:"col",columns:d.value},{"top-right":n(()=>[l("div",Z,[o(r,{spaced:"",inset:"",vertical:"",dark:""}),l("div",ee,[o(x,{color:"primary",icon:"archive",dense:"","no-caps":"",flat:"",round:"",onClick:A,disable:!(f(T).length>0)},null,8,["disable"])])])]),_:1},8,["rows","columns"])]),o(r,{spaced:"",inset:"",vertical:"",dark:""}),o(Q,{title:"Cobros Encontrados",rows:f(b),"row-key":"name",columns:d.value},{"top-right":n(()=>[l("div",te,[o(r,{spaced:"",inset:"",vertical:"",dark:""}),l("div",ae,[o(x,{color:"primary",icon:"archive",dense:"","no-caps":"",flat:"",round:"",onClick:B,disable:!(f(b).length>0)},null,8,["disable"])])])]),_:1},8,["rows","columns"])]),_:1})]),_:1})]),_:1}))}};export{Ce as default};
