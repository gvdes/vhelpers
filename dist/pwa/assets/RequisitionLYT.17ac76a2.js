import{Q as p}from"./QSeparator.b69db294.js";import{r as V,c as Q,o as B,a as D,w as i,e as t,i as N,a3 as d,Y as G,Q as P,f as h,g as K,ax as Z,ay as ee,a4 as f,h as E,a$ as ae,a2 as le}from"./index.7a652f76.js";import{Q as we}from"./QToolbar.eb871937.js";import{Q as Ve}from"./QHeader.e544abcd.js";import{u as _e,Q as H,a as T}from"./use-quasar.5af37d64.js";import{Q as k,a as X,b as I,c as A}from"./QSelect.1f2fafa1.js";import{Q as Ce}from"./QForm.edac1334.js";import{Q as te}from"./QDialog.10d0f8c0.js";import{Q as Y}from"./QRadio.da130741.js";import{Q as O}from"./QInput.5ca55515.js";import{Q as xe,a as b}from"./QTr.c3e85b94.js";import{Q as Qe}from"./QPopupEdit.98fb1404.js";import{Q as Pe}from"./QTable.37f2b8b1.js";import{Q as Ue}from"./QCardActions.2527f3cc.js";import{Q as Se}from"./QPage.4dec61aa.js";import{Q as Be,a as qe}from"./QLayout.96ce3adf.js";import{C as oe}from"./ClosePopup.f56eb8b3.js";import{u as Ne}from"./VDB.18d16020.js";import{_ as Ee}from"./UserToolbar.d78b0017.js";import{v as q,a as Re}from"./axios.30672b3a.js";import"./jspdf.plugin.autotable.4fb7b066.js";import{E as Le}from"./exceljs.min.9e24d01d.js";import"./browser.94c942de.js";import"./QResizeObserver.1bcf6382.js";import"./use-key-composition.4a7612d3.js";import"./uid.42677368.js";import"./position-engine.38b5978f.js";import"./rtl.b51694b1.js";import"./QCheckbox.784b4ab7.js";import"./QList.d10c8bc9.js";import"./QLinearProgress.24f308bd.js";import"./axios.f1f32898.js";import"./_commonjsHelpers.88e99c8f.js";var R={getSeccion(g,r){return q.post(`/resources/getSeccion/${g}`,r).then(c=>c.data).catch(c=>({fail:c}))},getCedis(){return q.get("/resources/getCedis").then(g=>g.data).catch(g=>({fail:g}))},getProductsCompare(g,r){return q.post(`/resources/getProductReport/${g}`,r).then(c=>c.data).catch(c=>({fail:c}))},getProductsCompareLocation(g){return q.post("/resources/getProductReportLocations",g).then(r=>r.data).catch(r=>({fail:r}))},create(g){return q.post("/resources/create",g).then(r=>r.data).catch(r=>({fail:r}))},preview(g){return q.post("/resources/preview",g).then(r=>r.data).catch(r=>({fail:r}))},reportProductsCategories(g){return q.post("/resources/reportProductsCategories",g).then(r=>r.data).catch(r=>({fail:r}))}};const ze=N("span",{class:"text-h6"},"Resurtido",-1),$e=N("div",{class:"text-h6 text-center"},"Impresora",-1),je={class:"row"},Me={key:0,class:"row"},Te={key:1,class:"row"},Ie={key:2,class:"row"},Fe={class:"row"},Je=N("div",{class:"text-h6"},"Agrega una nota",-1),_a={__name:"RequisitionLYT",setup(g){const r=Ne(),c=_e(),F=V({status:!1}),x=V({val:null,opts:[]}),L=V({val:null,opts:[{id:1,label:"Ubicaciones"},{id:2,label:"Categorias"}]}),u=V({state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}}),s=V({state:!1,seccion:{val:[],opts:[]},familias:{val:[],opts:[]},categorias:{val:[],opts:[]}}),J=V({val:20}),y=V({state:"percentage"}),w=V([]),z=V(null),_=V({state:!1,val:null,body:[]}),m=V({state:!1,val:[],opts:[],locaciones:{val:[]}}),U=V({columns:[{name:"codigo",required:!0,label:"Codigo",align:"left",sortable:!0,field:e=>e.code},{name:"description",label:"Descripcion",align:"left",sortable:!0,field:e=>e.description},{name:"Seccion",label:"Seccion",align:"left",sortable:!0,field:e=>e.categories.familia.seccion.name},{name:"Familia",label:"Familia",align:"left",sortable:!0,field:e=>e.categories.familia.name},{name:"Categoria",label:"Categoria",align:"left",sortable:!0,field:e=>e.categories.name},{name:"pieces",label:"PXC",align:"center",sortable:!0,field:e=>e.pieces},{name:"locations",label:"Ubicacion",align:"center",sortable:!0,field:e=>e.locations},{name:"cedis",label:"Ced CJ",align:"center",sortable:!0,field:e=>e.cedis},{name:"texcoco",label:"Tex CJ",align:"center",sortable:!0,field:e=>e.texcoco},{name:"brasil",label:"Bra CJ",align:"center",sortable:!0,field:e=>e.brasil},{name:"Sucursal",label:`${r.session.store.name}`,align:"center",sortable:!0,field:e=>e.sucursal},{name:"min",label:"Minimo",align:"center",sortable:!0,field:e=>e.min},{name:"max",label:"Maximo",align:"center",sortable:!0,field:e=>e.max},{name:"Percentge",label:`${r.session.store.name} % `,align:"center",sortable:!0,field:e=>e.percentage},{name:"required",label:"Solicitado CJ",align:"center",sortable:!0,field:e=>e.required},{name:"action",label:"Accion",align:"center"}],filter:"",visible:["codigo","description","Seccion","Familia","Categoria","pieces","cedis","texcoco","Sucursal","required","action"]}),ie=Q(()=>u.value.all.filter(e=>e.deep==0)),W=Q(()=>u.value.seccion.val.length>0?u.value.all.filter(e=>e.deep==1&&u.value.seccion.val.map(l=>l.id).includes(e.root)):u.value.all.filter(e=>e.deep==1)),se=Q(()=>{if(u.value.seccion.val.length>0&&u.value.familias.val.length==0){let e=u.value.all.filter(l=>l.deep==1&&u.value.seccion.val.map(a=>a.id).includes(l.root)).map(l=>l.id);return u.value.all.filter(l=>l.deep==2&&e.includes(l.root))}else return u.value.familias.val.length>0?u.value.all.filter(e=>e.deep==2&&u.value.familias.val.map(l=>l.id).includes(e.root)):u.value.all.filter(e=>e.deep==2)}),ne=Q(()=>u.value.seccion.val.length>0),re=Q(()=>{if(m.value.val.length>0){let e=[];return m.value.opts.filter(l=>m.value.val.map(a=>a.id).includes(l.id)).forEach(l=>l.sections.forEach(a=>e.push(a))),e}else{let e=[];return m.value.opts.forEach(l=>l.sections.forEach(a=>e.push(a))),e}}),$=Q(()=>w.value.map(e=>{let l=Math.round(Number(e.stocks.filter(n=>n.id==1).map(n=>n.pivot.stock))/Number(e.pieces)),a=Math.round(Number(e.stocks.filter(n=>n.id==2).map(n=>n.pivot.stock))/Number(e.pieces)),o=Math.round(Number(e.stocks.filter(n=>n.id==16).map(n=>n.pivot.stock))/Number(e.pieces)),v=Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.stock)),C=Math.round(Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.stock))*100/Number(e.pieces));return{id:e.id,name:e.name,code:e.code,cost:e.cost,description:e.description,categories:e.categories,pieces:e.pieces,min:Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.min)),max:Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.max)),cedis:l,texcoco:a,brasil:o,sucursal:v,percentage:C,required:e.required,locations:e.locations}}).filter(e=>{if(y.value.state=="percentage")return r.session.store.id_viz==1?e.texcoco>0&&e.percentage<=J.value.val:e.cedis+e.texcoco>0&&e.percentage<=J.value.val;if(y.value.state=="minmax")return r.session.store.id_viz==1?e.texcoco>0&&e.sucursal<=e.min&&e.min>0:e.cedis+e.texcoco>0&&e.sucursal<=e.min&&e.min>0;if(y.value.state=="query")return e})),S=Q(()=>{if(L.value.val.id==2)return $.value;if(s.value.seccion.val.length==0&&s.value.familias.val.length==0&&s.value.categorias.val.length==0)return $.value;if(s.value.seccion.val.length>0&&s.value.familias.val.length==0&&s.value.categorias.val.length==0)return $.value.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id));if(s.value.seccion.val.length>0&&s.value.familias.val.length>0&&s.value.categorias.val.length==0)return $.value.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id)&&s.value.familias.val.map(l=>l.id).includes(e.categories.familia.id));if(s.value.seccion.val.length>0&&s.value.familias.val.length>0&&s.value.categorias.val.length>0)return $.value.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id)&&s.value.familias.val.map(l=>l.id).includes(e.categories.familia.id)&&s.value.categorias.val.map(l=>l.id).includes(e.categories.id))}),ue=Q(()=>s.value.seccion.val.length>0?s.value.familias.opts.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.root)):s.value.familias.opts),ce=Q(()=>s.value.familias.val.length>0?s.value.categorias.opts.filter(e=>s.value.familias.val.map(l=>l.id).includes(e.root)):s.value.categorias.opts),de=async()=>{c.loading.show({message:"Obteniendo secciones"});const e=await R.getCedis();e.fail?console.log(e):(console.log(e),x.value.opts=e,c.loading.hide()),console.log(e)},me=async()=>{u.value={state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}},m.value={state:!1,val:[],opts:[],locaciones:{val:[]}};let e=r.session.store.id_viz,l=L.value.val.id;c.loading.show({message:"Obteniendo secciones"});const a=await R.getSeccion(e,{_type:l});a.fail?console.log(a):(console.log(a),a.message?c.notify({message:"No existe la categoria",type:"negative",position:"center"}):a.families?(u.value.all=a.families,u.value.state=!0):a.locations&&(m.value.state=!0,m.value.opts=a.locations,u.value.all=a.sections),c.loading.hide())},ve=async()=>{c.loading.show({message:"Obteniendo Reporte"});let e=r.session.store.id_viz,l={_workpoint_to:x.value.val.id,_workpoint_from:e,seccion:u.value.seccion.val.map(o=>o.id),familia:u.value.familias.val.map(o=>o.id),categoria:u.value.categories.val.map(o=>o.id)};const a=await R.reportProductsCategories(l);a.fail?console.log(a):(c.loading.hide(),console.log(a),w.value=a,j())},pe=async()=>{c.loading.show({message:"Obteniendo Reporte"});let e=r.session.store.id_viz,l={_workpoint_to:x.value.val.id,_workpoint_from:e,celler:m.value.val.map(o=>o.id),locations:m.value.locaciones.val.map(o=>o.id),section:u.value.seccion.val.map(o=>o.id)};console.log(l);const a=await R.getProductsCompareLocation(l);console.log(a),a.fail?console.log(a):(c.loading.hide(),console.log(a),w.value=a,w.value.forEach(o=>{const v=o.categories.familia.seccion;v&&!s.value.seccion.opts.map(M=>M.id).includes(v.id)&&s.value.seccion.opts.push(v);const C=o.categories.familia;C&&!s.value.familias.opts.map(M=>M.id).includes(C.id)&&s.value.familias.opts.push(C);const n=o.categories;n&&!s.value.categorias.opts.map(M=>M.id).includes(n.id)&&s.value.categorias.opts.push(n)}),s.value.state=!0,j())},fe=(e,l)=>{const a=w.value.find(o=>o.id===e);console.log(a),a&&(a.required=l.value,l.set())},ge=async()=>{c.loading.show({message:"Creando Pedido"});let e={workpoint_from:r.session.store.id_viz,workpoint_to:x.value.val.id,products:S.value,notes:z.value,id_userviz:r.session.id,type:2};console.log(e);const l=await R.create(e);l.fail?console.log(l):(console.log(l),c.notify({message:`Se creo el pedido ${l.order.id}`,type:"positive",position:"center"}),w.value=[],z.value=[],W.value.val=[],m.value.val=[],u.value.val=[],c.loading.hide(),window.location.reload())},be=e=>{console.log(e);let l=w.value.findIndex(a=>a.id===e.id);console.log(l),l>=0&&w.value.splice(l,1)},ye=async()=>{console.log("aqui imprimo");let e={products:S.value,from:r.session.store,ip_address:_.value.val.ip_address};const l=await R.preview(e);l.fail?console.log(l):(console.log(l),c.notify({message:"Impresion Correcta",type:"positive",position:"center"}),_.value.val=null,_.value.state=!1)},he=async()=>{const e=new Le.Workbook,l=e.addWorksheet("Resurtido");console.log(),l.addTable({name:"Resurtido",ref:"A1",headerRow:!0,totalsRow:!1,style:{showRowStripes:!0},columns:[{name:"Codigo",filterButton:!0},{name:"Descripcion",filterButton:!0},{name:"Seccion",filterButton:!0},{name:"Familia",filterButton:!0},{name:"Categoria",filterButton:!0},{name:"PXC",filterButton:!0},{name:"Ubicacion",filterButton:!0},{name:"Cedis CJ",filterButton:!0},{name:"Texcoco CJ",filterButton:!0},{name:"Brasil CJ",filterButton:!0},{name:"Sucursal",filterButton:!0},{name:"MIN",filterButton:!0},{name:"MAX",filterButton:!0},{name:"Porcentaje",filterButton:!0},{name:"Solicitado",filterButton:!0}],rows:S.value.map(o=>[o.code,o.description,o.categories.familia.seccion.name,o.categories.familia.name,o.categories.name,o.pieces,o.locations.map(v=>v.path).join(", "),o.cedis,o.texcoco,o.brasil,o.sucursal,o.min,o.max,o.percentage,o.required])}),l.columns.forEach(o=>{let v=0;o.eachCell({includeEmpty:!0},C=>{const n=C.value?C.value.toString().length:10;n>v&&(v=n)}),o.width=v<10?10:v}),(async()=>{const o=await e.xlsx.writeBuffer(),v=new Blob([o],{type:"application/octet-stream"}),C=URL.createObjectURL(v),n=document.createElement("a");n.href=C,n.download="Resurtido.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n)})()},ke=async()=>{let e=r.session.store.id;console.log(e);try{let l=await Re.get(`/cashier/getPrinters/${e}`);l.status==200&&(_.value.body=l.data,console.log(l),_.value.state=!0)}catch(l){console.log(l),c.notify({message:"No se pudiron obtener las impresoras",type:"negative",position:"center",icon:"error"})}},j=async()=>{if(console.log(y.value.state),w.value.length>0)return y.value.state=="minmax"?w.value.forEach(e=>{let l=Math.round(Number(e.stocks.filter(o=>o.id==r.session.store.id_viz).map(o=>o.pivot.stock))/Number(e.pieces)),a=Math.round(Number(e.stocks.filter(o=>o.id==r.session.store.id_viz).map(o=>o.pivot.max))/Number(e.pieces));a-l>=1?e.required=Math.round(a-l):e.required=1}):w.value.forEach(e=>e.required=1)};return de(),(e,l)=>(B(),D(Be,{view:"hHh Lpr fFf"},{default:i(()=>[t(Ve,{class:"transparent text-dark",bordered:""},{default:i(()=>[t(Ee),t(p),t(we,{class:"justify-between"},{default:i(()=>[N("div",null,[d("Helpers "),t(G,{name:"navigate_next",color:"primary"}),d(),ze])]),_:1})]),_:1}),t(te,{modelValue:_.value.state,"onUpdate:modelValue":l[1]||(l[1]=a=>_.value.state=a)},{default:i(()=>[t(H,{class:"my-card"},{default:i(()=>[t(T,null,{default:i(()=>[$e]),_:1}),t(T,null,{default:i(()=>[t(Ce,{onSubmit:ye,class:"q-gutter-md"},{default:i(()=>[t(k,{dense:"","option-label":"name",modelValue:_.value.val,"onUpdate:modelValue":l[0]||(l[0]=a=>_.value.val=a),options:_.value.body,label:"Impresora",filled:"",autofocus:"",style:{width:"200px"}},null,8,["modelValue","options"]),N("div",null,[t(P,{label:"Enviar",type:"submit",color:"primary",style:{width:"200px"},disable:_.value.val===null},null,8,["disable"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(qe,null,{default:i(()=>[t(Se,{padding:""},{default:i(()=>[N("div",je,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{class:"col",modelValue:x.value.val,"onUpdate:modelValue":l[2]||(l[2]=a=>x.value.val=a),options:x.value.opts,label:"Pedido Para","option-label":"name",filled:"",disable:x.value.val!=null,"option-disable":a=>a.id==h(r).session.store.id_viz},null,8,["modelValue","options","disable","option-disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{class:"col",modelValue:L.value.val,"onUpdate:modelValue":[l[3]||(l[3]=a=>L.value.val=a),me],options:L.value.opts,label:"Tipo",filled:"",disable:!x.value.val},null,8,["modelValue","options","disable"])]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),u.value.state?(B(),K("div",Me,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:u.value.seccion.val,"onUpdate:modelValue":l[4]||(l[4]=a=>u.value.seccion.val=a),options:h(ie),label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:u.value.familias.val,"onUpdate:modelValue":l[5]||(l[5]=a=>u.value.familias.val=a),options:h(W),label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:u.value.seccion.val.length==0},{option:i(a=>[t(X,Z(ee(a.itemProps)),{default:i(()=>[t(I,null,{default:i(()=>[t(A,null,{default:i(()=>[d(f(a.opt.name),1)]),_:2},1024),t(A,{caption:""},{default:i(()=>[d(f(a.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:u.value.categories.val,"onUpdate:modelValue":l[6]||(l[6]=a=>u.value.categories.val=a),options:h(se),label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:u.value.familias.val.length==0},{option:i(a=>[t(X,Z(ee(a.itemProps)),{default:i(()=>[t(I,null,{default:i(()=>[t(A,null,{default:i(()=>[d(f(a.opt.name),1)]),_:2},1024),t(A,{caption:""},{default:i(()=>[d(f(a.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(P,{color:"primary",icon:"send",onClick:ve,disable:!h(ne),flat:"",dense:"",rounded:""},null,8,["disable"])])):E("",!0),m.value.state?(B(),K("div",Te,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:u.value.seccion.val,"onUpdate:modelValue":l[7]||(l[7]=a=>u.value.seccion.val=a),options:u.value.all,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:m.value.val,"onUpdate:modelValue":l[8]||(l[8]=a=>m.value.val=a),options:m.value.opts,label:"Ubicacion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:m.value.locaciones.val,"onUpdate:modelValue":l[9]||(l[9]=a=>m.value.locaciones.val=a),options:h(re),label:"Locaciones","option-label":"name",filled:"",multiple:"","use-chips":"",disable:m.value.val.length==0},null,8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(P,{color:"primary",icon:"send",onClick:pe,flat:"",dense:"",rounded:"",disable:m.value.val.length==0||m.value.locaciones.val.length==0},null,8,["disable"])])):E("",!0),t(p,{spaced:"",inset:"",vertical:"",dark:""}),s.value.state?(B(),K("div",Ie,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:s.value.seccion.val,"onUpdate:modelValue":l[10]||(l[10]=a=>s.value.seccion.val=a),options:s.value.seccion.opts,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:s.value.familias.val,"onUpdate:modelValue":l[11]||(l[11]=a=>s.value.familias.val=a),options:h(ue),label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:s.value.seccion.val.length==0},null,8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:s.value.categorias.val,"onUpdate:modelValue":l[12]||(l[12]=a=>s.value.categorias.val=a),options:h(ce),label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:s.value.familias.val.length==0},null,8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""})])):E("",!0),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(H,{class:"my-card"},{default:i(()=>[t(T,null,{default:i(()=>[N("div",Fe,[t(X,{class:"col"},{default:i(()=>[t(I,null,{default:i(()=>[t(Y,{dense:"",modelValue:y.value.state,"onUpdate:modelValue":[l[13]||(l[13]=a=>y.value.state=a),j],val:"percentage",label:"Porcentaje"},null,8,["modelValue"])]),_:1}),y.value.state=="percentage"?(B(),D(I,{key:0,caption:""},{default:i(()=>[t(O,{dense:"",modelValue:J.value.val,"onUpdate:modelValue":l[14]||(l[14]=a=>J.value.val=a),type:"number",filled:"",label:"Porcentaje",disable:y.value.state=="minmax"},null,8,["modelValue","disable"])]),_:1})):E("",!0),t(I)]),_:1}),t(Y,{dense:"",class:"col",modelValue:y.value.state,"onUpdate:modelValue":[l[15]||(l[15]=a=>y.value.state=a),j],val:"minmax",label:"Minimo y Maximo"},null,8,["modelValue"]),t(Y,{dense:"",class:"col",modelValue:y.value.state,"onUpdate:modelValue":[l[16]||(l[16]=a=>y.value.state=a),j],val:"query",label:"Consultas"},null,8,["modelValue"])])]),_:1})]),_:1}),t(p,{spaced:"",inset:"",vertical:"",dark:""}),w.value.length>0?(B(),D(Pe,{key:3,rows:h(S),columns:U.value.columns,separator:"cell",filter:U.value.filter,flat:"",bordered:"",class:"my-sticky-header-column-table","visible-columns":U.value.visible},{"top-right":i(()=>[t(O,{borderless:"",dense:"",debounce:"300",modelValue:U.value.filter,"onUpdate:modelValue":l[17]||(l[17]=a=>U.value.filter=a),placeholder:"Buscar"},{append:i(()=>[t(G,{name:"search"})]),_:1},8,["modelValue"]),y.value.state!=="query"?(B(),D(P,{key:0,color:"primary","icon-right":"send",flat:"",onClick:l[18]||(l[18]=a=>F.value.state=!F.value.state),disable:h(S).length==0},null,8,["disable"])):E("",!0),t(P,{color:"primary",icon:"print",flat:"",onClick:ke,disable:h(S).length==0},null,8,["disable"]),t(P,{color:"primary",icon:"download",flat:"",onClick:he,disable:h(S).length==0},null,8,["disable"]),t(k,{modelValue:U.value.visible,"onUpdate:modelValue":l[19]||(l[19]=a=>U.value.visible=a),multiple:"",outlined:"",dense:"","options-dense":"","display-value":h(c).lang.table.columns,"emit-value":"","map-options":"",options:U.value.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])]),body:i(a=>[t(xe,{props:a},{default:i(()=>[t(b,{key:"codigo",props:a},{default:i(()=>[d(f(a.row.code),1)]),_:2},1032,["props"]),t(b,{key:"description",props:a},{default:i(()=>[d(f(a.row.description),1)]),_:2},1032,["props"]),t(b,{key:"Seccion",props:a},{default:i(()=>[d(f(a.row.categories.familia.seccion.name),1)]),_:2},1032,["props"]),t(b,{key:"Familia",props:a},{default:i(()=>[d(f(a.row.categories.familia.name),1)]),_:2},1032,["props"]),t(b,{key:"Categoria",props:a},{default:i(()=>[d(f(a.row.categories.name),1)]),_:2},1032,["props"]),t(b,{key:"pieces",props:a},{default:i(()=>[d(f(a.row.pieces),1)]),_:2},1032,["props"]),t(b,{key:"locations",props:a},{default:i(()=>{var o;return[d(f((o=a.row.locations)==null?void 0:o.map(v=>v.path).join(", ")),1)]}),_:2},1032,["props"]),t(b,{key:"cedis",props:a},{default:i(()=>[d(f(a.row.cedis),1)]),_:2},1032,["props"]),t(b,{key:"texcoco",props:a},{default:i(()=>[d(f(a.row.texcoco),1)]),_:2},1032,["props"]),t(b,{key:"brasil",props:a},{default:i(()=>[d(f(a.row.brasil),1)]),_:2},1032,["props"]),t(b,{key:"Sucursal",props:a},{default:i(()=>[d(f(a.row.sucursal),1)]),_:2},1032,["props"]),t(b,{key:"min",props:a},{default:i(()=>[d(f(a.row.min),1)]),_:2},1032,["props"]),t(b,{key:"max",props:a},{default:i(()=>[d(f(a.row.max),1)]),_:2},1032,["props"]),t(b,{key:"Percentge",props:a},{default:i(()=>[d(f(a.row.percentage)+" % ",1)]),_:2},1032,["props"]),t(b,{key:"required",props:a},{default:i(()=>[d(f(a.row.required)+" ",1),t(Qe,{modelValue:a.row.required,"onUpdate:modelValue":o=>a.row.required=o},{default:i(o=>[t(O,{modelValue:o.value,"onUpdate:modelValue":v=>o.value=v,dense:"",autofocus:"",counter:"",onKeyup:ae(v=>fe(a.row.id,o),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),t(b,{key:"action",props:a},{default:i(()=>[t(P,{color:"negative",icon:"delete",onClick:o=>be(a.row),flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","visible-columns"])):E("",!0),t(te,{modelValue:F.value.state,"onUpdate:modelValue":l[23]||(l[23]=a=>F.value.state=a),persistent:""},{default:i(()=>[t(H,{style:{"min-width":"350px"}},{default:i(()=>[t(T,null,{default:i(()=>[Je]),_:1}),t(T,{class:"q-pt-none"},{default:i(()=>[t(O,{dense:"",modelValue:z.value,"onUpdate:modelValue":l[20]||(l[20]=a=>z.value=a),autofocus:"",onKeyup:l[21]||(l[21]=ae(a=>e.prompt=!1,["enter"]))},null,8,["modelValue"])]),_:1}),t(Ue,{align:"right",class:"text-primary"},{default:i(()=>[le(t(P,{flat:"",label:"Cancelar",onClick:l[22]||(l[22]=a=>z.value=null)},null,512),[[oe]]),le(t(P,{flat:"",label:"Enviar Pedido",onClick:ge},null,512),[[oe]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{_a as default};
