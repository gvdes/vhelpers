import{Q as v}from"./position-engine.32d5b22b.js";import{j,y as Y,k as z,W as K,aV as M,aW as U,r as I,c as J,o as y,a as Q,w as a,aE as W,u as G,aX as X,e as t,i,U as H,f as $,h as T,Q as B,a4 as o,aY as Z,a3 as c,g as P,a2 as ee,aZ as te}from"./index.6226ff72.js";import{Q as ae}from"./QSelect.35e37fc3.js";import{a as se,Q as le}from"./axios.a44d959c.js";import{Q as ne,_ as ie}from"./UserToolbar.319db488.js";import{Q as oe,a as q,b as N,c as re}from"./QLayout.61489927.js";import{Q as ce}from"./QInput.2d5b3b0c.js";import{Q as O,a as S,b as r}from"./QItem.1a0ea246.js";import{Q as de}from"./QCircularProgress.a5fd25d6.js";import{Q as ue}from"./QList.c6b90223.js";import{Q as me}from"./QTable.0814f1c1.js";import{u as fe}from"./use-quasar.8f265f89.js";import"./dayjs.min.25545ff6.js";import{a as _e}from"./axios.8eac176c.js";import{u as ve}from"./VDB.f205febd.js";import"./QDialog.6f5b7604.js";import"./QLinearProgress.fcd82b9e.js";import"./QCheckbox.13af5f22.js";import"./_commonjsHelpers.88e99c8f.js";var he=j({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(n,{slots:h,emit:b}){let w=!1,u,k,_=null,g=null,f,C;function F(){u&&u(),u=null,w=!1,_!==null&&(clearTimeout(_),_=null),g!==null&&(clearTimeout(g),g=null),k!==void 0&&k.removeEventListener("transitionend",f),f=null}function A(e,s,l){s!==void 0&&(e.style.height=`${s}px`),e.style.transition=`height ${n.duration}ms cubic-bezier(.25, .8, .50, 1)`,w=!0,u=l}function E(e,s){e.style.overflowY=null,e.style.height=null,e.style.transition=null,F(),s!==C&&b(s)}function p(e,s){let l=0;k=e,w===!0?(F(),l=e.offsetHeight===e.scrollHeight?0:void 0):(C="hide",e.style.overflowY="hidden"),A(e,l,s),_=setTimeout(()=>{_=null,e.style.height=`${e.scrollHeight}px`,f=d=>{g=null,(Object(d)!==d||d.target===e)&&E(e,"show")},e.addEventListener("transitionend",f),g=setTimeout(f,n.duration*1.1)},100)}function x(e,s){let l;k=e,w===!0?F():(C="show",e.style.overflowY="hidden",l=e.scrollHeight),A(e,l,s),_=setTimeout(()=>{_=null,e.style.height=0,f=d=>{g=null,(Object(d)!==d||d.target===e)&&E(e,"hide")},e.addEventListener("transitionend",f),g=setTimeout(f,n.duration*1.1)},100)}return Y(()=>{w===!0&&F()}),()=>z(K,{css:!1,appear:n.appear,onEnter:p,onLeave:x},h.default)}});const V={};function be(n){Object.assign(m,{request:n,exit:n,toggle:n})}function L(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null}function R(){const n=m.activeEl=m.isActive===!1?null:L();U(n===null||n===document.documentElement?document.body:n)}function pe(){m.isActive=m.isActive===!1,R()}function D(n,h){try{const b=n[h]();return b===void 0?Promise.resolve():b}catch(b){return Promise.reject(b)}}const m=M({isActive:!1,activeEl:null},{isCapable:!1,install({$q:n}){n.fullscreen=this}});V.request=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"].find(n=>document.documentElement[n]!==void 0),m.isCapable=V.request!==void 0,m.isCapable===!1?be(()=>Promise.reject("Not capable")):(Object.assign(m,{request(n){const h=n||document.documentElement,{activeEl:b}=m;return h===b?Promise.resolve():(b!==null&&h.contains(b)===!0?m.exit():Promise.resolve()).finally(()=>D(h,V.request))},exit(){return m.isActive===!0?D(document,V.exit):Promise.resolve()},toggle(n){return m.isActive===!0?m.exit():m.request(n)}}),V.exit=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"].find(n=>document[n]),m.isActive=Boolean(L()),m.isActive===!0&&R(),["onfullscreenchange","onmsfullscreenchange","onwebkitfullscreenchange"].forEach(n=>{document[n]=pe}));var xe={index(){return _e.get("/sales/getSale").then(n=>n.data).catch(n=>({fail:n}))}};const ge=i("span",{class:"text-grey"},"Helpers",-1),ye=i("span",{class:"text-h6"},"Ventas Sucursales",-1),ke={class:"row"},we={class:"text-bold text-h6"},Ee=i("div",{class:"text-h6 text-center"},"Ventas 2023",-1),Ne={class:"text-h4 text-center"},Fe=i("div",{class:"text-h6 text-center"},"Tickets 2023",-1),Qe={class:"text-h4 text-center"},Te=i("div",{class:"text-h6 text-center"},"Ventas 2024",-1),Se={class:"text-h4 text-center"},Ce=i("div",{class:"text-h6 text-center"},"Tickets 2024",-1),$e={class:"text-h4 text-center"},Ve=i("div",{class:"text-h6 text-center"},"Diferencia",-1),Ae={class:"text-h4 text-center"},qe=i("div",{class:"text-h6 text-center"},"Diferencia Tickets",-1),Ie={class:"text-h4 text-center"},Pe=i("div",{class:"text-h6 text-center"},"VENTAS HOY",-1),He={class:"text-h4 text-center"},Be=i("div",{class:"text-h6 text-center"},"Tickets HOY",-1),Oe={class:"text-h4 text-center"},De={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition"},Le=i("div",null,null,-1),Re={key:0},je={key:1},Ye={key:0,class:""},dt={__name:"SaleStore",setup(n){const h=fe();W();const b=G(),w=ve(),u=I([]),k=I({pagination:{rowsPerPage:0},filter:""}),_=I({val:null}),g=[{id:1,label:"Enero"},{id:2,label:"Febrero"},{id:3,label:"Marzo"},{id:4,label:"Abril"},{id:5,label:"Mayo"},{id:6,label:"Junio"},{id:7,label:"Julio"},{id:8,label:"Agosto"},{id:9,label:"Septiembre"},{id:10,label:"Octubre"},{id:11,label:"Noviembre"},{id:12,label:"Diciembre"}],f=J(()=>h.platform.is.mobile),C=async()=>{const p=new Date().getMonth()+1;_.value.val=g.filter(e=>e.id===p)[0],h.loading.show({message:"Cargando Informacion"}),console.log("se inicia el init");const x=await xe.index();x.error?console.log(x):(console.log(x),u.value=x,F(u.value,p))},F=async(E,p)=>{E.forEach((x,e)=>{setTimeout(()=>{let l=`http://${x.ip_address}/access/public/reports/getSalesPerMonth/${p}`;se.get(l).then(d=>{x.sales=d.data==null?null:d.data,console.log(d)}).catch(d=>{console.log(d.response.data.message)})},e*1e3)}),h.loading.hide()};w.session.rol=="root"?C():(h.notify({message:"No tienes acceso a esta pagina",type:"negative",position:"center"}),b.replace("/"));const A=()=>{u.value.map(E=>E.sales=null),F(u.value,_.value.val.id)};return(E,p)=>{const x=X("router-view");return y(),Q(oe,{view:"hHh Lpr fFf"},{default:a(()=>[t(re,null,{default:a(()=>[t(ne,{class:"bg-grey-3 text-dark",bordered:""},{default:a(()=>[t(ie),t(v),t(le,{class:"justify-between"},{default:a(()=>[i("div",null,[ge,t(H,{name:"navigate_next",color:"primary"}),ye]),i("div",ke,[$(f)?T("",!0):(y(),Q(ae,{key:0,modelValue:_.value.val,"onUpdate:modelValue":[p[0]||(p[0]=e=>_.value.val=e),A],options:g,label:"mes",outlined:"",dense:""},null,8,["modelValue"])),t(B,{dense:"",flat:"",color:"primary",icon:"autorenew",onClick:C})])]),_:1})]),_:1}),t(v,{spaced:"",inset:"",vertical:"",dark:""}),i("div",we,o(_.value.val.label),1),t(v,{spaced:"",inset:"",vertical:"",dark:""}),i("div",{class:Z($(f)?"":"row")},[$(f)?T("",!0):(y(),Q(q,{key:0,class:"my-card col",bordered:"",dense:""},{default:a(()=>[t(N,null,{default:a(()=>[Ee,i("div",Ne,o(Number(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.salesant)*1.1||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),t(N,null,{default:a(()=>[Fe,i("div",Qe,o(Number(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.tiketsant)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1})),t(v,{spaced:"",inset:"",vertical:"",dark:""}),$(f)?T("",!0):(y(),Q(q,{key:1,class:"my-card col",bordered:"",dense:""},{default:a(()=>[t(N,null,{default:a(()=>[Te,i("div",Se,o(Number(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.salesact)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),t(N,null,{default:a(()=>[Ce,i("div",$e,o(Number(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.tiketsact)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1})),t(v,{spaced:"",inset:"",vertical:"",dark:""}),$(f)?T("",!0):(y(),Q(q,{key:2,class:"my-card col",bordered:"",dense:""},{default:a(()=>[t(N,null,{default:a(()=>[Ve,i("div",Ae,o(Number(u.value.reduce((e,s)=>{var l,d;return e+Number(((l=s.sales)==null?void 0:l.salesact)-((d=s.sales)==null?void 0:d.salesant)*1.1||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),t(N,null,{default:a(()=>[qe,i("div",Ie,o(Number(u.value.reduce((e,s)=>{var l,d;return e+Number(((l=s.sales)==null?void 0:l.tiketsact)-((d=s.sales)==null?void 0:d.tiketsant)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1})),t(v,{spaced:"",inset:"",vertical:"",dark:""}),t(q,{class:"my-card col",bordered:"",dense:""},{default:a(()=>[t(N,null,{default:a(()=>[Pe,i("div",He,o(Number(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.saleshoy)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),t(N,null,{default:a(()=>[Be,i("div",Oe,o(u.value.reduce((e,s)=>{var l;return e+Number(((l=s.sales)==null?void 0:l.hoytck)||0)},0)),1)]),_:1})]),_:1})],2),t(v,{spaced:"",inset:"",vertical:"",dark:""}),t(me,{title:"Sucursales",rows:u.value,"row-key":"id",pagination:k.value.pagination,filter:k.value.filter,"hide-header":""},{"top-right":a(()=>[t(ce,{borderless:"",dense:"",debounce:"300",modelValue:k.value.filter,"onUpdate:modelValue":p[1]||(p[1]=e=>k.value.filter=e),placeholder:"Buscar"},{append:a(()=>[t(H,{name:"search"})]),_:1},8,["modelValue"])]),body:a(e=>[i("div",De,[t(ue,{bordered:"",dense:""},{default:a(()=>[t(O,null,{default:a(()=>[t(S,null,{default:a(()=>[t(r,{overline:""},{default:a(()=>[c(o(e.row.name),1)]),_:2},1024),t(r,{caption:""},{default:a(()=>[c(o(e.row.alias),1)]),_:2},1024),Le]),_:2},1024),e.expand?T("",!0):(y(),Q(S,{key:0,class:"text-right"},{default:a(()=>[e.row.sales?(y(),P("div",Re,[t(r,{overline:""},{default:a(()=>{var s;return[c("$ "+o(Number((s=e.row.sales)==null?void 0:s.saleshoy).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]}),_:2},1024),t(r,{caption:""},{default:a(()=>{var s;return[c("tickets: "+o((s=e.row.sales)==null?void 0:s.hoytck),1)]}),_:2},1024)])):(y(),P("div",je,[t(r,{caption:""},{default:a(()=>[t(de,{indeterminate:"",rounded:"",size:"20px",color:"primary",class:"q-ma-md"})]),_:1})]))]),_:2},1024)),$(f)?T("",!0):(y(),Q(S,{key:1,avatar:""},{default:a(()=>[t(B,{color:"grey",flat:"",dense:"",icon:e.expand?"keyboard_arrow_up":"keyboard_arrow_down",onClick:s=>e.expand=!e.expand},null,8,["icon","onClick"])]),_:2},1024))]),_:2},1024),t(he,null,{default:a(()=>[e.row.sales?ee((y(),P("div",Ye,[t(v),t(O,{class:"text-center",dense:""},{default:a(()=>[t(S,null,{default:a(()=>[t(r,{overline:""},{default:a(()=>[c("VENTAS 2023")]),_:1}),t(r,{caption:""},{default:a(()=>[c(o(Number(e.row.sales.salesant*1.1).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),t(v,{spaced:"",inset:"",vertical:"",dark:""}),t(r,{overline:""},{default:a(()=>[c("TICKETS 2023")]),_:1}),t(r,{caption:""},{default:a(()=>[c(o(e.row.sales.tiketsant),1)]),_:2},1024)]),_:2},1024),t(S,null,{default:a(()=>[t(r,{overline:""},{default:a(()=>[c("VENTAS 2024")]),_:1}),t(r,{caption:""},{default:a(()=>[c(o(Number(e.row.sales.salesact).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),t(v,{spaced:"",inset:"",vertical:"",dark:""}),t(r,{overline:""},{default:a(()=>[c("TICKETS 2024")]),_:1}),t(r,{caption:""},{default:a(()=>[c(o(e.row.sales.tiketsact),1)]),_:2},1024)]),_:2},1024),t(S,null,{default:a(()=>[t(r,{overline:""},{default:a(()=>[c("DIFERENCIA")]),_:1}),t(r,{caption:""},{default:a(()=>[c(o((Number(e.row.sales.salesact).toFixed(2)-Number(e.row.sales.salesant*1.1).toFixed(2)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),t(v,{spaced:"",inset:"",vertical:"",dark:""}),t(r,{overline:""},{default:a(()=>[c("DIFERENCIA TICKETS")]),_:1}),t(r,{caption:""},{default:a(()=>[c(o(e.row.sales.tiketsact-e.row.sales.tiketsant),1)]),_:2},1024)]),_:2},1024),t(S,null,{default:a(()=>[t(r,{overline:""},{default:a(()=>[c("VENTA HOY ")]),_:1}),t(r,{caption:""},{default:a(()=>[c(o(Number(e.row.sales.saleshoy).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),t(v,{spaced:"",inset:"",vertical:"",dark:""}),t(r,{overline:""},{default:a(()=>[c("TICKETS HOY")]),_:1}),t(r,{caption:""},{default:a(()=>[c(o(e.row.sales.hoytck),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)],512)),[[te,e.expand]]):T("",!0)]),_:2},1024)]),_:2},1024),t(v,{spaced:"",inset:"",vertical:"",dark:""})])]),_:1},8,["rows","pagination","filter"]),t(x)]),_:1})]),_:1})}}};export{dt as default};
