import{Q as p}from"./QSeparator.0cb87880.js";import{r as w,c as Q,o as q,a as O,w as i,e as o,i as N,a3 as d,Y as W,Q as P,f as y,g as K,ax as G,ay as Z,a4 as f,h as j,a$ as ee,a2 as ae}from"./index.a3aaa1bd.js";import{Q as we}from"./QToolbar.9e67375b.js";import{Q as Ve}from"./QHeader.b3fffd33.js";import{u as _e,Q as H,a as M}from"./use-quasar.9d6c3e6f.js";import{Q as h,a as X,b as T,c as D}from"./QSelect.fa0e1b0f.js";import{Q as Ce}from"./QForm.2c6e7e26.js";import{Q as le}from"./QDialog.f9e079b0.js";import{Q as oe}from"./QRadio.1b99ea8a.js";import{Q as A}from"./QInput.17a4f037.js";import{Q as xe,a as b}from"./QTr.90c4ed1c.js";import{Q as Qe}from"./QPopupEdit.684854f4.js";import{Q as Pe}from"./QTable.000ad3f7.js";import{Q as Se}from"./QCardActions.315214bb.js";import{Q as Ue}from"./QPage.3aea8ab3.js";import{Q as Be,a as Ne}from"./QLayout.e2fcf06b.js";import{C as te}from"./ClosePopup.e808fc5b.js";import{u as qe}from"./VDB.f28d7aeb.js";import{_ as Ee}from"./UserToolbar.25b4671d.js";import{v as B,a as Re}from"./axios.ae0a941c.js";import"./jspdf.plugin.autotable.ff902a7d.js";import{E as Le}from"./exceljs.min.9e24d01d.js";import"./browser.94c942de.js";import"./QResizeObserver.ea45863f.js";import"./use-key-composition.e422a0b9.js";import"./uid.42677368.js";import"./position-engine.d15ee034.js";import"./rtl.b51694b1.js";import"./QCheckbox.f0e04729.js";import"./QList.1fd363d5.js";import"./QLinearProgress.6ef7d66b.js";import"./axios.f1f32898.js";import"./_commonjsHelpers.88e99c8f.js";var E={getSeccion(g,r){return B.post(`/resources/getSeccion/${g}`,r).then(c=>c.data).catch(c=>({fail:c}))},getCedis(){return B.get("/resources/getCedis").then(g=>g.data).catch(g=>({fail:g}))},getProductsCompare(g,r){return B.post(`/resources/getProductReport/${g}`,r).then(c=>c.data).catch(c=>({fail:c}))},getProductsCompareLocation(g){return B.post("/resources/getProductReportLocations",g).then(r=>r.data).catch(r=>({fail:r}))},create(g){return B.post("/resources/create",g).then(r=>r.data).catch(r=>({fail:r}))},preview(g){return B.post("/resources/preview",g).then(r=>r.data).catch(r=>({fail:r}))},reportProductsCategories(g){return B.post("/resources/reportProductsCategories",g).then(r=>r.data).catch(r=>({fail:r}))}};const ze=N("span",{class:"text-h6"},"Resurtido",-1),$e=N("div",{class:"text-h6 text-center"},"Impresora",-1),je={class:"row"},Me={key:0,class:"row"},Te={key:1,class:"row"},Ie={key:2,class:"row"},Fe={class:"row"},Je=N("div",{class:"text-h6"},"Agrega una nota",-1),_a={__name:"RequisitionLYT",setup(g){const r=qe(),c=_e(),I=w({status:!1}),x=w({val:null,opts:[]}),R=w({val:null,opts:[{id:1,label:"Ubicaciones"},{id:2,label:"Categorias"}]}),u=w({state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}}),s=w({state:!1,seccion:{val:[],opts:[]},familias:{val:[],opts:[]},categorias:{val:[],opts:[]}}),F=w({val:20}),_=w({state:"percentage"}),k=w([]),L=w(null),V=w({state:!1,val:null,body:[]}),m=w({state:!1,val:[],opts:[],locaciones:{val:[]}}),S=w({columns:[{name:"codigo",required:!0,label:"Codigo",align:"left",sortable:!0,field:e=>e.code},{name:"description",label:"Descripcion",align:"left",sortable:!0,field:e=>e.description},{name:"Seccion",label:"Seccion",align:"left",sortable:!0,field:e=>e.categories.familia.seccion.name},{name:"Familia",label:"Familia",align:"left",sortable:!0,field:e=>e.categories.familia.name},{name:"Categoria",label:"Categoria",align:"left",sortable:!0,field:e=>e.categories.name},{name:"pieces",label:"PXC",align:"center",sortable:!0,field:e=>e.pieces},{name:"locations",label:"Ubicacion",align:"center",sortable:!0,field:e=>e.locations},{name:"cedis",label:"Ced CJ",align:"center",sortable:!0,field:e=>e.cedis},{name:"texcoco",label:"Tex CJ",align:"center",sortable:!0,field:e=>e.texcoco},{name:"brasil",label:"Bra CJ",align:"center",sortable:!0,field:e=>e.brasil},{name:"Sucursal",label:`${r.session.store.name}`,align:"center",sortable:!0,field:e=>e.sucursal},{name:"min",label:"Minimo",align:"center",sortable:!0,field:e=>e.min},{name:"max",label:"Maximo",align:"center",sortable:!0,field:e=>e.max},{name:"Percentge",label:`${r.session.store.name} % `,align:"center",sortable:!0,field:e=>e.percentage},{name:"required",label:"Solicitado CJ",align:"center",sortable:!0,field:e=>e.required},{name:"action",label:"Accion",align:"center"}],filter:"",visible:["codigo","description","Seccion","Familia","Categoria","pieces","cedis","texcoco","Sucursal","required","action"]}),ie=Q(()=>u.value.all.filter(e=>e.deep==0)),Y=Q(()=>u.value.seccion.val.length>0?u.value.all.filter(e=>e.deep==1&&u.value.seccion.val.map(l=>l.id).includes(e.root)):u.value.all.filter(e=>e.deep==1)),se=Q(()=>{if(u.value.seccion.val.length>0&&u.value.familias.val.length==0){let e=u.value.all.filter(l=>l.deep==1&&u.value.seccion.val.map(a=>a.id).includes(l.root)).map(l=>l.id);return u.value.all.filter(l=>l.deep==2&&e.includes(l.root))}else return u.value.familias.val.length>0?u.value.all.filter(e=>e.deep==2&&u.value.familias.val.map(l=>l.id).includes(e.root)):u.value.all.filter(e=>e.deep==2)}),ne=Q(()=>u.value.seccion.val.length>0),re=Q(()=>{if(m.value.val.length>0){let e=[];return m.value.opts.filter(l=>m.value.val.map(a=>a.id).includes(l.id)).forEach(l=>l.sections.forEach(a=>e.push(a))),e}else{let e=[];return m.value.opts.forEach(l=>l.sections.forEach(a=>e.push(a))),e}}),z=Q(()=>k.value.map(e=>{let l=Math.round(Number(e.stocks.filter(n=>n.id==1).map(n=>n.pivot.stock))/Number(e.pieces)),a=Math.round(Number(e.stocks.filter(n=>n.id==2).map(n=>n.pivot.stock))/Number(e.pieces)),t=Math.round(Number(e.stocks.filter(n=>n.id==16).map(n=>n.pivot.stock))/Number(e.pieces)),v=Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.stock)),C=Math.round(Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.stock))*100/Number(e.pieces));return{id:e.id,name:e.name,code:e.code,cost:e.cost,description:e.description,categories:e.categories,pieces:e.pieces,min:Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.min)),max:Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.max)),cedis:l,texcoco:a,brasil:t,sucursal:v,percentage:C,required:e.required,locations:e.locations}}).filter(e=>{if(_.value.state=="percentage")return r.session.store.id_viz==1?e.texcoco>0&&e.percentage<=F.value.val:e.cedis+e.texcoco>0&&e.percentage<=F.value.val;if(_.value.state=="minmax")return r.session.store.id_viz==1?e.texcoco>0&&e.sucursal<=e.min&&e.min>0:e.cedis+e.texcoco>0&&e.sucursal<=e.min&&e.min>0})),U=Q(()=>{if(R.value.val.id==2)return z.value;if(s.value.seccion.val.length==0&&s.value.familias.val.length==0&&s.value.categorias.val.length==0)return z.value;if(s.value.seccion.val.length>0&&s.value.familias.val.length==0&&s.value.categorias.val.length==0)return z.value.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id));if(s.value.seccion.val.length>0&&s.value.familias.val.length>0&&s.value.categorias.val.length==0)return z.value.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id)&&s.value.familias.val.map(l=>l.id).includes(e.categories.familia.id));if(s.value.seccion.val.length>0&&s.value.familias.val.length>0&&s.value.categorias.val.length>0)return z.value.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id)&&s.value.familias.val.map(l=>l.id).includes(e.categories.familia.id)&&s.value.categorias.val.map(l=>l.id).includes(e.categories.id))}),ue=Q(()=>s.value.seccion.val.length>0?s.value.familias.opts.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.root)):s.value.familias.opts),ce=Q(()=>s.value.familias.val.length>0?s.value.categorias.opts.filter(e=>s.value.familias.val.map(l=>l.id).includes(e.root)):s.value.categorias.opts),de=async()=>{c.loading.show({message:"Obteniendo secciones"});const e=await E.getCedis();e.fail?console.log(e):(console.log(e),x.value.opts=e,c.loading.hide()),console.log(e)},me=async()=>{u.value={state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}},m.value={state:!1,val:[],opts:[],locaciones:{val:[]}};let e=r.session.store.id_viz,l=R.value.val.id;c.loading.show({message:"Obteniendo secciones"});const a=await E.getSeccion(e,{_type:l});a.fail?console.log(a):(console.log(a),a.message?c.notify({message:"No existe la categoria",type:"negative",position:"center"}):a.families?(u.value.all=a.families,u.value.state=!0):a.locations&&(m.value.state=!0,m.value.opts=a.locations,u.value.all=a.sections),c.loading.hide())},ve=async()=>{c.loading.show({message:"Obteniendo Reporte"});let e=r.session.store.id_viz,l={_workpoint_to:x.value.val.id,_workpoint_from:e,seccion:u.value.seccion.val.map(t=>t.id),familia:u.value.familias.val.map(t=>t.id),categoria:u.value.categories.val.map(t=>t.id)};const a=await E.reportProductsCategories(l);a.fail?console.log(a):(c.loading.hide(),console.log(a),k.value=a,J())},pe=async()=>{c.loading.show({message:"Obteniendo Reporte"});let e=r.session.store.id_viz,l={_workpoint_to:x.value.val.id,_workpoint_from:e,celler:m.value.val.map(t=>t.id),locations:m.value.locaciones.val.map(t=>t.id),section:u.value.seccion.val.map(t=>t.id)};console.log(l);const a=await E.getProductsCompareLocation(l);console.log(a),a.fail?console.log(a):(c.loading.hide(),console.log(a),k.value=a,k.value.forEach(t=>{const v=t.categories.familia.seccion;v&&!s.value.seccion.opts.map($=>$.id).includes(v.id)&&s.value.seccion.opts.push(v);const C=t.categories.familia;C&&!s.value.familias.opts.map($=>$.id).includes(C.id)&&s.value.familias.opts.push(C);const n=t.categories;n&&!s.value.categorias.opts.map($=>$.id).includes(n.id)&&s.value.categorias.opts.push(n)}),s.value.state=!0,J())},fe=(e,l)=>{const a=k.value.find(t=>t.id===e);console.log(a),a&&(a.required=l.value,l.set())},ge=async()=>{c.loading.show({message:"Creando Pedido"});let e={workpoint_from:r.session.store.id_viz,workpoint_to:x.value.val.id,products:U.value,notes:L.value,id_userviz:r.session.id,type:2};console.log(e);const l=await E.create(e);l.fail?console.log(l):(console.log(l),c.notify({message:`Se creo el pedido ${l.order.id}`,type:"positive",position:"center"}),k.value=[],L.value=[],Y.value.val=[],m.value.val=[],u.value.val=[],c.loading.hide(),window.location.reload())},be=e=>{console.log(e);let l=k.value.findIndex(a=>a.id===e.id);console.log(l),l>=0&&k.value.splice(l,1)},ye=async()=>{console.log("aqui imprimo");let e={products:U.value,from:r.session.store,ip_address:V.value.val.ip_address};const l=await E.preview(e);l.fail?console.log(l):(console.log(l),c.notify({message:"Impresion Correcta",type:"positive",position:"center"}),V.value.val=null,V.value.state=!1)},he=async()=>{const e=new Le.Workbook,l=e.addWorksheet("Resurtido");console.log(),l.addTable({name:"Resurtido",ref:"A1",headerRow:!0,totalsRow:!1,style:{showRowStripes:!0},columns:[{name:"Codigo",filterButton:!0},{name:"Descripcion",filterButton:!0},{name:"Seccion",filterButton:!0},{name:"Familia",filterButton:!0},{name:"Categoria",filterButton:!0},{name:"PXC",filterButton:!0},{name:"Ubicacion",filterButton:!0},{name:"Cedis CJ",filterButton:!0},{name:"Texcoco CJ",filterButton:!0},{name:"Brasil CJ",filterButton:!0},{name:"Sucursal",filterButton:!0},{name:"MIN",filterButton:!0},{name:"MAX",filterButton:!0},{name:"Porcentaje",filterButton:!0},{name:"Solicitado",filterButton:!0}],rows:U.value.map(t=>[t.code,t.description,t.categories.familia.seccion.name,t.categories.familia.name,t.categories.name,t.pieces,t.locations.map(v=>v.path).join(", "),t.cedis,t.texcoco,t.brasil,t.sucursal,t.min,t.max,t.percentage,t.required])}),l.columns.forEach(t=>{let v=0;t.eachCell({includeEmpty:!0},C=>{const n=C.value?C.value.toString().length:10;n>v&&(v=n)}),t.width=v<10?10:v}),(async()=>{const t=await e.xlsx.writeBuffer(),v=new Blob([t],{type:"application/octet-stream"}),C=URL.createObjectURL(v),n=document.createElement("a");n.href=C,n.download="Resurtido.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n)})()},ke=async()=>{let e=r.session.store.id;console.log(e);try{let l=await Re.get(`/cashier/getPrinters/${e}`);l.status==200&&(V.value.body=l.data,console.log(l),V.value.state=!0)}catch(l){console.log(l),c.notify({message:"No se pudiron obtener las impresoras",type:"negative",position:"center",icon:"error"})}},J=async()=>{if(console.log(_.value.state),k.value.length>0)return _.value.state=="minmax"?k.value.forEach(e=>{let l=Math.round(Number(e.stocks.filter(t=>t.id==r.session.store.id_viz).map(t=>t.pivot.stock))/Number(e.pieces)),a=Math.round(Number(e.stocks.filter(t=>t.id==r.session.store.id_viz).map(t=>t.pivot.max))/Number(e.pieces));a-l>=1?e.required=Math.round(a-l):e.required=1}):k.value.forEach(e=>e.required=1)};return de(),(e,l)=>(q(),O(Be,{view:"hHh Lpr fFf"},{default:i(()=>[o(Ve,{class:"transparent text-dark",bordered:""},{default:i(()=>[o(Ee),o(p),o(we,{class:"justify-between"},{default:i(()=>[N("div",null,[d("Helpers "),o(W,{name:"navigate_next",color:"primary"}),d(),ze])]),_:1})]),_:1}),o(le,{modelValue:V.value.state,"onUpdate:modelValue":l[1]||(l[1]=a=>V.value.state=a)},{default:i(()=>[o(H,{class:"my-card"},{default:i(()=>[o(M,null,{default:i(()=>[$e]),_:1}),o(M,null,{default:i(()=>[o(Ce,{onSubmit:ye,class:"q-gutter-md"},{default:i(()=>[o(h,{dense:"","option-label":"name",modelValue:V.value.val,"onUpdate:modelValue":l[0]||(l[0]=a=>V.value.val=a),options:V.value.body,label:"Impresora",filled:"",autofocus:"",style:{width:"200px"}},null,8,["modelValue","options"]),N("div",null,[o(P,{label:"Enviar",type:"submit",color:"primary",style:{width:"200px"},disable:V.value.val===null},null,8,["disable"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Ne,null,{default:i(()=>[o(Ue,{padding:""},{default:i(()=>[N("div",je,[o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(h,{class:"col",modelValue:x.value.val,"onUpdate:modelValue":l[2]||(l[2]=a=>x.value.val=a),options:x.value.opts,label:"Pedido Para","option-label":"name",filled:"",disable:x.value.val!=null,"option-disable":a=>a.id==y(r).session.store.id_viz},null,8,["modelValue","options","disable","option-disable"]),o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(h,{class:"col",modelValue:R.value.val,"onUpdate:modelValue":[l[3]||(l[3]=a=>R.value.val=a),me],options:R.value.opts,label:"Tipo",filled:"",disable:!x.value.val},null,8,["modelValue","options","disable"])]),o(p,{spaced:"",inset:"",vertical:"",dark:""}),u.value.state?(q(),K("div",Me,[o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(h,{dense:"",class:"col",modelValue:u.value.seccion.val,"onUpdate:modelValue":l[4]||(l[4]=a=>u.value.seccion.val=a),options:y(ie),label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(h,{dense:"",class:"col",modelValue:u.value.familias.val,"onUpdate:modelValue":l[5]||(l[5]=a=>u.value.familias.val=a),options:y(Y),label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:u.value.seccion.val.length==0},{option:i(a=>[o(X,G(Z(a.itemProps)),{default:i(()=>[o(T,null,{default:i(()=>[o(D,null,{default:i(()=>[d(f(a.opt.name),1)]),_:2},1024),o(D,{caption:""},{default:i(()=>[d(f(a.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(h,{dense:"",class:"col",modelValue:u.value.categories.val,"onUpdate:modelValue":l[6]||(l[6]=a=>u.value.categories.val=a),options:y(se),label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:u.value.familias.val.length==0},{option:i(a=>[o(X,G(Z(a.itemProps)),{default:i(()=>[o(T,null,{default:i(()=>[o(D,null,{default:i(()=>[d(f(a.opt.name),1)]),_:2},1024),o(D,{caption:""},{default:i(()=>[d(f(a.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(P,{color:"primary",icon:"send",onClick:ve,disable:!y(ne),flat:"",dense:"",rounded:""},null,8,["disable"])])):j("",!0),m.value.state?(q(),K("div",Te,[o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(h,{dense:"",class:"col",modelValue:u.value.seccion.val,"onUpdate:modelValue":l[7]||(l[7]=a=>u.value.seccion.val=a),options:u.value.all,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(h,{dense:"",class:"col",modelValue:m.value.val,"onUpdate:modelValue":l[8]||(l[8]=a=>m.value.val=a),options:m.value.opts,label:"Ubicacion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(h,{dense:"",class:"col",modelValue:m.value.locaciones.val,"onUpdate:modelValue":l[9]||(l[9]=a=>m.value.locaciones.val=a),options:y(re),label:"Locaciones","option-label":"name",filled:"",multiple:"","use-chips":"",disable:m.value.val.length==0},null,8,["modelValue","options","disable"]),o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(P,{color:"primary",icon:"send",onClick:pe,flat:"",dense:"",rounded:"",disable:m.value.val.length==0||m.value.locaciones.val.length==0},null,8,["disable"])])):j("",!0),o(p,{spaced:"",inset:"",vertical:"",dark:""}),s.value.state?(q(),K("div",Ie,[o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(h,{dense:"",class:"col",modelValue:s.value.seccion.val,"onUpdate:modelValue":l[10]||(l[10]=a=>s.value.seccion.val=a),options:s.value.seccion.opts,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(h,{dense:"",class:"col",modelValue:s.value.familias.val,"onUpdate:modelValue":l[11]||(l[11]=a=>s.value.familias.val=a),options:y(ue),label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:s.value.seccion.val.length==0},null,8,["modelValue","options","disable"]),o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(h,{dense:"",class:"col",modelValue:s.value.categorias.val,"onUpdate:modelValue":l[12]||(l[12]=a=>s.value.categorias.val=a),options:y(ce),label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:s.value.familias.val.length==0},null,8,["modelValue","options","disable"]),o(p,{spaced:"",inset:"",vertical:"",dark:""})])):j("",!0),o(p,{spaced:"",inset:"",vertical:"",dark:""}),o(H,{class:"my-card"},{default:i(()=>[o(M,null,{default:i(()=>[N("div",Fe,[o(X,{class:"col"},{default:i(()=>[o(T,null,{default:i(()=>[o(oe,{dense:"",modelValue:_.value.state,"onUpdate:modelValue":[l[13]||(l[13]=a=>_.value.state=a),J],val:"percentage",label:"Porcentaje"},null,8,["modelValue"])]),_:1}),_.value.state=="percentage"?(q(),O(T,{key:0,caption:""},{default:i(()=>[o(A,{dense:"",modelValue:F.value.val,"onUpdate:modelValue":l[14]||(l[14]=a=>F.value.val=a),type:"number",filled:"",label:"Porcentaje",disable:_.value.state=="minmax"},null,8,["modelValue","disable"])]),_:1})):j("",!0),o(T)]),_:1}),o(oe,{dense:"",class:"col",modelValue:_.value.state,"onUpdate:modelValue":[l[15]||(l[15]=a=>_.value.state=a),J],val:"minmax",label:"Minimo y Maximo"},null,8,["modelValue"])])]),_:1})]),_:1}),o(p,{spaced:"",inset:"",vertical:"",dark:""}),k.value.length>0?(q(),O(Pe,{key:3,rows:y(U),columns:S.value.columns,separator:"cell",filter:S.value.filter,flat:"",bordered:"",class:"my-sticky-header-column-table","visible-columns":S.value.visible},{"top-right":i(()=>[o(A,{borderless:"",dense:"",debounce:"300",modelValue:S.value.filter,"onUpdate:modelValue":l[16]||(l[16]=a=>S.value.filter=a),placeholder:"Buscar"},{append:i(()=>[o(W,{name:"search"})]),_:1},8,["modelValue"]),o(P,{color:"primary","icon-right":"send",flat:"",onClick:l[17]||(l[17]=a=>I.value.state=!I.value.state),disable:y(U).length==0},null,8,["disable"]),o(P,{color:"primary",icon:"print",flat:"",onClick:ke,disable:y(U).length==0},null,8,["disable"]),o(P,{color:"primary",icon:"download",flat:"",onClick:he,disable:y(U).length==0},null,8,["disable"]),o(h,{modelValue:S.value.visible,"onUpdate:modelValue":l[18]||(l[18]=a=>S.value.visible=a),multiple:"",outlined:"",dense:"","options-dense":"","display-value":y(c).lang.table.columns,"emit-value":"","map-options":"",options:S.value.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])]),body:i(a=>[o(xe,{props:a},{default:i(()=>[o(b,{key:"codigo",props:a},{default:i(()=>[d(f(a.row.code),1)]),_:2},1032,["props"]),o(b,{key:"description",props:a},{default:i(()=>[d(f(a.row.description),1)]),_:2},1032,["props"]),o(b,{key:"Seccion",props:a},{default:i(()=>[d(f(a.row.categories.familia.seccion.name),1)]),_:2},1032,["props"]),o(b,{key:"Familia",props:a},{default:i(()=>[d(f(a.row.categories.familia.name),1)]),_:2},1032,["props"]),o(b,{key:"Categoria",props:a},{default:i(()=>[d(f(a.row.categories.name),1)]),_:2},1032,["props"]),o(b,{key:"pieces",props:a},{default:i(()=>[d(f(a.row.pieces),1)]),_:2},1032,["props"]),o(b,{key:"locations",props:a},{default:i(()=>{var t;return[d(f((t=a.row.locations)==null?void 0:t.map(v=>v.path).join(", ")),1)]}),_:2},1032,["props"]),o(b,{key:"cedis",props:a},{default:i(()=>[d(f(a.row.cedis),1)]),_:2},1032,["props"]),o(b,{key:"texcoco",props:a},{default:i(()=>[d(f(a.row.texcoco),1)]),_:2},1032,["props"]),o(b,{key:"brasil",props:a},{default:i(()=>[d(f(a.row.brasil),1)]),_:2},1032,["props"]),o(b,{key:"Sucursal",props:a},{default:i(()=>[d(f(a.row.sucursal),1)]),_:2},1032,["props"]),o(b,{key:"min",props:a},{default:i(()=>[d(f(a.row.min),1)]),_:2},1032,["props"]),o(b,{key:"max",props:a},{default:i(()=>[d(f(a.row.max),1)]),_:2},1032,["props"]),o(b,{key:"Percentge",props:a},{default:i(()=>[d(f(a.row.percentage)+" % ",1)]),_:2},1032,["props"]),o(b,{key:"required",props:a},{default:i(()=>[d(f(a.row.required)+" ",1),o(Qe,{modelValue:a.row.required,"onUpdate:modelValue":t=>a.row.required=t},{default:i(t=>[o(A,{modelValue:t.value,"onUpdate:modelValue":v=>t.value=v,dense:"",autofocus:"",counter:"",onKeyup:ee(v=>fe(a.row.id,t),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),o(b,{key:"action",props:a},{default:i(()=>[o(P,{color:"negative",icon:"delete",onClick:t=>be(a.row),flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","visible-columns"])):j("",!0),o(le,{modelValue:I.value.state,"onUpdate:modelValue":l[22]||(l[22]=a=>I.value.state=a),persistent:""},{default:i(()=>[o(H,{style:{"min-width":"350px"}},{default:i(()=>[o(M,null,{default:i(()=>[Je]),_:1}),o(M,{class:"q-pt-none"},{default:i(()=>[o(A,{dense:"",modelValue:L.value,"onUpdate:modelValue":l[19]||(l[19]=a=>L.value=a),autofocus:"",onKeyup:l[20]||(l[20]=ee(a=>e.prompt=!1,["enter"]))},null,8,["modelValue"])]),_:1}),o(Se,{align:"right",class:"text-primary"},{default:i(()=>[ae(o(P,{flat:"",label:"Cancelar",onClick:l[21]||(l[21]=a=>L.value=null)},null,512),[[te]]),ae(o(P,{flat:"",label:"Enviar Pedido",onClick:ge},null,512),[[te]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{_a as default};
