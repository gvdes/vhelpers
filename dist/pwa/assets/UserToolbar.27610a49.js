import{u as R,a as T,r as v,o as i,i as m,g as d,e,j as c,X as s,W as f,k as A,d as Q,w as r,aa as g,ab as p,ac as P,_ as V,Z as C,a0 as S,ad as h,ae as D,af as W,Q as j,f as z,$ as F,Y as M}from"./index.02e98f23.js";import{Q as X,a as $}from"./QSelect.53941b07.js";import{Q as Y,a as Z,b as B}from"./QList.87ca2251.js";import{Q as G}from"./QExpansionItem.3c424fa7.js";import{Q as H,a as J}from"./QDrawer.eb1e7cb5.js";import{C as K}from"./ClosePopup.5123f35e.js";import{a as O}from"./auth.b5328b31.js";import{u as ee}from"./use-quasar.dc53eb3e.js";const ae={class:"col"},se={key:0,class:"col text-center fs-inc1 text-primary fw-sbold"},te={class:"text-center fs-inc1 text-primary fw-sbold"},oe={class:"row"},ke={__name:"UserToolbar",setup(le){const l=R(),x=l.session,b=T(),y=v({state:!1}),I=()=>{l.sessionDestroy(),b.replace("/auth")},t=ee();v([]);const k=v(!1),u=v({val:l.session,opts:[]}),N=async()=>{const n=await O.getResources(x.credentials.id);n.fail?console.log(n):(console.log(n),l.setModules(n.grouped_modules),l.setStores(n.stores),l.modulesLoaded=!0)},U=()=>{t.loading.show({message:"Cambiando sucursal"}),l.session.store=u.value.val.store,l.setSession({...l.session,store:u.value.val.store}),console.log(l.session),window.location.reload(),t.loading.hide()},_=localStorage.getItem("mode");_&&t.dark.set(_==="dark");const q=()=>{t.dark.toggle(),localStorage.setItem("mode",t.dark.isActive?"dark":"light")};return N(),(n,a)=>(i(),m(V,null,[d("div",{class:g(["q-pa-sm row items-center",s(t).dark.isActive?"text-white bg-dark":"text-dark bg-white"])},[e(c,{color:"primary",icon:"list",flat:"",dense:"",class:"q-mr-sm",onClick:a[0]||(a[0]=o=>k.value=!k.value)}),d("div",ae,[e(c,{class:"text-pink",flat:"",label:s(x).credentials.nick,onClick:a[1]||(a[1]=o=>s(b).push("/"))},null,8,["label"])]),s(l).stores.length==0?(i(),m("div",se,f(s(x).store.name),1)):A("",!0),s(l).stores.length>1?(i(),Q(X,{key:1,modelValue:u.value.val,"onUpdate:modelValue":[a[2]||(a[2]=o=>u.value.val=o),U],options:s(l).stores,"option-label":o=>o.store.name,borderless:"",color:"primary",dense:"",class:"text-center","options-selected-class":"text-primary text-bold"},{selected:r(()=>[d("div",te,f(u.value.val.store.name),1)]),_:1},8,["modelValue","options","option-label"])):A("",!0),a[8]||(a[8]=d("div",{class:"col text-right"},null,-1))],2),e(J,{modelValue:k.value,"onUpdate:modelValue":a[6]||(a[6]=o=>k.value=o),width:300,breakpoint:500,bordered:"",class:g(s(t).dark.isActive?"bg-grey-9":"bg-grey-3")},{default:r(()=>[e(H,{class:"fit text-bold text-dark"},{default:r(()=>[e(Y,null,{default:r(()=>[d("div",oe,[e(c,{color:"primary",icon:"home",flat:"",dense:"",class:"col",onClick:a[3]||(a[3]=o=>s(b).push("/"))}),e(p,{spaced:"",inset:"",vertical:"",dark:""}),e(c,{class:"col",color:"pink",icon:"logout","no-caps":"",flat:"",onClick:a[4]||(a[4]=o=>y.value.state=!0)}),e(p,{spaced:"",inset:"",vertical:"",dark:""}),e(P,{modelValue:s(t).dark.mode,"onUpdate:modelValue":[a[5]||(a[5]=o=>s(t).dark.mode=o),q],color:"primary",icon:s(t).dark.mode?"light_mode":"dark_mode","keep-color":"",class:"col text-center"},null,8,["modelValue","icon"])]),e(p),e(p,{spaced:"",inset:"",vertical:"",dark:""}),(i(!0),m(V,null,C(s(l).modules,(o,L)=>(i(),Q(G,{key:L,"expand-separator":"",label:o.name,dark:s(t).dark.isActive,"header-class":s(t).dark.isActive?"text-white":"text-dark"},{default:r(()=>[(i(!0),m(V,null,C(o.modules,(w,E)=>(i(),m("div",{key:E},[S((i(),Q(Z,{clickable:"",to:`/${w.path}`,dark:s(t).dark.isActive},{default:r(()=>[e(B,null,{default:r(()=>[e($,{class:g(s(t).dark.isActive?"text-white":"text-dark")},{default:r(()=>[h(f(w.name),1)]),_:2},1032,["class"]),e($,{caption:"",class:g(s(t).dark.isActive?"text-grey-4":"text-grey-7")},{default:r(()=>[h(f(w.desc),1)]),_:2},1032,["class"])]),_:2},1024),e(B,{avatar:""},{default:r(()=>[e(D,{flat:"",color:"transparent","text-color":(s(t).dark.isActive,"primary"),icon:"arrow_forward"},null,8,["text-color"])]),_:1})]),_:2},1032,["to","dark"])),[[W]]),e(p,{dark:s(t).dark.isActive},null,8,["dark"])]))),128))]),_:2},1032,["label","dark","header-class"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","class"]),e(M,{modelValue:y.value.state,"onUpdate:modelValue":a[7]||(a[7]=o=>y.value.state=o),persistent:""},{default:r(()=>[e(j,null,{default:r(()=>[e(z,{class:"row items-center"},{default:r(()=>[e(D,{icon:"logout",color:"primary","text-color":"white"}),a[9]||(a[9]=d("span",{class:"q-ml-sm"},"Estas por cerrar sesion",-1))]),_:1}),e(F,{align:"right"},{default:r(()=>[S(e(c,{flat:"",label:"Nope!",color:"primary"},null,512),[[K]]),e(c,{flat:"",label:"Simon!",color:"primary",onClick:I})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{ke as _};
