import{_ as I,u as E,f as T,Z as k,r as n,$ as O,a as d,h as f,i as t,d as a,a4 as V,k as C,j as v,ah as N,aE as Y,c as A,a2 as B,a3 as L,n as m,aX as x,aY as P,p as U,Q as H,l as _,a1 as y,a5 as $,a6 as j}from"./index.7b36b598.js";import{Q as F}from"./QHeader.3caed621.js";import{Q as M}from"./QToolbar.16507dcd.js";import{Q as g}from"./QTd.bf9b68b7.js";import{Q as R}from"./QTr.24582bac.js";import{Q as b}from"./QTable.7331a546.js";import{Q as z,a as X}from"./QLayout.5a70b4ab.js";import{Q as Z}from"./QSelect.6d05204b.js";import{C as G}from"./ClosePopup.8d8b6328.js";import{_ as J}from"./UserToolbar.c011ba69.js";import{u as K}from"./use-quasar.d212ba29.js";import{d as W}from"./dayjs.min.cbcf888d.js";import{u as ee}from"./layoutStore.12ceff03.js";import{r as Q}from"./requisitionApi.72dcc9ce.js";import"./QResizeObserver.aad412c0.js";import"./QList.912e2662.js";import"./QLinearProgress.51f9a353.js";import"./QScrollObserver.b72b88d9.js";import"./QImg.8ac60bab.js";import"./QSpace.9d6d302e.js";import"./QExpansionItem.404142ee.js";import"./favorites.6a93ba8d.js";import"./auth.21736647.js";import"./axios.59d61e02.js";import"./_commonjsHelpers.88e99c8f.js";const ae={class:"row items-center"},te={__name:"inputsLYT",setup(oe){E(),ee(),T(),k();const i=K();n(""),n([]);const r=n([]),o=n({state:!1,val:null}),w=n([]),c=n({columnsReq:[{name:"id",label:"ID",field:e=>e.id},{name:"user",label:"USUARIO",field:e=>e.user.complete_name},{name:"status",label:"ESTADO",field:e=>e.status.name},{name:"date",label:"FECHA",field:e=>W(e.created_at).format("YYYY/MM/DD")},{name:"products",label:"PRODUCTOS",field:e=>e.bodie.length},{name:"notes",label:"NOTAS",field:e=>e.notes}],columns:[{name:"id",label:"ID",field:e=>e.id},{name:"name",label:"NOMBRE",field:e=>e.name},{name:"countRequisition",label:"REQUISISIONES",field:e=>e.requisition_count}],columnsRequired:[{name:"code",label:"CODE",field:e=>e.code},{name:"descripcion",label:"DESCRIPCION",field:e=>e.description},{name:"amount",label:"CANTIDAD",field:e=>e.amount}]}),S=async()=>{i.loading.show({message:"Obteniendo Datos"});const e=await Q.getRequisitionsStore();e.status!==200?console.log(e):(i.loading.hide(),r.value=e.data.stores,w.value=e.data.status,console.log(e.data))},h=(e,s)=>{o.value.state=!0,o.value.val=s,console.log(s)},q=async()=>{i.loading.show({message:"Imprimiendo"});const e=await Q.printReq(o.value.val._stores,o.value.val.id);e.status!=200?console.log(e):(console.log(e),i.loading.hide())},D=async()=>{i.loading.hide({message:"Cambiando Status"});const e=await Q.change(o.value.val._stores,o.value.val.id);e.status!=200?console.log(e):(console.log(e),i.loading.hide(),i.notify({message:"El pedido se cambio de estado",type:"positive",position:"center"}),r.value.forEach(s=>{if(s.id==e.data._stores){let u=s.requisition.findIndex(l=>l.id==e.data.id);u>=0&&(s.requisition[u]=e.data)}}),o.value.val=e.data,o.value.state=!1)};return S(),(e,s)=>{const u=O("router-view");return d(),f(z,{view:"hHh Lpr fFf"},{default:t(()=>[a(F,{class:"transparent text-dark",bordered:""},{default:t(()=>[a(J),a(V)]),_:1}),a(X,null,{default:t(()=>[a(M,{class:"justify-between"},{default:t(()=>[C("div",ae,[s[3]||(s[3]=v(" Helpers ")),a(N,{name:"navigate_next",color:"primary",class:"q-mx-sm"}),a(Y,{name:"fade"},{default:t(()=>s[2]||(s[2]=[C("span",{class:"text-h6"},"Pedidos Insumos ",-1)])),_:1})])]),_:1}),r.value.length>0?(d(),f(b,{key:0,title:"Pedidos",rows:r.value,columns:c.value.columns},{body:t(l=>[a(R,{props:l},{default:t(()=>[(d(!0),A(L,null,B(l.cols,p=>(d(),f(g,{key:p.name,props:l},{default:t(()=>[v(y(p.value),1)]),_:2},1032,["props"]))),128)),a(g,{"auto-width":""},{default:t(()=>[a(m,{size:"sm",color:"accent",round:"",dense:"",onClick:p=>l.expand=!l.expand,icon:l.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1032,["props"]),x(a(R,{props:l},{default:t(()=>[a(g,{colspan:"100%"},{default:t(()=>[a(b,{rows:l.row.requisition,columns:c.value.columnsReq,onRowClick:h},null,8,["rows","columns"])]),_:2},1024)]),_:2},1032,["props"]),[[P,l.expand]])]),_:1},8,["rows","columns"])):U("",!0),a(u)]),_:1}),a(j,{modelValue:o.value.state,"onUpdate:modelValue":s[1]||(s[1]=l=>o.value.state=l),persistent:""},{default:t(()=>[a(H,{style:{width:"500px"}},{default:t(()=>[a(_,{class:"text-bold text-h6 text-center"},{default:t(()=>[v(" PEDIDO: "+y(o.value.val.id),1)]),_:1}),a(_,null,{default:t(()=>[a(Z,{modelValue:o.value.val.status,"onUpdate:modelValue":s[0]||(s[0]=l=>o.value.val.status=l),options:w.value,label:"Estado",filled:"","option-label":"name",disable:""},null,8,["modelValue","options"])]),_:1}),a(_,null,{default:t(()=>[a(b,{rows:o.value.val.bodie,columns:c.value.columnsRequired},null,8,["rows","columns"])]),_:1}),a($,{align:"right"},{default:t(()=>[x(a(m,{flat:"",icon:"close",color:"primary"},null,512),[[G]]),a(m,{flat:"",icon:"print",color:"primary",onClick:q}),a(m,{flat:"",icon:"send",color:"primary",onClick:D,disable:o.value.val._status>3},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};var Ie=I(te,[["__scopeId","data-v-f523117e"]]);export{Ie as default};
