import{u as N,r as p,o as r,g as f,f as n,e,Q as i,a1 as l,a0 as v,h as w,a as y,w as o,a3 as x,a4 as q,a5 as V,a6 as _,a7 as C,a8 as U,a9 as L}from"./index.976e3998.js";import{Q as R,a as S}from"./QSelect.21e80e71.js";import{Q as g,a as E,b as h,c as I}from"./QSeparator.7ec8c57d.js";import{Q as P}from"./QList.16c3b3bc.js";import{Q as T,a as z}from"./QDrawer.36009e26.js";import{u as F,Q as M,a as O}from"./use-quasar.c265db13.js";import{Q as W}from"./QCardActions.1738e728.js";import{C as j}from"./ClosePopup.03538f37.js";import{u as G}from"./VDB.37e8ee37.js";import{a as H}from"./auth.47587533.js";const J={class:"q-pa-sm transparent text-dark row items-center"},K={class:"col"},X={key:0,class:"col text-center fs-inc1 text-primary fw-sbold"},Y={class:"text-center fs-inc1 text-primary fw-sbold"},Z={class:"row"},ue={__name:"UserToolbar",setup(ee){const a=G(),k=a.session,Q=N(),b=p({state:!1}),D=()=>{a.sessionDestroy(),Q.replace("/auth")},d=F();p([]);const m=p(!1),c=p({val:a.session,opts:[]}),B=async()=>{d.loading.show({message:"Obteniendo Informacion"});const u=await H.getResources(k.credentials.id);u.fail?console.log(u):(a.setModules(u.rol.modules),a.setStores(u.stores),d.loading.hide())},$=()=>{d.loading.show({message:"Cambiando sucursal"}),a.session.store=c.value.val.store,a.setSession({...a.session,store:c.value.val.store}),console.log(a.session),window.location.reload(),d.loading.hide()};return B(),(u,s)=>(r(),f(x,null,[n("div",J,[e(i,{color:"primary",icon:"list",flat:"",dense:"",class:"q-mr-sm",onClick:s[0]||(s[0]=t=>m.value=!m.value)}),n("div",K,[e(i,{class:"text-pink",flat:"",label:l(k).credentials.nick,onClick:s[1]||(s[1]=t=>l(Q).push("/"))},null,8,["label"])]),l(a).stores.length==0?(r(),f("div",X,v(l(k).store.name),1)):w("",!0),l(a).stores.length>1?(r(),y(R,{key:1,modelValue:c.value.val,"onUpdate:modelValue":[s[2]||(s[2]=t=>c.value.val=t),$],options:l(a).stores,"option-label":t=>t.store.name,borderless:"",color:"primary",dense:"",class:"text-center","options-selected-class":"text-primary text-bold"},{selected:o(()=>[n("div",Y,v(c.value.val.store.name),1)]),_:1},8,["modelValue","options","option-label"])):w("",!0),s[7]||(s[7]=n("div",{class:"col text-right"},null,-1))]),e(z,{modelValue:m.value,"onUpdate:modelValue":s[5]||(s[5]=t=>m.value=t),width:300,breakpoint:500,bordered:"",class:L(l(d).dark.isActive?"bg-grey-9":"bg-grey-3")},{default:o(()=>[e(T,{class:"fit text-bold text-dark"},{default:o(()=>[e(P,null,{default:o(()=>[n("div",Z,[e(i,{color:"primary",icon:"home",flat:"",dense:"",class:"col",onClick:s[3]||(s[3]=t=>l(Q).push("/"))}),e(g,{spaced:"",inset:"",vertical:"",dark:""}),e(i,{class:"col",color:"pink",icon:"logout","no-caps":"",flat:"",onClick:s[4]||(s[4]=t=>b.value.state=!0)})]),e(g),e(g,{spaced:"",inset:"",vertical:"",dark:""}),(r(!0),f(x,null,q(l(a).modules,(t,A)=>(r(),f(x,{key:A},[V((r(),y(E,{clickable:"",to:t.module.path},{default:o(()=>[e(h,null,{default:o(()=>[e(S,{class:"text-h6 text-dark"},{default:o(()=>[_(v(t.module.name),1)]),_:2},1024),e(S,{caption:""},{default:o(()=>[_(v(t.module.desc),1)]),_:2},1024)]),_:2},1024),e(h,{avatar:""},{default:o(()=>[e(C,{flat:"",color:"transparent","text-color":"primary",icon:"arrow_forward"})]),_:1})]),_:2},1032,["to"])),[[U]]),e(g)],64))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","class"]),e(I,{modelValue:b.value.state,"onUpdate:modelValue":s[6]||(s[6]=t=>b.value.state=t),persistent:""},{default:o(()=>[e(M,null,{default:o(()=>[e(O,{class:"row items-center"},{default:o(()=>[e(C,{icon:"logout",color:"primary","text-color":"white"}),s[8]||(s[8]=n("span",{class:"q-ml-sm"},"Estas por cerrar sesion",-1))]),_:1}),e(W,{align:"right"},{default:o(()=>[V(e(i,{flat:"",label:"Nope!",color:"primary"},null,512),[[j]]),e(i,{flat:"",label:"Simon!",color:"primary",onClick:D})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{ue as _};
