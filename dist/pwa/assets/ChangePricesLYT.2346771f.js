import{Q as X}from"./QSeparator.970ad44f.js";import{r as U,c as Z,o as Ee,a as Ne,w as _,e as P,i as O,a3 as se,Y as He,a4 as Ie,Q as Y,b1 as ee,f as te,a5 as ke,a2 as Le}from"./index.d6535de1.js";import{Q as We}from"./QToolbar.e7b8b60f.js";import{Q as _e}from"./QHeader.d986479a.js";import{Q as K}from"./QSelect.6babb7a7.js";import{Q as ae,a as j}from"./QCard.eab9b540.js";import{Q as qe}from"./QTable.de8ccdc4.js";import{Q as Te}from"./QOptionGroup.81f36099.js";import{Q as ie}from"./QCardActions.60a5f8a8.js";import{Q as ne}from"./QDialog.5e34c3f3.js";import{Q as Re}from"./QDate.502a4650.js";import{Q as Me}from"./QPage.4498dc94.js";import{Q as Ve,a as Qe}from"./QLayout.0f77cedd.js";import{C as De}from"./ClosePopup.1d106147.js";import{u as Ye}from"./VDB.6b3d0108.js";import{_ as Oe}from"./UserToolbar.19b8884d.js";import{v as Ae}from"./axios.d0e8637f.js";import{u as Xe}from"./use-quasar.505fcb9f.js";import{E as D}from"./jspdf.plugin.autotable.c08a6e5a.js";import{d as Ue}from"./dayjs.min.25545ff6.js";import{E as Ge}from"./exceljs.min.9e24d01d.js";import"./browser.94c942de.js";import"./QResizeObserver.36001cf2.js";import"./use-key-composition.3e547522.js";import"./uid.42677368.js";import"./QItemSection.db0401dc.js";import"./position-engine.3b6f86a4.js";import"./rtl.b51694b1.js";import"./QList.bed8137d.js";import"./QLinearProgress.79a1d568.js";import"./QCheckbox.c4301fab.js";import"./QRadio.4f224920.js";import"./use-cache.b0833c75.js";import"./date.90c38258.js";import"./axios.f1f32898.js";import"./_commonjsHelpers.88e99c8f.js";var ce={getData(oe,R){return Ae.post(`/compare/getChangePrices/${oe}`,R).then(C=>C.data).catch(C=>({fail:C}))}};const je=O("span",{class:"text-h6"},"Cambios de precio",-1),Je={class:"text-bold"},Be={class:"row"},Ze=O("div",{class:"text-center text-bold"},"Precios",-1),Ke={class:"q-pa-md"},et=O("div",{class:"q-ml-sm"},"En que Formato deseas las etiquetas?",-1),tt={class:"q-pa-md"},at=O("div",{class:"q-pb-sm"},null,-1),Mt={__name:"ChangePricesLYT",setup(oe){const R=Ye(),C=Xe(),A=U([]),T=U({state:!1,date:null}),J=U([]),re=U([{name:"stock_exh",label:"EXHIBICION",field:s=>{var c,r,i;return((i=(r=(c=s.stocks)==null?void 0:c.find(u=>u.pivot))==null?void 0:r.pivot)==null?void 0:i.exh)||0},align:"center",sortable:!0},{name:"stock_gen",label:"GENERAL",field:s=>{var c,r,i;return((i=(r=(c=s.stocks)==null?void 0:c.find(u=>u.pivot))==null?void 0:r.pivot)==null?void 0:i.gen)||0},align:"center",sortable:!0}]),g=U({seccion:{val:null,opts:[]},familias:{val:null,opts:[]},categorias:{val:null,opts:[]}}),G=U({columns:[{name:"code",label:"CODIGO",field:s=>s.code,align:"left",sortable:!0},{name:"barcode",label:"CB",field:s=>s.barcode,align:"left",sortable:!0},{name:"description",label:"DESCRIPCION",field:s=>s.description,align:"left",sortable:!0},{name:"section",label:"SECCION",field:s=>s.categories.familia.seccion.name,align:"left",sortable:!0},{name:"family",label:"FAMILIA",field:s=>s.categories.familia.name,align:"left",sortable:!0},{name:"category",label:"CATEGORIA",field:s=>s.categories.name,align:"left",sortable:!0},{name:"locations",label:"UBICACION",field:s=>{var c;return(c=s.locations)==null?void 0:c.map(r=>r.path).join("/")},align:"center",sortable:!0},...J.value,...re.value]}),p=U({state:!1,val:null,opts:[{id:1,label:"Navidad Extra Grande"},{id:2,label:"Navidad Grande"},{id:3,label:"Navidad Mediano"},{id:4,label:"Navidad Pequeno"},{id:5,label:"Navidad Vertical"},{id:6,label:"Juguete Ni\xF1o"},{id:7,label:"Juguete Ni\xF1a"},{id:8,label:"Juguete Extra Ni\xF1a"},{id:9,label:"Juguete Extra Ni\xF1o"},{id:10,label:"Juguete Horizontal Ni\xF1o"},{id:11,label:"Juguete Horizontal Ni\xF1a"},{id:12,label:"Rectangular 2x4"}]}),M=U({val:[0,1,2,4],opts:[{label:"Menudeo",value:1},{label:"Mayoreo",value:2},{label:"Docena",value:3},{label:"Caja",value:4}]}),B=Z(()=>A.value.filter(s=>s.prices.some(c=>c.pivot.price!=0))),Q=Z(()=>{var s,c,r,i,u,n,x,e,k,q,N,I,F,$,H,L,f,W,S,a,d,V,b;return((c=(s=g.value)==null?void 0:s.seccion)==null?void 0:c.val)&&!((u=(i=(r=g.value)==null?void 0:r.seccion)==null?void 0:i.familia)!=null&&u.val)?B.value.filter(z=>{var y,t,o;return((o=(t=(y=z.categories)==null?void 0:y.familia)==null?void 0:t.seccion)==null?void 0:o.id)===g.value.seccion.val.id}):((x=(n=g.value)==null?void 0:n.seccion)==null?void 0:x.val)&&((q=(k=(e=g.value)==null?void 0:e.seccion)==null?void 0:k.familia)==null?void 0:q.val)&&!(($=(F=(I=(N=g.value)==null?void 0:N.seccion)==null?void 0:I.familia)==null?void 0:F.categorias)!=null&&$.val)?B.value.filter(z=>{var y,t,o;return((o=(t=(y=z.categories)==null?void 0:y.familia)==null?void 0:t.seccion)==null?void 0:o.id)===g.value.seccion.val.id}):((L=(H=g.value)==null?void 0:H.seccion)==null?void 0:L.val)&&((S=(W=(f=g.value)==null?void 0:f.seccion)==null?void 0:W.familia)==null?void 0:S.val)&&((b=(V=(d=(a=g.value)==null?void 0:a.seccion)==null?void 0:d.familia)==null?void 0:V.categorias)==null?void 0:b.val)?B.value.filter(z=>{var y,t,o;return((o=(t=(y=z.categories)==null?void 0:y.familia)==null?void 0:t.seccion)==null?void 0:o.id)===g.value.seccion.val.id}):B.value}),de=Z(()=>{var s,c;return(c=(s=g.value)==null?void 0:s.seccion)!=null&&c.val?g.value.familias.opts.filter(r=>{var i,u;return r.root==((u=(i=g.value)==null?void 0:i.seccion)==null?void 0:u.val.id)}):g.value.familias.opts}),ue=Z(()=>{var s,c;return(c=(s=g.value)==null?void 0:s.familias)!=null&&c.val?g.value.categorias.opts.filter(r=>{var i,u;return r.root==((u=(i=g.value)==null?void 0:i.familias)==null?void 0:u.val.id)}):g.value.categorias.opts}),ve=async()=>{C.loading.show({message:"Obteniendo Informacion"});let s=new Date;T.value.date=Ue(s).format("YYYY/MM/DD");let c=R.session.store.id_viz;const r=await ce.getData(c,{fechas:T.value.date});if(r.fail)console.log(r);else{if(console.log(r),A.value=r,A.value.forEach(i=>{let u=le(i.prices);i._copies=1,i.type=u.type,i.usedPrices=u.prices;const n=i.categories.familia.seccion;n&&!g.value.seccion.opts.map(k=>k.id).includes(n.id)&&g.value.seccion.opts.push(n);const x=i.categories.familia;x&&!g.value.familias.opts.map(k=>k.id).includes(x.id)&&g.value.familias.opts.push(x);const e=i.categories;e&&!g.value.categorias.opts.map(k=>k.id).includes(e.id)&&g.value.categorias.opts.push(e)}),A.value.length>0){const i=A.value[0];i.prices&&i.prices.forEach(u=>{J.value.push({name:`price_${u.id}`,label:u.name,field:n=>{var x,e;return((e=(x=n.prices.find(k=>k.id===u.id))==null?void 0:x.pivot)==null?void 0:e.price)||0},align:"center",sortable:!0})}),G.value.columns=[...G.value.columns,...J.value]}C.loading.hide()}},me=async()=>{C.loading.show({message:"Obteniendo Informacion"});let s=R.session.store.id_viz;const c=await ce.getData(s,{fechas:T.value.date});if(c.fail)console.log(c);else{if(console.log(c),A.value=c,A.value.forEach(r=>{let i=le(r.prices);r._copies=1,r.type=i.type,r.usedPrices=i.prices;const u=r.categories.familia.seccion;u&&!g.value.seccion.opts.map(e=>e.id).includes(u.id)&&g.value.seccion.opts.push(u);const n=r.categories.familia;n&&!g.value.familias.opts.map(e=>e.id).includes(n.id)&&g.value.familias.opts.push(n);const x=r.categories;x&&!g.value.categorias.opts.map(e=>e.id).includes(x.id)&&g.value.categorias.opts.push(x)}),A.value.length>0){const r=A.value[0];r.prices&&r.prices.forEach(i=>{J.value.push({name:`price_${i.id}`,label:i.name,field:u=>{var n,x;return((x=(n=u.prices.find(e=>e.id===i.id))==null?void 0:n.pivot)==null?void 0:x.price)||0},align:"center",sortable:!0})}),G.value.columns=[...G.value.columns,...J.value]}C.loading.hide(),T.value.state=!T.value.state}},pe=async()=>{const s=new Ge.Workbook,c=s.addWorksheet("Comparativo");c.addRow(G.value.columns.map(x=>x.label)),Q.value.forEach(x=>{c.addRow(G.value.columns.map(e=>typeof e.field=="function"?e.field(x):x[e.field]||"-"))}),c.columns.forEach(x=>{let e=0;x.eachCell({includeEmpty:!0},k=>{const q=k.value?k.value.toString().length:10;q>e&&(e=q)}),x.width=e<10?10:e});const r=await s.xlsx.writeBuffer(),i=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),u=URL.createObjectURL(i),n=document.createElement("a");n.href=u,n.download="Cambio_Precios.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n)},le=(s,c)=>{let r=[...s];const i=r.find(n=>n.pivot._type==4),u=r.find(n=>n.pivot._type==1);if(i.pivot.price==u.pivot.price){let n={id:0,alias:"OFERTA",name:"Oferta",pivot:{price:r[0].pivot.price},used:!0};return console.log("oferta"),{type:"off",prices:[n]}}else return console.log("estandar"),{type:"std",prices:r}},ge=()=>{C.loading.show({message:"Generando Etiquetas"}),p.value.val.id==1?he(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):p.value.val.id==2?fe(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):p.value.val.id==3?be(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):p.value.val.id==4?xe(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):p.value.val.id==5?Fe(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):p.value.val.id==6?Pe(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):p.value.val.id==7?Se(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):p.value.val.id==8?ze(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):p.value.val.id==9?ye(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):p.value.val.id==10?$e(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):p.value.val.id==11?Ce(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):p.value.val.id==12&&we(Q.value).then(s=>{C.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),p.value.state=!1,p.value.val=null,C.loading.hide()}).catch(s=>{console.log(s),alert("Hubo un error al descargar las etiquetas")})},fe=s=>new Promise((c,r)=>{try{const i=s,u=[];i.forEach(a=>{for(let d=0;d<a._copies;d++)u.push(a)});const n="/icons/Navidad/Navidad6(2).png",x="PNG",e=new D({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),N=5,I=10,F=100,$=85,H=5,L=5,f=2,S=f*3;u.forEach((a,d)=>{const V=Math.floor(d/S),b=d%S,z=Math.floor(b/f),y=b%f,t=N+y*(F+H),o=I+z*($+L);d>0&&b===0&&e.addPage(),e.addImage(n,x,t,o,F,$),e.setFontSize(30),e.setFont("helvetica","bold"),e.text(a.name,t+61,o+77),e.setFontSize(14),e.setFont("helvetica","normal");const w=F-20,E=e.splitTextToSize(a.label,w);e.text(E,t+10,o+25),e.setFontSize(12);let v=o+39,m=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(22),e.setFont("helvetica","bold"),e.text("Unico Precio",t+30,v+h*m+5),e.setFontSize(28),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+34,v+h*m+20)):(e.setFontSize(22),e.setFont("helvetica","bold"),e.text(l.alias,t+23,v+h*m),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+45,v+h*m))}),e.setFontSize(16),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+10,o+12),e.text(a.large,t+18,o+74),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+70,o+12),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+19,o+77)}),e.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}}),he=s=>new Promise((c,r)=>{try{const i=s;console.log(i);const u=[];i.forEach(a=>{for(let d=0;d<a._copies;d++)u.push(a)});const n="/icons/Navidad/Navidad6(2).png",x="PNG",e=new D({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),N=5,I=10,F=205,$=125,H=5,L=5,f=1,S=f*2;u.forEach((a,d)=>{const V=Math.floor(d/S),b=d%S,z=Math.floor(b/f),y=b%f,t=N+y*(F+H),o=I+z*($+L);d>0&&b===0&&e.addPage(),e.addImage(n,x,t,o,F,$),e.setFontSize(70),e.setFont("helvetica","bold"),e.text(a.name,t+120,o+112),e.setFontSize(20),e.setFont("helvetica","normal");const w=F-20,E=e.splitTextToSize(a.label,w);e.text(E,t+18,o+31),e.setFontSize(12);let v=o+39,m=12;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(35),e.setFont("helvetica","bold"),e.text("Unico Precio",t+60,v+h*m+10),e.setFontSize(50),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+64,v+h*m+35)):(e.setFontSize(35),e.setFont("helvetica","bold"),e.text(l.alias,t+60,v+h*m+15),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+93,v+h*m+15))}),e.setFontSize(45),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+18,o+23),e.text(a.large,t+35,o+112),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+185,o+23,{align:"right"}),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+38,o+114)}),e.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}}),be=s=>new Promise((c,r)=>{try{const i=s,u=[];i.forEach(a=>{for(let d=0;d<a._copies;d++)u.push(a)});const n="/icons/Navidad/Navidad9(1).png",x="PNG",e=new D({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),N=5,I=10,F=65,$=85,H=5,L=5,f=3,S=f*3;u.forEach((a,d)=>{const V=Math.floor(d/S),b=d%S,z=Math.floor(b/f),y=b%f,t=N+y*(F+H),o=I+z*($+L);d>0&&b===0&&e.addPage(),e.addImage(n,x,t,o,F,$),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+37,o+77),e.setFontSize(10),e.setFont("helvetica","normal");const w=F-20,E=e.splitTextToSize(a.label,w);e.text(E,t+5,o+25),e.setFontSize(12);let v=o+40,m=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(18),e.setFont("helvetica","bold"),e.text("Unico Precio",t+13,v+h*m),e.setFontSize(26),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+13,v+h*m+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+10,v+h*m),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+30,v+h*m))}),e.setFontSize(12),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+25,o+20),e.text(a.large,t+18,o+77),e.text(`${a.pieces} PZS`,t+20,o+73),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+79)}),e.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}}),xe=s=>new Promise((c,r)=>{try{const i=s,u=[];i.forEach(a=>{for(let d=0;d<a._copies;d++)u.push(a)});const n="/icons/Navidad/NaviSan(1).png",x="PNG",e=new D({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),N=5,I=10,F=67,$=63,H=0,L=3,f=3,S=f*4;u.forEach((a,d)=>{const V=Math.floor(d/S),b=d%S,z=Math.floor(b/f),y=b%f,t=N+y*(F+H),o=I+z*($+L);d>0&&b===0&&e.addPage(),e.addImage(n,x,t,o,F,$),e.setFontSize(18),e.setFont("helvetica","bold"),e.text(a.name,t+23,o+37),e.setFontSize(8),e.setFont("helvetica","normal"),e.text(a.label.substring(0,25),t+15,o+43),e.setFontSize(10);let w=o+36,E=12;a.usedPrices.filter(v=>M.value.val.includes(v.id)).forEach((v,m)=>{v.alias=="OFERTA"?(e.setFontSize(10),e.setFont("helvetica","bold"),e.text("Unico Precio",t+23,w+m*E+12),e.setFontSize(14),e.text(`$ ${Number(v.pivot.price).toFixed(0)}`,t+27,w+m*E+17)):(e.setFontSize(10),e.setFont("helvetica","bold"),e.text(v.alias,t+m*E+10,w+12),e.text(`$ ${Number(v.pivot.price).toFixed(0)}`,t+m*E+10,w+16))}),e.setFontSize(6),e.setFont("helvetica","bold"),e.text(`(${a.code})`,t+28,o+40),e.text(a.large,t+40,o+55),e.text(`${a.pieces} PZS`,t+40,o+57)}),e.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}}),Fe=s=>new Promise((c,r)=>{try{const i=s,u=[];i.forEach(a=>{for(let d=0;d<a._copies;d++)u.push(a)});const n="/icons/Navidad/NavidadVer(2).png",x="PNG",e=new D({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),N=5,I=10,F=48,$=85,H=5,L=5,f=4,S=f*4;u.forEach((a,d)=>{const V=Math.floor(d/S),b=d%S,z=Math.floor(b/f),y=b%f,t=N+y*(F+H),o=I+z*($+L);d>0&&b===0&&e.addPage(),e.addImage(n,x,t,o,F,$),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+20,o+80),e.setFontSize(10),e.setFont("helvetica","normal");const w=F-15,E=e.splitTextToSize(a.label,w);e.text(E,t+5,o+22),e.setFontSize(12);let v=o+35,m=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(18),e.setFont("helvetica","bold"),e.text("Unico Precio",t+5,v+h*m),e.setFontSize(26),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+10,v+h*m+15)):(e.setFontSize(16),e.setFont("helvetica","bold"),e.text(l.alias,t+5,v+h*m),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+20,v+h*m))}),e.setFontSize(12),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+24,o+17,{align:"center"}),e.text(a.large,t+20,o+68),e.text(`${a.pieces} PZS`,t+20,o+73),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+81)}),e.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}}),Pe=s=>new Promise((c,r)=>{try{const i=s,u=[];i.forEach(a=>{for(let d=0;d<a._copies;d++)u.push(a)});const n="/icons/Juguete/Ninio.png",x="PNG",e=new D({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),N=5,I=10,F=65,$=85,H=5,L=5,f=3,S=f*3;u.forEach((a,d)=>{const V=Math.floor(d/S),b=d%S,z=Math.floor(b/f),y=b%f,t=N+y*(F+H),o=I+z*($+L);d>0&&b===0&&e.addPage(),e.addImage(n,x,t,o,F,$),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+15,o+10),e.setFontSize(10),e.setFont("helvetica","normal");const w=F-20,E=e.splitTextToSize(a.label,w);e.text(E,t+3,o+25),e.setFontSize(12);let v=o+40,m=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+5,v+h*m),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+5,v+h*m+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+2,v+h*m),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+19,v+h*m))}),e.setFontSize(10),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+45,o+40),e.text(a.large,t+45,o+52),e.text(`${a.pieces} PZS`,t+45,o+46),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}}),Se=s=>new Promise((c,r)=>{try{const i=s,u=[];i.forEach(a=>{for(let d=0;d<a._copies;d++)u.push(a)});const n="/icons/Juguete/Ninia.png",x="PNG",e=new D({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),N=5,I=10,F=65,$=85,H=5,L=5,f=3,S=f*3;u.forEach((a,d)=>{const V=Math.floor(d/S),b=d%S,z=Math.floor(b/f),y=b%f,t=N+y*(F+H),o=I+z*($+L);d>0&&b===0&&e.addPage(),e.addImage(n,x,t,o,F,$),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+15,o+20),e.setFontSize(10),e.setFont("helvetica","normal");const w=F-20,E=e.splitTextToSize(a.label,w);e.text(E,t+5,o+25),e.setFontSize(12);let v=o+40,m=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+15,v+h*m),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+15,v+h*m+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+15,v+h*m),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+32,v+h*m))}),e.setFontSize(13),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+62,o+70,{align:"right"}),e.setFont("helvetica","normal"),e.text(a.large,t+15,o+65),e.text(`${a.pieces} PZS`,t+15,o+70),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}}),ze=s=>new Promise((c,r)=>{try{const i=s,u=[];i.forEach(a=>{for(let d=0;d<a._copies;d++)u.push(a)});const n="/icons/Juguete/xlargeninia.png",x="PNG",e=new D({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),N=5,I=10,F=205,$=125,H=5,L=5,f=1,S=f*2;u.forEach((a,d)=>{const V=Math.floor(d/S),b=d%S,z=Math.floor(b/f),y=b%f,t=N+y*(F+H),o=I+z*($+L);d>0&&b===0&&e.addPage(),e.addImage(n,x,t,o,F,$),e.setFontSize(70),e.setFont("helvetica","bold"),e.text(a.name,t+120,o+112),e.setFontSize(20),e.setFont("helvetica","normal");const w=F-20,E=e.splitTextToSize(a.label,w);e.text(E,t+18,o+31),e.setFontSize(12);let v=o+39,m=12;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(35),e.setFont("helvetica","bold"),e.text("Unico Precio",t+60,v+h*m+10),e.setFontSize(50),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+64,v+h*m+35)):(e.setFontSize(35),e.setFont("helvetica","bold"),e.text(l.alias,t+60,v+h*m+15),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+93,v+h*m+15))}),e.setFontSize(45),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+18,o+23),e.text(a.large,t+35,o+112),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+185,o+23,{align:"right"}),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+38,o+114)}),e.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}}),ye=s=>new Promise((c,r)=>{try{const i=s,u=[];i.forEach(a=>{for(let d=0;d<a._copies;d++)u.push(a)});const n="/icons/Juguete/xlargeninio.png",x="PNG",e=new D({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),N=5,I=10,F=205,$=125,H=5,L=5,f=1,S=f*2;u.forEach((a,d)=>{const V=Math.floor(d/S),b=d%S,z=Math.floor(b/f),y=b%f,t=N+y*(F+H),o=I+z*($+L);d>0&&b===0&&e.addPage(),e.addImage(n,x,t,o,F,$),e.setFontSize(70),e.setFont("helvetica","bold"),e.text(a.name,t+120,o+112),e.setFontSize(20),e.setFont("helvetica","normal");const w=F-20,E=e.splitTextToSize(a.label,w);e.text(E,t+18,o+31),e.setFontSize(12);let v=o+39,m=12;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(35),e.setFont("helvetica","bold"),e.text("Unico Precio",t+60,v+h*m+10),e.setFontSize(50),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+64,v+h*m+35)):(e.setFontSize(35),e.setFont("helvetica","bold"),e.text(l.alias,t+60,v+h*m+15),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+93,v+h*m+15))}),e.setFontSize(45),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+18,o+23),e.text(a.large,t+35,o+112),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+185,o+23,{align:"right"}),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+38,o+114)}),e.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}}),$e=s=>new Promise((c,r)=>{try{const i=s,u=[];i.forEach(a=>{for(let d=0;d<a._copies;d++)u.push(a)});const n="/icons/Juguete/Ninio.png",x="PNG",e=new D({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),N=5,I=10,F=100,$=60,H=5,L=5,f=2,S=f*4;u.forEach((a,d)=>{const V=Math.floor(d/S),b=d%S,z=Math.floor(b/f),y=b%f,t=N+y*(F+H),o=I+z*($+L);d>0&&b===0&&e.addPage(),e.addImage(n,x,t,o,F,$),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+5,o+10),e.setFontSize(10),e.setFont("helvetica","normal");const w=F-20,E=e.splitTextToSize(a.label,w);e.text(E,t+5,o+15),e.setFontSize(12);let v=o+25,m=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+15,v+h*m),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+15,v+h*m+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+15,v+h*m),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+32,v+h*m))}),e.setFontSize(13),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+70,o+25),e.text(a.large,t+45,o+52),e.text(`${a.pieces} PZS`,t+70,o+30),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}}),Ce=s=>new Promise((c,r)=>{try{const i=s,u=[];i.forEach(a=>{for(let d=0;d<a._copies;d++)u.push(a)});const n="/icons/Juguete/Ninia.png",x="PNG",e=new D({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),N=5,I=10,F=100,$=60,H=5,L=5,f=2,S=f*4;u.forEach((a,d)=>{const V=Math.floor(d/S),b=d%S,z=Math.floor(b/f),y=b%f,t=N+y*(F+H),o=I+z*($+L);d>0&&b===0&&e.addPage(),e.addImage(n,x,t,o,F,$),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+5,o+20),e.setFontSize(10),e.setFont("helvetica","normal");const w=F-20,E=e.splitTextToSize(a.label,w);e.text(E,t+5,o+25),e.setFontSize(12);let v=o+32,m=7;a.usedPrices.filter(l=>M.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+20,v+h*m),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+20,v+h*m+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+20,v+h*m),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+37,v+h*m))}),e.setFontSize(13),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+70,o+32),e.text(a.large,t+45,o+52),e.text(`${a.pieces} PZS`,t+70,o+37),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}}),we=s=>new Promise((c,r)=>{try{const i=s,u=[];i.forEach(W=>{for(let S=0;S<W._copies;S++)u.push(W)});const n=new D({format:"letter"}),x=n.internal.pageSize.getWidth(),e=n.internal.pageSize.getHeight(),k=5,q=10,N=100,I=60,F=5,$=5,H=2,f=H*4;u.forEach((W,S)=>{const a=Math.floor(S/f),d=S%f,V=Math.floor(d/H),b=d%H,z=k+b*(N+F),y=q+V*(I+$);S>0&&d===0&&n.addPage(),n.setDrawColor(0),n.setLineWidth(.5),n.rect(z,y,N,I),n.setFontSize(12),n.setFont("helvetica","bold"),n.text("Grupo Vizcarra",z+40,y+5),n.setFontSize(33),n.setFont("helvetica","bold"),n.text(W.name,z+5,y+15),n.setFontSize(10),n.setFont("helvetica","normal");const t=N-20,o=n.splitTextToSize(W.label.toUpperCase(),t);n.text(o,z+5,y+20),n.setFontSize(12);let w=y+32,E=7;W.usedPrices.filter(v=>M.value.val.includes(v.id)).forEach((v,m)=>{v.alias=="OFERTA"?(n.setFontSize(14),n.setFont("helvetica","bold"),n.text("Unico Precio",z+15,w+m*E),n.setFontSize(25),n.text(`$ ${Number(v.pivot.price).toFixed(2)}`,z+20,w+m*E+15)):(n.setFontSize(18),n.setFont("helvetica","bold"),n.text(v.alias,z+15,w+m*E),n.text(`$${Number(v.pivot.price).toFixed(0)}`,z+37,w+m*E))}),n.setFontSize(13),n.setFont("helvetica","bold"),n.text(`${W.code}`,z+66,y+32),n.text(W.large,z+45,y+52),n.text(`${W.pieces} PZS`,z+70,y+37),n.setFontSize(4),n.setFont("helvetica","normal"),n.text(W.locations?W.locations.map(v=>v.path).join("/"):"",z+18,y+55)}),n.save(`${R.session.credentials.nick} etiquetas ${p.value.val.label}`),c()}catch(i){r(i)}});return ve(),(s,c)=>(Ee(),Ne(Ve,{view:"hHh Lpr fFf"},{default:_(()=>[P(_e,{class:"transparent text-dark",bordered:""},{default:_(()=>[P(Oe),P(X),P(We,{class:"justify-between"},{default:_(()=>[O("div",null,[se("Helpers "),P(He,{name:"navigate_next",color:"primary"}),se(),je]),O("div",Je," Cambio de Precios : "+Ie(typeof T.value.date=="object"?`Del ${T.value.date.from} a ${T.value.date.to}`:T.value.date),1),O("div",Be,[P(Y,{color:"primary",icon:"event",flat:"",onClick:c[0]||(c[0]=r=>T.value.state=!T.value.state)}),P(X,{spaced:"",inset:"",vertical:"",dark:""}),P(Y,{class:"col",flat:"",color:"primary",icon:"download",rounded:"",title:"Importar Excel",onClick:pe}),P(X,{spaced:"",inset:"",vertical:"",dark:""}),P(Y,{class:"col",flat:"",color:"primary",icon:"label",rounded:"",title:"Crear Etiquetas",onClick:c[1]||(c[1]=r=>p.value.state=!p.value.state)})])]),_:1})]),_:1}),P(Qe,null,{default:_(()=>[P(Me,{padding:""},{default:_(()=>[P(ae,{class:"my-card"},{default:_(()=>[P(j,{class:"row"},{default:_(()=>[P(K,{class:"col",modelValue:g.value.seccion.val,"onUpdate:modelValue":c[3]||(c[3]=r=>g.value.seccion.val=r),options:g.value.seccion.opts,label:"SECCION",filled:"","option-label":"name"},ee({_:2},[g.value.seccion.val?{name:"append",fn:_(()=>[P(Y,{round:"",dense:"",flat:"",icon:"close",onClick:c[2]||(c[2]=r=>{g.value.seccion.val=null,g.value.familias.val=null,g.value.categorias.val=null})})]),key:"0"}:void 0]),1032,["modelValue","options"]),P(X,{spaced:"",inset:"",vertical:"",dark:""}),P(K,{class:"col",modelValue:g.value.familias.val,"onUpdate:modelValue":c[5]||(c[5]=r=>g.value.familias.val=r),options:te(de),label:"FAMILIA",filled:"","option-label":"name",disable:!g.value.seccion.val},ee({_:2},[g.value.familias.val?{name:"append",fn:_(()=>[P(Y,{round:"",dense:"",flat:"",icon:"close",onClick:c[4]||(c[4]=r=>{g.value.familias.val=null,g.value.categorias.val=null})})]),key:"0"}:void 0]),1032,["modelValue","options","disable"]),P(X,{spaced:"",inset:"",vertical:"",dark:""}),P(K,{class:"col",modelValue:g.value.categorias.val,"onUpdate:modelValue":c[7]||(c[7]=r=>g.value.categorias.val=r),options:te(ue),label:"CATEGORIA",filled:"","option-label":"name",disable:!g.value.familias.val},ee({_:2},[g.value.categorias.val?{name:"append",fn:_(()=>[P(Y,{round:"",dense:"",flat:"",icon:"close",onClick:c[6]||(c[6]=r=>g.value.categorias.val=null)})]),key:"0"}:void 0]),1032,["modelValue","options","disable"]),P(X,{spaced:"",inset:"",vertical:"",dark:""})]),_:1})]),_:1}),P(X,{spaced:"",inset:"",vertical:"",dark:""}),P(qe,{rows:te(Q),columns:G.value.columns},null,8,["rows","columns"]),P(ne,{modelValue:p.value.state,"onUpdate:modelValue":c[10]||(c[10]=r=>p.value.state=r),persistent:""},{default:_(()=>[P(ae,null,{default:_(()=>[P(j,null,{default:_(()=>[O("div",null,[P(X,{spaced:"",inset:"",vertical:"",dark:""}),Ze,O("div",Ke,[P(Te,{options:M.value.opts,type:"checkbox",modelValue:M.value.val,"onUpdate:modelValue":c[8]||(c[8]=r=>M.value.val=r),inline:""},null,8,["options","modelValue"])])])]),_:1}),P(j,{class:"row items-center"},{default:_(()=>[P(ke,{icon:"picture_as_pdf",color:"white","text-color":"red"}),et]),_:1}),P(j,null,{default:_(()=>[P(K,{modelValue:p.value.val,"onUpdate:modelValue":c[9]||(c[9]=r=>p.value.val=r),options:p.value.opts,label:"Etiquetas",filled:""},null,8,["modelValue","options"])]),_:1}),P(ie,{align:"right"},{default:_(()=>[Le(P(Y,{flat:"",label:"Cancel",color:"negative"},null,512),[[De]]),P(Y,{flat:"",label:"Generar",color:"positive",onClick:ge,disable:p.value.val==null},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),P(ne,{modelValue:T.value.state,"onUpdate:modelValue":c[13]||(c[13]=r=>T.value.state=r)},{default:_(()=>[P(ae,{class:"my-card"},{default:_(()=>[P(j,null,{default:_(()=>[O("div",tt,[at,P(Re,{modelValue:T.value.date,"onUpdate:modelValue":c[11]||(c[11]=r=>T.value.date=r),range:"",minimal:""},null,8,["modelValue"])])]),_:1}),P(j,null,{default:_(()=>[P(ie,{align:"right"},{default:_(()=>[P(Y,{flat:"",icon:"close",color:"negative",onClick:c[12]||(c[12]=r=>T.value.state=!T.value.state)}),P(Y,{flat:"",icon:"check",color:"positive",onClick:me})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{Mt as default};
