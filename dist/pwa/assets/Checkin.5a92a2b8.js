import{Q as h}from"./QInput.5ac6a47a.js";import{Q as b}from"./QForm.453f3ede.js";import{a as p}from"./QSelect.b2e0eed3.js";import{a as Q,d as y,e as S}from"./QList.9744d304.js";import{Q as V}from"./QTable.35c88d33.js";import{Q as q}from"./QPage.48c14d2e.js";import{aH as D,a as C,u as $,r as f,c as B,o as _,d as k,w as o,f as l,e as s,a4 as I,ak as P,a0 as g,am as R}from"./index.36b6f3f3.js";import"./dayjs.min.cbcf888d.js";import"./axios.01f1ad8b.js";import{o as L}from"./orderApi.9fe6112b.js";import{u as N}from"./OrderStore.7102468b.js";import{u as O}from"./use-quasar.21781a3f.js";import"./QExpansionItem.e32c1b0b.js";import"./QDrawer.7b8d4b06.js";import"./QCardSection.2a5053ab.js";import"./QCardActions.66eaa095.js";import"./QCard.c09bae66.js";import"./ClosePopup.0f2a9450.js";import{$sktRestock as c,$sktOrders as T}from"./socket.05630e21.js";import"./use-key-composition.61edd40b.js";import"./QLinearProgress.7e0c973d.js";import"./QCheckbox.da1fe95a.js";import"./use-checkbox.3d699876.js";import"./_commonjsHelpers.88e99c8f.js";import"./QResizeObserver.d3e712c7.js";import"./QScrollObserver.83400ae8.js";const j={class:"flex justify-center"},U={class:"text-center",style:"width: 50%;"},A={class:"q-pa-xs col-xs-12 col-sm-2 col-sm-1"},E={class:"text-bold q-mr-md"},ke={__name:"Checkin",setup(F){D(),C();const i=N();i.setTitle("Checkout"),i.setshowLyt(!0);const d=O(),a=$(),v={profile:{me:{id:a.session.credentials.staff.id_va,nick:a.session.credentials.nick,picture:"",names:a.session.credentials.staff.complete_name,surname_pat:"",surname_mat:"",change_password:!1,_rol:a.session.credentials._rol},workpoint:a.session.store},workpoint:a.session.store};c.connect(),c.emit("joinat",v);const r=f(null),w=f({rowsPerPage:[0]}),x=B(()=>i.orders.filter(n=>n._status==3)),u=async n=>{d.loading.show({message:"Cambiando Estado"}),i.orders.find(t=>t.id==n);const e=await L.nextStepCheck({id:n});if(e.fail)e.fail.status==404&&(d.loading.hide(),r.value=null,d.notify({message:e.fail.response.data.msg,type:"negative",position:"top"})),console.log(e);else{d.loading.hide(),console.log(e),e.requisition&&(c.emit("creating",{order:e.requisition.requisition}),c.emit("partitionCreate",e.requisition.partition));let m={order:e.order,newstate:e.status};console.log(m),T.emit("order_update",m),i.addOrUpdate(m),r.value=null}};return(n,e)=>(_(),k(q,{padding:""},{default:o(()=>[l("div",null,[l("div",j,[l("div",U,[s(b,{onSubmit:e[1]||(e[1]=t=>u(r.value))},{default:o(()=>[s(h,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),type:"number",label:"Pedido",autofocus:"",rounded:"",outlined:""},null,8,["modelValue"])]),_:1})])]),s(V,{rows:x.value,grid:"",pagination:w.value,"hide-bottom":""},{item:o(t=>[l("div",A,[s(Q,{bordered:""},{default:o(()=>[I((_(),k(y,{clickable:"",onDblclick:m=>u(t.row.id)},{default:o(()=>[s(S,null,{default:o(()=>[s(p,{class:"text-center text-bold text-h5"},{default:o(()=>[P(g(t.row.id),1)]),_:2},1024),s(p,{class:"text-center text-overline text-caption"},{default:o(()=>[l("span",E,g(t.row.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDblclick"])),[[R]])]),_:2},1024)])]),_:1},8,["rows","pagination"])])]),_:1}))}};export{ke as default};
