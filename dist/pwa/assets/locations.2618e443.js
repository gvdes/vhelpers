import{Q as _}from"./QSelect.a8294c94.js";import{b as m}from"./QList.163028b2.js";import{u as S,r as n,l as N,o as r,d as A,w as p,e as o,g as f,a3 as x,a2 as y,f as Q,Q as D,h as L}from"./index.d8738e7e.js";import{Q as M}from"./QCardSection.36fdbee8.js";import{Q as P}from"./QCard.09026410.js";import{Q as U}from"./QTable.64caf586.js";import{Q as E}from"./QPage.68dbbe12.js";import{l as F}from"./locationsApi.2ac126d6.js";import{u as I}from"./use-quasar.3982aa41.js";import{l as O}from"./labels.484ba819.js";import"./QLinearProgress.b3f074c7.js";import"./QCheckbox.2efc1484.js";import"./axios.b29075d4.js";import"./jspdf.plugin.autotable.1225e021.js";import"./_commonjsHelpers.88e99c8f.js";import"./dayjs.min.cbcf888d.js";import"./browser.c61f550a.js";const T={key:0,class:"row"},$={class:"row"},q={class:"text-right row"},ie={__name:"locations",setup(z){const v=S(),h=I(),d=n([]),c=n(null),i=n([]),s=n([]),b=n(0),V=n({columns:[{name:"id",label:"ID",field:e=>e.id,align:"center"},{name:"name",label:"NOMBRE",field:e=>e.name,align:"left"},{name:"alias",label:"ALIAS",field:e=>e.alias,align:"left"},{name:"path",label:"PATH",field:e=>e.path,align:"left"}]}),k=async()=>{h.loading.show({message:"Obteniendo Secciones"});const e=await F.index(v.session.store.id_viz);e.fail?console.log(e):d.value=e,h.loading.hide()},w=()=>{const e=c.value.sections||[];b.value=Math.max(...e.map(l=>l.deep)),s.value=[{options:e.filter(l=>l.root===0),selected:null}],i.value=s.value[0].options},g=e=>{var l;return((l=c.value.sections)==null?void 0:l.filter(a=>a.root===e))||[]},B=(e,l)=>{s.value.splice(l+1);const a=g(e);a.length>0&&s.value.push({options:a,selected:null})},C=()=>{O.locationsWarehouse(i.value,v.session.credentials.nick)};return k(),N(s,e=>{const l=e.filter(a=>a.selected!==null);if(l.length){const a=l[l.length-1],t=g(a.selected);i.value=t}},{deep:!0}),(e,l)=>(r(),A(E,{padding:""},{default:p(()=>[o(P,{class:"my-card"},{default:p(()=>[o(M,null,{default:p(()=>[d.value.length>0?(r(),f("div",T,[o(_,{class:"col",modelValue:c.value,"onUpdate:modelValue":[l[0]||(l[0]=a=>c.value=a),w],options:d.value,label:"ALMAC\xC9N",filled:"","option-label":"name",dense:""},null,8,["modelValue","options"]),o(m,{spaced:"",inset:"",vertical:"",dark:""}),(r(!0),f(x,null,y(s.value,(a,t)=>(r(),f("div",{key:t,class:"col"},[Q("div",$,[o(_,{class:"col",modelValue:a.selected,"onUpdate:modelValue":[u=>a.selected=u,u=>B(u,t)],options:a.options,label:`Nivel ${t+1}`,"option-value":"id","option-label":"name","emit-value":"","map-options":"",dense:"",filled:"",disable:t==b.value},null,8,["modelValue","onUpdate:modelValue","options","label","disable"]),o(m,{spaced:"",inset:"",vertical:"",dark:""})])]))),128)),Q("div",q,[o(D,{icon:"picture_as_pdf",flat:"",onClick:C,disable:i.value<=0},null,8,["disable"])])])):L("",!0)]),_:1})]),_:1}),o(m,{spaced:"",inset:"",vertical:"",dark:""}),o(U,{rows:i.value,columns:V.value.columns},null,8,["rows","columns"])]),_:1}))}};export{ie as default};
