import{u as R,a as T,r as f,o as i,g as u,f as d,e,Q as c,a1 as t,a0 as v,h as A,d as w,w as r,ak as g,a3 as V,a2 as C,a4 as S,al as h,am as D,an as P}from"./index.3cdfa26e.js";import{Q as z,a as B}from"./QSelect.bf04ac42.js";import{a as F,b as p,d as M,e as $,Q as W}from"./QList.9e83d7bb.js";import{Q as j,a as G,b as H}from"./QDrawer.c255c9b5.js";import{Q as J}from"./QExpansionItem.d1f27756.js";import{Q as K}from"./QCardSection.4777ea36.js";import{Q as O}from"./QCardActions.4a572d02.js";import{Q as X}from"./QCard.1710dfc4.js";import{C as Y}from"./ClosePopup.bfbf3c13.js";import{a as Z}from"./auth.eb8020fc.js";import{u as ee}from"./use-quasar.ce6af595.js";const ae={class:"col"},te={key:0,class:"col text-center fs-inc1 text-primary fw-sbold"},se={class:"text-center fs-inc1 text-primary fw-sbold"},oe={class:"row"},ge={__name:"UserToolbar",setup(le){const l=R(),x=l.session,b=T(),Q=f({state:!1}),I=()=>{l.sessionDestroy(),b.replace("/auth")},s=ee();f([]);const k=f(!1),m=f({val:l.session,opts:[]}),N=async()=>{const n=await Z.getResources(x.credentials.id);n.fail?console.log(n):(console.log(n),l.setModules(n.grouped_modules),l.setStores(n.stores),l.modulesLoaded=!0)},U=()=>{s.loading.show({message:"Cambiando sucursal"}),l.session.store=m.value.val.store,l.setSession({...l.session,store:m.value.val.store}),console.log(l.session),window.location.reload(),s.loading.hide()},_=localStorage.getItem("mode");_&&s.dark.set(_==="dark");const q=()=>{s.dark.toggle(),localStorage.setItem("mode",s.dark.isActive?"dark":"light")};return N(),(n,a)=>(i(),u(V,null,[d("div",{class:g(["q-pa-sm row items-center",t(s).dark.isActive?"text-white bg-dark":"text-dark bg-white"])},[e(c,{color:"primary",icon:"list",flat:"",dense:"",class:"q-mr-sm",onClick:a[0]||(a[0]=o=>k.value=!k.value)}),d("div",ae,[e(c,{class:"text-pink",flat:"",label:t(x).credentials.nick,onClick:a[1]||(a[1]=o=>t(b).push("/"))},null,8,["label"])]),t(l).stores.length==0?(i(),u("div",te,v(t(x).store.name),1)):A("",!0),t(l).stores.length>1?(i(),w(z,{key:1,modelValue:m.value.val,"onUpdate:modelValue":[a[2]||(a[2]=o=>m.value.val=o),U],options:t(l).stores,"option-label":o=>o.store.name,borderless:"",color:"primary",dense:"",class:"text-center","options-selected-class":"text-primary text-bold"},{selected:r(()=>[d("div",se,v(m.value.val.store.name),1)]),_:1},8,["modelValue","options","option-label"])):A("",!0),a[8]||(a[8]=d("div",{class:"col text-right"},null,-1))],2),e(H,{modelValue:k.value,"onUpdate:modelValue":a[6]||(a[6]=o=>k.value=o),width:300,breakpoint:500,bordered:"",class:g(t(s).dark.isActive?"bg-grey-9":"bg-grey-3")},{default:r(()=>[e(j,{class:"fit text-bold text-dark"},{default:r(()=>[e(F,null,{default:r(()=>[d("div",oe,[e(c,{color:"primary",icon:"home",flat:"",dense:"",class:"col",onClick:a[3]||(a[3]=o=>t(b).push("/"))}),e(p,{spaced:"",inset:"",vertical:"",dark:""}),e(c,{class:"col",color:"pink",icon:"logout","no-caps":"",flat:"",onClick:a[4]||(a[4]=o=>Q.value.state=!0)}),e(p,{spaced:"",inset:"",vertical:"",dark:""}),e(G,{modelValue:t(s).dark.mode,"onUpdate:modelValue":[a[5]||(a[5]=o=>t(s).dark.mode=o),q],color:"primary",icon:t(s).dark.mode?"light_mode":"dark_mode","keep-color":"",class:"col text-center"},null,8,["modelValue","icon"])]),e(p),e(p,{spaced:"",inset:"",vertical:"",dark:""}),(i(!0),u(V,null,C(t(l).modules,(o,L)=>(i(),w(J,{key:L,"expand-separator":"",label:o.name,dark:t(s).dark.isActive,"header-class":t(s).dark.isActive?"text-white":"text-dark"},{default:r(()=>[(i(!0),u(V,null,C(o.modules,(y,E)=>(i(),u("div",{key:E},[S((i(),w(M,{clickable:"",to:`/${y.path}`,dark:t(s).dark.isActive},{default:r(()=>[e($,null,{default:r(()=>[e(B,{class:g(t(s).dark.isActive?"text-white":"text-dark")},{default:r(()=>[h(v(y.name),1)]),_:2},1032,["class"]),e(B,{caption:"",class:g(t(s).dark.isActive?"text-grey-4":"text-grey-7")},{default:r(()=>[h(v(y.desc),1)]),_:2},1032,["class"])]),_:2},1024),e($,{avatar:""},{default:r(()=>[e(D,{flat:"",color:"transparent","text-color":(t(s).dark.isActive,"primary"),icon:"arrow_forward"},null,8,["text-color"])]),_:1})]),_:2},1032,["to","dark"])),[[P]]),e(p,{dark:t(s).dark.isActive},null,8,["dark"])]))),128))]),_:2},1032,["label","dark","header-class"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","class"]),e(W,{modelValue:Q.value.state,"onUpdate:modelValue":a[7]||(a[7]=o=>Q.value.state=o),persistent:""},{default:r(()=>[e(X,null,{default:r(()=>[e(K,{class:"row items-center"},{default:r(()=>[e(D,{icon:"logout",color:"primary","text-color":"white"}),a[9]||(a[9]=d("span",{class:"q-ml-sm"},"Estas por cerrar sesion",-1))]),_:1}),e(O,{align:"right"},{default:r(()=>[S(e(c,{flat:"",label:"Nope!",color:"primary"},null,512),[[Y]]),e(c,{flat:"",label:"Simon!",color:"primary",onClick:I})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{ge as _};
