import{a as v,b as h,Q as Y,d as B,e as d}from"./QList.6f5d36f1.js";import{Q as _}from"./QTable.0558df0d.js";import{Q as C}from"./QExpansionItem.cfc384a7.js";import{Q as P,a as m}from"./axios.f3858d01.js";import{aH as V,a as y,u as R,r as c,c as H,o as f,d as g,w as e,f as b,e as a,ak as r,a0 as i,g as I,a2 as T,a3 as $,a4 as M,Q as N,a1 as A}from"./index.43738b9f.js";import{Q as E}from"./QCardActions.c527f0e7.js";import{Q as F}from"./QPage.1d291e78.js";import{C as L}from"./ClosePopup.d47728db.js";import{d as w}from"./dayjs.min.cbcf888d.js";import{u as U}from"./Restock.0a240c30.js";import{u as O}from"./use-quasar.b62ce484.js";import"./socket.3fae67a0.js";import"./QBtnGroup.d5504db8.js";import"./QSelect.8fa3280c.js";import"./QLinearProgress.7eb24c82.js";import"./QCheckbox.dd829db2.js";import"./_commonjsHelpers.88e99c8f.js";const j={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},da={__name:"dashboardStore",setup(q){V(),y();const n=U();O();const Q=R(),s=c({state:!1,val:null}),D=c({rowsPerPage:[0]}),p=c({columns:[{name:"id",label:"ID",field:t=>t.id,align:"center"},{name:"invoice",label:"Factura",field:t=>t.invoice,align:"center"},{name:"invoiceReceived",label:"Factura R",field:t=>t.invoice_received,align:"center"},{name:"status",label:"Estado",field:t=>t.status.name,align:"left"},{name:"UACT",label:"U.Act",field:t=>{var l,o;return w((o=(l=t.log)==null?void 0:l.find(u=>u.id==t._status))==null?void 0:o.pivot.updated_at).format("YYYY/MM/DD HH:mm:ss")},align:"left"}],pagination:{rowsPerPage:10}}),S=H(()=>n.ordersok.filter(t=>t._workpoint_from==Q.session.store.id_viz)),k=async()=>{n.setShowLYT(!0),n.setTitle("Dashboard"),n.setButtonShow(!1)},x=(t,l)=>{s.value.state=!0,s.value.val=l};return k(),(t,l)=>(f(),g(F,{padding:""},{default:e(()=>[b("div",null,[a(_,{rows:S.value,"row-key":"name",grid:"",pagination:D.value,"hide-bottom":""},{item:e(o=>[b("div",j,[a(v,{bordered:""},{default:e(()=>[a(C,{dense:"",icon:"list",label:`${o.row.id.toString()} (${o.row.status.name})`,caption:`${o.row.to.name} (${o.row.notes})`},{default:e(()=>[a(h),a(_,{"hide-bottom":"",flat:"",rows:o.row.partition,columns:p.value.columns,pagination:p.value.pagination,onRowClick:x},null,8,["rows","columns","pagination"])]),_:2},1032,["label","caption"])]),_:2},1024)])]),_:1},8,["rows","pagination"])]),a(Y,{modelValue:s.value.state,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value.state=o),persistent:""},{default:e(()=>[a(P,null,{default:e(()=>[a(m,{class:"text-center text-h6"},{default:e(()=>[r(" ID: "+i(s.value.val.id),1)]),_:1}),a(m,{class:"text-center text-bold"},{default:e(()=>[r(i(s.value.val.status.name),1)]),_:1}),a(m,null,{default:e(()=>[(f(!0),I($,null,T(s.value.val.log,(o,u)=>(f(),g(v,{bordered:"",key:u},{default:e(()=>[a(B,null,{default:e(()=>[a(d,null,{default:e(()=>[r(i(o.name),1)]),_:2},1024),a(d,null,{default:e(()=>[r(i(JSON.parse(o.pivot.details).responsable),1)]),_:2},1024),a(d,null,{default:e(()=>[r(i(A(w)(o.pivot.updated_at).format("YYYY/MM/DD HH:mm:ss")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(E,{align:"right"},{default:e(()=>[M(a(N,{flat:"",label:"OK",color:"primary"},null,512),[[L]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{da as default};
