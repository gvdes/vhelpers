import{a as g,b as y,Q as P,d as Y,e as c}from"./QList.eb8278b8.js";import{Q as w}from"./QTable.f8043fde.js";import{Q as $}from"./QExpansionItem.5289560f.js";import{aI as I,a as R,u as T,r as d,c as A,o as p,d as Q,w as o,f,e,S as H,al as l,a0 as n,g as M,a2 as N,a3 as U,a4 as E,Q as F,a1 as L}from"./index.55af4c22.js";import{Q as j}from"./QInput.bb35ed2f.js";import{Q as v}from"./QCardSection.c56eb11d.js";import{Q as q}from"./QCardActions.d9a34e26.js";import{Q as O}from"./QCard.87a66689.js";import{Q as z}from"./QPage.21bedb3a.js";import{C as J}from"./ClosePopup.a28b2b06.js";import{d as b}from"./dayjs.min.cbcf888d.js";import"./axios.808164a9.js";import{u as K}from"./Restock.b393fd6f.js";import{u as G}from"./use-quasar.c7466d1e.js";import"./socket.05630e21.js";import"./QBtnGroup.04c74151.js";import"./QSelect.9889a937.js";import"./use-key-composition.e50ba1dc.js";import"./QLinearProgress.052fbeb7.js";import"./QCheckbox.b0b99c1c.js";import"./use-checkbox.a9839774.js";import"./_commonjsHelpers.88e99c8f.js";import"./QToolbar.0c28ad56.js";import"./QForm.5ec54b32.js";import"./QRadio.48719c93.js";import"./QTd.8a1f25cb.js";import"./QPopupEdit.29891855.js";import"./QTr.13b49d0b.js";import"./QLayout.9882fc11.js";import"./QScrollObserver.b3c54605.js";import"./QResizeObserver.f0209c2d.js";import"./QDrawer.262a4c4a.js";import"./jspdf.plugin.autotable.d642b748.js";import"./exceljs.min.9e24d01d.js";import"./JsBarcode.cb858474.js";import"./browser.c61f550a.js";/* empty css                                                       */const W={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},X={class:"row justify-end q-gutter-sm full-width"},Ht={__name:"dashboardStore",setup(Z){I();const x=R(),s=K();G();const h=T(),i=d({state:!1,val:null}),S=d({rowsPerPage:[0]}),m=d(null),_=d({columns:[{name:"id",label:"ID",field:a=>a.id,align:"center"},{name:"invoice",label:"Factura",field:a=>a.invoice,align:"center"},{name:"invoiceReceived",label:"Factura R",field:a=>a.invoice_received,align:"center"},{name:"status",label:"Estado",field:a=>a.status.name,align:"left"},{name:"UACT",label:"U.Act",field:a=>{var r,t;return b((t=(r=a.log)==null?void 0:r.find(u=>u.id==a._status))==null?void 0:t.pivot.updated_at).format("YYYY/MM/DD HH:mm:ss")},align:"left"}],pagination:{rowsPerPage:10}}),k=A(()=>s.ordersok.filter(a=>a._workpoint_from==h.session.store.id_viz)),D=a=>{a._status==1&&x.push(`/distribute/dashboardStore/${a.id}`)},C=async()=>{s.setShowLYT(!0),s.setTitle("Dashboard"),s.setButtonShow(!0),s.setButtonShowAdd(!0)},V=(a,r)=>{i.value.state=!0,i.value.val=r},B=["text-grey-5","text-h6 text-red","text-indigo","4","5","text-pink-7","text-orange-8","8","text-primary","text-positive"];return C(),(a,r)=>(p(),Q(z,{padding:""},{default:o(()=>[f("div",null,[e(w,{rows:k.value,"row-key":"name",grid:"",pagination:S.value,filter:m.value,"hide-bottom":""},{item:o(t=>[f("div",W,[e(g,{bordered:"",onClick:u=>D(t.row)},{default:o(()=>[e($,{"header-class":`${B[t.row.status.id-1]}`,dense:"",icon:"list",label:`${t.row.id.toString()} (${t.row.status.name})`,caption:`${t.row.to.name} (${t.row.notes})`},{default:o(()=>[e(y),e(w,{"hide-bottom":"",flat:"",rows:t.row.partition,columns:_.value.columns,pagination:_.value.pagination,onRowClick:V},null,8,["rows","columns","pagination"])]),_:2},1032,["header-class","label","caption"])]),_:2},1032,["onClick"])])]),top:o(()=>[f("div",X,[e(j,{dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=t=>m.value=t),placeholder:"Buscar",class:"col-auto",outlined:""},{append:o(()=>[e(H,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},8,["rows","pagination","filter"])]),e(P,{modelValue:i.value.state,"onUpdate:modelValue":r[1]||(r[1]=t=>i.value.state=t),persistent:""},{default:o(()=>[e(O,null,{default:o(()=>[e(v,{class:"text-center text-h6"},{default:o(()=>[l(" ID: "+n(i.value.val.id),1)]),_:1}),e(v,{class:"text-center text-bold"},{default:o(()=>[l(n(i.value.val.status.name),1)]),_:1}),e(v,null,{default:o(()=>[(p(!0),M(U,null,N(i.value.val.log,(t,u)=>(p(),Q(g,{bordered:"",key:u},{default:o(()=>[e(Y,null,{default:o(()=>[e(c,null,{default:o(()=>[l(n(t.name),1)]),_:2},1024),e(c,null,{default:o(()=>[l(n(JSON.parse(t.pivot.details).responsable),1)]),_:2},1024),e(c,null,{default:o(()=>[l(n(L(b)(t.pivot.updated_at).format("YYYY/MM/DD HH:mm:ss")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(q,{align:"right"},{default:o(()=>[E(e(F,{flat:"",label:"OK",color:"primary"},null,512),[[J]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ht as default};
