import{b as j}from"./QList.8aa45970.js";import{Q as x}from"./QHeader.478b2abe.js";import{aH as O,a as B,u as S,p as V,m as $,a$ as b,o as m,d as c,w as a,e as t,a1 as f,f as _,ak as g,S as k,a0 as C,h as H}from"./index.c6bf33e1.js";import{Q as L}from"./QToolbar.0f7b4669.js";import{Q as N,a as R}from"./QLayout.41753291.js";import"./dayjs.min.cbcf888d.js";import"./axios.68612edb.js";import{o as U}from"./orderApi.13b18d9e.js";import{u as q}from"./OrderStore.e632daa2.js";import{u as D}from"./use-quasar.d991012e.js";import{_ as P}from"./UserToolbar.15f904cf.js";import{$sktOrders as s}from"./socket.05630e21.js";import"./use-key-composition.87361214.js";import"./QResizeObserver.3808097b.js";import"./QScrollObserver.aaaeb2d2.js";import"./_commonjsHelpers.88e99c8f.js";import"./QSelect.ff23a08c.js";import"./QExpansionItem.5f72bb1b.js";import"./QDrawer.5e48f455.js";import"./QCardSection.24d4f3d1.js";import"./QCardActions.b4330037.js";import"./QCard.256af2e5.js";import"./ClosePopup.cec74c3a.js";import"./auth.d44de02e.js";const mo={__name:"PreordersLYT",setup(T){const w=new Audio("sounds/success01.mp3"),y=O();B();const r=q(),i=D(),n=S(),Q=o=>{switch(o){case 1:case 2:case 6:return"admins";case 8:return"sales";case 4:case 24:case 28:return"supply";default:return null}},d=o=>{console.log(o)},l=o=>{console.log(o)},u=o=>{console.log(o),r.addOrUpdate(o)},p=o=>{console.log(o),r.addOrUpdate(o),o.order._status==5&&y.path==="/preorders/warehouse"?(console.log("aqui suena"),w.play()):console.log("aqui no suena")},v=async()=>{i.loading.show({message:"Obteniendo datos"});let o={uid:n.session.credentials.staff.id_va,wid:n.session.store.id_viz,view:Q(n.session.credentials._rol)};console.log(o);const e=await U.getOrders(o);e.fail?console.log(e):(console.log(e),r.setOrders(e.orders),r.setPrinters(e.prints),r.setUnits(e.units),r.setRules(e.rules),i.loading.hide())};return V(async()=>{v(),s.connect(),s.emit("join",r.socket_user),s.on("joinedat",d),s.on("newjoin",l),s.on("order_add",u),s.on("order_update",p)}),$(()=>{s.off("joinedat",d),s.off("newjoin",l),s.off("order_add",u),s.off("order_update",p)}),(o,e)=>{const h=b("router-view");return m(),c(N,{view:"hHh Lpr fFf"},{default:a(()=>[t(x,{class:"transparent text-dark",bordered:""},{default:a(()=>[t(P),t(j)]),_:1}),t(R,null,{default:a(()=>[f(r).showLyt?(m(),c(L,{key:0,class:"justify-between"},{default:a(()=>[_("div",null,[e[0]||(e[0]=g("Helpers ")),t(k,{name:"navigate_next",color:"primary"}),g(" "+C(f(r).title)+" ",1),e[1]||(e[1]=_("span",{class:"text-h6"},null,-1))])]),_:1})):H("",!0),t(h)]),_:1})]),_:1})}}};export{mo as default};
