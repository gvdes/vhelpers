import{a as v,b as h,Q as Y,d as B,e as u}from"./QList.d00c8370.js";import{Q as _}from"./QTable.d9f133cd.js";import{a as C}from"./QDrawer.a1d39b14.js";import{Q as d}from"./QCardSection.8133d3e1.js";import{aH as P,a as V,u as y,r as p,c as R,o as c,d as g,w as a,f as b,e as t,ak as s,a0 as l,g as H,a2 as I,a3 as T,a4 as $,Q as M,a1 as N}from"./index.5cd8bf7f.js";import{Q as A}from"./QCardActions.7f616b43.js";import{Q as E}from"./QCard.cc9a043d.js";import{Q as F}from"./QPage.795082c6.js";import{C as L}from"./ClosePopup.f274f120.js";import{d as w}from"./dayjs.min.cbcf888d.js";import"./axios.f821ef00.js";import{u as U}from"./Restock.70ed9d97.js";import{u as O}from"./use-quasar.3c11604f.js";import"./socket.3fae67a0.js";import"./QBtnGroup.f738d57b.js";import"./QSelect.9a88dcc4.js";import"./use-key-composition.28d192d9.js";import"./QLinearProgress.6e950e52.js";import"./QCheckbox.4d9ed756.js";import"./QResizeObserver.4adcbba6.js";import"./QScrollObserver.ae5844cd.js";import"./_commonjsHelpers.88e99c8f.js";import"./QToolbar.d85315dd.js";import"./QForm.58a9e4f8.js";import"./QRadio.1c5f09dd.js";import"./QInput.05b060b5.js";import"./QTd.e8469fc1.js";import"./QPopupEdit.9dd87643.js";import"./QTr.bd0921d9.js";import"./QLayout.1663eac9.js";import"./jspdf.plugin.autotable.d3cdd287.js";import"./exceljs.min.9e24d01d.js";import"./JsBarcode.cb858474.js";import"./browser.c61f550a.js";/* empty css                                                       */const j={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Ct={__name:"dashboardStore",setup(q){P(),V();const n=U();O();const Q=y(),r=p({state:!1,val:null}),D=p({rowsPerPage:[0]}),f=p({columns:[{name:"id",label:"ID",field:e=>e.id,align:"center"},{name:"invoice",label:"Factura",field:e=>e.invoice,align:"center"},{name:"invoiceReceived",label:"Factura R",field:e=>e.invoice_received,align:"center"},{name:"status",label:"Estado",field:e=>e.status.name,align:"left"},{name:"UACT",label:"U.Act",field:e=>{var i,o;return w((o=(i=e.log)==null?void 0:i.find(m=>m.id==e._status))==null?void 0:o.pivot.updated_at).format("YYYY/MM/DD HH:mm:ss")},align:"left"}],pagination:{rowsPerPage:10}}),S=R(()=>n.ordersok.filter(e=>e._workpoint_from==Q.session.store.id_viz)),k=async()=>{n.setShowLYT(!0),n.setTitle("Dashboard"),n.setButtonShow(!0)},x=(e,i)=>{r.value.state=!0,r.value.val=i};return k(),(e,i)=>(c(),g(F,{padding:""},{default:a(()=>[b("div",null,[t(_,{rows:S.value,"row-key":"name",grid:"",pagination:D.value,"hide-bottom":""},{item:a(o=>[b("div",j,[t(v,{bordered:""},{default:a(()=>[t(C,{dense:"",icon:"list",label:`${o.row.id.toString()} (${o.row.status.name})`,caption:`${o.row.to.name} (${o.row.notes})`},{default:a(()=>[t(h),t(_,{"hide-bottom":"",flat:"",rows:o.row.partition,columns:f.value.columns,pagination:f.value.pagination,onRowClick:x},null,8,["rows","columns","pagination"])]),_:2},1032,["label","caption"])]),_:2},1024)])]),_:1},8,["rows","pagination"])]),t(Y,{modelValue:r.value.state,"onUpdate:modelValue":i[0]||(i[0]=o=>r.value.state=o),persistent:""},{default:a(()=>[t(E,null,{default:a(()=>[t(d,{class:"text-center text-h6"},{default:a(()=>[s(" ID: "+l(r.value.val.id),1)]),_:1}),t(d,{class:"text-center text-bold"},{default:a(()=>[s(l(r.value.val.status.name),1)]),_:1}),t(d,null,{default:a(()=>[(c(!0),H(T,null,I(r.value.val.log,(o,m)=>(c(),g(v,{bordered:"",key:m},{default:a(()=>[t(B,null,{default:a(()=>[t(u,null,{default:a(()=>[s(l(o.name),1)]),_:2},1024),t(u,null,{default:a(()=>[s(l(JSON.parse(o.pivot.details).responsable),1)]),_:2},1024),t(u,null,{default:a(()=>[s(l(N(w)(o.pivot.updated_at).format("YYYY/MM/DD HH:mm:ss")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(A,{align:"right"},{default:a(()=>[$(t(M,{flat:"",label:"OK",color:"primary"},null,512),[[L]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ct as default};
