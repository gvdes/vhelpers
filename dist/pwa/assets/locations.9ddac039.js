import{Q as V}from"./QSelect.f422d553.js";import{b as k}from"./QList.9aa8a672.js";import{u as A,r as s,l as U,o as m,d as x,w as t,e as o,g as f,a3 as y,a2 as M,f as w,Q as T,h as D}from"./index.7d6b3888.js";import{a as L,b as v,Q as b}from"./QTabPanels.fc98b765.js";import{Q as B}from"./axios.40bf4b92.js";import{Q as E}from"./QCard.a8dd0ba6.js";import{Q as F}from"./QTabs.53815587.js";import{Q as I}from"./QFooter.b7efb246.js";import{Q as O}from"./QPage.494efdde.js";import"./QDrawer.ad8e34a8.js";import"./QCardActions.d0301cc7.js";import"./ClosePopup.df23903f.js";import{u as W}from"./use-quasar.624f678d.js";import{u as $}from"./warehousStore.def10e7c.js";import"./QInput.b83f85ba.js";/* empty css                                                                         */import"./jspdf.plugin.autotable.2f3be397.js";import"./exceljs.min.9e24d01d.js";import"./JsBarcode.cb858474.js";import"./browser.c61f550a.js";import{l as q}from"./locationsApi.b3c66478.js";import"./use-render-cache.3aae9b27.js";import"./QResizeObserver.cca11167.js";import"./QScrollObserver.8fa495fb.js";import"./_commonjsHelpers.88e99c8f.js";const H={key:0,class:"row"},R={class:"row"},j={class:"text-right row"},Qe={__name:"locations",setup(z){const g=A(),h=W();$();const r=s("locations"),u=s([]),d=s(null),c=s([]),n=s([]),Q=s(0);s({columns:[{name:"id",label:"ID",field:e=>e.id,align:"center"},{name:"name",label:"NOMBRE",field:e=>e.name,align:"left"},{name:"alias",label:"ALIAS",field:e=>e.alias,align:"left"},{name:"path",label:"PATH",field:e=>e.path,align:"left"}]});const C=async()=>{h.loading.show({message:"Obteniendo Secciones"});const e=await q.index(g.session.store.id);e.fail?console.log(e):u.value=e,h.loading.hide()},S=()=>{const e=d.value.sections||[];Q.value=Math.max(...e.map(a=>a.deep)),n.value=[{options:e.filter(a=>a.root===0),selected:null}],c.value=n.value[0].options},_=e=>{var a;return((a=d.value.sections)==null?void 0:a.filter(l=>l.root===e))||[]},N=(e,a)=>{n.value.splice(a+1);const l=_(e);l.length>0&&n.value.push({options:l,selected:null})},P=()=>{labelsPDF.locationsWarehouse(c.value,g.session.credentials.nick)};return C(),U(n,e=>{const a=e.filter(l=>l.selected!==null);if(a.length){const l=a[a.length-1],i=_(l.selected);c.value=i}},{deep:!0}),(e,a)=>(m(),x(O,{padding:""},{default:t(()=>[o(E,{class:"my-card"},{default:t(()=>[o(L,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=l=>r.value=l),animated:""},{default:t(()=>[o(v,{name:"locations"},{default:t(()=>[u.value.length>0?(m(),f("div",H,[o(V,{class:"col",modelValue:d.value,"onUpdate:modelValue":[a[0]||(a[0]=l=>d.value=l),S],options:u.value,label:"ALMAC\xC9N",filled:"","option-label":"name",dense:""},null,8,["modelValue","options"]),o(k,{spaced:"",inset:"",vertical:"",dark:""}),(m(!0),f(y,null,M(n.value,(l,i)=>(m(),f("div",{key:i,class:"col"},[w("div",R,[o(V,{class:"col",modelValue:l.selected,"onUpdate:modelValue":[p=>l.selected=p,p=>N(p,i)],options:l.options,label:`Nivel ${i+1}`,"option-value":"id","option-label":"name","emit-value":"","map-options":"",dense:"",filled:"",disable:i==Q.value},null,8,["modelValue","onUpdate:modelValue","options","label","disable"]),o(k,{spaced:"",inset:"",vertical:"",dark:""})])]))),128)),w("div",j,[o(T,{icon:"add",flat:"",onClick:P,disable:c.value<=0},null,8,["disable"])])])):D("",!0)]),_:1}),o(v,{name:"products"},{default:t(()=>[o(B)]),_:1}),o(v,{name:"delete"},{default:t(()=>[o(B)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(I,{reveal:"",elevated:"",bordered:""},{default:t(()=>[o(F,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=l=>r.value=l),class:"bg-white text-primary",dense:""},{default:t(()=>[o(b,{name:"locations",icon:"device_hub",label:"Estructura"}),o(b,{name:"products",icon:"location_searching",label:"Productos"}),o(b,{name:"delete",icon:"art_track",label:"Masivo"})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}};export{Qe as default};
