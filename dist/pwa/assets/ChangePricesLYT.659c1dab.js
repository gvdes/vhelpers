import{Q as V}from"./QSeparator.1c524e3d.js";import{r as Y,c as j,o as ze,a as ye,w as _,e as $,i as X,a3 as K,Y as $e,Q as A,b1 as ee,f as te,a4 as Ce,a5 as Ee,a2 as we}from"./index.f230f022.js";import{Q as Ne}from"./QToolbar.27077d41.js";import{Q as He}from"./QHeader.7126e984.js";import{Q as J}from"./QSelect.c1eea1d3.js";import{u as Ie,Q as oe,a as B}from"./use-quasar.e39b8eab.js";import{Q as Le}from"./QTable.3191f054.js";import{Q as We}from"./QOptionGroup.03823645.js";import{Q as ke}from"./QCardActions.399bf6db.js";import{Q as qe}from"./QDialog.4e21d602.js";import{Q as Te}from"./QPage.e6a2a5a9.js";import{Q as _e,a as Re}from"./QLayout.5338a477.js";import{C as Me}from"./ClosePopup.f972e7f6.js";import{u as Qe}from"./VDB.62c6e2ff.js";import{_ as Oe}from"./UserToolbar.7a022b79.js";import{v as Ve}from"./axios.30672b3a.js";import{E as O}from"./jspdf.plugin.autotable.0b626374.js";import{E as Ye}from"./exceljs.min.9e24d01d.js";import"./browser.94c942de.js";import"./QResizeObserver.f839cf65.js";import"./use-key-composition.951681c7.js";import"./uid.42677368.js";import"./position-engine.b4a3ff3c.js";import"./rtl.b51694b1.js";import"./QList.e86be665.js";import"./QLinearProgress.89563db7.js";import"./QCheckbox.baf50a2a.js";import"./QRadio.8b3f487d.js";import"./axios.f1f32898.js";import"./_commonjsHelpers.88e99c8f.js";var Ae={getData(ae){return Ve.get(`/compare/getChangePrices/${ae}`).then(T=>T.data).catch(T=>({fail:T}))}};const Xe=X("span",{class:"text-h6"},"Cambios de precio",-1),De={class:"row"},Ge=X("div",{class:"text-center text-bold"},"Precios",-1),Ue={class:"q-pa-md"},je=X("div",{class:"q-ml-sm"},"En que Formato deseas las etiquetas?",-1),Ct={__name:"ChangePricesLYT",setup(ae){const T=Qe(),H=Ie(),D=Y([]),Z=Y([]),le=Y([{name:"stock_exh",label:"EXHIBICION",field:s=>{var c,d,r;return((r=(d=(c=s.stocks)==null?void 0:c.find(g=>g.pivot))==null?void 0:d.pivot)==null?void 0:r.exh)||0},align:"center"},{name:"stock_gen",label:"GENERAL",field:s=>{var c,d,r;return((r=(d=(c=s.stocks)==null?void 0:c.find(g=>g.pivot))==null?void 0:d.pivot)==null?void 0:r.gen)||0},align:"center"}]),x=Y({seccion:{val:null,opts:[]},familias:{val:null,opts:[]},categorias:{val:null,opts:[]}}),G=Y({columns:[{name:"code",label:"CODIGO",field:s=>s.code,align:"left"},{name:"barcode",label:"CB",field:s=>s.barcode,align:"left"},{name:"description",label:"DESCRIPCION",field:s=>s.description,align:"left"},{name:"section",label:"SECCION",field:s=>s.categories.familia.seccion.name,align:"left"},{name:"family",label:"FAMILIA",field:s=>s.categories.familia.name,align:"left"},{name:"category",label:"CATEGORIA",field:s=>s.categories.name,align:"left"},{name:"locations",label:"UBICACION",field:s=>{var c;return(c=s.locations)==null?void 0:c.map(d=>d.path).join("/")},align:"center"},...Z.value,...le.value]}),m=Y({state:!1,val:null,opts:[{id:1,label:"Navidad Extra Grande"},{id:2,label:"Navidad Grande"},{id:3,label:"Navidad Mediano"},{id:4,label:"Navidad Pequeno"},{id:5,label:"Navidad Vertical"},{id:6,label:"Juguete Ni\xF1o"},{id:7,label:"Juguete Ni\xF1a"},{id:8,label:"Juguete Extra Ni\xF1a"},{id:9,label:"Juguete Extra Ni\xF1o"},{id:10,label:"Juguete Horizontal Ni\xF1o"},{id:11,label:"Juguete Horizontal Ni\xF1a"},{id:12,label:"Rectangular 2x4"}]}),R=Y({val:[0,1,2,4],opts:[{label:"Menudeo",value:1},{label:"Mayoreo",value:2},{label:"Docena",value:3},{label:"Caja",value:4}]}),U=j(()=>D.value.filter(s=>s.prices.some(c=>c.pivot.price!=0))),Q=j(()=>{var s,c,d,r,g,n,P,e,k,q,w,I,b,y,N,L,p,W,F,a,i,M,f;return((c=(s=x.value)==null?void 0:s.seccion)==null?void 0:c.val)&&!((g=(r=(d=x.value)==null?void 0:d.seccion)==null?void 0:r.familia)!=null&&g.val)?U.value.filter(S=>{var z,t,o;return((o=(t=(z=S.categories)==null?void 0:z.familia)==null?void 0:t.seccion)==null?void 0:o.id)===x.value.seccion.val.id}):((P=(n=x.value)==null?void 0:n.seccion)==null?void 0:P.val)&&((q=(k=(e=x.value)==null?void 0:e.seccion)==null?void 0:k.familia)==null?void 0:q.val)&&!((y=(b=(I=(w=x.value)==null?void 0:w.seccion)==null?void 0:I.familia)==null?void 0:b.categorias)!=null&&y.val)?U.value.filter(S=>{var z,t,o;return((o=(t=(z=S.categories)==null?void 0:z.familia)==null?void 0:t.seccion)==null?void 0:o.id)===x.value.seccion.val.id}):((L=(N=x.value)==null?void 0:N.seccion)==null?void 0:L.val)&&((F=(W=(p=x.value)==null?void 0:p.seccion)==null?void 0:W.familia)==null?void 0:F.val)&&((f=(M=(i=(a=x.value)==null?void 0:a.seccion)==null?void 0:i.familia)==null?void 0:M.categorias)==null?void 0:f.val)?U.value.filter(S=>{var z,t,o;return((o=(t=(z=S.categories)==null?void 0:z.familia)==null?void 0:t.seccion)==null?void 0:o.id)===x.value.seccion.val.id}):U.value}),se=j(()=>{var s,c;return(c=(s=x.value)==null?void 0:s.seccion)!=null&&c.val?x.value.familias.opts.filter(d=>{var r,g;return d.root==((g=(r=x.value)==null?void 0:r.seccion)==null?void 0:g.val.id)}):x.value.familias.opts}),ie=j(()=>{var s,c;return(c=(s=x.value)==null?void 0:s.familias)!=null&&c.val?x.value.categorias.opts.filter(d=>{var r,g;return d.root==((g=(r=x.value)==null?void 0:r.familias)==null?void 0:g.val.id)}):x.value.categorias.opts}),ne=async()=>{H.loading.show({message:"Obteniendo Informacion"});let s=T.session.store.id_viz;const c=await Ae.getData(s);if(c.fail)console.log(c);else{if(console.log(c),D.value=c,D.value.forEach(d=>{let r=re(d.prices);d._copies=1,d.type=r.type,d.usedPrices=r.prices;const g=d.categories.familia.seccion;g&&!x.value.seccion.opts.map(e=>e.id).includes(g.id)&&x.value.seccion.opts.push(g);const n=d.categories.familia;n&&!x.value.familias.opts.map(e=>e.id).includes(n.id)&&x.value.familias.opts.push(n);const P=d.categories;P&&!x.value.categorias.opts.map(e=>e.id).includes(P.id)&&x.value.categorias.opts.push(P)}),D.value.length>0){const d=D.value[0];d.prices&&d.prices.forEach(r=>{Z.value.push({name:`price_${r.id}`,label:r.name,field:g=>{var n,P;return((P=(n=g.prices.find(e=>e.id===r.id))==null?void 0:n.pivot)==null?void 0:P.price)||0},align:"center"})}),G.value.columns=[...G.value.columns,...Z.value]}H.loading.hide()}},ce=async()=>{const s=new Ye.Workbook,c=s.addWorksheet("Comparativo");c.addRow(G.value.columns.map(P=>P.label)),Q.value.forEach(P=>{c.addRow(G.value.columns.map(e=>typeof e.field=="function"?e.field(P):P[e.field]||"-"))}),c.columns.forEach(P=>{let e=0;P.eachCell({includeEmpty:!0},k=>{const q=k.value?k.value.toString().length:10;q>e&&(e=q)}),P.width=e<10?10:e});const d=await s.xlsx.writeBuffer(),r=new Blob([d],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),g=URL.createObjectURL(r),n=document.createElement("a");n.href=g,n.download="Cambio_Precios.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n)},re=(s,c)=>{let d=[...s];const r=d.find(n=>n.pivot._type==4),g=d.find(n=>n.pivot._type==1);if(r.pivot.price==g.pivot.price){let n={id:0,alias:"OFERTA",name:"Oferta",pivot:{price:d[0].pivot.price},used:!0};return console.log("oferta"),{type:"off",prices:[n]}}else return console.log("estandar"),{type:"std",prices:d}},de=()=>{H.loading.show({message:"Generando Etiquetas"}),m.value.val.id==1?ue(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==2?ve(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==3?ge(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==4?me(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==5?pe(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==6?he(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==7?fe(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==8?be(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==9?xe(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==10?Fe(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==11?Pe(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{alert("Hubo un error al descargar las etiquetas")}):m.value.val.id==12&&Se(Q.value).then(s=>{H.notify({message:"Se Descargo las etiquetas Correctamente",type:"positive",position:"center"}),m.value.state=!1,m.value.val=null,H.loading.hide()}).catch(s=>{console.log(s),alert("Hubo un error al descargar las etiquetas")})},ve=s=>new Promise((c,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let i=0;i<a._copies;i++)g.push(a)});const n="/icons/Navidad/Navidad6(2).png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=100,y=85,N=5,L=5,p=2,F=p*3;g.forEach((a,i)=>{const M=Math.floor(i/F),f=i%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);i>0&&f===0&&e.addPage(),e.addImage(n,P,t,o,b,y),e.setFontSize(30),e.setFont("helvetica","bold"),e.text(a.name,t+61,o+77),e.setFontSize(14),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+10,o+25),e.setFontSize(12);let v=o+39,u=7;a.usedPrices.filter(l=>R.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(22),e.setFont("helvetica","bold"),e.text("Unico Precio",t+30,v+h*u+5),e.setFontSize(28),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+34,v+h*u+20)):(e.setFontSize(22),e.setFont("helvetica","bold"),e.text(l.alias,t+23,v+h*u),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+45,v+h*u))}),e.setFontSize(16),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+10,o+12),e.text(a.large,t+18,o+74),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+70,o+12),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+19,o+77)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}}),ue=s=>new Promise((c,d)=>{try{const r=s;console.log(r);const g=[];r.forEach(a=>{for(let i=0;i<a._copies;i++)g.push(a)});const n="/icons/Navidad/Navidad6(2).png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=205,y=125,N=5,L=5,p=1,F=p*2;g.forEach((a,i)=>{const M=Math.floor(i/F),f=i%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);i>0&&f===0&&e.addPage(),e.addImage(n,P,t,o,b,y),e.setFontSize(70),e.setFont("helvetica","bold"),e.text(a.name,t+120,o+112),e.setFontSize(20),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+18,o+31),e.setFontSize(12);let v=o+39,u=12;a.usedPrices.filter(l=>R.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(35),e.setFont("helvetica","bold"),e.text("Unico Precio",t+60,v+h*u+10),e.setFontSize(50),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+64,v+h*u+35)):(e.setFontSize(35),e.setFont("helvetica","bold"),e.text(l.alias,t+60,v+h*u+15),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+93,v+h*u+15))}),e.setFontSize(45),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+18,o+23),e.text(a.large,t+35,o+112),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+185,o+23,{align:"right"}),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+38,o+114)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}}),ge=s=>new Promise((c,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let i=0;i<a._copies;i++)g.push(a)});const n="/icons/Navidad/Navidad9(1).png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=65,y=85,N=5,L=5,p=3,F=p*3;g.forEach((a,i)=>{const M=Math.floor(i/F),f=i%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);i>0&&f===0&&e.addPage(),e.addImage(n,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+37,o+77),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+5,o+25),e.setFontSize(12);let v=o+40,u=7;a.usedPrices.filter(l=>R.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(18),e.setFont("helvetica","bold"),e.text("Unico Precio",t+13,v+h*u),e.setFontSize(26),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+13,v+h*u+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+10,v+h*u),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+30,v+h*u))}),e.setFontSize(12),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+25,o+20),e.text(a.large,t+18,o+77),e.text(`${a.pieces} PZS`,t+20,o+73),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+79)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}}),me=s=>new Promise((c,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let i=0;i<a._copies;i++)g.push(a)});const n="/icons/Navidad/NaviSan(1).png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=67,y=63,N=0,L=3,p=3,F=p*4;g.forEach((a,i)=>{const M=Math.floor(i/F),f=i%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);i>0&&f===0&&e.addPage(),e.addImage(n,P,t,o,b,y),e.setFontSize(18),e.setFont("helvetica","bold"),e.text(a.name,t+23,o+37),e.setFontSize(8),e.setFont("helvetica","normal"),e.text(a.label.substring(0,25),t+15,o+43),e.setFontSize(10);let C=o+36,E=12;a.usedPrices.filter(v=>R.value.val.includes(v.id)).forEach((v,u)=>{v.alias=="OFERTA"?(e.setFontSize(10),e.setFont("helvetica","bold"),e.text("Unico Precio",t+23,C+u*E+12),e.setFontSize(14),e.text(`$ ${Number(v.pivot.price).toFixed(0)}`,t+27,C+u*E+17)):(e.setFontSize(10),e.setFont("helvetica","bold"),e.text(v.alias,t+u*E+10,C+12),e.text(`$ ${Number(v.pivot.price).toFixed(0)}`,t+u*E+10,C+16))}),e.setFontSize(6),e.setFont("helvetica","bold"),e.text(`(${a.code})`,t+28,o+40),e.text(a.large,t+40,o+55),e.text(`${a.pieces} PZS`,t+40,o+57)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}}),pe=s=>new Promise((c,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let i=0;i<a._copies;i++)g.push(a)});const n="/icons/Navidad/NavidadVer(2).png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=48,y=85,N=5,L=5,p=4,F=p*4;g.forEach((a,i)=>{const M=Math.floor(i/F),f=i%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);i>0&&f===0&&e.addPage(),e.addImage(n,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+20,o+80),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-15,E=e.splitTextToSize(a.label,C);e.text(E,t+5,o+22),e.setFontSize(12);let v=o+35,u=7;a.usedPrices.filter(l=>R.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(18),e.setFont("helvetica","bold"),e.text("Unico Precio",t+5,v+h*u),e.setFontSize(26),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+10,v+h*u+15)):(e.setFontSize(16),e.setFont("helvetica","bold"),e.text(l.alias,t+5,v+h*u),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+20,v+h*u))}),e.setFontSize(12),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+24,o+17,{align:"center"}),e.text(a.large,t+20,o+68),e.text(`${a.pieces} PZS`,t+20,o+73),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+81)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}}),he=s=>new Promise((c,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let i=0;i<a._copies;i++)g.push(a)});const n="/icons/Juguete/Ninio.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=65,y=85,N=5,L=5,p=3,F=p*3;g.forEach((a,i)=>{const M=Math.floor(i/F),f=i%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);i>0&&f===0&&e.addPage(),e.addImage(n,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+15,o+10),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+3,o+25),e.setFontSize(12);let v=o+40,u=7;a.usedPrices.filter(l=>R.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+5,v+h*u),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+5,v+h*u+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+2,v+h*u),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+19,v+h*u))}),e.setFontSize(10),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+45,o+40),e.text(a.large,t+45,o+52),e.text(`${a.pieces} PZS`,t+45,o+46),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}}),fe=s=>new Promise((c,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let i=0;i<a._copies;i++)g.push(a)});const n="/icons/Juguete/Ninia.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=65,y=85,N=5,L=5,p=3,F=p*3;g.forEach((a,i)=>{const M=Math.floor(i/F),f=i%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);i>0&&f===0&&e.addPage(),e.addImage(n,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+15,o+20),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+5,o+25),e.setFontSize(12);let v=o+40,u=7;a.usedPrices.filter(l=>R.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+15,v+h*u),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+15,v+h*u+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+15,v+h*u),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+32,v+h*u))}),e.setFontSize(13),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+62,o+70,{align:"right"}),e.setFont("helvetica","normal"),e.text(a.large,t+15,o+65),e.text(`${a.pieces} PZS`,t+15,o+70),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}}),be=s=>new Promise((c,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let i=0;i<a._copies;i++)g.push(a)});const n="/icons/Juguete/xlargeninia.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=205,y=125,N=5,L=5,p=1,F=p*2;g.forEach((a,i)=>{const M=Math.floor(i/F),f=i%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);i>0&&f===0&&e.addPage(),e.addImage(n,P,t,o,b,y),e.setFontSize(70),e.setFont("helvetica","bold"),e.text(a.name,t+120,o+112),e.setFontSize(20),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+18,o+31),e.setFontSize(12);let v=o+39,u=12;a.usedPrices.filter(l=>R.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(35),e.setFont("helvetica","bold"),e.text("Unico Precio",t+60,v+h*u+10),e.setFontSize(50),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+64,v+h*u+35)):(e.setFontSize(35),e.setFont("helvetica","bold"),e.text(l.alias,t+60,v+h*u+15),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+93,v+h*u+15))}),e.setFontSize(45),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+18,o+23),e.text(a.large,t+35,o+112),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+185,o+23,{align:"right"}),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+38,o+114)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}}),xe=s=>new Promise((c,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let i=0;i<a._copies;i++)g.push(a)});const n="/icons/Juguete/xlargeninio.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=205,y=125,N=5,L=5,p=1,F=p*2;g.forEach((a,i)=>{const M=Math.floor(i/F),f=i%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);i>0&&f===0&&e.addPage(),e.addImage(n,P,t,o,b,y),e.setFontSize(70),e.setFont("helvetica","bold"),e.text(a.name,t+120,o+112),e.setFontSize(20),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+18,o+31),e.setFontSize(12);let v=o+39,u=12;a.usedPrices.filter(l=>R.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(35),e.setFont("helvetica","bold"),e.text("Unico Precio",t+60,v+h*u+10),e.setFontSize(50),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+64,v+h*u+35)):(e.setFontSize(35),e.setFont("helvetica","bold"),e.text(l.alias,t+60,v+h*u+15),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+93,v+h*u+15))}),e.setFontSize(45),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+18,o+23),e.text(a.large,t+35,o+112),e.setFont("helvetica","normal"),e.text(`${a.pieces} PZS`,t+185,o+23,{align:"right"}),e.setFontSize(6),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+38,o+114)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}}),Fe=s=>new Promise((c,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let i=0;i<a._copies;i++)g.push(a)});const n="/icons/Juguete/Ninio.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=100,y=60,N=5,L=5,p=2,F=p*4;g.forEach((a,i)=>{const M=Math.floor(i/F),f=i%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);i>0&&f===0&&e.addPage(),e.addImage(n,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+5,o+10),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+5,o+15),e.setFontSize(12);let v=o+25,u=7;a.usedPrices.filter(l=>R.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+15,v+h*u),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+15,v+h*u+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+15,v+h*u),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+32,v+h*u))}),e.setFontSize(13),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+70,o+25),e.text(a.large,t+45,o+52),e.text(`${a.pieces} PZS`,t+70,o+30),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}}),Pe=s=>new Promise((c,d)=>{try{const r=s,g=[];r.forEach(a=>{for(let i=0;i<a._copies;i++)g.push(a)});const n="/icons/Juguete/Ninia.png",P="PNG",e=new O({format:"letter"}),k=e.internal.pageSize.getWidth(),q=e.internal.pageSize.getHeight(),w=5,I=10,b=100,y=60,N=5,L=5,p=2,F=p*4;g.forEach((a,i)=>{const M=Math.floor(i/F),f=i%F,S=Math.floor(f/p),z=f%p,t=w+z*(b+N),o=I+S*(y+L);i>0&&f===0&&e.addPage(),e.addImage(n,P,t,o,b,y),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(a.name,t+5,o+20),e.setFontSize(10),e.setFont("helvetica","normal");const C=b-20,E=e.splitTextToSize(a.label,C);e.text(E,t+5,o+25),e.setFontSize(12);let v=o+32,u=7;a.usedPrices.filter(l=>R.value.val.includes(l.id)).forEach((l,h)=>{l.alias=="OFERTA"?(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Unico Precio",t+20,v+h*u),e.setFontSize(20),e.text(`$ ${Number(l.pivot.price).toFixed(2)}`,t+20,v+h*u+15)):(e.setFontSize(18),e.setFont("helvetica","bold"),e.text(l.alias,t+20,v+h*u),e.text(`$${Number(l.pivot.price).toFixed(0)}`,t+37,v+h*u))}),e.setFontSize(13),e.setFont("helvetica","bold"),e.text(`${a.code}`,t+70,o+32),e.text(a.large,t+45,o+52),e.text(`${a.pieces} PZS`,t+70,o+37),e.setFontSize(4),e.setFont("helvetica","normal"),e.text(a.locations?a.locations.map(l=>l.path).join("/"):"",t+18,o+84)}),e.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}}),Se=s=>new Promise((c,d)=>{try{const r=s,g=[];r.forEach(W=>{for(let F=0;F<W._copies;F++)g.push(W)});const n=new O({format:"letter"}),P=n.internal.pageSize.getWidth(),e=n.internal.pageSize.getHeight(),k=5,q=10,w=100,I=60,b=5,y=5,N=2,p=N*4;g.forEach((W,F)=>{const a=Math.floor(F/p),i=F%p,M=Math.floor(i/N),f=i%N,S=k+f*(w+b),z=q+M*(I+y);F>0&&i===0&&n.addPage(),n.setDrawColor(0),n.setLineWidth(.5),n.rect(S,z,w,I),n.setFontSize(12),n.setFont("helvetica","bold"),n.text("Grupo Vizcarra",S+40,z+5),n.setFontSize(33),n.setFont("helvetica","bold"),n.text(W.name,S+5,z+15),n.setFontSize(10),n.setFont("helvetica","normal");const t=w-20,o=n.splitTextToSize(W.label.toUpperCase(),t);n.text(o,S+5,z+20),n.setFontSize(12);let C=z+32,E=7;W.usedPrices.filter(v=>R.value.val.includes(v.id)).forEach((v,u)=>{v.alias=="OFERTA"?(n.setFontSize(14),n.setFont("helvetica","bold"),n.text("Unico Precio",S+15,C+u*E),n.setFontSize(25),n.text(`$ ${Number(v.pivot.price).toFixed(2)}`,S+20,C+u*E+15)):(n.setFontSize(18),n.setFont("helvetica","bold"),n.text(v.alias,S+15,C+u*E),n.text(`$${Number(v.pivot.price).toFixed(0)}`,S+37,C+u*E))}),n.setFontSize(13),n.setFont("helvetica","bold"),n.text(`${W.code}`,S+66,z+32),n.text(W.large,S+45,z+52),n.text(`${W.pieces} PZS`,S+70,z+37),n.setFontSize(4),n.setFont("helvetica","normal"),n.text(W.locations?W.locations.map(v=>v.path).join("/"):"",S+18,z+55)}),n.save(`${T.session.credentials.nick} etiquetas ${m.value.val.label}`),c()}catch(r){d(r)}});return ne(),(s,c)=>(ze(),ye(_e,{view:"hHh Lpr fFf"},{default:_(()=>[$(He,{class:"transparent text-dark",bordered:""},{default:_(()=>[$(Oe),$(V),$(Ne,{class:"justify-between"},{default:_(()=>[X("div",null,[K("Helpers "),$($e,{name:"navigate_next",color:"primary"}),K(),Xe]),X("div",De,[$(A,{class:"col",flat:"",color:"primary",icon:"download",rounded:"",title:"Importar Excel",onClick:ce}),$(V,{spaced:"",inset:"",vertical:"",dark:""}),$(A,{class:"col",flat:"",color:"primary",icon:"label",rounded:"",title:"Crear Etiquetas",onClick:c[0]||(c[0]=d=>m.value.state=!m.value.state)})])]),_:1})]),_:1}),$(Re,null,{default:_(()=>[$(Te,{padding:""},{default:_(()=>[$(oe,{class:"my-card"},{default:_(()=>[$(B,{class:"row"},{default:_(()=>[$(J,{class:"col",modelValue:x.value.seccion.val,"onUpdate:modelValue":c[2]||(c[2]=d=>x.value.seccion.val=d),options:x.value.seccion.opts,label:"SECCION",filled:"","option-label":"name"},ee({_:2},[x.value.seccion.val?{name:"append",fn:_(()=>[$(A,{round:"",dense:"",flat:"",icon:"close",onClick:c[1]||(c[1]=d=>{x.value.seccion.val=null,x.value.familias.val=null,x.value.categorias.val=null})})]),key:"0"}:void 0]),1032,["modelValue","options"]),$(V,{spaced:"",inset:"",vertical:"",dark:""}),$(J,{class:"col",modelValue:x.value.familias.val,"onUpdate:modelValue":c[4]||(c[4]=d=>x.value.familias.val=d),options:te(se),label:"FAMILIA",filled:"","option-label":"name",disable:!x.value.seccion.val},ee({_:2},[x.value.familias.val?{name:"append",fn:_(()=>[$(A,{round:"",dense:"",flat:"",icon:"close",onClick:c[3]||(c[3]=d=>{x.value.familias.val=null,x.value.categorias.val=null})})]),key:"0"}:void 0]),1032,["modelValue","options","disable"]),$(V,{spaced:"",inset:"",vertical:"",dark:""}),$(J,{class:"col",modelValue:x.value.categorias.val,"onUpdate:modelValue":c[6]||(c[6]=d=>x.value.categorias.val=d),options:te(ie),label:"CATEGORIA",filled:"","option-label":"name",disable:!x.value.familias.val},ee({_:2},[x.value.categorias.val?{name:"append",fn:_(()=>[$(A,{round:"",dense:"",flat:"",icon:"close",onClick:c[5]||(c[5]=d=>x.value.categorias.val=null)})]),key:"0"}:void 0]),1032,["modelValue","options","disable"]),$(V,{spaced:"",inset:"",vertical:"",dark:""})]),_:1})]),_:1}),$(V,{spaced:"",inset:"",vertical:"",dark:""}),K(" "+Ce()+" ",1),$(Le,{rows:te(Q),columns:G.value.columns},null,8,["rows","columns"]),$(qe,{modelValue:m.value.state,"onUpdate:modelValue":c[9]||(c[9]=d=>m.value.state=d),persistent:""},{default:_(()=>[$(oe,null,{default:_(()=>[$(B,null,{default:_(()=>[X("div",null,[$(V,{spaced:"",inset:"",vertical:"",dark:""}),Ge,X("div",Ue,[$(We,{options:R.value.opts,type:"checkbox",modelValue:R.value.val,"onUpdate:modelValue":c[7]||(c[7]=d=>R.value.val=d),inline:""},null,8,["options","modelValue"])])])]),_:1}),$(B,{class:"row items-center"},{default:_(()=>[$(Ee,{icon:"picture_as_pdf",color:"white","text-color":"red"}),je]),_:1}),$(B,null,{default:_(()=>[$(J,{modelValue:m.value.val,"onUpdate:modelValue":c[8]||(c[8]=d=>m.value.val=d),options:m.value.opts,label:"Etiquetas",filled:""},null,8,["modelValue","options"])]),_:1}),$(ke,{align:"right"},{default:_(()=>[we($(A,{flat:"",label:"Cancel",color:"negative"},null,512),[[Me]]),$(A,{flat:"",label:"Generar",color:"positive",onClick:de,disable:m.value.val==null},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{Ct as default};
