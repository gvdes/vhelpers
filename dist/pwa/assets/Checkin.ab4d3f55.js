import{Q as h}from"./QInput.5b0c2af3.js";import{Q as b}from"./QForm.731fe194.js";import{a as p}from"./QSelect.41116610.js";import{a as Q,d as S,e as V}from"./QList.6d243f3e.js";import{Q as q}from"./QTable.f7e99894.js";import{Q as y}from"./QPage.31abbb41.js";import{aH as D,a as C,u as $,r as f,c as B,o as _,d as k,w as o,f as n,e as s,a4 as I,ak as P,a0 as g,am as R}from"./index.fce2e9eb.js";import"./dayjs.min.cbcf888d.js";import"./axios.eedb7580.js";import{o as N}from"./orderApi.e0a8caa4.js";import{u as O}from"./OrderStore.47b3eaa7.js";import{u as T}from"./use-quasar.dcbc9e31.js";import"./QDrawer.d8f7a64e.js";import"./QCardSection.95659c52.js";import"./QCardActions.6818e6d5.js";import"./QCard.b4a95206.js";import"./ClosePopup.aae76762.js";import{$sktRestock as c,$sktOrders as j}from"./socket.05630e21.js";import"./use-key-composition.fbe417d5.js";import"./QLinearProgress.83f13e6e.js";import"./QCheckbox.ac8b2713.js";import"./_commonjsHelpers.88e99c8f.js";import"./QResizeObserver.d61f5908.js";import"./QScrollObserver.2424855c.js";const L={class:"flex justify-center"},U={class:"text-center",style:"width: 50%;"},A={class:"q-pa-xs col-xs-12 col-sm-2 col-sm-1"},E={class:"text-bold q-mr-md"},fe={__name:"Checkin",setup(F){D(),C();const l=O();l.setTitle("Checkout");const d=T(),a=$(),v={profile:{me:{id:a.session.credentials.staff.id_va,nick:a.session.credentials.nick,picture:"",names:a.session.credentials.staff.complete_name,surname_pat:"",surname_mat:"",change_password:!1,_rol:a.session.credentials._rol},workpoint:a.session.store},workpoint:a.session.store};c.connect(),c.emit("joinat",v);const i=f(null),x=f({rowsPerPage:[0]}),w=B(()=>l.orders.filter(r=>r._status==3)),u=async r=>{d.loading.show({message:"Cambiando Estado"}),l.orders.find(t=>t.id==r);const e=await N.nextStepCheck({id:r});if(e.fail)e.fail.status==404&&(d.loading.hide(),i.value=null,d.notify({message:e.fail.response.data.msg,type:"negative",position:"top"})),console.log(e);else{d.loading.hide(),console.log(e),e.requisition&&(c.emit("creating",{order:e.requisition.requisition}),c.emit("partitionCreate",e.requisition.partition));let m={order:e.order,newstate:e.status};console.log(m),j.emit("order_update",m),l.addOrUpdate(m),i.value=null}};return(r,e)=>(_(),k(y,{padding:""},{default:o(()=>[n("div",null,[n("div",L,[n("div",U,[s(b,{onSubmit:e[1]||(e[1]=t=>u(i.value))},{default:o(()=>[s(h,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),type:"number",label:"Pedido",autofocus:"",rounded:"",outlined:""},null,8,["modelValue"])]),_:1})])]),s(q,{rows:w.value,grid:"",pagination:x.value,"hide-bottom":""},{item:o(t=>[n("div",A,[s(Q,{bordered:""},{default:o(()=>[I((_(),k(S,{clickable:"",onDblclick:m=>u(t.row.id)},{default:o(()=>[s(V,null,{default:o(()=>[s(p,{class:"text-center text-bold text-h5"},{default:o(()=>[P(g(t.row.id),1)]),_:2},1024),s(p,{class:"text-center text-overline text-caption"},{default:o(()=>[n("span",E,g(t.row.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDblclick"])),[[R]])]),_:2},1024)])]),_:1},8,["rows","pagination"])])]),_:1}))}};export{fe as default};
