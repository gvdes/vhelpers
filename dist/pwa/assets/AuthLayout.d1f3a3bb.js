import{Q as b}from"./QToolbarTitle.a2ce4495.js";import{Q as k}from"./QToolbar.e9468a06.js";import{Q as S}from"./QHeader.4ab111b6.js";import{r as u,u as w,f as F,g as B,w as C,a as p,h as N,i as a,d as t,j as f,k as m,Q as T,l as i,m as c,c as P,n as _,p as q,P as L}from"./index.6772a291.js";import{Q as $}from"./QForm.5265d4cf.js";import{Q as A}from"./QPage.a5cb312a.js";import{Q as E}from"./QFooter.45d04765.js";import{Q as H,a as I}from"./QLayout.77c7e97a.js";import{u as O}from"./use-quasar.e757a0da.js";import{a as U}from"./auth.f0947a97.js";import{a as z}from"./animateStudio.d4339dcc.js";import"./QResizeObserver.212d10b7.js";import"./QScrollObserver.6bb52127.js";import"./axios.b16d05b9.js";const D={key:0,class:"text-center"},oe={__name:"AuthLayout",setup(J){const o=u(null),n=u(null),v=w(),g=O(),Q=F(),l=u({nick:"",pass:""}),x=B(()=>l.value.nick&&l.value.pass),y=async()=>{console.log("Iniciando sesion ...",l.value),o.value.setLoading();const s=await U.trySignin(l.value);if(s.fail)s.fail.status==404&&(o.value.setError(),g.notify({message:"Credenciales erroneas",color:"negative",icon:"fas fa-bugs"})),console.log(s);else{let e=JSON.parse(JSON.stringify(s));console.log(e),o.value.setSuccess(),L.set("auth",e),v.setSession(e),Q.replace("/")}},V=s=>{s.currentTarget.contains(s.relatedTarget)||(n.value=null)};return C(n,s=>{!o.value||(s==="user"?o.value.setUser():s==="password"?o.value.setPassword():o.value.setIdle())}),(s,e)=>(p(),N(H,{view:"hHh Lpr fFf"},{default:a(()=>[t(I,null,{default:a(()=>[t(S,{class:"bg-transparent"},{default:a(()=>[t(k,null,{default:a(()=>[t(b,null,{default:a(()=>e[5]||(e[5]=[f(" Accesso ")])),_:1}),e[6]||(e[6]=m("div",{class:"text-primary text-bold"},"VH v.2.0",-1))]),_:1})]),_:1}),t(A,{padding:"",class:"flex flex-center"},{default:a(()=>[t(T,{flat:"",class:"bg-transparent"},{default:a(()=>[t(i,null,{default:a(()=>[t(i,{class:"q-pb-sm q-pt-sm flex flex-center"},{default:a(()=>[t(z,{ref_key:"robot",ref:o},null,512)]),_:1}),t(i,null,{default:a(()=>[t($,{onSubmit:y,class:"q-gutter-lg",onFocusout:V},{default:a(()=>[t(c,{outlined:"",rounded:"",standout:"text-primary",placeholder:"nick","input-class":"fs-inc2 text-center",modelValue:l.value.nick,"onUpdate:modelValue":[e[0]||(e[0]=r=>l.value.nick=r),e[2]||(e[2]=r=>{var d;return(d=o.value)==null?void 0:d.typing(r)})],type:"text",autocapitalize:"off",autocomplete:"off",onFocus:e[1]||(e[1]=r=>n.value="user")},null,8,["modelValue"]),t(c,{outlined:"",rounded:"",placeholder:"nip","input-class":"fs-inc2 text-center",modelValue:l.value.pass,"onUpdate:modelValue":e[3]||(e[3]=r=>l.value.pass=r),type:"password",onFocus:e[4]||(e[4]=r=>n.value="password")},null,8,["modelValue"]),x.value?(p(),P("div",D,[t(_,{label:"Entrar",rounded:"",outline:"",type:"submit",color:"primary"})])):q("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(E,{class:"text-center text-caption text-grey bg-transparent"},{default:a(()=>e[7]||(e[7]=[f("Grupo Vizcarra 2026")])),_:1}),e[8]||(e[8]=m("div",null,null,-1))]),_:1})]),_:1}))}};export{oe as default};
