import{Q as V}from"./QSeparator.85ed2e3e.js";import{u as j,r as p,c as F,o as b,a as _,w as o,e as l,f,a4 as a,Y as D,Q as v,g as H,a1 as M,a2 as P,a3 as z,a5 as d,a0 as G,a7 as J}from"./index.5acafb2e.js";import{Q as K}from"./QHeader.d47d3881.js";import{a as k,b as i,Q as T}from"./QSelect.6d241ad1.js";import{Q as A}from"./QList.0f61c16a.js";import{Q as W}from"./QDate.5d1b18fe.js";import{u as X,Q as O,a as x}from"./use-quasar.4d97f920.js";import{Q as $}from"./QCardActions.a7344a27.js";import{Q as S}from"./QDialog.ad65439a.js";import{Q as Z}from"./QInput.b7214e35.js";import{Q as h}from"./QPage.56d5de02.js";import{u as ee}from"./VDB.521cfe1b.js";import"./jspdf.plugin.autotable.5a19e55e.js";import{t as w}from"./transferApi.38962fba.js";import"./exceljs.min.9e24d01d.js";import"./browser.a927a609.js";import{d as le}from"./dayjs.min.cbcf888d.js";import{_ as te}from"./UserToolbar.29cbb1c6.js";import"./QResizeObserver.0f163180.js";import"./use-key-composition.6ff45167.js";import"./uid.937d8ee7.js";import"./position-engine.415844e3.js";import"./rtl.276c3f1b.js";import"./use-render-cache.3aae9b27.js";import"./date.947e50af.js";import"./_commonjsHelpers.88e99c8f.js";import"./axios.ba7b1b0e.js";import"./axios.9ab26c22.js";import"./ClosePopup.a176363a.js";const oe={class:"row justify-between"},ae={class:"q-pa-md"},Be={__name:"Index",setup(se){const C=j(),m=ee(),r=X(),u=p(!1),c=p(null),g=p(!1),Q=p([]),y=p([]),s=p({_origin:null,_destiny:null,notes:null}),I=F(()=>s.value._origin&&s.value._destiny&&s.value.notes),N=async()=>{console.log("Recibiendo Datos :)"),r.loading.show({message:"Obteniendo Datos"});let n=m.session.store.id;const e=await w.index(n);e.error?console.log(e):(console.log(e),Q.value=e.transfer,y.value=e.warehouses,r.loading.hide())},R=async()=>{r.loading.show({message:"Creando Traspaso"}),s.value.created_by=m.session.name,s.value._store=m.session.store.id,console.log(s.value);const n=await w.addTransfer(s.value);n.error?(console.log(n),r.notify({message:"No se logro crear el traspaso",position:"center",type:"negative"})):(r.loading.hide(),r.notify({message:`Traspaso ${n.code_fs} creada`,position:"center",type:"positive"}),C.push(`transfers/${n.id}`))},U=()=>{g.value=!1,s.value={_origin:null,_destiny:null,notes:null}},B=n=>n.id===s.value._origin.id||m.session.rol!=="aud"&&n.id===4,E=n=>(console.log(n),m.session.rol!="aud"&&n.id==4),Y=async()=>{console.log(c.value),r.loading.show({message:"Obteniendo Datos"});let e={store:m.session.store.id,date:c.value};console.log("Recibiendo Datos :)");const t=await w.getDate(e);t.fail?console.log(t):(console.log(t),Q.value=t,r.loading.hide(),c.value=null,u.value=!1)},L=n=>{C.push(`transfers/${n}`)};return N(),(n,e)=>(b(),_(h,{padding:""},{default:o(()=>[l(K,{class:"transparent text-dark",bordered:""},{default:o(()=>[l(te),l(V),f("div",oe,[f("div",null,[e[10]||(e[10]=a("Helpers ")),l(D,{name:"navigate_next",color:"primary"}),e[11]||(e[11]=a()),e[12]||(e[12]=f("span",{class:"text-h6"},"Traspasos entre Almacenes",-1))]),f("div",null,[l(v,{color:"primary",icon:"add",flat:"",onClick:e[0]||(e[0]=t=>g.value=!g.value),round:""}),l(v,{color:"primary",icon:"event",onClick:e[1]||(e[1]=t=>u.value=!u.value),flat:"",round:""})])]),l(V)]),_:1}),l(A,null,{default:o(()=>[l(k,null,{default:o(()=>[l(i,{class:"text-center"},{default:o(()=>e[13]||(e[13]=[a("ID")])),_:1}),l(i,{class:"text-center"},{default:o(()=>e[14]||(e[14]=[a("CREADO")])),_:1}),l(i,{class:"text-center"},{default:o(()=>e[15]||(e[15]=[a("CREADO POR")])),_:1}),l(i,{class:"text-center"},{default:o(()=>e[16]||(e[16]=[a("NOTAS")])),_:1}),l(i,{class:"text-center"},{default:o(()=>e[17]||(e[17]=[a("ORIGEN")])),_:1}),l(i,{class:"text-center"},{default:o(()=>e[18]||(e[18]=[a("DESTINO")])),_:1}),l(i,{class:"text-center"},{default:o(()=>e[19]||(e[19]=[a("FACTUSOL")])),_:1}),l(i,{class:"text-center"},{default:o(()=>e[20]||(e[20]=[a("ARTICULOS")])),_:1})]),_:1})]),_:1}),l(V,{spaced:"",inset:"",vertical:"",dark:""}),(b(!0),H(P,null,M(Q.value,(t,q)=>(b(),_(A,{bordered:"",key:q},{default:o(()=>[z((b(),_(k,{clickable:"",onClick:ne=>L(t.id)},{default:o(()=>[l(i,{class:"text-center"},{default:o(()=>[a(d(t.id),1)]),_:2},1024),l(i,{class:"text-center"},{default:o(()=>[a(d(G(le)(t.created_at).format("YYYY-MM-D")),1)]),_:2},1024),l(i,{class:"text-center"},{default:o(()=>[a(d(t.created_by),1)]),_:2},1024),l(i,{class:"text-center"},{default:o(()=>[a(d(t.notes),1)]),_:2},1024),l(i,{class:"text-center"},{default:o(()=>[a(d(t.origin.alias),1)]),_:2},1024),l(i,{class:"text-center"},{default:o(()=>[a(d(t.destiny.alias),1)]),_:2},1024),l(i,{class:"text-center"},{default:o(()=>[a(d(t.code_fs),1)]),_:2},1024),l(i,{class:"text-center"},{default:o(()=>[a(d(t.bodie.length),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[J]])]),_:2},1024))),128)),l(S,{modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=t=>u.value=t)},{default:o(()=>[l(O,{class:"my-card"},{default:o(()=>[l(x,null,{default:o(()=>[f("div",ae,[e[21]||(e[21]=f("div",{class:"q-pb-sm"},null,-1)),l(W,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t),range:"",minimal:""},null,8,["modelValue"])])]),_:1}),l(x,null,{default:o(()=>[l($,{align:"right"},{default:o(()=>[l(v,{flat:"",icon:"close",color:"negative",onClick:e[3]||(e[3]=t=>u.value=!u.value)}),l(v,{flat:"",icon:"check",color:"positive",onClick:Y})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(S,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=t=>g.value=t),persistent:""},{default:o(()=>[l(O,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[l(x,{class:"text-h5 text-bold text-center"},{default:o(()=>e[22]||(e[22]=[a(" Nuevo Traspaso ")])),_:1}),l(x,{class:"row items-center"},{default:o(()=>[l(T,{modelValue:s.value._origin,"onUpdate:modelValue":[e[5]||(e[5]=t=>s.value._origin=t),e[6]||(e[6]=t=>s.value._destiny=null)],options:y.value,label:"Almacen Origen",class:"col","option-label":"name","option-disable":t=>E(t)},null,8,["modelValue","options","option-disable"]),l(D,{name:"arrow_forward",class:"col",size:"md"}),l(T,{modelValue:s.value._destiny,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value._destiny=t),options:y.value,label:"Almacen Destino",class:"col","option-label":"name","option-disable":t=>B(t),disable:s.value._origin==null},null,8,["modelValue","options","option-disable","disable"])]),_:1}),l(x,null,{default:o(()=>[l(Z,{modelValue:s.value.notes,"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.notes=t),type:"text",label:"Notas"},null,8,["modelValue"])]),_:1}),l($,{align:"center"},{default:o(()=>[l(v,{flat:"",label:"Cancelar",color:"negative",onClick:U}),l(v,{flat:"",label:"Crear",color:"positive",onClick:R,disable:!I.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Be as default};
