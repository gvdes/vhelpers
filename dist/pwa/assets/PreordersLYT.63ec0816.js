import{b as x}from"./QList.9e83d7bb.js";import{Q as O}from"./QHeader.32a56307.js";import{aI as B,a as S,u as V,p as $,l as b,m as k,a$ as U,o as m,d as f,w as n,e as t,a1 as _,f as w,al as g,S as C,a0 as L,h as N}from"./index.3cdfa26e.js";import{Q as P}from"./QToolbar.e73191ad.js";import{Q as R,a as q}from"./QLayout.f3617c50.js";import"./dayjs.min.cbcf888d.js";import"./axios.554e33cc.js";import{o as D}from"./orderApi.fd6b55e7.js";import{u as H}from"./OrderStore.8577c9a2.js";import{u as T}from"./use-quasar.ce6af595.js";import{_ as A}from"./UserToolbar.1e57c3d7.js";import{$sktOrders as r}from"./socket.05630e21.js";import"./use-key-composition.83984d94.js";import"./QResizeObserver.abcb442b.js";import"./QScrollObserver.da7cba3d.js";import"./_commonjsHelpers.88e99c8f.js";import"./QSelect.bf04ac42.js";import"./QDrawer.c255c9b5.js";import"./use-checkbox.0f6591d5.js";import"./QExpansionItem.d1f27756.js";import"./QCardSection.4777ea36.js";import"./QCardActions.4a572d02.js";import"./QCard.1710dfc4.js";import"./ClosePopup.bfbf3c13.js";import"./auth.eb8020fc.js";const fe={__name:"PreordersLYT",setup(I){const j=new Audio("sounds/success01.mp3"),Q=B();S();const s=H(),d=T(),i=V();let a=!1;const h=e=>{switch(e){case 1:case 2:case 6:case 12:return"admins";case 8:return"sales";case 4:case 24:case 26:case 28:return"supply";default:return"sales"}},u=e=>{console.log(e)},l=e=>{console.log(e)},c=e=>{console.log(e),s.addOrUpdate(e)},p=e=>{console.log(e),s.addOrUpdate(e),e.order._status==5&&Q.path==="/preorders/warehouse"?(console.log("aqui suena"),j.play()):console.log("aqui no suena")},y=async()=>{d.loading.show({message:"Obteniendo datos"});let e={uid:i.session.credentials.staff.id_va,wid:i.session.store.id_viz,view:h(i.session.credentials._rol)};console.log(e);const o=await D.getOrders(e);o.fail?console.log(o):(console.log(o),s.setOrders(o.orders),s.setPrinters(o.prints),s.setUnits(o.units),s.setRules(o.rules),s.setUsers(o.user),s.setProcess(o.process),d.loading.hide())};return $(()=>{y(),r.on("connect",()=>{!a&&s.socket_user&&(a=!0,r.emit("join",s.socket_user))}),r.connect(),b(()=>s.socket_user,e=>{e&&!a&&r.connected&&(a=!0,r.emit("join",e))},{immediate:!0}),r.on("joinedat",u),r.on("newjoin",l),r.on("order_add",c),r.on("order_update",p)}),k(()=>{r.off("joinedat",u),r.off("newjoin",l),r.off("order_add",c),r.off("order_update",p)}),(e,o)=>{const v=U("router-view");return m(),f(R,{view:"hHh Lpr fFf"},{default:n(()=>[t(O,{class:"transparent text-dark",bordered:""},{default:n(()=>[t(A),t(x)]),_:1}),t(q,null,{default:n(()=>[_(s).showLyt?(m(),f(P,{key:0,class:"justify-between"},{default:n(()=>[w("div",null,[o[0]||(o[0]=g("Helpers ")),t(C,{name:"navigate_next",color:"primary"}),g(" "+L(_(s).title)+" ",1),o[1]||(o[1]=w("span",{class:"text-h6"},null,-1))])]),_:1})):N("",!0),t(v)]),_:1})]),_:1})}}};export{fe as default};
