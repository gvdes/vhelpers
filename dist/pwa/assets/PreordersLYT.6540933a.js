import{b as j}from"./QList.d0909d9b.js";import{Q as x}from"./QHeader.619564b5.js";import{aH as O,a as B,u as S,p as V,m as $,a$ as b,o as m,d as c,w as a,e as t,a1 as f,f as _,ak as g,S as k,a0 as C,h as H}from"./index.58dcc675.js";import{Q as L}from"./QToolbar.d77b4752.js";import{Q as N,a as R}from"./QLayout.17258f30.js";import"./dayjs.min.cbcf888d.js";import"./axios.728b615c.js";import{o as U}from"./orderApi.d2e787ed.js";import{u as q}from"./OrderStore.d359adc3.js";import{u as D}from"./use-quasar.5e8d4942.js";import{_ as P}from"./UserToolbar.45098c7b.js";import{$sktOrders as s}from"./socket.05630e21.js";import"./use-key-composition.b4996e1c.js";import"./QResizeObserver.17f6c006.js";import"./QScrollObserver.76e993cf.js";import"./_commonjsHelpers.88e99c8f.js";import"./QSelect.3cdc3928.js";import"./QExpansionItem.85bfd031.js";import"./QDrawer.07dbdf7f.js";import"./QCardSection.32868f4f.js";import"./QCardActions.575b453c.js";import"./QCard.3c01dca0.js";import"./ClosePopup.8cd31eef.js";import"./auth.50aa2670.js";const ue={__name:"PreordersLYT",setup(T){const w=new Audio("sounds/success01.mp3"),y=O();B();const r=q(),i=D(),n=S(),Q=e=>{switch(e){case 1:case 2:case 6:return"admins";case 8:return"sales";case 4:case 24:case 28:return"supply";default:return"sales"}},d=e=>{console.log(e)},l=e=>{console.log(e)},p=e=>{console.log(e),r.addOrUpdate(e)},u=e=>{console.log(e),r.addOrUpdate(e),e.order._status==5&&y.path==="/preorders/warehouse"?(console.log("aqui suena"),w.play()):console.log("aqui no suena")},v=async()=>{i.loading.show({message:"Obteniendo datos"});let e={uid:n.session.credentials.staff.id_va,wid:n.session.store.id_viz,view:Q(n.session.credentials._rol)};console.log(e);const o=await U.getOrders(e);o.fail?console.log(o):(console.log(o),r.setOrders(o.orders),r.setPrinters(o.prints),r.setUnits(o.units),r.setRules(o.rules),i.loading.hide())};return V(async()=>{v(),s.connect(),s.emit("join",r.socket_user),s.on("joinedat",d),s.on("newjoin",l),s.on("order_add",p),s.on("order_update",u)}),$(()=>{s.off("joinedat",d),s.off("newjoin",l),s.off("order_add",p),s.off("order_update",u)}),(e,o)=>{const h=b("router-view");return m(),c(N,{view:"hHh Lpr fFf"},{default:a(()=>[t(x,{class:"transparent text-dark",bordered:""},{default:a(()=>[t(P),t(j)]),_:1}),t(R,null,{default:a(()=>[f(r).showLyt?(m(),c(L,{key:0,class:"justify-between"},{default:a(()=>[_("div",null,[o[0]||(o[0]=g("Helpers ")),t(k,{name:"navigate_next",color:"primary"}),g(" "+C(f(r).title)+" ",1),o[1]||(o[1]=_("span",{class:"text-h6"},null,-1))])]),_:1})):H("",!0),t(h)]),_:1})]),_:1})}}};export{ue as default};
