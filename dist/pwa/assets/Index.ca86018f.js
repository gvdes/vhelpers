import{Q as b}from"./QSeparator.3e2a85f4.js";import{u as T,r as c,c as U,o as g,g as _,e as t,w as s,a2 as V,f as u,a4 as o,Y as L,Q as v,a1 as Y,a as D,a3 as E,a5 as m,a0 as M,a7 as j}from"./index.a00882b6.js";import{Q as q}from"./QDate.1bd39cff.js";import{b as F,Q as H}from"./QSelect.a214b628.js";import{Q as P}from"./QHeader.f9a7d411.js";import{Q as k,a as r}from"./QItemSection.6b159e4b.js";import{Q as O}from"./QList.f804b256.js";import{Q as W}from"./QPage.e54330a7.js";import{u as z,Q as G,a as y}from"./use-quasar.1ac9bf6b.js";import{Q as J}from"./QInput.b853c9e5.js";import{Q as K}from"./QCardActions.57756839.js";import{Q as X}from"./QDialog.26ed9b0d.js";import{u as Z}from"./VDB.e7ec3f6a.js";import"./jspdf.plugin.autotable.0d006988.js";import{o as C}from"./outputsApi.cb0a7c53.js";import"./exceljs.min.9e24d01d.js";import"./browser.a927a609.js";import{d as h}from"./dayjs.min.cbcf888d.js";import{_ as ee}from"./UserToolbar.52ffbbaf.js";import"./use-render-cache.3aae9b27.js";import"./use-key-composition.5eea82c1.js";import"./uid.937d8ee7.js";import"./date.ef4889e0.js";import"./position-engine.e791190d.js";import"./rtl.276c3f1b.js";import"./QResizeObserver.21ccb697.js";import"./_commonjsHelpers.88e99c8f.js";import"./axios.ba7b1b0e.js";import"./axios.9ab26c22.js";import"./ClosePopup.a6c40990.js";const te={class:"row justify-between"},se={class:"q-pa-md"},ae={class:"flex justify-center"},Ue={__name:"Index",setup(oe){const x=T(),d=Z(),n=z(),p=c(!1),f=c(null),Q=c([]),w=c([]),i=c({warehouse:null,notes:null}),S=U(()=>d.session.rol!=="alm"?w.value.filter(l=>[1,2,3,4].includes(l.id)):w.value.filter(l=>[5,6].includes(l.id))),A=async()=>{console.log("Recibiendo Datos :)"),n.loading.show({message:"Obteniendo Datos"});let l=d.session.store.id;const e=await C.index(l);e.error?console.log(e):(console.log(e),Q.value=e.output,w.value=e.warehouses,n.loading.hide())},N=async()=>{console.log(f.value),n.loading.show({message:"Obteniendo Datos"});let e={store:d.session.store.id,date:f.value};console.log("Recibiendo Datos :)");const a=await C.getDate(e);a.fail?console.log(a):(console.log(a),Q.value=a,n.loading.hide(),f.value=null)},I=async()=>{n.loading.show({message:"Creando Traspaso"}),i.value.created_by=d.session.name,i.value._store=d.session.store.id,console.log(i.value);const l=await C.addOuts(i.value);console.log(l),l.error?(console.log(l),n.notify({message:"No se logro crear el traspaso",position:"center",type:"negative"})):(n.loading.hide(),n.notify({message:`Salida ${l.code_fs} creada`,position:"center",type:"positive"}),x.push(`/outputs/${l.id}`))},R=()=>{p.value=!1,i.value={warehouse:null,notes:null}},$=l=>{x.push(`/outputs/${l.id}`)};return d.session.rol=="root"||d.session.rol=="aud"?A():(n.notify({message:"No tienes acceso a esta pagina",type:"negative",position:"center"}),x.replace("/")),(l,e)=>(g(),_(V,null,[t(W,{padding:""},{default:s(()=>[t(P,{class:"transparent text-dark",bordered:""},{default:s(()=>[t(ee),t(b),u("div",te,[u("div",null,[e[5]||(e[5]=o("Helpers ")),t(L,{name:"navigate_next",color:"primary"}),e[6]||(e[6]=o()),e[7]||(e[7]=u("span",{class:"text-h6"},"Salidas Internas",-1))]),u("div",null,[t(v,{color:"primary",icon:"add",flat:"",onClick:e[0]||(e[0]=a=>p.value=!p.value),round:""}),t(v,{color:"primary",icon:"event",flat:"",round:""},{default:s(()=>[t(F,null,{default:s(()=>[u("div",se,[e[8]||(e[8]=u("div",{class:"q-pb-sm"},null,-1)),t(q,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=a=>f.value=a),range:"",minimal:""},null,8,["modelValue"])]),u("div",ae,[t(v,{flat:"",label:"Obtener",color:"positive",onClick:N})])]),_:1})]),_:1})])]),t(b)]),_:1}),t(O,null,{default:s(()=>[t(k,null,{default:s(()=>[t(r,{class:"text-center"},{default:s(()=>e[9]||(e[9]=[o("ID")])),_:1}),t(r,{class:"text-center"},{default:s(()=>e[10]||(e[10]=[o("CREADO")])),_:1}),t(r,{class:"text-center"},{default:s(()=>e[11]||(e[11]=[o("CREADO POR")])),_:1}),t(r,{class:"text-center"},{default:s(()=>e[12]||(e[12]=[o("NOTAS")])),_:1}),t(r,{class:"text-center"},{default:s(()=>e[13]||(e[13]=[o("ALMACEN")])),_:1}),t(r,{class:"text-center"},{default:s(()=>e[14]||(e[14]=[o("FACTUSOL")])),_:1}),t(r,{class:"text-center"},{default:s(()=>e[15]||(e[15]=[o("ARTICULOS")])),_:1})]),_:1})]),_:1}),t(b,{spaced:"",inset:"",vertical:"",dark:""}),(g(!0),_(V,null,Y(Q.value,(a,B)=>(g(),D(O,{bordered:"",key:B},{default:s(()=>[E((g(),D(k,{clickable:"",onClick:le=>$(a)},{default:s(()=>[t(r,{class:"text-center"},{default:s(()=>[o(m(a.id),1)]),_:2},1024),t(r,{class:"text-center"},{default:s(()=>[o(m(M(h)(a.created_at).format("YYYY-MM-D")),1)]),_:2},1024),t(r,{class:"text-center"},{default:s(()=>[o(m(a.created_by),1)]),_:2},1024),t(r,{class:"text-center"},{default:s(()=>[o(m(a.notes),1)]),_:2},1024),t(r,{class:"text-center"},{default:s(()=>[o(m(a.warehouse.alias),1)]),_:2},1024),t(r,{class:"text-center"},{default:s(()=>[o(m(a.code_fs),1)]),_:2},1024),t(r,{class:"text-center"},{default:s(()=>[o(m(a.bodie.length),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[j]])]),_:2},1024))),128))]),_:1}),t(X,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=a=>p.value=a),persistent:""},{default:s(()=>[t(G,{style:{width:"700px","max-width":"80vw"}},{default:s(()=>[t(y,{class:"text-h5 text-bold text-center"},{default:s(()=>e[16]||(e[16]=[o(" Nuevo Traspaso ")])),_:1}),t(y,{class:"row items-center"},{default:s(()=>[t(H,{modelValue:i.value.warehouse,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value.warehouse=a),options:S.value,label:"Almacen Origen",class:"col","option-label":"name"},null,8,["modelValue","options"])]),_:1}),t(y,null,{default:s(()=>[t(J,{modelValue:i.value.notes,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value.notes=a),type:"text",label:"Notas"},null,8,["modelValue"])]),_:1}),t(K,{align:"center"},{default:s(()=>[t(v,{flat:"",label:"Cancelar",color:"negative",onClick:R}),t(v,{flat:"",label:"Crear",color:"positive",onClick:I})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{Ue as default};
