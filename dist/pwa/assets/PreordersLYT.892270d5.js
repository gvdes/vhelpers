import{b as j}from"./QList.f7f5790e.js";import{Q as x}from"./QHeader.837d3d4e.js";import{aH as O,a as B,u as S,p as V,m as $,a$ as b,o as m,d as c,w as a,e as t,a1 as f,f as _,ak as g,S as k,a0 as C,h as H}from"./index.23ed40e5.js";import{Q as L}from"./QToolbar.d27e3d25.js";import{Q as N,a as R}from"./QLayout.766693f0.js";import"./dayjs.min.cbcf888d.js";import"./axios.0cf78aef.js";import{o as U}from"./orderApi.a31c5814.js";import{u as q}from"./OrderStore.bd437ff7.js";import{u as D}from"./use-quasar.d562a212.js";import{_ as P}from"./UserToolbar.74db7445.js";import{$sktOrders as s}from"./socket.05630e21.js";import"./use-key-composition.56396776.js";import"./QResizeObserver.ee467e31.js";import"./QScrollObserver.57c2cf97.js";import"./_commonjsHelpers.88e99c8f.js";import"./QSelect.1458ebcb.js";import"./QExpansionItem.464d04ea.js";import"./QDrawer.4bb5041c.js";import"./QCardSection.107d8257.js";import"./QCardActions.90a04b5e.js";import"./QCard.d017204c.js";import"./ClosePopup.2a3b6a4f.js";import"./auth.b607ef03.js";const mo={__name:"PreordersLYT",setup(T){const w=new Audio("sounds/success01.mp3"),y=O();B();const r=q(),i=D(),n=S(),Q=o=>{switch(o){case 1:case 2:case 6:return"admins";case 8:return"sales";case 4:case 24:case 28:return"supply";default:return null}},d=o=>{console.log(o)},l=o=>{console.log(o)},u=o=>{console.log(o),r.addOrUpdate(o)},p=o=>{console.log(o),r.addOrUpdate(o),o.order._status==5&&y.path==="/preorders/warehouse"?(console.log("aqui suena"),w.play()):console.log("aqui no suena")},v=async()=>{i.loading.show({message:"Obteniendo datos"});let o={uid:n.session.credentials.staff.id_va,wid:n.session.store.id_viz,view:Q(n.session.credentials._rol)};console.log(o);const e=await U.getOrders(o);e.fail?console.log(e):(console.log(e),r.setOrders(e.orders),r.setPrinters(e.prints),r.setUnits(e.units),r.setRules(e.rules),i.loading.hide())};return V(async()=>{v(),s.connect(),s.emit("join",r.socket_user),s.on("joinedat",d),s.on("newjoin",l),s.on("order_add",u),s.on("order_update",p)}),$(()=>{s.off("joinedat",d),s.off("newjoin",l),s.off("order_add",u),s.off("order_update",p)}),(o,e)=>{const h=b("router-view");return m(),c(N,{view:"hHh Lpr fFf"},{default:a(()=>[t(x,{class:"transparent text-dark",bordered:""},{default:a(()=>[t(P),t(j)]),_:1}),t(R,null,{default:a(()=>[f(r).showLyt?(m(),c(L,{key:0,class:"justify-between"},{default:a(()=>[_("div",null,[e[0]||(e[0]=g("Helpers ")),t(k,{name:"navigate_next",color:"primary"}),g(" "+C(f(r).title)+" ",1),e[1]||(e[1]=_("span",{class:"text-h6"},null,-1))])]),_:1})):H("",!0),t(h)]),_:1})]),_:1})}}};export{mo as default};
