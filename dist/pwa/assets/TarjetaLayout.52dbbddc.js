import{Q as Qe}from"./position-engine.55969d85.js";import{c as S,aP as Ct,aQ as Bt,j as Zt,r as R,v as be,k as D,W as Te,l as Gt,m as Kt,aI as Jt,F as st,Q as H,o as je,a as Xt,w as E,e as v,i as q,a3 as G,U as ut,g as it,h as dt,a4 as te,a2 as ct,a5 as Wt}from"./index.e871c06b.js";import{a as Se,Q as ea}from"./axios.c4c6b87a.js";import{_ as ta,Q as aa,a as Ue,C as ft}from"./UserToolbar.06aba17b.js";import{d as la,j as na,i as oa,Q as ra}from"./QInput.4af100b5.js";import{Q as sa}from"./QTable.a905ffc0.js";import{Q as ua}from"./QSpinnerFacebook.10b6bf6e.js";import{Q as ia}from"./QTooltip.383fe3e5.js";import{Q as De}from"./QDialog.ea18b190.js";import{u as da,e as ca,Q as fa,a as Ae,b as ae,c as va}from"./QLayout.6b51210b.js";import{Q as vt,a as le}from"./QItem.85c31878.js";import{Q as ma}from"./QList.31464e4b.js";import{p as O,Q as mt}from"./QSelect.d37feafa.js";import{Q as ha}from"./QForm.aea8fcb5.js";import{u as ga}from"./use-cache.b0833c75.js";import{Q as _a}from"./QPage.a0eca060.js";import{u as ya}from"./VDB.8b0e412c.js";import{e as pa,E as ht,a as gt}from"./jspdf.plugin.autotable.85f413b4.js";import{u as xa}from"./use-quasar.60027603.js";import{a as ba}from"./axios.29ec2854.js";import"./QLinearProgress.e7e51e8b.js";import"./QCheckbox.bd437502.js";import"./_commonjsHelpers.88e99c8f.js";const de=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ta(e,o,i){return Object.prototype.toString.call(e)==="[object Date]"&&(i=e.getDate(),o=e.getMonth()+1,e=e.getFullYear()),Ma(Ze(e,o,i))}function _t(e,o,i){return Mt(Ea(e,o,i))}function Da(e){return Ca(e)===0}function we(e,o){return o<=6?31:o<=11||Da(e)?30:29}function Ca(e){const o=de.length;let i=de[0],d,g,r,C,u;if(e<i||e>=de[o-1])throw new Error("Invalid Jalaali year "+e);for(u=1;u<o&&(d=de[u],g=d-i,!(e<d));u+=1)i=d;return C=e-i,g-C<6&&(C=C-g+V(g+4,33)*33),r=K(K(C+1,33)-1,4),r===-1&&(r=4),r}function Et(e,o){const i=de.length,d=e+621;let g=-14,r=de[0],C,u,m,N,h;if(e<r||e>=de[i-1])throw new Error("Invalid Jalaali year "+e);for(h=1;h<i&&(C=de[h],u=C-r,!(e<C));h+=1)g=g+V(u,33)*8+V(K(u,33),4),r=C;N=e-r,g=g+V(N,33)*8+V(K(N,33)+3,4),K(u,33)===4&&u-N===4&&(g+=1);const I=V(d,4)-V((V(d,100)+1)*3,4)-150,F=20+g-I;return o||(u-N<6&&(N=N-u+V(u+4,33)*33),m=K(K(N+1,33)-1,4),m===-1&&(m=4)),{leap:m,gy:d,march:F}}function Ea(e,o,i){const d=Et(e,!0);return Ze(d.gy,3,d.march)+(o-1)*31-V(o,7)*(o-7)+i-1}function Ma(e){const o=Mt(e).gy;let i=o-621,d,g,r;const C=Et(i,!1),u=Ze(o,3,C.march);if(r=e-u,r>=0){if(r<=185)return g=1+V(r,31),d=K(r,31)+1,{jy:i,jm:g,jd:d};r-=186}else i-=1,r+=179,C.leap===1&&(r+=1);return g=7+V(r,30),d=K(r,30)+1,{jy:i,jm:g,jd:d}}function Ze(e,o,i){let d=V((e+V(o-8,6)+100100)*1461,4)+V(153*K(o+9,12)+2,5)+i-34840408;return d=d-V(V(e+100100+V(o-8,6),100)*3,4)+752,d}function Mt(e){let o=4*e+139361631;o=o+V(V(4*e+183187720,146097)*3,4)*4-3908;const i=V(K(o,1461),4)*5+308,d=V(K(i,153),5)+1,g=K(V(i,153),12)+1;return{gy:V(o,1461)-100100+V(8-g,6),gm:g,gd:d}}function V(e,o){return~~(e/o)}function K(e,o){return e-~~(e/o)*o}const Ia=["gregorian","persian"],Sa={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ia.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Aa=["update:modelValue"];function ue(e){return e.year+"/"+O(e.month)+"/"+O(e.day)}function Oa(e,o){const i=S(()=>e.disable!==!0&&e.readonly!==!0),d=S(()=>i.value===!0?0:-1),g=S(()=>{const u=[];return e.color!==void 0&&u.push(`bg-${e.color}`),e.textColor!==void 0&&u.push(`text-${e.textColor}`),u.join(" ")});function r(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function C(u){const m=new Date,N=u===!0?null:0;if(e.calendar==="persian"){const h=Ta(m);return{year:h.jy,month:h.jm,day:h.jd}}return{year:m.getFullYear(),month:m.getMonth()+1,day:m.getDate(),hour:N,minute:N,second:N,millisecond:N}}return{editable:i,tabindex:d,headerClass:g,getLocale:r,getCurrentDate:C}}const It=864e5,wa=36e5,Be=6e4,St="YYYY-MM-DDTHH:mm:ss.SSSZ",Va=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Na=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,ke={};function Fa(e,o){const i="("+o.days.join("|")+")",d=e+i;if(ke[d]!==void 0)return ke[d];const g="("+o.daysShort.join("|")+")",r="("+o.months.join("|")+")",C="("+o.monthsShort.join("|")+")",u={};let m=0;const N=e.replace(Na,I=>{switch(m++,I){case"YY":return u.YY=m,"(-?\\d{1,2})";case"YYYY":return u.YYYY=m,"(-?\\d{1,4})";case"M":return u.M=m,"(\\d{1,2})";case"MM":return u.M=m,"(\\d{2})";case"MMM":return u.MMM=m,C;case"MMMM":return u.MMMM=m,r;case"D":return u.D=m,"(\\d{1,2})";case"Do":return u.D=m++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return u.D=m,"(\\d{2})";case"H":return u.H=m,"(\\d{1,2})";case"HH":return u.H=m,"(\\d{2})";case"h":return u.h=m,"(\\d{1,2})";case"hh":return u.h=m,"(\\d{2})";case"m":return u.m=m,"(\\d{1,2})";case"mm":return u.m=m,"(\\d{2})";case"s":return u.s=m,"(\\d{1,2})";case"ss":return u.s=m,"(\\d{2})";case"S":return u.S=m,"(\\d{1})";case"SS":return u.S=m,"(\\d{2})";case"SSS":return u.S=m,"(\\d{3})";case"A":return u.A=m,"(AM|PM)";case"a":return u.a=m,"(am|pm)";case"aa":return u.aa=m,"(a\\.m\\.|p\\.m\\.)";case"ddd":return g;case"dddd":return i;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return u.Z=m,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return u.ZZ=m,"(Z|[+-]\\d{2}\\d{2})";case"X":return u.X=m,"(-?\\d+)";case"x":return u.x=m,"(-?\\d{4,})";default:return m--,I[0]==="["&&(I=I.substring(1,I.length-1)),I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),h={map:u,regex:new RegExp("^"+N)};return ke[d]=h,h}function At(e,o){return e!==void 0?e:o!==void 0?o.date:Bt.date}function yt(e,o=""){const i=e>0?"-":"+",d=Math.abs(e),g=Math.floor(d/60),r=d%60;return i+O(g)+o+O(r)}function Ya(e,o,i,d,g){const r={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(g!==void 0&&Object.assign(r,g),e==null||e===""||typeof e!="string")return r;o===void 0&&(o=St);const C=At(i,Ct.props),u=C.months,m=C.monthsShort,{regex:N,map:h}=Fa(o,C),I=e.match(N);if(I===null)return r;let F="";if(h.X!==void 0||h.x!==void 0){const z=parseInt(I[h.X!==void 0?h.X:h.x],10);if(isNaN(z)===!0||z<0)return r;const B=new Date(z*(h.X!==void 0?1e3:1));r.year=B.getFullYear(),r.month=B.getMonth()+1,r.day=B.getDate(),r.hour=B.getHours(),r.minute=B.getMinutes(),r.second=B.getSeconds(),r.millisecond=B.getMilliseconds()}else{if(h.YYYY!==void 0)r.year=parseInt(I[h.YYYY],10);else if(h.YY!==void 0){const z=parseInt(I[h.YY],10);r.year=z<0?z:2e3+z}if(h.M!==void 0){if(r.month=parseInt(I[h.M],10),r.month<1||r.month>12)return r}else h.MMM!==void 0?r.month=m.indexOf(I[h.MMM])+1:h.MMMM!==void 0&&(r.month=u.indexOf(I[h.MMMM])+1);if(h.D!==void 0){if(r.day=parseInt(I[h.D],10),r.year===null||r.month===null||r.day<1)return r;const z=d!=="persian"?new Date(r.year,r.month,0).getDate():we(r.year,r.month);if(r.day>z)return r}h.H!==void 0?r.hour=parseInt(I[h.H],10)%24:h.h!==void 0&&(r.hour=parseInt(I[h.h],10)%12,(h.A&&I[h.A]==="PM"||h.a&&I[h.a]==="pm"||h.aa&&I[h.aa]==="p.m.")&&(r.hour+=12),r.hour=r.hour%24),h.m!==void 0&&(r.minute=parseInt(I[h.m],10)%60),h.s!==void 0&&(r.second=parseInt(I[h.s],10)%60),h.S!==void 0&&(r.millisecond=parseInt(I[h.S],10)*10**(3-I[h.S].length)),(h.Z!==void 0||h.ZZ!==void 0)&&(F=h.Z!==void 0?I[h.Z].replace(":",""):I[h.ZZ],r.timezoneOffset=(F[0]==="+"?-1:1)*(60*F.slice(1,3)+1*F.slice(3,5)))}return r.dateHash=O(r.year,6)+"/"+O(r.month)+"/"+O(r.day),r.timeHash=O(r.hour)+":"+O(r.minute)+":"+O(r.second)+F,r}function pt(e){const o=new Date(e.getFullYear(),e.getMonth(),e.getDate());o.setDate(o.getDate()-(o.getDay()+6)%7+3);const i=new Date(o.getFullYear(),0,4);i.setDate(i.getDate()-(i.getDay()+6)%7+3);const d=o.getTimezoneOffset()-i.getTimezoneOffset();o.setHours(o.getHours()-d);const g=(o-i)/(It*7);return 1+Math.floor(g)}function oe(e,o,i){const d=new Date(e),g=`set${i===!0?"UTC":""}`;switch(o){case"year":case"years":d[`${g}Month`](0);case"month":case"months":d[`${g}Date`](1);case"day":case"days":case"date":d[`${g}Hours`](0);case"hour":case"hours":d[`${g}Minutes`](0);case"minute":case"minutes":d[`${g}Seconds`](0);case"second":case"seconds":d[`${g}Milliseconds`](0)}return d}function Oe(e,o,i){return(e.getTime()-e.getTimezoneOffset()*Be-(o.getTime()-o.getTimezoneOffset()*Be))/i}function Ot(e,o,i="days"){const d=new Date(e),g=new Date(o);switch(i){case"years":case"year":return d.getFullYear()-g.getFullYear();case"months":case"month":return(d.getFullYear()-g.getFullYear())*12+d.getMonth()-g.getMonth();case"days":case"day":case"date":return Oe(oe(d,"day"),oe(g,"day"),It);case"hours":case"hour":return Oe(oe(d,"hour"),oe(g,"hour"),wa);case"minutes":case"minute":return Oe(oe(d,"minute"),oe(g,"minute"),Be);case"seconds":case"second":return Oe(oe(d,"second"),oe(g,"second"),1e3)}}function xt(e){return Ot(e,oe(e,"year"),"days")+1}function bt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Tt={YY(e,o,i){const d=this.YYYY(e,o,i)%100;return d>=0?O(d):"-"+O(Math.abs(d))},YYYY(e,o,i){return i!=null?i:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return O(e.getMonth()+1)},MMM(e,o){return o.monthsShort[e.getMonth()]},MMMM(e,o){return o.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return bt(this.Q(e))},D(e){return e.getDate()},Do(e){return bt(e.getDate())},DD(e){return O(e.getDate())},DDD(e){return xt(e)},DDDD(e){return O(xt(e),3)},d(e){return e.getDay()},dd(e,o){return this.dddd(e,o).slice(0,2)},ddd(e,o){return o.daysShort[e.getDay()]},dddd(e,o){return o.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return pt(e)},ww(e){return O(pt(e))},H(e){return e.getHours()},HH(e){return O(e.getHours())},h(e){const o=e.getHours();return o===0?12:o>12?o%12:o},hh(e){return O(this.h(e))},m(e){return e.getMinutes()},mm(e){return O(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return O(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return O(Math.floor(e.getMilliseconds()/10))},SSS(e){return O(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,o,i,d){const g=d==null?e.getTimezoneOffset():d;return yt(g,":")},ZZ(e,o,i,d){const g=d==null?e.getTimezoneOffset():d;return yt(g)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Ha(e,o,i,d,g){if(e!==0&&!e||e===1/0||e===-1/0)return;const r=new Date(e);if(isNaN(r))return;o===void 0&&(o=St);const C=At(i,Ct.props);return o.replace(Va,(u,m)=>u in Tt?Tt[u](r,C,d,g):m===void 0?u:m.split("\\]").join("]"))}const fe=20,Ra=["Calendar","Years","Months"],Dt=e=>Ra.includes(e),ze=e=>/^-?[\d]+\/[0-1]\d$/.test(e),_e=" \u2014 ";function ie(e){return e.year+"/"+O(e.month)}var Pa=Zt({name:"QDate",props:{...Sa,...la,...da,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ze},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ze},navigationMaxYearMonth:{type:String,validator:ze},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Dt}},emits:[...Aa,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:i}){const{proxy:d}=Kt(),{$q:g}=d,r=ca(e,g),{getCache:C}=ga(),{tabindex:u,headerClass:m,getLocale:N,getCurrentDate:h}=Oa(e,g);let I;const F=na(e),z=oa(F),B=R(null),ne=R(et()),Y=R(N()),Ve=S(()=>et()),Ne=S(()=>N()),X=S(()=>h()),b=R(tt(ne.value,Y.value)),Q=R(e.defaultView),Ce=g.lang.rtl===!0?"right":"left",ve=R(Ce.value),s=R(Ce.value),_=b.value.year,p=R(_-_%fe-(_<0?fe:0)),x=R(null),$=S(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(r.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),T=S(()=>e.color||"primary"),n=S(()=>e.textColor||"white"),W=S(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),P=S(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),Z=S(()=>P.value.filter(t=>typeof t=="string").map(t=>Re(t,ne.value,Y.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ee=S(()=>{const t=a=>Re(a,ne.value,Y.value);return P.value.filter(a=>Jt(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),L=S(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=_t(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),me=S(()=>e.calendar==="persian"?ue:(t,a,l)=>Ha(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?ne.value:a,l===void 0?Y.value:l,t.year,t.timezoneOffset)),re=S(()=>Z.value.length+ee.value.reduce((t,a)=>t+1+Ot(L.value(a.to),L.value(a.from)),0)),ye=S(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(x.value!==null){const l=x.value.init,f=L.value(l);return Y.value.daysShort[f.getDay()]+", "+Y.value.monthsShort[l.month-1]+" "+l.day+_e+"?"}if(re.value===0)return _e;if(re.value>1)return`${re.value} ${Y.value.pluralDay}`;const t=Z.value[0],a=L.value(t);return isNaN(a.valueOf())===!0?_e:Y.value.headerTitle!==void 0?Y.value.headerTitle(a,t):Y.value.daysShort[a.getDay()]+", "+Y.value.monthsShort[t.month-1]+" "+t.day}),Fe=S(()=>Z.value.concat(ee.value.map(a=>a.from)).sort((a,l)=>a.year-l.year||a.month-l.month)[0]),j=S(()=>Z.value.concat(ee.value.map(a=>a.to)).sort((a,l)=>l.year-a.year||l.month-a.month)[0]),Ge=S(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(re.value===0)return _e;if(re.value>1){const t=Fe.value,a=j.value,l=Y.value.monthsShort;return l[t.month-1]+(t.year!==a.year?" "+t.year+_e+l[a.month-1]+" ":t.month!==a.month?_e+l[a.month-1]:"")+" "+a.year}return Z.value[0].year}),Ee=S(()=>{const t=[g.iconSet.datetime.arrowLeft,g.iconSet.datetime.arrowRight];return g.lang.rtl===!0?t.reverse():t}),Ke=S(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):Y.value.firstDayOfWeek),wt=S(()=>{const t=Y.value.daysShort,a=Ke.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),se=S(()=>{const t=b.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():we(t.year,t.month)}),Vt=S(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),U=S(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),k=S(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ye=S(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return U.value!==null&&U.value.year>=b.value.year&&(t.year.prev=!1,U.value.year===b.value.year&&U.value.month>=b.value.month&&(t.month.prev=!1)),k.value!==null&&k.value.year<=b.value.year&&(t.year.next=!1,k.value.year===b.value.year&&k.value.month<=b.value.month&&(t.month.next=!1)),t}),Me=S(()=>{const t={};return Z.value.forEach(a=>{const l=ie(a);t[l]===void 0&&(t[l]=[]),t[l].push(a.day)}),t}),Je=S(()=>{const t={};return ee.value.forEach(a=>{const l=ie(a.from),f=ie(a.to);if(t[l]===void 0&&(t[l]=[]),t[l].push({from:a.from.day,to:l===f?a.to.day:void 0,range:a}),l<f){let c;const{year:A,month:y}=a.from,M=y<12?{year:A,month:y+1}:{year:A+1,month:1};for(;(c=ie(M))<=f;)t[c]===void 0&&(t[c]=[]),t[c].push({from:void 0,to:c===f?a.to.day:void 0,range:a}),M.month++,M.month>12&&(M.year++,M.month=1)}}),t}),pe=S(()=>{if(x.value===null)return;const{init:t,initHash:a,final:l,finalHash:f}=x.value,[c,A]=a<=f?[t,l]:[l,t],y=ie(c),M=ie(A);if(y!==J.value&&M!==J.value)return;const w={};return y===J.value?(w.from=c.day,w.includeFrom=!0):w.from=1,M===J.value?(w.to=A.day,w.includeTo=!0):w.to=se.value,w}),J=S(()=>ie(b.value)),Nt=S(()=>{const t={};if(e.options===void 0){for(let l=1;l<=se.value;l++)t[l]=!0;return t}const a=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=se.value;l++){const f=J.value+"/"+O(l);t[l]=a(f)}return t}),Ft=S(()=>{const t={};if(e.events===void 0)for(let a=1;a<=se.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=se.value;l++){const f=J.value+"/"+O(l);t[l]=a(f)===!0&&Vt.value(f)}}return t}),Yt=S(()=>{let t,a;const{year:l,month:f}=b.value;if(e.calendar!=="persian")t=new Date(l,f-1,1),a=new Date(l,f-1,0).getDate();else{const c=_t(l,f,1);t=new Date(c.gy,c.gm-1,c.gd);let A=f-1,y=l;A===0&&(A=12,y--),a=we(y,A)}return{days:t.getDay()-Ke.value-1,endDay:a}}),Xe=S(()=>{const t=[],{days:a,endDay:l}=Yt.value,f=a<0?a+7:a;if(f<6)for(let y=l-f;y<=l;y++)t.push({i:y,fill:!0});const c=t.length;for(let y=1;y<=se.value;y++){const M={i:y,event:Ft.value[y],classes:[]};Nt.value[y]===!0&&(M.in=!0,M.flat=!0),t.push(M)}if(Me.value[J.value]!==void 0&&Me.value[J.value].forEach(y=>{const M=c+y-1;Object.assign(t[M],{selected:!0,unelevated:!0,flat:!1,color:T.value,textColor:n.value})}),Je.value[J.value]!==void 0&&Je.value[J.value].forEach(y=>{if(y.from!==void 0){const M=c+y.from-1,w=c+(y.to||se.value)-1;for(let xe=M;xe<=w;xe++)Object.assign(t[xe],{range:y.range,unelevated:!0,color:T.value,textColor:n.value});Object.assign(t[M],{rangeFrom:!0,flat:!1}),y.to!==void 0&&Object.assign(t[w],{rangeTo:!0,flat:!1})}else if(y.to!==void 0){const M=c+y.to-1;for(let w=c;w<=M;w++)Object.assign(t[w],{range:y.range,unelevated:!0,color:T.value,textColor:n.value});Object.assign(t[M],{flat:!1,rangeTo:!0})}else{const M=c+se.value-1;for(let w=c;w<=M;w++)Object.assign(t[w],{range:y.range,unelevated:!0,color:T.value,textColor:n.value})}}),pe.value!==void 0){const y=c+pe.value.from-1,M=c+pe.value.to-1;for(let w=y;w<=M;w++)t[w].color=T.value,t[w].editRange=!0;pe.value.includeFrom===!0&&(t[y].editRangeFrom=!0),pe.value.includeTo===!0&&(t[M].editRangeTo=!0)}b.value.year===X.value.year&&b.value.month===X.value.month&&(t[c+X.value.day-1].today=!0);const A=t.length%7;if(A>0){const y=7-A;for(let M=1;M<=y;M++)t.push({i:M,fill:!0})}return t.forEach(y=>{let M="q-date__calendar-item ";y.fill===!0?M+="q-date__calendar-item--fill":(M+=`q-date__calendar-item--${y.in===!0?"in":"out"}`,y.range!==void 0&&(M+=` q-date__range${y.rangeTo===!0?"-to":y.rangeFrom===!0?"-from":""}`),y.editRange===!0&&(M+=` q-date__edit-range${y.editRangeFrom===!0?"-from":""}${y.editRangeTo===!0?"-to":""}`),(y.range!==void 0||y.editRange===!0)&&(M+=` text-${y.color}`)),y.classes=M}),t}),Ht=S(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});be(()=>e.modelValue,t=>{if(I===t)I=0;else{const a=tt(ne.value,Y.value);he(a.year,a.month,a)}}),be(Q,()=>{B.value!==null&&d.$el.contains(document.activeElement)===!0&&B.value.focus()}),be(()=>b.value.year+"|"+b.value.month,()=>{i("navigation",{year:b.value.year,month:b.value.month})}),be(Ve,t=>{rt(t,Y.value,"mask"),ne.value=t}),be(Ne,t=>{rt(ne.value,t,"locale"),Y.value=t});function We(){const t=X.value,a=Me.value[ie(t)];(a===void 0||a.includes(t.day)===!1)&&Le(t),He(t.year,t.month)}function Rt(t){Dt(t)===!0&&(Q.value=t)}function Pt(t,a){["month","year"].includes(t)&&(t==="month"?lt:Pe)(a===!0?-1:1)}function He(t,a){Q.value="Calendar",he(t,a)}function Lt(t,a){if(e.range===!1||!t){x.value=null;return}const l=Object.assign({...b.value},t),f=a!==void 0?Object.assign({...b.value},a):l;x.value={init:l,initHash:ue(l),final:f,finalHash:ue(f)},He(l.year,l.month)}function et(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Re(t,a,l){return Ya(t,a,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function tt(t,a){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return at();const f=l[l.length-1],c=Re(f.from!==void 0?f.from:f,t,a);return c.dateHash===null?at():c}function at(){let t,a;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");t=parseInt(l[0],10),a=parseInt(l[1],10)}else{const l=X.value!==void 0?X.value:h();t=l.year,a=l.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+O(a)+"/01"}}function lt(t){let a=b.value.year,l=Number(b.value.month)+t;l===13?(l=1,a++):l===0&&(l=12,a--),he(a,l),W.value===!0&&Ie("month")}function Pe(t){const a=Number(b.value.year)+t;he(a,b.value.month),W.value===!0&&Ie("year")}function $t(t){he(t,b.value.month),Q.value=e.defaultView==="Years"?"Months":"Calendar",W.value===!0&&Ie("year")}function qt(t){he(b.value.year,t),Q.value="Calendar",W.value===!0&&Ie("month")}function Qt(t,a){const l=Me.value[a];(l!==void 0&&l.includes(t.day)===!0?$e:Le)(t)}function ce(t){return{year:t.year,month:t.month,day:t.day}}function he(t,a,l){if(U.value!==null&&t<=U.value.year&&(t=U.value.year,a<U.value.month&&(a=U.value.month)),k.value!==null&&t>=k.value.year&&(t=k.value.year,a>k.value.month&&(a=k.value.month)),l!==void 0){const{hour:c,minute:A,second:y,millisecond:M,timezoneOffset:w,timeHash:xe}=l;Object.assign(b.value,{hour:c,minute:A,second:y,millisecond:M,timezoneOffset:w,timeHash:xe})}const f=t+"/"+O(a)+"/01";f!==b.value.dateHash&&(ve.value=b.value.dateHash<f==(g.lang.rtl!==!0)?"left":"right",t!==b.value.year&&(s.value=ve.value),st(()=>{p.value=t-t%fe-(t<0?fe:0),Object.assign(b.value,{year:t,month:a,day:1,dateHash:f})}))}function nt(t,a,l){const f=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;I=f;const{reason:c,details:A}=ot(a,l);i("update:modelValue",f,c,A)}function Ie(t){const a=Z.value[0]!==void 0&&Z.value[0].dateHash!==null?{...Z.value[0]}:{...b.value};st(()=>{a.year=b.value.year,a.month=b.value.month;const l=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():we(a.year,a.month);a.day=Math.min(Math.max(1,a.day),l);const f=ge(a);I=f;const{details:c}=ot("",a);i("update:modelValue",f,t,c)})}function ot(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ce(a.target),from:ce(a.from),to:ce(a.to)}}:{reason:`${t}-day`,details:ce(a)}}function ge(t,a,l){return t.from!==void 0?{from:me.value(t.from,a,l),to:me.value(t.to,a,l)}:me.value(t,a,l)}function Le(t){let a;if(e.multiple===!0)if(t.from!==void 0){const l=ue(t.from),f=ue(t.to),c=Z.value.filter(y=>y.dateHash<l||y.dateHash>f),A=ee.value.filter(({from:y,to:M})=>M.dateHash<l||y.dateHash>f);a=c.concat(A).concat(t).map(y=>ge(y))}else{const l=P.value.slice();l.push(ge(t)),a=l}else a=ge(t);nt(a,"add",t)}function $e(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=ge(t);t.from!==void 0?a=e.modelValue.filter(f=>f.from!==void 0?f.from!==l.from&&f.to!==l.to:!0):a=e.modelValue.filter(f=>f!==l),a.length===0&&(a=null)}nt(a,"remove",t)}function rt(t,a,l){const f=Z.value.concat(ee.value).map(c=>ge(c,t,a)).filter(c=>c.from!==void 0?c.from.dateHash!==null&&c.to.dateHash!==null:c.dateHash!==null);i("update:modelValue",(e.multiple===!0?f:f[0])||null,l)}function jt(){if(e.minimal!==!0)return D("div",{class:"q-date__header "+m.value},[D("div",{class:"relative-position"},[D(Te,{name:"q-transition--fade"},()=>D("div",{key:"h-yr-"+Ge.value,class:"q-date__header-subtitle q-date__header-link "+(Q.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:u.value,...C("vY",{onClick(){Q.value="Years"},onKeyup(t){t.keyCode===13&&(Q.value="Years")}})},[Ge.value]))]),D("div",{class:"q-date__header-title relative-position flex no-wrap"},[D("div",{class:"relative-position col"},[D(Te,{name:"q-transition--fade"},()=>D("div",{key:"h-sub"+ye.value,class:"q-date__header-title-label q-date__header-link "+(Q.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:u.value,...C("vC",{onClick(){Q.value="Calendar"},onKeyup(t){t.keyCode===13&&(Q.value="Calendar")}})},[ye.value]))]),e.todayBtn===!0?D(H,{class:"q-date__header-today self-start",icon:g.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:u.value,onClick:We}):null])])}function qe({label:t,type:a,key:l,dir:f,goTo:c,boundaries:A,cls:y}){return[D("div",{class:"row items-center q-date__arrow"},[D(H,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ee.value[0],tabindex:u.value,disable:A.prev===!1,...C("go-#"+a,{onClick(){c(-1)}})})]),D("div",{class:"relative-position overflow-hidden flex flex-center"+y},[D(Te,{name:"q-transition--jump-"+f},()=>D("div",{key:l},[D(H,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:u.value,...C("view#"+a,{onClick:()=>{Q.value=a}})})]))]),D("div",{class:"row items-center q-date__arrow"},[D(H,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ee.value[1],tabindex:u.value,disable:A.next===!1,...C("go+#"+a,{onClick(){c(1)}})})])]}const Ut={Calendar:()=>[D("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[D("div",{class:"q-date__navigation row items-center no-wrap"},qe({label:Y.value.months[b.value.month-1],type:"Months",key:b.value.month,dir:ve.value,goTo:lt,boundaries:Ye.value.month,cls:" col"}).concat(qe({label:b.value.year,type:"Years",key:b.value.year,dir:s.value,goTo:Pe,boundaries:Ye.value.year,cls:""}))),D("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},wt.value.map(t=>D("div",{class:"q-date__calendar-item"},[D("div",t)]))),D("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[D(Te,{name:"q-transition--slide-"+ve.value},()=>D("div",{key:J.value,class:"q-date__calendar-days fit"},Xe.value.map(t=>D("div",{class:t.classes},[t.in===!0?D(H,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:u.value,...C("day#"+t.i,{onClick:()=>{kt(t.i)},onMouseover:()=>{zt(t.i)}})},t.event!==!1?()=>D("div",{class:"q-date__event bg-"+t.event}):null):D("div",""+t.i)]))))])])],Months(){const t=b.value.year===X.value.year,a=f=>U.value!==null&&b.value.year===U.value.year&&U.value.month>f||k.value!==null&&b.value.year===k.value.year&&k.value.month<f,l=Y.value.monthsShort.map((f,c)=>{const A=b.value.month===c+1;return D("div",{class:"q-date__months-item flex flex-center"},[D(H,{class:t===!0&&X.value.month===c+1?"q-date__today":null,flat:A!==!0,label:f,unelevated:A,color:A===!0?T.value:null,textColor:A===!0?n.value:null,tabindex:u.value,disable:a(c+1),...C("month#"+c,{onClick:()=>{qt(c+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(D("div",{class:"row no-wrap full-width"},[qe({label:b.value.year,type:"Years",key:b.value.year,dir:s.value,goTo:Pe,boundaries:Ye.value.year,cls:" col"})])),D("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const t=p.value,a=t+fe,l=[],f=c=>U.value!==null&&U.value.year>c||k.value!==null&&k.value.year<c;for(let c=t;c<=a;c++){const A=b.value.year===c;l.push(D("div",{class:"q-date__years-item flex flex-center"},[D(H,{key:"yr"+c,class:X.value.year===c?"q-date__today":null,flat:!A,label:c,dense:!0,unelevated:A,color:A===!0?T.value:null,textColor:A===!0?n.value:null,tabindex:u.value,disable:f(c),...C("yr#"+c,{onClick:()=>{$t(c)}})})]))}return D("div",{class:"q-date__view q-date__years flex flex-center"},[D("div",{class:"col-auto"},[D(H,{round:!0,dense:!0,flat:!0,icon:Ee.value[0],tabindex:u.value,disable:f(t),...C("y-",{onClick:()=>{p.value-=fe}})})]),D("div",{class:"q-date__years-content col self-stretch row items-center"},l),D("div",{class:"col-auto"},[D(H,{round:!0,dense:!0,flat:!0,icon:Ee.value[1],tabindex:u.value,disable:f(a),...C("y+",{onClick:()=>{p.value+=fe}})})])])}};function kt(t){const a={...b.value,day:t};if(e.range===!1){Qt(a,J.value);return}if(x.value===null){const l=Xe.value.find(c=>c.fill!==!0&&c.i===t);if(e.noUnset!==!0&&l.range!==void 0){$e({target:a,from:l.range.from,to:l.range.to});return}if(l.selected===!0){$e(a);return}const f=ue(a);x.value={init:a,initHash:f,final:a,finalHash:f},i("rangeStart",ce(a))}else{const l=x.value.initHash,f=ue(a),c=l<=f?{from:x.value.init,to:a}:{from:a,to:x.value.init};x.value=null,Le(l===f?a:{target:a,...c}),i("rangeEnd",{from:ce(c.from),to:ce(c.to)})}}function zt(t){if(x.value!==null){const a={...b.value,day:t};Object.assign(x.value,{final:a,finalHash:ue(a)})}}return Object.assign(d,{setToday:We,setView:Rt,offsetCalendar:Pt,setCalendarTo:He,setEditingRange:Lt}),()=>{const t=[D("div",{class:"q-date__content col relative-position"},[D(Te,{name:"q-transition--fade"},Ut[Q.value])])],a=Gt(o.default);return a!==void 0&&t.push(D("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&z(t,"push"),D("div",{class:$.value,...Ht.value},[jt(),D("div",{ref:B,class:"q-date__main col column",tabindex:-1},t)])}}});const La=q("span",{class:"text-h6"},"Consulta de Pagos",-1),$a={class:"justify-end"},qa={key:0},Qa={class:"row"},ja={class:"col"},Ua={class:"col"},ka={key:0},za={class:"text-h4"},Ba={class:"text-subtitle2"},Za={class:"text-h5"},Ga={class:"text-h5 text-center"},Ka={class:"text-h5 text-center"},Ja=q("div",{class:"text-h6 text-center"},"Impresora",-1),Xa={class:"q-pa-md"},Wa=q("div",{class:"q-pb-sm"},null,-1),el=q("span",{class:"text-bold text-h6"},"Selecciona el Formato \u{1F60A}",-1),Cl={__name:"TarjetaLayout",setup(e){const o=ya(),i=xa(),d=[{name:"terminal",label:"TERMINAL",align:"center",field:s=>s.TERMINAL},{name:"ticket",label:"TICKET",align:"center",field:s=>s.TICKET},{name:"cliente",label:"CLIENTE",align:"center",field:s=>s.CLIENTE},{name:"fecha",label:"FECHA",align:"center",field:s=>s.FECHA},{name:"hora",label:"HORA",align:"center",field:s=>s.HORA},{name:"efectivo",label:"EFECTIVO",align:"center",field:s=>s.EFECTIVO},{name:"tarjetas",label:"TARJETAS",align:"center",field:s=>s.TARJETAS},{name:"transferencias",label:"TRANSFERENCIAS",align:"center",field:s=>s.TRANSFERENCIAS},{name:"creditos",label:"CREDITOS",align:"center",field:s=>s.CREDITOS},{name:"vales",label:"VALES",align:"center",field:s=>s.VALES}],g=R({val:null,body:null}),r=R({state:!1,val:null,body:null}),C=R({val:null,filter:null,state:!1,body:null}),u=R(!1),m=R({state:!1,body:null}),N=R(!1),h=R(!1),I=R(null),F=R({state:!1,val:null,opts:[{id:1,label:"Factura"},{id:2,label:"Ticket"}]}),z=()=>{let s=m.value.body.TICKET.split("-"),_={type:"Reimpresion",serie:s[0],folio:s[1],print:r.value.val.ip_address};N.value=!0;let x=`http://${o.session.store.ip}/access/public/modify/newmod`;Se.post(x,_).then($=>{console.log($),N.value=!1,r.value.val=null,r.value.state=!1}).catch($=>$)},B=async()=>{console.log("Recibiendo Datos :)"),u.value=!0;let _=`http://${o.session.store.ip}/access/public/reports/getCash`;Se.get(_).then(p=>{g.value.body=p.data.terminales,C.value.body=p.data.formaspagos,console.log(p.data),C.value.state=!0,u.value=!1,console.log("ya lo recibi que no te enganen :)"),ne()}).catch(p=>console.log(p))},ne=async()=>{let s=o.session.store.id;console.log(s);try{let _=await ba.get(`/cashier/getPrinters/${s}`);_.status==200&&(r.value.body=_.data,console.log("Impresoras listas :)"))}catch(_){console.log(_),i.notify({message:"No se pudiron obtener las impresoras",type:"negative",position:"center",icon:"error"})}},Y=(s,_,p)=>{let x=_!==void 0?_(s,p):s;return x=x==null?"":String(x),x=x.split('"').join('""'),/^\d{1,2}-\d{4}$/.test(x)&&(x=`'${x}`),`"${x}"`},Ve=()=>{const s=[d.map(p=>Y(p.label))].concat(C.value.body.map(p=>d.map(x=>Y(typeof x.field=="function"?x.field(p):p[x.field===void 0?x.name:x.field],x.format,p)).join(","))).join(`\r
`);pa("reporteCobros.csv",s,"text/csv")!==!0?i.notify({message:"Browser denied file download...",color:"negative",icon:"warning"}):i.notify({message:"Descarga Completa :)",color:"positive",icon:"check",position:"center"})},Ne=()=>{console.log(I.value);let s={filt:I.value};console.log("Recibiendo Datos :)"),u.value=!0;let p=`http://${o.session.store.ip}/access/public/reports/filter`;Se.post(p,s).then(x=>{C.value.body=x.data.formaspagos,C.value.state=!0,u.value=!1,h.value=!1,console.log("ya lo recibi que no te enganen :)")}).catch(x=>console.log(x))},X=(s,_)=>{console.log("aqui se podra reimprimir"),console.log(_.TICKET),m.value.state=!0,m.value.body=_},b=()=>{i.loading.show({message:"Importando Ticket"});let s=o.session.store.ip,_=m.value.body.TICKET;const p=`http://${s}/access/public/modify/getTicket/${_}`;Se.get(p).then(x=>{F.value.val.id==1?ve(x.data).then($=>{i.notify({message:`El ticket ${_} se descargo correctamente`,type:"positive",position:"center"}),F.value.state=!1,F.value.val=null,i.loading.hide()}).catch($=>{i.notify({message:`El ticket ${_} no se descargo correctamente`,type:"negative",position:"center"})}):F.value.val.id==2&&Ce(x.data).then($=>{i.notify({message:`El ticket ${_} se descargo correctamente`,type:"positive",position:"center"}),F.value.state=!1,F.value.val=null,i.loading.hide()}).catch($=>{i.notify({message:`El ticket ${_} no se descargo correctamente`,type:"negative",position:"center"})})}).catch(x=>console.log(x))},Q=(s,_)=>{let p=70;return s.forEach(x=>{p+=7}),p+=10,_.forEach(x=>{p+=4}),p+=41,p},Ce=s=>new Promise((_,p)=>{try{let x=s.products,$=s.payments,T=Q(x,$);console.log(s.products[0].ARTICULO);const n=new ht({format:[80,T]});T=62,n.setFontSize(8),n.text("----------------------------------------------------------------------------",2,10),n.text(s.empresa.CTT1TPV,2,13),n.text(s.empresa.CTT2TPV,2,16),n.text(s.empresa.CTT3TPV,2,19),n.text(s.empresa.CTT4TPV,2,22),n.text(s.empresa.CTT5TPV,2,25),n.text(s.header.TERMINAL,2,34),n.text(`N\xBA ${s.header.TICKET}`,2,37),n.text(`FECHA ${s.header.FECHA}`,20,37),n.text(s.header.HORA,50,37),n.text(`Forma de Pago: ${s.header.PAGOPRINCIPAL}`,2,40),n.text(s.header.NOMBRECLIENTE,2,43),n.text(s.header.DOMICILIO,2,46),n.text(s.header.POBALCION+s.header.CODIGOPOSTAL,2,49),n.text(s.header.PROVINCIA,2,52),n.text("_________________________________________________",2,58),n.text("ARTICULO",2,61),n.text("UD.",25,61),n.text("PRECIO",40,61),n.text("TOTAL",57,61),n.text("_________________________________________________",2,62);let W=0;x.forEach(P=>{n.setFontSize(6),T+=3,n.text(P.ARTICULO+"   "+P.DESCRIPCION.substring(0,47),2,T),T+=4,n.text(Number(P.CANTIDAD).toFixed(2),25,T),n.text(Number(P.PRECIO).toFixed(2),40,T),n.text(Number(P.TOTAL).toFixed(2),57,T),W+=Number(P.CANTIDAD)}),T+=10,n.setFontSize(8),n.setFont("helvetica","bold"),n.text("TOTAL",54,T,"right"),n.text(`$ ${Number(s.header.TOTAL).toFixed(2)}`,56,T,"left"),n.setFont("helvetica","normal"),$.forEach(P=>{T+=4,n.text(P.CONCEPTOPAGO,54,T,"right"),n.text(`$ ${Number(P.IMPORTE).toFixed(2)}`,56,T,"left")}),T+=5,n.text(`N Articulos: ${W}`,2,T),T+=5,n.setFontSize(6),n.text(`Le Atendio: ${s.header.DEPENDIENTE}`,2,T),T+=5,n.setFontSize(8),n.text("---------------------------------Grupo-Vizcarra----------------------------",2,T),T+=5,n.text(s.empresa.PTT1TPV,2,T),T+=3,n.text(s.empresa.PTT2TPV,2,T),T+=3,n.text(s.empresa.PTT3TPV,2,T),T+=3,n.text(s.empresa.PTT4TPV,2,T),T+=3,n.text(s.empresa.PTT5TPV,2,T),T+=3,n.text(s.empresa.PTT6TPV,2,T),T+=3,n.text(s.empresa.PTT7TPV,2,T),T+=3,n.text(s.empresa.PTT8TPV,2,T),n.save(`Ticket ${s.header.TICKET}`),_()}catch(x){p(x)}}),ve=s=>new Promise((_,p)=>{try{let $=s.products,T=s.payments;const n=new ht;let W=[];const P=$.map(ee=>Object.values(ee)),Z=Math.ceil(P.length/20);for(var x=0;x<P.length;x+=20)W.push(P.slice(x,x+20));console.log(W);for(let ee=0;ee<1;ee++)W.forEach(function(L,me){me>0&&n.addPage();let re=0,ye=0;for(let j=0;j<L.length;j++)L[j][1]=L[j][1].replace(/\n/g," "),L[j][2]=parseFloat(L[j][2]),L[j][3]=Number(L[j][3]).toFixed(2),L[j][4]=Number(L[j][4]).toFixed(2),re+=parseFloat(L[j][2]),ye+=parseFloat(L[j][4]);n.setFontSize(25),n.setFont("helvetica","bold"),n.text("GRUPO VIZCARRA",105,10,"center"),n.setFontSize(8),n.text("Hora Ticket:",10,10,"left"),n.text(s.header.HORA,10,15,"left"),n.setFontSize(12),n.text(`${s.header.NOMBRECLIENTE} ${s.header.CLIENTE}`,10,25,"left"),n.text(`SUCURSAL ${s.empresa.DESTPV}`,120,25,"left"),n.setFontSize(8),n.text(s.header.DOMICILIO,10,30,"left"),n.text(s.header.CODIGOPOSTAL,10,35,"left"),n.text(s.header.POBALCION+s.header.PROVINCIA,10,40,"left"),n.text(s.empresa.CTT3TPV,120,30,"left"),n.text("LLI1210184G8",120,45,"left"),n.rect(120,51,80,5),n.text("DOCUMENTO",121,55,"left"),n.text("FACTURA",121,60,"left"),n.text("NUMERO",143,55,"left"),n.text(s.header.TICKET,143,60,"left"),n.text("PAGINA",165,55,"left"),n.text(`${me+1} de ${Z}`,165,60,"left"),n.text("FECHA",185,55,"left");const Fe=s.header.FECHA;n.text(Fe,185,60,"left"),gt(n,{startX:10,startY:65,theme:"grid",styles:{cellPadding:1,fontSize:8,halign:"center"},head:[["CREADOR DOC","ALMACEN","AGENTE","FORMA DE PAGO"]],body:[["APP","GEN",s.header.DEPENDIENTE,T[0].CONCEPTOPAGO]]}),gt(n,{startX:10,startY:80,theme:"striped",styles:{cellPadding:.6,fontSize:8,halign:"left"},head:[["ARTICULO","DESCRIPCION","CANTIDAD","PRECIO","TOTAL"]],body:L,columnStyles:{0:{fontStyle:"bold",halign:"left"},1:{fontStyle:"bold",halign:"left"},2:{halign:"center"},3:{halign:"center"},4:{halign:"center"}}}),n.setFontSize(11),n.text("TOTAL UNIDADES:",60,200,"left"),n.text(Number(re).toFixed(2),100,200,"left"),n.setFont("helvetica","bold"),n.text("TOTAL:",140,200,"left"),n.text(`$ ${Number(ye).toFixed(2)}`,160,200,"left"),n.setFontSize(8),n.text("Debo(emos) y pagare(mos) incondicionalmente por este pagare a la order de GRUPO VIZCARRA, en la ciudad de Mexico,",5,210,"left"),n.text("la cantidad de el valor recibido a mi(nuestra) entera satisfaccion",5,215,"left"),n.text("Este pagare forma parte de una serie numerica del 1 al y 9 y todos estos estan sujetos a la condicion, de que al no pagarse cualquiera de ellos a su",5,220,"left"),n.text("vencimiento sean exigibles todos los que le sigan en numero, ademas de los ya vencidosm desde la fecha de su vencimiento de el presente documento",5,225,"left"),n.text("hasta el dia de su liquidacion, causaran intereses moratorios al tipo del % mensual en esta ciudad justamente con el principal",5,230,"left"),n.setFontSize(15),n.text("______________",31,248,"center"),n.text("AUTORIZO",20,254,"left"),n.text("______________",85,248,"center"),n.text("CHOFER",75,254,"left"),n.text("______________",140,248,"center"),n.text("RECIBIO",130,254,"left"),n.text("______________",168,248,"left"),n.text("FECHA Y HORA",168,254,"left"),n.setFontSize(9),n.text("UNA VEZ ENTREGADA LA MERCANCIA EN LA FLETERA O DOMICILIO QUE INDIQUE EL CLIENTE ",5,260,"left"),n.text("LLUVIA LIGHT SA DE CV NO ES RESPONSABLE POR PEDIDAS TOTALES, PARCIALES ",5,265,"left"),n.text("O CUALQUIER TIPO DE DANO EN LA MERCANCIA DE ESTE DOCUMENTO ",5,270,"left"),n.setFont("helvetica","bold"),n.setFontSize(12),n.text("NO SE ACEPTAN CAMBIOS NI DEVOLUCIONES",5,275,"left"),n.setFontSize(25),n.setFont("helvetica","bold"),n.text("GRUPO VIZCARRA",105,10,"center")});n.save(`Factura ${s.header.TICKET}`),_()}catch($){p($)}});return B(),(s,_)=>(je(),Xt(fa,{view:"hHh Lpr fFf"},{default:E(()=>[v(aa,{class:"transparent text-dark",bordered:""},{default:E(()=>[v(ta),v(Qe),v(ea,{class:"justify-between"},{default:E(()=>[q("div",null,[G("Helpers "),v(ut,{name:"navigate_next",color:"primary"}),G(),La])]),_:1})]),_:1}),v(va,null,{default:E(()=>[v(_a,{padding:""},{default:E(()=>[q("div",$a,[v(H,{color:"primary",icon:"event",onClick:_[0]||(_[0]=p=>h.value=!h.value),flat:"",round:""})]),v(Qe,{spaced:"",inset:"",vertical:"",dark:""}),C.value.state?(je(),it("div",qa,[v(sa,{class:"my-sticky-header-table",title:"Fromas de Pago",rows:C.value.body,"row-key":"name",filter:C.value.filter,separator:"cell",onRowClick:X,columns:d},{"top-right":E(()=>[q("div",Qa,[q("div",ja,[v(ra,{borderless:"",dense:"",debounce:"300",modelValue:C.value.filter,"onUpdate:modelValue":_[1]||(_[1]=p=>C.value.filter=p),placeholder:"Search"},{append:E(()=>[v(ut,{name:"search"})]),_:1},8,["modelValue"])]),v(Qe,{spaced:"",inset:"",vertical:"",dark:""}),q("div",Ua,[v(H,{color:"primary",icon:"archive",dense:"","no-caps":"",flat:"",round:"",onClick:Ve})])])]),_:1},8,["rows","filter"])])):dt("",!0),v(De,{modelValue:u.value,"onUpdate:modelValue":_[2]||(_[2]=p=>u.value=p),persistent:""},{default:E(()=>[u.value?(je(),it("div",ka,[v(ua,{color:"primary",size:"7.5em"}),v(ia,{offset:[0,8]},{default:E(()=>[G("Cargando Informacion")]),_:1})])):dt("",!0)]),_:1},8,["modelValue"]),v(De,{modelValue:m.value.state,"onUpdate:modelValue":_[5]||(_[5]=p=>m.value.state=p),persistent:""},{default:E(()=>[v(Ae,{style:{width:"700px","max-width":"70vw"}},{default:E(()=>[v(ae,{class:"row justify-between"},{default:E(()=>[q("div",za,"Ticket : "+te(m.value.body.TICKET),1),q("div",Ba,te(m.value.body.TERMINAL),1)]),_:1}),v(ae,null,{default:E(()=>[q("div",Za,te(m.value.body.CNOFAC),1)]),_:1}),v(ae,null,{default:E(()=>[q("div",Ga,te(m.value.body.CLIENTE),1),q("div",Ka,te(m.value.body.FECHA),1)]),_:1}),v(ae,null,{default:E(()=>[v(ma,{bordered:""},{default:E(()=>[v(vt,null,{default:E(()=>[v(le,null,{default:E(()=>[G("EFECTIVO")]),_:1}),v(le,null,{default:E(()=>[G("TARJETA")]),_:1}),v(le,null,{default:E(()=>[G("TRANSFERENCIA")]),_:1}),v(le,null,{default:E(()=>[G("VALE")]),_:1}),v(le,null,{default:E(()=>[G("CREDITO")]),_:1})]),_:1}),v(vt,null,{default:E(()=>[v(le,null,{default:E(()=>[G(te(m.value.body.EFECTIVO),1)]),_:1}),v(le,null,{default:E(()=>[G(te(m.value.body.TARJETAS),1)]),_:1}),v(le,null,{default:E(()=>[G(te(m.value.body.TRANSFERENCIAS),1)]),_:1}),v(le,null,{default:E(()=>[G(te(m.value.body.VALES),1)]),_:1}),v(le,null,{default:E(()=>[G(te(m.value.body.CREDITOS),1)]),_:1})]),_:1})]),_:1})]),_:1}),v(Ue,{align:"center"},{default:E(()=>[ct(v(H,{flat:"",color:"negative",icon:"close"},null,512),[[ft]]),v(H,{flat:"",color:"primary",icon:"print",onClick:_[3]||(_[3]=p=>r.value.state=!r.value.state)}),v(H,{flat:"",color:"primary",icon:"picture_as_pdf",onClick:_[4]||(_[4]=p=>F.value.state=!b.state)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),v(De,{modelValue:r.value.state,"onUpdate:modelValue":_[7]||(_[7]=p=>r.value.state=p)},{default:E(()=>[v(Ae,{class:"my-card"},{default:E(()=>[v(ae,null,{default:E(()=>[Ja]),_:1}),v(ae,null,{default:E(()=>[v(ha,{onSubmit:z,class:"q-gutter-md"},{default:E(()=>[v(mt,{dense:"","option-label":"name",modelValue:r.value.val,"onUpdate:modelValue":_[6]||(_[6]=p=>r.value.val=p),options:r.value.body,label:"Impresora",filled:"",autofocus:"",style:{width:"200px"}},null,8,["modelValue","options"]),q("div",null,[v(H,{label:"Enviar",type:"submit",color:"primary",style:{width:"200px"},disable:r.value.val===null||N.value},null,8,["disable"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),v(De,{modelValue:h.value,"onUpdate:modelValue":_[10]||(_[10]=p=>h.value=p)},{default:E(()=>[v(Ae,{class:"my-card"},{default:E(()=>[v(ae,null,{default:E(()=>[q("div",Xa,[Wa,v(Pa,{modelValue:I.value,"onUpdate:modelValue":_[8]||(_[8]=p=>I.value=p),range:"",minimal:""},null,8,["modelValue"])])]),_:1}),v(ae,null,{default:E(()=>[v(Ue,{align:"right"},{default:E(()=>[v(H,{flat:"",icon:"close",color:"negative",onClick:_[9]||(_[9]=p=>h.value=!h.value)}),v(H,{flat:"",icon:"check",color:"positive",onClick:Ne})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),v(De,{modelValue:F.value.state,"onUpdate:modelValue":_[12]||(_[12]=p=>F.value.state=p),persistent:""},{default:E(()=>[v(Ae,null,{default:E(()=>[v(ae,{class:"row items-center"},{default:E(()=>[v(Wt,{icon:"picture_as_pdf",color:"primary","text-color":"white"}),el]),_:1}),v(ae,null,{default:E(()=>[v(mt,{modelValue:F.value.val,"onUpdate:modelValue":_[11]||(_[11]=p=>F.value.val=p),options:F.value.opts,label:"Formatos",filled:""},null,8,["modelValue","options"])]),_:1}),v(Ue,{align:"right"},{default:E(()=>[ct(v(H,{flat:"",label:"Cancel",color:"negative"},null,512),[[ft]]),v(H,{flat:"",label:"Seleccionar",color:"positive",onClick:b,disable:!F.value.val},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{Cl as default};
