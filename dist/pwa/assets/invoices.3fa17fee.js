import{b as R}from"./browser.c61f550a.js";import{E as P,a as g}from"./jspdf.plugin.autotable.d09a827b.js";import{J as y}from"./JsBarcode.cb858474.js";import{d as N}from"./dayjs.min.cbcf888d.js";const U=async a=>{var l,n;console.log(a);const O=new Date,E=`http://192.168.10.189:2201/#/distribute/checkin/${a.id}?key=${a.entry_key}`,C={1:"GEN",2:"STC",16:"BRA",21:"PAN",24:"BOL"}[(n=(l=a==null?void 0:a.requisition)==null?void 0:l.to)==null?void 0:n.id]||null,D={margin:1,width:1,height:1},c=document.createElement("canvas");await R.toCanvas(c,E,D);const I=c.toDataURL("image/png"),f=document.createElement("canvas");y(f,a.entry_key,{format:"CODE128",displayValue:!1,width:2,height:60,margin:0});const S=f.toDataURL("image/png"),t=new P;let d=[];const A=a.products.filter(e=>e.pivot.checkout==1).map(e=>({code:e.code,caja:e.pivot._supply_by==3?e.pivot.toDelivered:1,uxcaja:e.pivot.ipack,cantidad:e.pivot._supply_by==3?e.pivot.toDelivered*e.pivot.ipack:e.pivot._supply_by==2?e.pivot.toDelivered*12:e.pivot.toDelivered,description:e.description})).map(e=>Object.values(e)),L=Math.ceil(A.length/20);for(var i=0;i<A.length;i+=20)d.push(A.slice(i,i+20));console.log(d);for(let e=0;e<2;e++){let p="ORIGINAL";e>0&&(p="COPIA",t.addPage()),d.forEach(function(s,m){m>0&&t.addPage();let _=0,o=0;for(let r=0;r<s.length;r++)s[r][1]=s[r][1]==0?1:parseFloat(s[r][1]),s[r][2]=parseFloat(s[r][2]),s[r][3]=parseFloat(s[r][3]),s[r][4]=s[r][4].replace(/\n/g," "),_+=parseFloat(s[r][1]),o+=parseFloat(s[r][3]);for(let r=0;r<s.length;r++);t.setFontSize(25),t.setFont("helvetica","bold"),t.text("GRUPO VIZCARRA",105,10,"center"),t.setFontSize(8),t.text("NUMERO PEDIDO:",10,10,"left"),t.text(`${a._requisition.toString()} - ${a.requisition.notes}`,10,15,"left"),t.setFontSize(12),t.text(p,185,10,"left"),t.text(a.requisition.from.name,10,25,"left"),t.text("LLUVIA LIGTH SA DE CV",120,25,"left"),t.setFontSize(8),t.text("CALLE AN PABLO 10 LOC G 10",120,30,"left"),t.text("06090",120,35,"left"),t.text("DELEG, CUAUHTEMOC CDMX       CENTRO",120,40,"left"),t.text("LLI1210184G8",120,45,"left"),t.text("HORA DE IMP:",10,50,"left"),t.rect(45,46,15,5),t.text(N(O).format("HH:mm:ss"),47,50),t.text("HR SALIDA M:",61,50,"left"),t.rect(91,46,15,5),t.text("LLEGADA A SUCURSAL:",10,60,"left"),t.rect(45,56,15,5),t.text("SALIDA SUCURSAL:",61,60,"left"),t.rect(91,56,15,5),t.rect(120,51,80,5),t.text("DOCUMENTO",121,55,"left"),t.text("FACTURA",121,60,"left"),t.text("N.PARTICION",143,55,"left"),t.text(a.id.toString(),143,60,"left"),t.text("PAGINA",165,55,"left"),t.text(`${m+1} de ${L}`,165,60,"left"),t.text("FECHA",185,55,"left");const T=N(a.created_at).format("YYYY-MM-DD");t.text(T,185,60,"left"),g(t,{startX:10,startY:65,theme:"plain",styles:{cellPadding:1,fontSize:8,halign:"center"},head:[["CREADOR DOC","ALMACEN","AGENTE","FORMA DE PAGO"]],body:[["APP",C,a.verified.complete_name,"C30"]]}),g(t,{startX:10,startY:80,theme:"striped",styles:{cellPadding:.6,fontSize:8,halign:"center"},head:[["ARTICULO","CAJAS","U.X CAJA","CANTIDAD","DESCRIPCION"]],body:s,columnStyles:{0:{fontStyle:"bold",halign:"left"},1:{fontStyle:"bold",halign:"center"},4:{halign:"left"}}}),t.setFontSize(11),t.text("TOTAL CAJAS:",10,200,"left"),t.text(_.toString(),40,200,"left"),t.text("TOTAL UNIDADES:",60,200,"left"),t.text(o.toString(),100,200,"left"),t.setFontSize(8),t.text("Debo(emos) y pagare(mos) incondicionalmente por este pagare a la order de GRUPO VIZCARRA, en la ciudad de Mexico,",10,210,"left"),t.text("la cantidad de el valor recibido a mi(nuestra) entera satisfaccion",10,215,"left"),t.text("Este pagare forma parte de una serie numerica del 1 al y 9 y todos estos estan sujetos a la condicion, de que al no pagarse cualquiera de ellos a su",10,220,"left"),t.text("vencimiento sean exigibles todos los que le sigan en numero, ademas de los ya vencidosm desde la fecha de su vencimiento de el presente documento",10,225,"left"),t.text("hasta el dia de su liquidacion, causaran intereses moratorios al tipo del % mensual en esta ciudad justamente con el principal",10,230,"left"),t.setFontSize(15),t.text("______________",31,248,"center"),t.text("AUTORIZO",20,254,"left"),t.text("______________",85,248,"center"),t.text("CHOFER",75,254,"left"),t.text("______________",140,248,"center"),t.text("RECIBIO",130,254,"left"),t.text("______________",168,248,"left"),t.text("FECHA Y HORA",168,254,"left"),t.setFontSize(9),t.text("UNA VEZ ENTREGADA LA MERCANCIA EN LA FLETERA O DOMICILIO QUE INDIQUE EL CLIENTE ",10,260,"left"),t.text("LLUVIA LIGHT SA DE CV NO ES RESPONSABLE POR PEDIDAS TOTALES, PARCIALES ",10,265,"left"),t.text("O CUALQUIER TIPO DE DANO EN LA MERCANCIA DE ESTE DOCUMENTO ",10,270,"left"),t.setFont("helvetica","bold"),t.setFontSize(12),t.text("NO SE ACEPTAN CAMBIOS NI DEVOLUCIONES",10,280,"left"),t.setFontSize(25),t.setFont("helvetica","bold"),t.text("GRUPO VIZCARRA",105,10,"center"),t.addImage(I,"PNG",95,25,20,20),t.addImage(S,"PNG",130,270,75,20)})}t.save(`Factura ${a.id.toString()}`)},h=async a=>{console.log(a);const O=`http://192.168.10.189:2201/#/distribute/checkin/${a.id}?key=${a.entry_key}`,E=[{id:1,alias:"GEN",name:"ALMACEN GENERAL"},{id:2,alias:"STC",name:"ALMACEN TEXCOCO"},{id:16,alias:"BRA",name:"ALMACEN BRASIL"},{id:21,alias:"PAN",name:"ALMACEN PANTACO"},{id:24,alias:"BOL",name:"ALMACEN BOLIVIA"}],x=E.find(l=>{var n,e;return l.id==((e=(n=a==null?void 0:a.requisition)==null?void 0:n.to)==null?void 0:e.id)}),C=E.find(l=>{var n,e;return l.id==((e=(n=a==null?void 0:a.requisition)==null?void 0:n.from)==null?void 0:e.id)}),D={margin:1,width:1,height:1},c=document.createElement("canvas");await R.toCanvas(c,O,D);const I=c.toDataURL("image/png"),f=document.createElement("canvas");y(f,a.entry_key,{format:"CODE128",displayValue:!1,width:2,height:60,margin:0});const S=f.toDataURL("image/png"),t=new P;let d=[];const A=a.products.filter(l=>l.pivot.checkout==1).map(l=>({code:l.code,caja:l.pivot._supply_by==3?l.pivot.toDelivered:1,uxcaja:l.pivot.ipack,cantidad:l.pivot._supply_by==3?l.pivot.toDelivered*l.pivot.ipack:l.pivot._supply_by==2?l.pivot.toDelivered*12:l.pivot.toDelivered,description:l.description})).map(l=>Object.values(l)),L=Math.ceil(A.length/20);for(var i=0;i<A.length;i+=20)d.push(A.slice(i,i+20));console.log(d);for(let l=0;l<2;l++){let n="ORIGINAL";l>0&&(n="COPIA",t.addPage()),d.forEach(function(e,p){p>0&&t.addPage();let s=0,m=0;for(let o=0;o<e.length;o++)e[o][1]=e[o][1]==0?1:parseFloat(e[o][1]),e[o][2]=parseFloat(e[o][2]),e[o][3]=parseFloat(e[o][3]),e[o][4]=e[o][4].replace(/\n/g," "),s+=parseFloat(e[o][1]),m+=parseFloat(e[o][3]);for(let o=0;o<e.length;o++);t.setFontSize(25),t.setFont("helvetica","bold"),t.text("GRUPO VIZCARRA",105,10,"center"),t.setFontSize(8),t.text("NUMERO PEDIDO:",10,10,"left"),t.text(`P-${a._requisition.toString()}`,10,15,"left"),t.setFontSize(12),t.text(n,185,10,"left"),t.text("LLUVIA LIGTH SA DE CV",120,25,"left"),t.setFontSize(8),t.text("CALLE AN PABLO 10 LOC G 10",10,30,"left"),t.text("06090",10,35,"left"),t.text("DELEG, CUAUHTEMOC CDMX",10,40,"left"),t.text("DOCUMENTO",10,55,"left"),t.text("TRASPASO",10,60,"left"),t.text("PARTICION",32,55,"left"),t.text(a.id.toString(),32,60,"left"),t.text("PAGINA",54,55,"left"),t.text(`${p+1} de ${L}`,54,60,"left"),t.text("FECHA",76,55,"left");const _=N(a.created_at).format("YYYY-MM-DD");t.text(_,76,60,"left"),g(t,{startX:10,startY:65,theme:"plain",styles:{cellPadding:1,fontSize:12,halign:"center"},head:[["Almacen de Origen","Almacen de Destino"]],body:[[`(${x.alias}) ${x.name}`,`(${C.alias}) ${C.name}`]]}),g(t,{startX:10,startY:80,theme:"striped",styles:{cellPadding:.6,fontSize:8,halign:"center"},head:[["ARTICULO","CAJAS","U.X CAJA","CANTIDAD","DESCRIPCION"]],body:e,columnStyles:{0:{fontStyle:"bold",halign:"left"},1:{fontStyle:"bold",halign:"center"},4:{halign:"left"}}}),t.setFontSize(11),t.text("TOTAL CAJAS:",100,200,"left"),t.text(s.toString(),130,200,"left"),t.text("TOTAL UNIDDADES:",150,200,"left"),t.text(m.toString(),190,200,"left"),t.text("Firma Almacen Origen",12,224),t.text("Firma Almacen Destino",82,224),t.text("Firma Chofer",152,224),t.rect(5,220,55,37),t.rect(75,220,55,37),t.rect(140,220,55,37),t.addImage(I,"PNG",95,25,20,20),t.addImage(S,"PNG",130,270,75,20)})}t.save(`Traspaso${a.id}`)};var z={invoiceFormat:U,transferFormat:h};export{z as I};
