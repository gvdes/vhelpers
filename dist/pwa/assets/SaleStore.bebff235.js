import{Q as m}from"./QSeparator.1133f537.js";import{r as V,c as w,o as b,a as g,w as t,aD as J,u as W,aV as X,e,i as l,Y as S,f as p,h as T,Q as P,a4 as s,aW as G,a3 as d,a2 as R,aX as Z,g as E,a6 as j,a0 as B,a1 as K}from"./index.0cca38c5.js";import{Q as ee,a as $,b as n,c}from"./QSelect.039f887b.js";import{Q as te}from"./QToolbar.70153696.js";import{Q as ae}from"./QHeader.cd592aa8.js";import{Q as k,a as o}from"./QCard.223ea652.js";import{Q as le}from"./QInput.28bed99e.js";import{Q as se}from"./QBadge.cf340523.js";import{Q as de}from"./QLinearProgress.aea89b22.js";import{Q as oe}from"./auto.f369c1c7.js";import{Q as C}from"./QList.54b5f586.js";import{Q as re}from"./QTable.66a630d5.js";import{Q as ie}from"./QDialog.c9afd5e4.js";import{Q as ne,a as ce}from"./QLayout.2fb914d0.js";import"./AppFullscreen.7402869c.js";import{u as ue}from"./use-quasar.a81f546b.js";import"./dayjs.min.25545ff6.js";import{_ as _e}from"./UserToolbar.a8f53ffe.js";import{A as ve}from"./assistApi.428bd712.js";import{u as me}from"./VDB.541c1b67.js";import{a as fe}from"./axios.f1f32898.js";import"./use-key-composition.fb1517f2.js";import"./uid.42677368.js";import"./position-engine.dfcb92a2.js";import"./rtl.b51694b1.js";import"./QResizeObserver.25079b51.js";import"./QCheckbox.3bbebfa6.js";import"./_commonjsHelpers.88e99c8f.js";import"./QCardActions.e40a88fb.js";import"./ClosePopup.d3a702a8.js";import"./axios.eed4c97e.js";const xe=l("span",{class:"text-grey"},"Helpers",-1),he=l("span",{class:"text-h6"},"Ventas Sucursales",-1),be={class:"row"},pe={class:"text-bold text-h6"},ke=l("div",{class:"text-h6 text-center"},"Ventas 2023",-1),ge={class:"text-h4 text-center"},Ne=l("div",{class:"text-h6 text-center"},"Tickets 2023",-1),ye={class:"text-h4 text-center"},we=l("div",{class:"text-h6 text-center"},"Ventas 2024",-1),Te={class:"text-h4 text-center"},$e=l("div",{class:"text-h6 text-center"},"Tickets 2024",-1),Fe={class:"text-h4 text-center"},Qe=l("div",{class:"text-h6 text-center"},"Diferencia",-1),Ve={class:"text-h4 text-center"},Se=l("div",{class:"text-h6 text-center"},"Diferencia Tickets",-1),Ce={class:"text-h4 text-center"},Ee=l("div",{class:"text-h6 text-center"},"VENTAS HOY",-1),Ae={class:"text-h4 text-center"},De=l("div",{class:"text-h6 text-center"},"Tickets HOY",-1),Ie={class:"text-h4 text-center"},He={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition"},Pe={class:"text-bold"},Re={class:"text-overline"},Be={class:"q-pa-sm flex justify-start"},Ke={class:"absolute-full flex flex-center"},Le={key:0,class:""},Oe={class:"text-h6"},Me={class:"text-subtitle2"},Ye=l("div",{class:"text-h6 text-center"},"Ventas 2023",-1),qe={class:"text-h5 text-center"},ze=l("div",{class:"text-h6 text-center"},"Tickets 2023",-1),Ue={class:"text-h5 text-center"},Je=l("div",{class:"text-h6 text-center"},"Tickets Promedio 2023",-1),We={class:"text-h5 text-center"},Xe=l("div",{class:"text-h6 text-center"},"Ventas 2024",-1),Ge={class:"text-h5 text-center"},Ze=l("div",{class:"text-h6 text-center"},"Tickets 2024",-1),je={class:"text-h5 text-center"},et=l("div",{class:"text-h6 text-center"},"Tickets Promedio 2024",-1),tt={class:"text-h5 text-center"},at=l("div",{class:"text-h6 text-center"},"Diferencias",-1),lt={class:"text-h5 text-center"},st=l("div",{class:"text-h6 text-center"},"Diferencia Tickts",-1),dt={class:"text-h5 text-center"},ot=l("div",{class:"text-h6 text-center"},"Ventas Hoy",-1),rt={class:"text-h5 text-center"},it=l("div",{class:"text-h6 text-center"},"Tickets Hoy",-1),nt={class:"text-h5 text-center"},ct=l("div",{class:"text-h6"},"Resumen Dia",-1),ut=l("div",{class:"text-h6"},"Resumen Mensual",-1),Yt={__name:"SaleStore",setup(_t){const F=ue();J();const L=W(),O=me(),x=V([]),Q=V({pagination:{rowsPerPage:0},filter:""}),r=V({state:!1,val:null}),N=V({val:null}),A=[{id:1,label:"Enero"},{id:2,label:"Febrero"},{id:3,label:"Marzo"},{id:4,label:"Abril"},{id:5,label:"Mayo"},{id:6,label:"Junio"},{id:7,label:"Julio"},{id:8,label:"Agosto"},{id:9,label:"Septiembre"},{id:10,label:"Octubre"},{id:11,label:"Noviembre"},{id:12,label:"Diciembre"}],y=w(()=>F.platform.is.mobile),M=w(()=>Number(x.value.reduce((f,_)=>{var u;return f+Number(((u=_.sales)==null?void 0:u.salesant)*1.1||0)},0)).toFixed(2)),Y=w(()=>Number(x.value.reduce((f,_)=>{var u;return f+Number(((u=_.sales)==null?void 0:u.salesact)||0)},0)).toFixed(2)),q=w(()=>Number(x.value.reduce((f,_)=>{var u,a;return f+Number(((u=_.sales)==null?void 0:u.salesact)-((a=_.sales)==null?void 0:a.salesant)*1.1||0)},0)).toFixed(2)),D=w(()=>Number(x.value.reduce((f,_)=>{var u;return f+Number(((u=_.sales)==null?void 0:u.saleshoy)||0)},0)).toFixed(2)),I=async()=>{const _=new Date().getMonth()+1;N.value.val=A.filter(a=>a.id===_)[0],F.loading.show({message:"Cargando Informacion"}),console.log("se inicia el init");const u=await ve.index();u.error?console.log(u):(console.log(u),x.value=u,H(x.value,_))},H=async(f,_)=>{f.forEach((u,a)=>{setTimeout(()=>{let v=`http://${u.ip_address}/access/public/reports/getSalesPerMonth/${_}`;fe.get(v).then(h=>{u.sales=h.data==null?null:h.data,console.log(h)}).catch(h=>{console.log(h.response.data.message)})},a*1e3)}),F.loading.hide()};O.session.rol==="root"?I():(F.notify({message:"No tienes acceso a esta pagina",type:"negative",position:"center"}),L.replace("/"));const z=()=>{x.value.map(f=>f.sales=null),H(x.value,N.value.val.id)},U=f=>{r.value.state=!0,r.value.val=f,console.log(f)};return(f,_)=>{const u=X("router-view");return b(),g(ne,{view:"hHh Lpr fFf"},{default:t(()=>[e(ce,null,{default:t(()=>[e(ae,{class:"bg-grey-3 text-dark",bordered:""},{default:t(()=>[e(_e),e(m),e(te,{class:"justify-between"},{default:t(()=>[l("div",null,[xe,e(S,{name:"navigate_next",color:"primary"}),he]),l("div",be,[p(y)?T("",!0):(b(),g(ee,{key:0,modelValue:N.value.val,"onUpdate:modelValue":[_[0]||(_[0]=a=>N.value.val=a),z],options:A,label:"mes",outlined:"",dense:""},null,8,["modelValue"])),e(P,{dense:"",flat:"",color:"primary",icon:"autorenew",onClick:I})])]),_:1})]),_:1}),e(m,{spaced:"",inset:"",vertical:"",dark:""}),l("div",pe,s(N.value.val.label),1),e(m,{spaced:"",inset:"",vertical:"",dark:""}),l("div",{class:G(p(y)?"":"row")},[p(y)?T("",!0):(b(),g(k,{key:0,class:"my-card col",bordered:"",dense:""},{default:t(()=>[e(o,null,{default:t(()=>[ke,l("div",ge,s(p(M).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),e(o,null,{default:t(()=>[Ne,l("div",ye,s(Number(x.value.reduce((a,i)=>{var v;return a+Number(((v=i.sales)==null?void 0:v.tiketsant)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1})),e(m,{spaced:"",inset:"",vertical:"",dark:""}),p(y)?T("",!0):(b(),g(k,{key:1,class:"my-card col",bordered:"",dense:""},{default:t(()=>[e(o,null,{default:t(()=>[we,l("div",Te,s(p(Y).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),e(o,null,{default:t(()=>[$e,l("div",Fe,s(Number(x.value.reduce((a,i)=>{var v;return a+Number(((v=i.sales)==null?void 0:v.tiketsact)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1})),e(m,{spaced:"",inset:"",vertical:"",dark:""}),p(y)?T("",!0):(b(),g(k,{key:2,class:"my-card col",bordered:"",dense:""},{default:t(()=>[e(o,null,{default:t(()=>[Qe,l("div",Ve,s(p(q).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),e(o,null,{default:t(()=>[Se,l("div",Ce,s(Number(x.value.reduce((a,i)=>{var v,h;return a+Number(((v=i.sales)==null?void 0:v.tiketsact)-((h=i.sales)==null?void 0:h.tiketsant)||0)},0)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1})),e(m,{spaced:"",inset:"",vertical:"",dark:""}),e(k,{class:"my-card col",bordered:"",dense:""},{default:t(()=>[e(o,null,{default:t(()=>[Ee,l("div",Ae,s(p(D).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),e(o,null,{default:t(()=>[De,l("div",Ie,s(x.value.reduce((a,i)=>{var v;return a+Number(((v=i.sales)==null?void 0:v.hoytck)||0)},0)),1)]),_:1})]),_:1})],2),e(m,{spaced:"",inset:"",vertical:"",dark:""}),e(re,{title:"Sucursales",rows:x.value.sort((a,i)=>{var v,h;return((v=i.sales)==null?void 0:v.saleshoy)-((h=a.sales)==null?void 0:h.saleshoy)}),"row-key":"id",pagination:Q.value.pagination,filter:Q.value.filter,"hide-header":""},{"top-right":t(()=>[e(le,{borderless:"",dense:"",debounce:"300",modelValue:Q.value.filter,"onUpdate:modelValue":_[1]||(_[1]=a=>Q.value.filter=a),placeholder:"Buscar"},{append:t(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])]),body:t(a=>[l("div",He,[e(C,{bordered:"",dense:""},{default:t(()=>[e($,null,{default:t(()=>[e(n,null,{default:t(()=>[e(c,{class:"flex justify-between"},{default:t(()=>{var i;return[l("div",Pe,s(a.row.name),1),l("div",Re,[d(s(`Tickets ${(i=a.row.sales)==null?void 0:i.hoytck}`)+" ",1),e(P,{color:"grey",flat:"",dense:"",icon:a.expand?"keyboard_arrow_up":"keyboard_arrow_down",onClick:v=>a.expand=!a.expand},null,8,["icon","onClick"])])]}),_:2},1024),e(c,null,{default:t(()=>{var i;return[l("div",Be,[e(de,{value:Number((i=a.row.sales)==null?void 0:i.saleshoy)/Number(p(D)),buffer:1,size:"20px"},{default:t(()=>{var v;return[l("div",Ke,[e(se,{color:"white","text-color":"accent",label:`$ ${Number((v=a.row.sales)==null?void 0:v.saleshoy).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}`},null,8,["label"])])]}),_:2},1032,["value"])])]}),_:2},1024)]),_:2},1024)]),_:2},1024),e(oe,null,{default:t(()=>[a.row.sales?R((b(),E("div",Le,[e(m),R((b(),g($,{class:"text-center",dense:"",clickable:"",onClick:i=>U(a.row)},{default:t(()=>[e(n,null,{default:t(()=>[e(c,{overline:""},{default:t(()=>[d("VENTAS 2023")]),_:1}),e(c,{caption:""},{default:t(()=>[d(s(Number(a.row.sales.salesant*1.1).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),e(m,{spaced:"",inset:"",vertical:"",dark:""}),e(c,{overline:""},{default:t(()=>[d("TICKETS 2023")]),_:1}),e(c,{caption:""},{default:t(()=>[d(s(a.row.sales.tiketsant),1)]),_:2},1024)]),_:2},1024),e(n,null,{default:t(()=>[e(c,{overline:""},{default:t(()=>[d("Promedio 2023")]),_:1}),e(c,{caption:""},{default:t(()=>[d(s(Number(Number(a.row.sales.salesant*1.1)/Number(a.row.sales.tiketsant)).toFixed(2)),1)]),_:2},1024),e(m,{spaced:"",inset:"",vertical:"",dark:""})]),_:2},1024),e(n,null,{default:t(()=>[e(c,{overline:""},{default:t(()=>[d("VENTAS 2024")]),_:1}),e(c,{caption:""},{default:t(()=>[d(s(Number(a.row.sales.salesact).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),e(m,{spaced:"",inset:"",vertical:"",dark:""}),e(c,{overline:""},{default:t(()=>[d("TICKETS 2024")]),_:1}),e(c,{caption:""},{default:t(()=>[d(s(a.row.sales.tiketsact),1)]),_:2},1024)]),_:2},1024),e(n,null,{default:t(()=>[e(c,{overline:""},{default:t(()=>[d("Promedio 2024 ")]),_:1}),e(c,{caption:""},{default:t(()=>[d(s(Number(Number(a.row.sales.salesact)/Number(a.row.sales.tiketsact)).toFixed(2)),1)]),_:2},1024),e(m,{spaced:"",inset:"",vertical:"",dark:""})]),_:2},1024),e(n,null,{default:t(()=>[e(c,{overline:""},{default:t(()=>[d("DIFERENCIA")]),_:1}),e(c,{caption:""},{default:t(()=>[d(s((Number(a.row.sales.salesact).toFixed(2)-Number(a.row.sales.salesant*1.1).toFixed(2)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),e(m,{spaced:"",inset:"",vertical:"",dark:""}),e(c,{overline:""},{default:t(()=>[d("DIFERENCIA TICKETS")]),_:1}),e(c,{caption:""},{default:t(()=>[d(s(a.row.sales.tiketsact-a.row.sales.tiketsant),1)]),_:2},1024)]),_:2},1024),e(n,null,{default:t(()=>[e(c,{overline:""},{default:t(()=>[d("VENTA HOY ")]),_:1}),e(c,{caption:""},{default:t(()=>[d(s(Number(a.row.sales.saleshoy).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),e(m,{spaced:"",inset:"",vertical:"",dark:""}),e(c,{overline:""},{default:t(()=>[d("TICKETS HOY")]),_:1}),e(c,{caption:""},{default:t(()=>[d(s(a.row.sales.hoytck),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[j]])],512)),[[Z,a.expand]]):T("",!0)]),_:2},1024)]),_:2},1024),e(m,{spaced:"",inset:"",vertical:"",dark:""})])]),_:1},8,["rows","pagination","filter"]),e(ie,{modelValue:r.value.state,"onUpdate:modelValue":_[2]||(_[2]=a=>r.value.state=a),"full-width":""},{default:t(()=>[e(k,{class:"my-card"},{default:t(()=>[e(o,null,{default:t(()=>[l("div",Oe,s(r.value.val.name),1),l("div",Me,s(r.value.val.alias),1)]),_:1}),e(o,{class:"row"},{default:t(()=>[e(k,{class:"my-card col"},{default:t(()=>[e(o,null,{default:t(()=>[Ye,l("div",qe,s(Number(r.value.val.sales.salesant).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),e(o,null,{default:t(()=>[ze,l("div",Ue,s(Number(r.value.val.sales.tiketsant).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),e(o,null,{default:t(()=>[Je,l("div",We,s(Number(r.value.val.sales.salesant/r.value.val.sales.tiketsant).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1}),e(m,{spaced:"",inset:"",vertical:"",dark:""}),e(k,{class:"my-card col"},{default:t(()=>[e(o,null,{default:t(()=>[Xe,l("div",Ge,s(Number(r.value.val.sales.salesact).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),e(o,null,{default:t(()=>[Ze,l("div",je,s(Number(r.value.val.sales.tiketsact).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),e(o,null,{default:t(()=>[et,l("div",tt,s(Number(r.value.val.sales.salesact/r.value.val.sales.tiketsact).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1}),e(m,{spaced:"",inset:"",vertical:"",dark:""}),e(k,{class:"my-card col"},{default:t(()=>[e(o,null,{default:t(()=>[at,l("div",lt,s(Number(r.value.val.sales.salesact-r.value.val.sales.salesant).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),e(o,null,{default:t(()=>[st,l("div",dt,s(Number(r.value.val.sales.tiketsact-r.value.val.sales.tiketsant).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1}),e(m,{spaced:"",inset:"",vertical:"",dark:""}),e(k,{class:"my-card col"},{default:t(()=>[e(o,null,{default:t(()=>[ot,l("div",rt,s(Number(r.value.val.sales.saleshoy).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1}),e(o,null,{default:t(()=>[it,l("div",nt,s(Number(r.value.val.sales.hoytck).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:1})]),_:1})]),_:1}),e(o,null,{default:t(()=>[e(k,{class:"my-card"},{default:t(()=>[e(o,null,{default:t(()=>[e(C,{bordered:""},{default:t(()=>[e($,null,{default:t(()=>[e(n,{avatar:""}),e(n,null,{default:t(()=>[d("Caja")]),_:1}),e(n,null,{default:t(()=>[d("Venta")]),_:1}),e(n,null,{default:t(()=>[d("Tickets")]),_:1}),e(n,null,{default:t(()=>[d("Promedio")]),_:1})]),_:1})]),_:1})]),_:1}),e(o,null,{default:t(()=>[ct,e(C,{bordered:""},{default:t(()=>[(b(!0),E(K,null,B(r.value.val.sales.ventasdepday,(a,i)=>(b(),g($,{key:i},{default:t(()=>[e(n,{avatar:""},{default:t(()=>[e(S,{color:"primary",name:"point_of_sale"})]),_:1}),e(n,null,{default:t(()=>[d(s(a.DESTER),1)]),_:2},1024),e(n,null,{default:t(()=>[d(s(Number(a.VENTA).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),e(n,null,{default:t(()=>[d(s(a.TCK),1)]),_:2},1024),e(n,null,{default:t(()=>[d(s(Number(a.VENTA/a.TCK).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(o,null,{default:t(()=>[ut,e(C,{bordered:""},{default:t(()=>[(b(!0),E(K,null,B(r.value.val.sales.ventasdepmonth,(a,i)=>(b(),g($,{key:i},{default:t(()=>[e(n,{avatar:""},{default:t(()=>[e(S,{color:"primary",name:"point_of_sale"})]),_:1}),e(n,null,{default:t(()=>[d(s(a.DESTER),1)]),_:2},1024),e(n,null,{default:t(()=>[d(s(Number(a.VENTA).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024),e(n,null,{default:t(()=>[d(s(a.TCK),1)]),_:2},1024),e(n,null,{default:t(()=>[d(s(Number(a.VENTA/a.TCK).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(u)]),_:1})]),_:1})}}};export{Yt as default};
