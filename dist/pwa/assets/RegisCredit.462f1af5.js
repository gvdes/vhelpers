import{Q as f}from"./QTable.593d5c5c.js";import{b as v,Q as S}from"./QList.1f70cddf.js";import{Q as g}from"./QCardSection.7e278d4b.js";import{u as D,r as k,c as o,o as R,d as V,w as s,f as n,e as a,al as x,a0 as c,a4 as B,Q}from"./index.37883b8c.js";import{Q as N}from"./QCardActions.7ae68c4d.js";import{Q as M}from"./QCard.4b8f2d7c.js";import{Q as Y}from"./QPage.5abae0cb.js";import{C as h}from"./ClosePopup.13ae9437.js";import"./QSelect.52efbb9f.js";import"./QDrawer.19506a39.js";import"./QExpansionItem.982b68e3.js";import"./axios.ca8f7ee4.js";import{u as A}from"./use-quasar.5a30a54a.js";import{c as y}from"./ClientStore.6867f9de.js";import{d as E}from"./dayjs.min.cbcf888d.js";import"./jspdf.plugin.autotable.33cfbecb.js";import"./exceljs.min.9e24d01d.js";import"./JsBarcode.cb858474.js";import"./browser.c61f550a.js";import"./use-key-composition.56eb4ad7.js";import"./QLinearProgress.9dfa93a9.js";import"./QCheckbox.9052b8c7.js";import"./use-checkbox.14e09b31.js";import"./QResizeObserver.5f9820e3.js";import"./QScrollObserver.c4f04bd6.js";import"./_commonjsHelpers.88e99c8f.js";const F={class:"row"},mt={__name:"RegisCredit",setup(I){D();const r=y();A(),r.setTitle("Registro De Creditos"),r.setShowOption(!0);const l=k({state:!1,val:null}),u=k({columns:[{name:"date",label:"FECHA",field:t=>E(t.created_at).format("YYYY-MM-DD"),align:"left"},{name:"ncli",label:"NCLI",field:t=>t._client,align:"left"},{name:"name",label:"Cliente",field:t=>t.cliente,align:"left"},{name:"tck",label:"Ticket",field:t=>t.ticket,align:"left"},{name:"total",label:"Total",field:t=>t.total,align:"left"}]}),m=o(()=>r.valWorkpoint),C=o(()=>r.clients.flatMap(t=>{var e;return((e=t.credits)==null?void 0:e.flatMap(i=>i.tickets||[]))||[]})),d=o(()=>C.value.filter(t=>{var e;return t._workpoint==((e=m.value)==null?void 0:e.id)})),p=o(()=>r.creditsSuc),_=o(()=>p.value.filter(t=>d.value.some(e=>e.ticket===t.ticket))),w=o(()=>p.value.filter(t=>!d.value.some(e=>e.ticket===t.ticket))),T=()=>{console.log("se va a registrar"),l.value.val.store=m.value,console.log(l.value.val)};return(t,e)=>(R(),V(Y,{padding:""},{default:s(()=>[n("div",F,[a(f,{class:"col",title:"Registrados",rows:_.value,columns:u.value.columns},null,8,["rows","columns"]),a(v,{spaced:"",inset:"",vertical:"",dark:""}),a(f,{class:"col",title:"No Registrados",rows:w.value,columns:u.value.columns,onRowClick:e[0]||(e[0]=(i,b)=>{l.value.state=!l.value.state,l.value.val=b})},null,8,["rows","columns"])]),a(S,{modelValue:l.value.state,"onUpdate:modelValue":e[1]||(e[1]=i=>l.value.state=i),persistent:""},{default:s(()=>[a(M,null,{default:s(()=>[a(g,{class:"text-bold text-h6"},{default:s(()=>[x(c(l.value.val.cliente),1)]),_:1}),a(g,null,{default:s(()=>[n("div",null,"TICKET: "+c(l.value.val.ticket),1),a(v,{spaced:"",inset:"",vertical:"",dark:""}),n("div",null,"TOTAL: "+c(l.value.val.total),1)]),_:1}),a(N,{align:"right"},{default:s(()=>[B(a(Q,{flat:"",icon:"close",color:"negative"},null,512),[[h]]),a(Q,{flat:"",label:"Registrar",color:"positive",onClick:T})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{mt as default};
