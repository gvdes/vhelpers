import{f as U,u as j,r as c,g as L,a as g,c as _,d as t,i as a,a6 as T,a3 as V,a4 as w,k as d,j as l,ah as E,n as v,a2 as M,Q as Y,l as Q,m as q,a5 as F,h as D,aX as H,a1 as u,a7 as P,aj as W}from"./index.6772a291.js";import{Q as X}from"./QDate.992ad11c.js";import{e as z,Q as G}from"./QSelect.4738e4d7.js";import{Q as J}from"./QHeader.4ab111b6.js";import{Q as k,a as O,b as n}from"./QList.832348b5.js";import{Q as K}from"./QPage.a5cb312a.js";import{u as Z}from"./use-quasar.e757a0da.js";import"./jspdf.plugin.autotable.9beeab41.js";import{o as y}from"./outputsApi.fc997f6e.js";import"./exceljs.min.9e24d01d.js";import"./JsBarcode.cb858474.js";import"./browser.c61f550a.js";import{d as h}from"./dayjs.min.cbcf888d.js";import{_ as ee}from"./UserToolbar.dcb89ecf.js";import"./use-render-cache.3aae9b27.js";import"./date.81cc6bdb.js";import"./QResizeObserver.212d10b7.js";import"./_commonjsHelpers.88e99c8f.js";import"./axios.b16d05b9.js";import"./QImg.087d1b59.js";import"./QSpace.62a5af0f.js";import"./QExpansionItem.5fb7069d.js";import"./favorites.f52709b7.js";import"./QScrollObserver.6bb52127.js";import"./ClosePopup.fff889ca.js";import"./auth.f0947a97.js";const te={class:"row justify-between"},ae={class:"q-pa-md"},se={class:"flex justify-center"},Re={__name:"Index",setup(le){const C=U(),m=j(),i=Z(),p=c(!1),f=c(null),x=c([]),b=c([]),r=c({warehouse:null,notes:null}),S=L(()=>m.session.rol!=="alm"?b.value.filter(o=>[1,2,3,4].includes(o.id)):b.value.filter(o=>[5,6].includes(o.id))),A=async()=>{console.log("Recibiendo Datos :)"),i.loading.show({message:"Obteniendo Datos"});let o=m.session.store.id;const e=await y.index(o);e.error?console.log(e):(console.log(e),x.value=e.output,b.value=e.warehouses,i.loading.hide())},I=async()=>{console.log(f.value),i.loading.show({message:"Obteniendo Datos"});let e={store:m.session.store.id,date:f.value};console.log("Recibiendo Datos :)");const s=await y.getDate(e);s.fail?console.log(s):(console.log(s),x.value=s,i.loading.hide(),f.value=null)},N=async()=>{i.loading.show({message:"Creando Traspaso"}),r.value.created_by=m.session.name,r.value._store=m.session.store.id,console.log(r.value);const o=await y.addOuts(r.value);console.log(o),o.error?(console.log(o),i.notify({message:"No se logro crear el traspaso",position:"center",type:"negative"})):(i.loading.hide(),i.notify({message:`Salida ${o.code_fs} creada`,position:"center",type:"positive"}),C.push(`/outputs/${o.id}`))},R=()=>{p.value=!1,r.value={warehouse:null,notes:null}},$=o=>{C.push(`/outputs/${o.id}`)};return A(),(o,e)=>(g(),_(V,null,[t(K,{padding:""},{default:a(()=>[t(J,{class:"transparent",bordered:""},{default:a(()=>[t(ee),t(w),d("div",te,[d("div",null,[e[5]||(e[5]=l("Helpers ")),t(E,{name:"navigate_next",color:"primary"}),e[6]||(e[6]=l()),e[7]||(e[7]=d("span",{class:"text-h6"},"Salidas Internas",-1))]),d("div",null,[t(v,{color:"primary",icon:"add",flat:"",onClick:e[0]||(e[0]=s=>p.value=!p.value),round:""}),t(v,{color:"primary",icon:"event",flat:"",round:""},{default:a(()=>[t(z,null,{default:a(()=>[d("div",ae,[e[8]||(e[8]=d("div",{class:"q-pb-sm"},null,-1)),t(X,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),range:"",minimal:""},null,8,["modelValue"])]),d("div",se,[t(v,{flat:"",label:"Obtener",color:"positive",onClick:I})])]),_:1})]),_:1})])]),t(w)]),_:1}),t(k,null,{default:a(()=>[t(O,null,{default:a(()=>[t(n,{class:"text-center"},{default:a(()=>e[9]||(e[9]=[l("ID")])),_:1}),t(n,{class:"text-center"},{default:a(()=>e[10]||(e[10]=[l("CREADO")])),_:1}),t(n,{class:"text-center"},{default:a(()=>e[11]||(e[11]=[l("CREADO POR")])),_:1}),t(n,{class:"text-center"},{default:a(()=>e[12]||(e[12]=[l("NOTAS")])),_:1}),t(n,{class:"text-center"},{default:a(()=>e[13]||(e[13]=[l("ALMACEN")])),_:1}),t(n,{class:"text-center"},{default:a(()=>e[14]||(e[14]=[l("FACTUSOL")])),_:1}),t(n,{class:"text-center"},{default:a(()=>e[15]||(e[15]=[l("ARTICULOS")])),_:1})]),_:1})]),_:1}),t(w,{spaced:"",inset:"",vertical:"",dark:""}),(g(!0),_(V,null,M(x.value,(s,B)=>(g(),D(k,{bordered:"",key:B},{default:a(()=>[H((g(),D(O,{clickable:"",onClick:oe=>$(s)},{default:a(()=>[t(n,{class:"text-center"},{default:a(()=>[l(u(s.id),1)]),_:2},1024),t(n,{class:"text-center"},{default:a(()=>[l(u(P(h)(s.created_at).format("YYYY-MM-D")),1)]),_:2},1024),t(n,{class:"text-center"},{default:a(()=>[l(u(s.created_by),1)]),_:2},1024),t(n,{class:"text-center"},{default:a(()=>[l(u(s.notes),1)]),_:2},1024),t(n,{class:"text-center"},{default:a(()=>[l(u(s.warehouse.alias),1)]),_:2},1024),t(n,{class:"text-center"},{default:a(()=>[l(u(s.code_fs),1)]),_:2},1024),t(n,{class:"text-center"},{default:a(()=>[l(u(s.bodie.length),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[W]])]),_:2},1024))),128))]),_:1}),t(T,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=s=>p.value=s),persistent:""},{default:a(()=>[t(Y,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(Q,{class:"text-h5 text-bold text-center"},{default:a(()=>e[16]||(e[16]=[l(" Nueva Salida ")])),_:1}),t(Q,{class:"row items-center"},{default:a(()=>[t(G,{modelValue:r.value.warehouse,"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.warehouse=s),options:S.value,label:"Almacen Origen",class:"col","option-label":"name"},null,8,["modelValue","options"])]),_:1}),t(Q,null,{default:a(()=>[t(q,{modelValue:r.value.notes,"onUpdate:modelValue":e[3]||(e[3]=s=>r.value.notes=s),type:"text",label:"Notas"},null,8,["modelValue"])]),_:1}),t(F,{align:"center"},{default:a(()=>[t(v,{flat:"",label:"Cancelar",color:"negative",onClick:R}),t(v,{flat:"",label:"Crear",color:"positive",onClick:N,disable:!r.value.warehouse||!r.value.notes},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{Re as default};
