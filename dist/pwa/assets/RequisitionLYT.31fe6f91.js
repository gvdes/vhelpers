import{Q as p}from"./QSeparator.c2092fe1.js";import{r as V,c as _,o as S,a as J,w as i,e as t,f as B,a4 as c,Y as W,Q,a0 as G,g as O,ay as Z,az as ee,a5 as f,h as N,b0 as ae,a3 as le}from"./index.491d3cbd.js";import{Q as Ve}from"./QToolbar.48549f00.js";import{Q as he}from"./QHeader.e37bfc31.js";import{u as Ce,Q as K,a as $}from"./use-quasar.7f302729.js";import{Q as k,a as H,b as T,c as D}from"./QSelect.80b72d79.js";import{Q as xe}from"./QForm.7568876b.js";import{Q as te}from"./QDialog.1e564031.js";import{Q as X}from"./QRadio.2e3919bb.js";import{Q as A}from"./QInput.8adbc944.js";import{Q as _e,a as b}from"./QTr.00f07239.js";import{Q as Qe}from"./QPopupEdit.2027f468.js";import{Q as Pe}from"./QTable.0b1e02d5.js";import{Q as Ue}from"./QCardActions.147e405c.js";import{Q as Se}from"./QPage.668ff313.js";import{Q as Be,a as qe}from"./QLayout.2a587b91.js";import{C as oe}from"./ClosePopup.9db285eb.js";import{u as Ne}from"./VDB.eae60da5.js";import{_ as Ee}from"./UserToolbar.9dec350f.js";import{v as q,a as Re}from"./axios.ba7b1b0e.js";import"./jspdf.plugin.autotable.dc428813.js";import{E as ze}from"./exceljs.min.9e24d01d.js";import"./browser.a927a609.js";import"./QResizeObserver.fd5f6684.js";import"./use-key-composition.a66f507b.js";import"./uid.937d8ee7.js";import"./position-engine.712969ee.js";import"./rtl.276c3f1b.js";import"./QCheckbox.73c9015b.js";import"./QList.9904e3ca.js";import"./QLinearProgress.14876c91.js";import"./axios.9ab26c22.js";import"./_commonjsHelpers.88e99c8f.js";var E={getSeccion(g,r){return q.post(`/resources/getSeccion/${g}`,r).then(d=>d.data).catch(d=>({fail:d}))},getCedis(){return q.get("/resources/getCedis").then(g=>g.data).catch(g=>({fail:g}))},getProductsCompare(g,r){return q.post(`/resources/getProductReport/${g}`,r).then(d=>d.data).catch(d=>({fail:d}))},getProductsCompareLocation(g){return q.post("/resources/getProductReportLocations",g).then(r=>r.data).catch(r=>({fail:r}))},create(g){return q.post("/resources/create",g).then(r=>r.data).catch(r=>({fail:r}))},preview(g){return q.post("/resources/preview",g).then(r=>r.data).catch(r=>({fail:r}))},reportProductsCategories(g){return q.post("/resources/reportProductsCategories",g).then(r=>r.data).catch(r=>({fail:r}))}};const Le={class:"row"},je={key:0,class:"row"},Me={key:1,class:"row"},$e={key:2,class:"row"},Te={class:"row"},wa={__name:"RequisitionLYT",setup(g){const r=Ne(),d=Ce(),I=V({status:!1}),x=V({val:null,opts:[]}),R=V({val:null,opts:[{id:1,label:"Ubicaciones"},{id:2,label:"Categorias"}]}),u=V({state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}}),s=V({state:!1,seccion:{val:[],opts:[]},familias:{val:[],opts:[]},categorias:{val:[],opts:[]}}),F=V({val:20}),y=V({state:"percentage"}),w=V([]),z=V(null),h=V({state:!1,val:null,body:[]}),m=V({state:!1,val:[],opts:[],locaciones:{val:[]}}),P=V({columns:[{name:"codigo",required:!0,label:"Codigo",align:"left",sortable:!0,field:e=>e.code},{name:"description",label:"Descripcion",align:"left",sortable:!0,field:e=>e.description},{name:"Seccion",label:"Seccion",align:"left",sortable:!0,field:e=>e.categories.familia.seccion.name},{name:"Familia",label:"Familia",align:"left",sortable:!0,field:e=>e.categories.familia.name},{name:"Categoria",label:"Categoria",align:"left",sortable:!0,field:e=>e.categories.name},{name:"pieces",label:"PXC",align:"center",sortable:!0,field:e=>e.pieces},{name:"locations",label:"Ubicacion",align:"center",sortable:!0,field:e=>e.locations},{name:"cedis",label:"Ced CJ",align:"center",sortable:!0,field:e=>e.cedis},{name:"texcoco",label:"Tex CJ",align:"center",sortable:!0,field:e=>e.texcoco},{name:"brasil",label:"Bra CJ",align:"center",sortable:!0,field:e=>e.brasil},{name:"Sucursal",label:`${r.session.store.name}`,align:"center",sortable:!0,field:e=>e.sucursal},{name:"min",label:"Minimo",align:"center",sortable:!0,field:e=>e.min},{name:"max",label:"Maximo",align:"center",sortable:!0,field:e=>e.max},{name:"Percentge",label:`${r.session.store.name} % `,align:"center",sortable:!0,field:e=>e.percentage},{name:"required",label:"Solicitado CJ",align:"center",sortable:!0,field:e=>e.required},{name:"action",label:"Accion",align:"center"}],filter:"",visible:["codigo","description","Seccion","Familia","Categoria","pieces","cedis","texcoco","Sucursal","required","action"]}),ie=_(()=>u.value.all.filter(e=>e.deep==0)),Y=_(()=>u.value.seccion.val.length>0?u.value.all.filter(e=>e.deep==1&&u.value.seccion.val.map(l=>l.id).includes(e.root)):u.value.all.filter(e=>e.deep==1)),se=_(()=>{if(u.value.seccion.val.length>0&&u.value.familias.val.length==0){let e=u.value.all.filter(l=>l.deep==1&&u.value.seccion.val.map(a=>a.id).includes(l.root)).map(l=>l.id);return u.value.all.filter(l=>l.deep==2&&e.includes(l.root))}else return u.value.familias.val.length>0?u.value.all.filter(e=>e.deep==2&&u.value.familias.val.map(l=>l.id).includes(e.root)):u.value.all.filter(e=>e.deep==2)}),ne=_(()=>u.value.seccion.val.length>0),re=_(()=>{if(m.value.val.length>0){let e=[];return m.value.opts.filter(l=>m.value.val.map(a=>a.id).includes(l.id)).forEach(l=>l.sections.forEach(a=>e.push(a))),e}else{let e=[];return m.value.opts.forEach(l=>l.sections.forEach(a=>e.push(a))),e}}),L=_(()=>w.value.map(e=>{let l=Math.round(Number(e.stocks.filter(n=>n.id==1).map(n=>n.pivot.stock))/Number(e.pieces)),a=Math.round(Number(e.stocks.filter(n=>n.id==2).map(n=>n.pivot.stock))/Number(e.pieces)),o=Math.round(Number(e.stocks.filter(n=>n.id==16).map(n=>n.pivot.stock))/Number(e.pieces)),v=Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.stock)),C=Math.round(Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.stock))*100/Number(e.pieces));return{id:e.id,name:e.name,code:e.code,cost:e.cost,description:e.description,categories:e.categories,pieces:e.pieces,min:Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.min)),max:Number(e.stocks.filter(n=>n.id==r.session.store.id_viz).map(n=>n.pivot.max)),cedis:l,texcoco:a,brasil:o,sucursal:v,percentage:C,required:e.required,locations:e.locations}}).filter(e=>{if(y.value.state=="percentage")return r.session.store.id_viz==1?e.texcoco>0&&e.percentage<=F.value.val:e.cedis+e.texcoco>0&&e.percentage<=F.value.val;if(y.value.state=="minmax")return r.session.store.id_viz==1?e.texcoco>0&&e.sucursal<=e.min&&e.min>0:e.cedis+e.texcoco>0&&e.sucursal<=e.min&&e.min>0;if(y.value.state=="query")return e})),U=_(()=>{if(R.value.val.id==2)return L.value;if(s.value.seccion.val.length==0&&s.value.familias.val.length==0&&s.value.categorias.val.length==0)return L.value;if(s.value.seccion.val.length>0&&s.value.familias.val.length==0&&s.value.categorias.val.length==0)return L.value.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id));if(s.value.seccion.val.length>0&&s.value.familias.val.length>0&&s.value.categorias.val.length==0)return L.value.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id)&&s.value.familias.val.map(l=>l.id).includes(e.categories.familia.id));if(s.value.seccion.val.length>0&&s.value.familias.val.length>0&&s.value.categorias.val.length>0)return L.value.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.categories.familia.seccion.id)&&s.value.familias.val.map(l=>l.id).includes(e.categories.familia.id)&&s.value.categorias.val.map(l=>l.id).includes(e.categories.id))}),ue=_(()=>s.value.seccion.val.length>0?s.value.familias.opts.filter(e=>s.value.seccion.val.map(l=>l.id).includes(e.root)):s.value.familias.opts),de=_(()=>s.value.familias.val.length>0?s.value.categorias.opts.filter(e=>s.value.familias.val.map(l=>l.id).includes(e.root)):s.value.categorias.opts),ce=async()=>{d.loading.show({message:"Obteniendo secciones"});const e=await E.getCedis();e.fail?console.log(e):(console.log(e),x.value.opts=e,d.loading.hide()),console.log(e)},me=async()=>{u.value={state:!1,all:[],seccion:{val:[]},familias:{val:[]},categories:{val:[]}},m.value={state:!1,val:[],opts:[],locaciones:{val:[]}};let e=r.session.store.id_viz,l=R.value.val.id;d.loading.show({message:"Obteniendo secciones"});const a=await E.getSeccion(e,{_type:l});a.fail?console.log(a):(console.log(a),a.message?d.notify({message:"No existe la categoria",type:"negative",position:"center"}):a.families?(u.value.all=a.families,u.value.state=!0):a.locations&&(m.value.state=!0,m.value.opts=a.locations,u.value.all=a.sections),d.loading.hide())},ve=async()=>{d.loading.show({message:"Obteniendo Reporte"});let e=r.session.store.id_viz,l={_workpoint_to:x.value.val.id,_workpoint_from:e,seccion:u.value.seccion.val.map(o=>o.id),familia:u.value.familias.val.map(o=>o.id),categoria:u.value.categories.val.map(o=>o.id)};const a=await E.reportProductsCategories(l);a.fail?console.log(a):(d.loading.hide(),console.log(a),w.value=a,j())},pe=async()=>{d.loading.show({message:"Obteniendo Reporte"});let e=r.session.store.id_viz,l={_workpoint_to:x.value.val.id,_workpoint_from:e,celler:m.value.val.map(o=>o.id),locations:m.value.locaciones.val.map(o=>o.id),section:u.value.seccion.val.map(o=>o.id)};console.log(l);const a=await E.getProductsCompareLocation(l);console.log(a),a.fail?console.log(a):(d.loading.hide(),console.log(a),w.value=a,w.value.forEach(o=>{const v=o.categories.familia.seccion;v&&!s.value.seccion.opts.map(M=>M.id).includes(v.id)&&s.value.seccion.opts.push(v);const C=o.categories.familia;C&&!s.value.familias.opts.map(M=>M.id).includes(C.id)&&s.value.familias.opts.push(C);const n=o.categories;n&&!s.value.categorias.opts.map(M=>M.id).includes(n.id)&&s.value.categorias.opts.push(n)}),s.value.state=!0,j())},fe=(e,l)=>{const a=w.value.find(o=>o.id===e);console.log(a),a&&(a.required=l.value,l.set())},ge=async()=>{d.loading.show({message:"Creando Pedido"});let e={workpoint_from:r.session.store.id_viz,workpoint_to:x.value.val.id,products:U.value,notes:z.value,id_userviz:r.session.id,type:2};console.log(e);const l=await E.create(e);l.fail?console.log(l):(console.log(l),d.notify({message:`Se creo el pedido ${l.order.id}`,type:"positive",position:"center"}),w.value=[],z.value=[],Y.value.val=[],m.value.val=[],u.value.val=[],d.loading.hide(),window.location.reload())},be=e=>{console.log(e);let l=w.value.findIndex(a=>a.id===e.id);console.log(l),l>=0&&w.value.splice(l,1)},ye=async()=>{console.log("aqui imprimo");let e={products:U.value,from:r.session.store,ip_address:h.value.val.ip_address};const l=await E.preview(e);l.fail?console.log(l):(console.log(l),d.notify({message:"Impresion Correcta",type:"positive",position:"center"}),h.value.val=null,h.value.state=!1)},ke=async()=>{const e=new ze.Workbook,l=e.addWorksheet("Resurtido");console.log(),l.addTable({name:"Resurtido",ref:"A1",headerRow:!0,totalsRow:!1,style:{showRowStripes:!0},columns:[{name:"Codigo",filterButton:!0},{name:"Descripcion",filterButton:!0},{name:"Seccion",filterButton:!0},{name:"Familia",filterButton:!0},{name:"Categoria",filterButton:!0},{name:"PXC",filterButton:!0},{name:"Ubicacion",filterButton:!0},{name:"Cedis CJ",filterButton:!0},{name:"Texcoco CJ",filterButton:!0},{name:"Brasil CJ",filterButton:!0},{name:"Sucursal",filterButton:!0},{name:"MIN",filterButton:!0},{name:"MAX",filterButton:!0},{name:"Porcentaje",filterButton:!0},{name:"Solicitado",filterButton:!0}],rows:U.value.map(o=>[o.code,o.description,o.categories.familia.seccion.name,o.categories.familia.name,o.categories.name,o.pieces,o.locations.map(v=>v.path).join(", "),o.cedis,o.texcoco,o.brasil,o.sucursal,o.min,o.max,o.percentage,o.required])}),l.columns.forEach(o=>{let v=0;o.eachCell({includeEmpty:!0},C=>{const n=C.value?C.value.toString().length:10;n>v&&(v=n)}),o.width=v<10?10:v}),(async()=>{const o=await e.xlsx.writeBuffer(),v=new Blob([o],{type:"application/octet-stream"}),C=URL.createObjectURL(v),n=document.createElement("a");n.href=C,n.download="Resurtido.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n)})()},we=async()=>{let e=r.session.store.id;console.log(e);try{let l=await Re.get(`/cashier/getPrinters/${e}`);l.status==200&&(h.value.body=l.data,console.log(l),h.value.state=!0)}catch(l){console.log(l),d.notify({message:"No se pudiron obtener las impresoras",type:"negative",position:"center",icon:"error"})}},j=async()=>{if(console.log(y.value.state),w.value.length>0)return y.value.state=="minmax"?w.value.forEach(e=>{let l=Math.round(Number(e.stocks.filter(o=>o.id==r.session.store.id_viz).map(o=>o.pivot.stock))/Number(e.pieces)),a=Math.round(Number(e.stocks.filter(o=>o.id==r.session.store.id_viz).map(o=>o.pivot.max))/Number(e.pieces));a-l>=1?e.required=Math.round(a-l):e.required=1}):w.value.forEach(e=>e.required=1)};return ce(),(e,l)=>(S(),J(Be,{view:"hHh Lpr fFf"},{default:i(()=>[t(he,{class:"transparent text-dark",bordered:""},{default:i(()=>[t(Ee),t(p),t(Ve,{class:"justify-between"},{default:i(()=>[B("div",null,[l[24]||(l[24]=c("Helpers ")),t(W,{name:"navigate_next",color:"primary"}),l[25]||(l[25]=c()),l[26]||(l[26]=B("span",{class:"text-h6"},"Resurtido",-1))])]),_:1})]),_:1}),t(te,{modelValue:h.value.state,"onUpdate:modelValue":l[1]||(l[1]=a=>h.value.state=a)},{default:i(()=>[t(K,{class:"my-card"},{default:i(()=>[t($,null,{default:i(()=>l[27]||(l[27]=[B("div",{class:"text-h6 text-center"},"Impresora",-1)])),_:1}),t($,null,{default:i(()=>[t(xe,{onSubmit:ye,class:"q-gutter-md"},{default:i(()=>[t(k,{dense:"","option-label":"name",modelValue:h.value.val,"onUpdate:modelValue":l[0]||(l[0]=a=>h.value.val=a),options:h.value.body,label:"Impresora",filled:"",autofocus:"",style:{width:"200px"}},null,8,["modelValue","options"]),B("div",null,[t(Q,{label:"Enviar",type:"submit",color:"primary",style:{width:"200px"},disable:h.value.val===null},null,8,["disable"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(qe,null,{default:i(()=>[t(Se,{padding:""},{default:i(()=>[B("div",Le,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{class:"col",modelValue:x.value.val,"onUpdate:modelValue":l[2]||(l[2]=a=>x.value.val=a),options:x.value.opts,label:"Pedido Para","option-label":"name",filled:"",disable:x.value.val!=null,"option-disable":a=>a.id==G(r).session.store.id_viz},null,8,["modelValue","options","disable","option-disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{class:"col",modelValue:R.value.val,"onUpdate:modelValue":[l[3]||(l[3]=a=>R.value.val=a),me],options:R.value.opts,label:"Tipo",filled:"",disable:!x.value.val},null,8,["modelValue","options","disable"])]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),u.value.state?(S(),O("div",je,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:u.value.seccion.val,"onUpdate:modelValue":l[4]||(l[4]=a=>u.value.seccion.val=a),options:ie.value,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:u.value.familias.val,"onUpdate:modelValue":l[5]||(l[5]=a=>u.value.familias.val=a),options:Y.value,label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:u.value.seccion.val.length==0},{option:i(a=>[t(H,Z(ee(a.itemProps)),{default:i(()=>[t(T,null,{default:i(()=>[t(D,null,{default:i(()=>[c(f(a.opt.name),1)]),_:2},1024),t(D,{caption:""},{default:i(()=>[c(f(a.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:u.value.categories.val,"onUpdate:modelValue":l[6]||(l[6]=a=>u.value.categories.val=a),options:se.value,label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:u.value.familias.val.length==0},{option:i(a=>[t(H,Z(ee(a.itemProps)),{default:i(()=>[t(T,null,{default:i(()=>[t(D,null,{default:i(()=>[c(f(a.opt.name),1)]),_:2},1024),t(D,{caption:""},{default:i(()=>[c(f(a.opt.familia.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(Q,{color:"primary",icon:"send",onClick:ve,disable:!ne.value,flat:"",dense:"",rounded:""},null,8,["disable"])])):N("",!0),m.value.state?(S(),O("div",Me,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:u.value.seccion.val,"onUpdate:modelValue":l[7]||(l[7]=a=>u.value.seccion.val=a),options:u.value.all,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:m.value.val,"onUpdate:modelValue":l[8]||(l[8]=a=>m.value.val=a),options:m.value.opts,label:"Ubicacion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:m.value.locaciones.val,"onUpdate:modelValue":l[9]||(l[9]=a=>m.value.locaciones.val=a),options:re.value,label:"Locaciones","option-label":"name",filled:"",multiple:"","use-chips":"",disable:m.value.val.length==0},null,8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(Q,{color:"primary",icon:"send",onClick:pe,flat:"",dense:"",rounded:"",disable:m.value.val.length==0||m.value.locaciones.val.length==0},null,8,["disable"])])):N("",!0),t(p,{spaced:"",inset:"",vertical:"",dark:""}),s.value.state?(S(),O("div",$e,[t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:s.value.seccion.val,"onUpdate:modelValue":l[10]||(l[10]=a=>s.value.seccion.val=a),options:s.value.seccion.opts,label:"Seccion","option-label":"name",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:s.value.familias.val,"onUpdate:modelValue":l[11]||(l[11]=a=>s.value.familias.val=a),options:ue.value,label:"Familia","option-label":"name",filled:"",multiple:"","use-chips":"",disable:s.value.seccion.val.length==0},null,8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(k,{dense:"",class:"col",modelValue:s.value.categorias.val,"onUpdate:modelValue":l[12]||(l[12]=a=>s.value.categorias.val=a),options:de.value,label:"Categorias","option-label":"name",filled:"",multiple:"","use-chips":"",disable:s.value.familias.val.length==0},null,8,["modelValue","options","disable"]),t(p,{spaced:"",inset:"",vertical:"",dark:""})])):N("",!0),t(p,{spaced:"",inset:"",vertical:"",dark:""}),t(K,{class:"my-card"},{default:i(()=>[t($,null,{default:i(()=>[B("div",Te,[t(H,{class:"col"},{default:i(()=>[t(T,null,{default:i(()=>[t(X,{dense:"",modelValue:y.value.state,"onUpdate:modelValue":[l[13]||(l[13]=a=>y.value.state=a),j],val:"percentage",label:"Porcentaje"},null,8,["modelValue"])]),_:1}),y.value.state=="percentage"?(S(),J(T,{key:0,caption:""},{default:i(()=>[t(A,{dense:"",modelValue:F.value.val,"onUpdate:modelValue":l[14]||(l[14]=a=>F.value.val=a),type:"number",filled:"",label:"Porcentaje",disable:y.value.state=="minmax"},null,8,["modelValue","disable"])]),_:1})):N("",!0),t(T)]),_:1}),t(X,{dense:"",class:"col",modelValue:y.value.state,"onUpdate:modelValue":[l[15]||(l[15]=a=>y.value.state=a),j],val:"minmax",label:"Minimo y Maximo"},null,8,["modelValue"]),t(X,{dense:"",class:"col",modelValue:y.value.state,"onUpdate:modelValue":[l[16]||(l[16]=a=>y.value.state=a),j],val:"query",label:"Consultas"},null,8,["modelValue"])])]),_:1})]),_:1}),t(p,{spaced:"",inset:"",vertical:"",dark:""}),w.value.length>0?(S(),J(Pe,{key:3,rows:U.value,columns:P.value.columns,separator:"cell",filter:P.value.filter,flat:"",bordered:"",class:"my-sticky-header-column-table","visible-columns":P.value.visible},{"top-right":i(()=>[t(A,{borderless:"",dense:"",debounce:"300",modelValue:P.value.filter,"onUpdate:modelValue":l[17]||(l[17]=a=>P.value.filter=a),placeholder:"Buscar"},{append:i(()=>[t(W,{name:"search"})]),_:1},8,["modelValue"]),y.value.state!=="query"?(S(),J(Q,{key:0,color:"primary","icon-right":"send",flat:"",onClick:l[18]||(l[18]=a=>I.value.state=!I.value.state),disable:U.value.length==0},null,8,["disable"])):N("",!0),t(Q,{color:"primary",icon:"print",flat:"",onClick:we,disable:U.value.length==0},null,8,["disable"]),t(Q,{color:"primary",icon:"download",flat:"",onClick:ke,disable:U.value.length==0},null,8,["disable"]),t(k,{modelValue:P.value.visible,"onUpdate:modelValue":l[19]||(l[19]=a=>P.value.visible=a),multiple:"",outlined:"",dense:"","options-dense":"","display-value":G(d).lang.table.columns,"emit-value":"","map-options":"",options:P.value.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])]),body:i(a=>[t(_e,{props:a},{default:i(()=>[t(b,{key:"codigo",props:a},{default:i(()=>[c(f(a.row.code),1)]),_:2},1032,["props"]),t(b,{key:"description",props:a},{default:i(()=>[c(f(a.row.description),1)]),_:2},1032,["props"]),t(b,{key:"Seccion",props:a},{default:i(()=>[c(f(a.row.categories.familia.seccion.name),1)]),_:2},1032,["props"]),t(b,{key:"Familia",props:a},{default:i(()=>[c(f(a.row.categories.familia.name),1)]),_:2},1032,["props"]),t(b,{key:"Categoria",props:a},{default:i(()=>[c(f(a.row.categories.name),1)]),_:2},1032,["props"]),t(b,{key:"pieces",props:a},{default:i(()=>[c(f(a.row.pieces),1)]),_:2},1032,["props"]),t(b,{key:"locations",props:a},{default:i(()=>{var o;return[c(f((o=a.row.locations)==null?void 0:o.map(v=>v.path).join(", ")),1)]}),_:2},1032,["props"]),t(b,{key:"cedis",props:a},{default:i(()=>[c(f(a.row.cedis),1)]),_:2},1032,["props"]),t(b,{key:"texcoco",props:a},{default:i(()=>[c(f(a.row.texcoco),1)]),_:2},1032,["props"]),t(b,{key:"brasil",props:a},{default:i(()=>[c(f(a.row.brasil),1)]),_:2},1032,["props"]),t(b,{key:"Sucursal",props:a},{default:i(()=>[c(f(a.row.sucursal),1)]),_:2},1032,["props"]),t(b,{key:"min",props:a},{default:i(()=>[c(f(a.row.min),1)]),_:2},1032,["props"]),t(b,{key:"max",props:a},{default:i(()=>[c(f(a.row.max),1)]),_:2},1032,["props"]),t(b,{key:"Percentge",props:a},{default:i(()=>[c(f(a.row.percentage)+" % ",1)]),_:2},1032,["props"]),t(b,{key:"required",props:a},{default:i(()=>[c(f(a.row.required)+" ",1),t(Qe,{modelValue:a.row.required,"onUpdate:modelValue":o=>a.row.required=o},{default:i(o=>[t(A,{modelValue:o.value,"onUpdate:modelValue":v=>o.value=v,dense:"",autofocus:"",counter:"",onKeyup:ae(v=>fe(a.row.id,o),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),t(b,{key:"action",props:a},{default:i(()=>[t(Q,{color:"negative",icon:"delete",onClick:o=>be(a.row),flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","visible-columns"])):N("",!0),t(te,{modelValue:I.value.state,"onUpdate:modelValue":l[23]||(l[23]=a=>I.value.state=a),persistent:""},{default:i(()=>[t(K,{style:{"min-width":"350px"}},{default:i(()=>[t($,null,{default:i(()=>l[28]||(l[28]=[B("div",{class:"text-h6"},"Agrega una nota",-1)])),_:1}),t($,{class:"q-pt-none"},{default:i(()=>[t(A,{dense:"",modelValue:z.value,"onUpdate:modelValue":l[20]||(l[20]=a=>z.value=a),autofocus:"",onKeyup:l[21]||(l[21]=ae(a=>e.prompt=!1,["enter"]))},null,8,["modelValue"])]),_:1}),t(Ue,{align:"right",class:"text-primary"},{default:i(()=>[le(t(Q,{flat:"",label:"Cancelar",onClick:l[22]||(l[22]=a=>z.value=null)},null,512),[[oe]]),le(t(Q,{flat:"",label:"Enviar Pedido",onClick:ge},null,512),[[oe]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{wa as default};
