import{a as v,b as h,Q as Y,d as B,e as u}from"./QList.44ec1f40.js";import{Q as _}from"./QTable.c37ac9f4.js";import{a as C}from"./QDrawer.3bdbe699.js";import{Q as P,a as d}from"./axios.002d3f65.js";import{aH as V,a as y,u as R,r as c,c as H,o as p,d as g,w as t,f as b,e as a,ak as i,a0 as l,g as I,a2 as T,a3 as $,a4 as M,Q as N,a1 as A}from"./index.f1eaf89e.js";import{Q as E}from"./QCardActions.a301eb69.js";import{Q as F}from"./QPage.5b9bdac9.js";import{C as L}from"./ClosePopup.fa5da69d.js";import{d as w}from"./dayjs.min.cbcf888d.js";import{u as U}from"./Restock.82e02d17.js";import{u as O}from"./use-quasar.5d5acb92.js";import"./socket.3fae67a0.js";import"./QBtnGroup.e9cf015a.js";import"./QSelect.9cadc2d2.js";import"./QLinearProgress.fae98d3e.js";import"./QCheckbox.62544d04.js";import"./QResizeObserver.9ca6dc53.js";import"./QScrollObserver.6bb09e66.js";import"./_commonjsHelpers.88e99c8f.js";import"./QToolbar.53dfb2f1.js";import"./QForm.60c3f2e0.js";import"./QRadio.368b7bf2.js";import"./QInput.49e74a71.js";import"./QTr.5b7c6f46.js";import"./QPopupEdit.61e09abe.js";import"./QLayout.aefe6843.js";import"./jspdf.plugin.autotable.f2dcfd6c.js";import"./exceljs.min.9e24d01d.js";import"./browser.eff7c919.js";/* empty css                                                       */const j={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},ka={__name:"dashboardStore",setup(q){V(),y();const n=U();O();const Q=R(),s=c({state:!1,val:null}),D=c({rowsPerPage:[0]}),f=c({columns:[{name:"id",label:"ID",field:e=>e.id,align:"center"},{name:"invoice",label:"Factura",field:e=>e.invoice,align:"center"},{name:"invoiceReceived",label:"Factura R",field:e=>e.invoice_received,align:"center"},{name:"status",label:"Estado",field:e=>e.status.name,align:"left"},{name:"UACT",label:"U.Act",field:e=>{var r,o;return w((o=(r=e.log)==null?void 0:r.find(m=>m.id==e._status))==null?void 0:o.pivot.updated_at).format("YYYY/MM/DD HH:mm:ss")},align:"left"}],pagination:{rowsPerPage:10}}),S=H(()=>n.ordersok.filter(e=>e._workpoint_from==Q.session.store.id_viz)),k=async()=>{n.setShowLYT(!0),n.setTitle("Dashboard"),n.setButtonShow(!1)},x=(e,r)=>{s.value.state=!0,s.value.val=r};return k(),(e,r)=>(p(),g(F,{padding:""},{default:t(()=>[b("div",null,[a(_,{rows:S.value,"row-key":"name",grid:"",pagination:D.value,"hide-bottom":""},{item:t(o=>[b("div",j,[a(v,{bordered:""},{default:t(()=>[a(C,{dense:"",icon:"list",label:`${o.row.id.toString()} (${o.row.status.name})`,caption:`${o.row.to.name} (${o.row.notes})`},{default:t(()=>[a(h),a(_,{"hide-bottom":"",flat:"",rows:o.row.partition,columns:f.value.columns,pagination:f.value.pagination,onRowClick:x},null,8,["rows","columns","pagination"])]),_:2},1032,["label","caption"])]),_:2},1024)])]),_:1},8,["rows","pagination"])]),a(Y,{modelValue:s.value.state,"onUpdate:modelValue":r[0]||(r[0]=o=>s.value.state=o),persistent:""},{default:t(()=>[a(P,null,{default:t(()=>[a(d,{class:"text-center text-h6"},{default:t(()=>[i(" ID: "+l(s.value.val.id),1)]),_:1}),a(d,{class:"text-center text-bold"},{default:t(()=>[i(l(s.value.val.status.name),1)]),_:1}),a(d,null,{default:t(()=>[(p(!0),I($,null,T(s.value.val.log,(o,m)=>(p(),g(v,{bordered:"",key:m},{default:t(()=>[a(B,null,{default:t(()=>[a(u,null,{default:t(()=>[i(l(o.name),1)]),_:2},1024),a(u,null,{default:t(()=>[i(l(JSON.parse(o.pivot.details).responsable),1)]),_:2},1024),a(u,null,{default:t(()=>[i(l(A(w)(o.pivot.updated_at).format("YYYY/MM/DD HH:mm:ss")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(E,{align:"right"},{default:t(()=>[M(a(N,{flat:"",label:"OK",color:"primary"},null,512),[[L]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{ka as default};
