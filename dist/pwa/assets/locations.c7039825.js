import{Q as b}from"./QSelect.4aa8ea70.js";import{u as S,r as n,J as N,o as r,d as A,w as p,e as o,f as x,i as f,a1 as v,a0 as y,$ as D,g as k,j as L,k as M,Q as P}from"./index.504c35c2.js";import{Q as U}from"./QTable.1aa507cd.js";import{Q as $}from"./QPage.7e16f176.js";import{l as E}from"./locationsApi.4e7b17c5.js";import{u as F}from"./use-quasar.67494b23.js";import{l as I}from"./labels.f18c7f38.js";import"./QList.0ff006d5.js";import"./QLinearProgress.81f26e11.js";import"./axios.4a57e5be.js";import"./jspdf.plugin.autotable.31def0a3.js";import"./_commonjsHelpers.88e99c8f.js";import"./dayjs.min.cbcf888d.js";import"./browser.c61f550a.js";const O={key:0,class:"row"},T={class:"row"},j={class:"text-right row"},se={__name:"locations",setup(q){const d=S(),_=F(),u=n([]),c=n(null),i=n([]),s=n([]),g=n(0),Q=n({columns:[{name:"id",label:"ID",field:l=>l.id,align:"center"},{name:"name",label:"NOMBRE",field:l=>l.name,align:"left"},{name:"alias",label:"ALIAS",field:l=>l.alias,align:"left"},{name:"path",label:"PATH",field:l=>l.path,align:"left"}]}),V=async()=>{_.loading.show({message:"Obteniendo Secciones"});let l={_workpoint:d.session.store.id_viz,_rol:d.session.credentials._rol};const e=await E.index(l);e.fail?console.log(e):(console.log(e),u.value=e),_.loading.hide()},w=()=>{const l=c.value.sections||[];g.value=Math.max(...l.map(e=>e.deep)),s.value=[{options:l.filter(e=>e.root===0),selected:null}],i.value=s.value[0].options},h=l=>{var e;return((e=c.value.sections)==null?void 0:e.filter(a=>a.root===l))||[]},B=(l,e)=>{s.value.splice(e+1);const a=h(l);a.length>0&&s.value.push({options:a,selected:null})},C=()=>{I.locationsWarehouse(i.value,d.session.credentials.nick)};return V(),N(s,l=>{const e=l.filter(a=>a.selected!==null);if(e.length){const a=e[e.length-1],t=h(a.selected);i.value=t}},{deep:!0}),(l,e)=>(r(),A($,{padding:""},{default:p(()=>[o(P,{class:"my-card"},{default:p(()=>[o(x,null,{default:p(()=>[u.value.length>0?(r(),f("div",O,[o(b,{class:"col",modelValue:c.value,"onUpdate:modelValue":[e[0]||(e[0]=a=>c.value=a),w],options:u.value,label:"ALMAC\xC9N",filled:"","option-label":"name",dense:""},null,8,["modelValue","options"]),o(v,{spaced:"",inset:"",vertical:"",dark:""}),(r(!0),f(y,null,D(s.value,(a,t)=>(r(),f("div",{key:t,class:"col"},[k("div",T,[o(b,{class:"col",modelValue:a.selected,"onUpdate:modelValue":[m=>a.selected=m,m=>B(m,t)],options:a.options,label:`Nivel ${t+1}`,"option-value":"id","option-label":"name","emit-value":"","map-options":"",dense:"",filled:"",disable:t==g.value},null,8,["modelValue","onUpdate:modelValue","options","label","disable"]),o(v,{spaced:"",inset:"",vertical:"",dark:""})])]))),128)),k("div",j,[o(L,{icon:"picture_as_pdf",flat:"",onClick:C,disable:i.value<=0},null,8,["disable"])])])):M("",!0)]),_:1})]),_:1}),o(v,{spaced:"",inset:"",vertical:"",dark:""}),o(U,{rows:i.value,columns:Q.value.columns},null,8,["rows","columns"])]),_:1}))}};export{se as default};
