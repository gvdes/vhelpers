import{Q as b}from"./QInput.dc302004.js";import{Q}from"./QForm.5b5c0f90.js";import{a as f}from"./QSelect.b94a7931.js";import{a as S,d as V,e as q}from"./QList.44fddfd6.js";import{Q as C}from"./QTable.10563d07.js";import{Q as D}from"./QPage.7b6e5690.js";import{aH as $,a as y,u as B,r as _,c as I,o as k,d as g,w as t,f as r,e as o,a4 as P,ak as R,a0 as x,am as N}from"./index.92ae9733.js";import"./dayjs.min.cbcf888d.js";import"./axios.baf776dc.js";import{o as O}from"./orderApi.b307843d.js";import{u as T}from"./OrderStore.8889c442.js";import{u as j}from"./use-quasar.df0e6603.js";import"./QDrawer.c40b9ae7.js";import"./QCardSection.0661ef43.js";import"./QCardActions.45d0abbc.js";import"./QCard.7cd0dbc0.js";import"./ClosePopup.821833f1.js";import{$sktRestock as d,$sktOrders as L}from"./socket.05630e21.js";import"./use-key-composition.eb28e0f9.js";import"./QLinearProgress.f7f5dd79.js";import"./QCheckbox.817fe423.js";import"./_commonjsHelpers.88e99c8f.js";import"./QResizeObserver.94f3e219.js";import"./QScrollObserver.c4dce3f3.js";const U={class:"flex justify-center"},A={class:"text-center",style:"width: 50%;"},E={class:"q-pa-xs col-xs-12 col-sm-2 col-sm-1"},F={class:"text-bold q-mr-md"},_e={__name:"Checkin",setup(H){$(),y();const n=T();n.setTitle("Checkout");const u=j(),s=B(),w={profile:{me:{id:s.session.credentials.staff.id_va,nick:s.session.credentials.nick,picture:"",names:s.session.credentials.staff.complete_name,surname_pat:"",surname_mat:"",change_password:!1,_rol:s.session.credentials._rol},workpoint:s.session.store},workpoint:s.session.store};d.connect(),d.emit("joinat",w);const l=_(null),v=_({rowsPerPage:[0]}),h=I(()=>n.orders.filter(i=>i._status==3)),p=async i=>{u.loading.show({message:"Cambiando Estado"});let a=n.orders.find(m=>m.id==i);const e=await O.nextStepCheck({id:i});if(e.fail)console.log(e);else{u.loading.hide(),console.log(e),e.requisition&&(d.emit("creating",{order:e.requisition.requisition}),d.emit("partitionCreate",e.requisition.partition));let c={order:a,newstate:e.status};console.log(c),L.emit("order_update",c),n.addOrUpdate(c),l.value=null}};return(i,a)=>(k(),g(D,{padding:""},{default:t(()=>[r("div",null,[r("div",U,[r("div",A,[o(Q,{onSubmit:a[1]||(a[1]=e=>p(l.value))},{default:t(()=>[o(b,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),type:"number",label:"Pedido",autofocus:"",rounded:"",outlined:""},null,8,["modelValue"])]),_:1})])]),o(C,{rows:h.value,grid:"",pagination:v.value,"hide-bottom":""},{item:t(e=>[r("div",E,[o(S,{bordered:""},{default:t(()=>[P((k(),g(V,{clickable:"",onDblclick:m=>p(e.row.id)},{default:t(()=>[o(q,null,{default:t(()=>[o(f,{class:"text-center text-bold text-h5"},{default:t(()=>[R(x(e.row.id),1)]),_:2},1024),o(f,{class:"text-center text-overline text-caption"},{default:t(()=>[r("span",F,x(e.row.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDblclick"])),[[N]])]),_:2},1024)])]),_:1},8,["rows","pagination"])])]),_:1}))}};export{_e as default};
